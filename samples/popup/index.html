<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
    <title>Test PopupMenu</title>
    <script src='../../era/js/era-debug.js'></script>
<style>
</style>
<script>

var app = new Ui.App();

var vbox = new Ui.VBox({ verticalAlign: 'center', horizontalAlign: 'center' });
app.setContent(vbox);

var selectable = new Ui.Selectable();
vbox.append(selectable);

selectable.append(new Ui.Rectangle({ width: 50, height: 50, radius: 8, fill: 'lightgreen' }));
selectable.append(new Ui.Label({ text: 'right click' }));

app.connect(selectable, 'menu', function(item, x, y) {
	console.log('open the menu: '+x+'x'+y);
	popup.show(x, y);
});

var button = new Ui.Button({ text: 'open popup' });
vbox.append(button);

var popup;
popup = new Ui.Popup({ verticalAlign: 'top', horizontalAlign: 'left' });
var vbox2 = new Ui.VBox({ spacing: 5 });
popup.setContent(vbox2);
vbox2.append(new Ui.Label({ text: 'bonjour', color: 'white' }));
vbox2.append(new Ui.Rectangle({ fill: 'white', height: 1 }));
vbox2.append(new Ui.Label({ text: 'bonjour2', color: 'white' }));
vbox2.append(new Ui.Rectangle({ fill: 'white', height: 1 }));
vbox2.append(new Ui.Label({ text: 'bonjour3', color: 'white' }));

app.connect(button, 'press', function() {
	popup.show();
});

button = new Ui.Button({ text: 'close popup' });
vbox.append(button);

app.connect(button, 'press', function() {
	popup.hide();
});

selectable = new Ui.Selectable();
vbox.append(selectable);

selectable.append(new Ui.Rectangle({ width: 50, height: 50, radius: 8, fill: 'lightgreen' }));
selectable.append(new Ui.Label({ text: 'right click' }));

app.connect(selectable, 'menu', function(item, x, y) {
	console.log('open the menu: '+x+'x'+y);
	popup.show(x, y);
});

</script>
  </head>
</html>
