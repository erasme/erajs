<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Test GoogleMap</title>
		<script src='../../era/js/era-debug.js'></script>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

Ui.Element.extend('Sample.GoogleMap', {
	map: undefined,

	constructor: function(config) {
		var latlng = new google.maps.LatLng(0, 0);
		if(('latitude' in config) && ('longitude' in config))
			latlng = new google.maps.LatLng(config.latitude, config.longitude);
		var zoom = 10;
		if('zoom' in config)
			zoom = config.zoom;

		var myOptions = {
			zoom: zoom,
			center: latlng,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		};
		this.map = new google.maps.Map(this.getDrawing(), myOptions);
	},

	setLatLng: function(latitude, longitude) {
		this.map.setCenter(new google.maps.LatLng(latitude, longitude));
	},

	getZoom: function() {
		return this.map.getZoom();
	},

	setZoom: function(zoom) {
		this.map.setZoom(zoom);
	}
});

var app = new Ui.App();

var vbox = new Ui.VBox();
app.setContent(vbox);

var toolbar = new Ui.ToolBar();
vbox.append(toolbar);

var button = new Ui.Button({ text: 'Saint Laurent de Chamousset' });
toolbar.append(button);
app.connect(button, 'press', function() {
	googlemap.setLatLng(45.741616, 4.468981);
});

toolbar.append(new Ui.Spacer(), true);

var button = new Ui.Button({ text: '+' });
toolbar.append(button);
app.connect(button, 'press', function() {
	googlemap.setZoom(googlemap.getZoom() + 1);
});

var button = new Ui.Button({ text: '-' });
toolbar.append(button);
app.connect(button, 'press', function() {
	googlemap.setZoom(googlemap.getZoom() - 1);
});

var googlemap = new Sample.GoogleMap({
	width: 500, height: 500,
	latitude: 45.741616, longitude: 4.468981, zoom: 13
});
vbox.append(googlemap, true);

</script>
	</head>
</html>


