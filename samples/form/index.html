<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<script src='../../era/era-debug.js'></script>
<script>
var panelDesc = {
  title: 'Inscription',
  description: 'Fill this form to complete inscription',
  //one can set default fields value
  value: {firstName: "John", lastName: "Doe"},
  //Url called on submit with all the form values
  submitUrl: 'foo',
  submitHandler: function(values){
    values.name = values.firstName + " " + values.lastName;
    alert('Those values will be send : ' + JSON.stringify(values));
    return values;
  },
  fields: [
    {type: Form.TextField, label: 'First Name', require: true, fieldName: 'firstName'},
    {type: Form.TextField, label: 'Last Name', require: true, fieldName: 'lastName'},
    {type: Form.TextField, label: 'Login', require: true, fieldName: 'login'},
    {
      type: Form.PasswordField, label: 'Password',
      description: 'Must contain at least 1 character and 1 number.',
      require: true, fieldName: 'password',
      //Validation can be either a regex or a function that return a boolean
      validation: /\w*(\d[A-Za-z]|[A-Za-z]\d)\w*/
    }
  ]
}

var panel = new Form.Panel(panelDesc);
//Do not create popup for now cause panelDesc is consume by the constructor
//var popup = new Form.Popup({panel:panelDesc});


//By default, all fields are "stack" in a VBox, but it's easy to change the layout
var f = panel.fields;
panel.setLayout([
  {
    type: Ui.VBox,
    content: [
      {type: Ui.HBox, content: [f.firstName, f.lastName]},
      f.login, f.password
    ]
  }
]);

var app = new Ui.App({
  content: 
  {
    type: Ui.VBox,
    content: [
      panel,
      {type: Ui.Button, text: "Send", onPress: function(){panel.submit()} },
      {
        type: Ui.Button, text: "Show it in a popup", 
        onPress: function(){/*popup.show();*/}
      }
    ]
  }
});
</script>
  </head>
	<body></body>
</html>
