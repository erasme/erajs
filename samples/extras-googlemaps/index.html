<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

	<title>Test</title>
	<script src='../../era/js/era-debug.js'></script>
	<script src='../../extras/extras-debug.js'></script>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	<script type="text/javascript">

var app = new Ui.App();

var googlemap = [ 
	new Extras.Ui.Google.Map({
		width: 500, height: 500, horizontalAlign: 'center', verticalAlign: 'center',
		latitude: 45.741616, longitude: 4.468981, zoom: 1, maptype: google.maps.MapTypeId.SATELLITE,
		panControl: false, zoomControl: false, mapTypeControl: false,  streetViewControl: false,
	}),
	new Extras.Ui.Google.Map({
		width: 500, height: 500, horizontalAlign: 'center', verticalAlign: 'center', 
		latitude: 48.741616, longitude: 5.468981, zoom: 5, maptype: google.maps.MapTypeId.ROADMAP
	}), ];

var toolbar = new Ui.ToolBar({ verticalAlign: 'top' });
var transbox = new Ui.TransitionBox({ transition: 'flip', orientation: 'horizontal' });

var buttontrans = new Ui.Button({ text: 'Clouc' });
var buttonroad = new Ui.Button({ text: 'Roadmap' });
var buttonsat = new Ui.Button({ text: 'Sat' });
var buttonhyb = new Ui.Button({ text: 'Hybrid' });
var buttonterr = new Ui.Button({ text: 'Terrain' });

var buttonp = new Ui.Button({ text: '+' });
var buttonm = new Ui.Button({ text: '-' });

toolbar.append(buttontrans);
toolbar.append(new Ui.Spacer(), true);
toolbar.append(buttonroad);
toolbar.append(buttonsat);
toolbar.append(buttonhyb);
toolbar.append(buttonterr);
toolbar.append(new Ui.Spacer(), true);
toolbar.append(buttonm);
toolbar.append(buttonp);

// no getCurrent 
// selection dans label si possible
// scroll pgup/pgdown scrollable

current = 0;
app.connect(buttontrans, 'press', function() { 
	if (current == 0) {
		current = 1;
	} else {
		current = 0;
	}
	transbox.setCurrent(googlemap[current]);
	googlemap[current].getMap().fitBounds(googlemap[current].getMap().getBounds());
	// Dirty hack to make it work
	setTimeout("google.maps.event.trigger(googlemap[current].getMap(), 'resize')", 2000);
	console.log('resize triggered');
});

app.connect(buttonroad, 'press', function() { googlemap[current].setMapType(google.maps.MapTypeId.ROADMAP); });
app.connect(buttonsat, 'press', function() { googlemap[current].setMapType(google.maps.MapTypeId.SATELLITE); });
app.connect(buttonhyb, 'press', function() { googlemap[current].setMapType(google.maps.MapTypeId.HYBRID); });
app.connect(buttonterr, 'press', function() { googlemap[current].setMapType(google.maps.MapTypeId.TERRAIN); });

app.connect(buttonm, 'press', function() { googlemap[current].setZoom(googlemap[current].getZoom() - 1); });
app.connect(buttonp, 'press', function() { googlemap[current].setZoom(googlemap[current].getZoom() + 1); });

transbox.append(googlemap[0]);
transbox.append(googlemap[1]);

var vbox1 = new Ui.VBox();
vbox1.append(toolbar);
vbox1.append(transbox, true);

app.setContent(vbox1);

</script>
	</head>
	
</html>
	

