navigator.isGecko=(navigator.userAgent.match(/Gecko\//i)!=null);navigator.isWebkit=(navigator.userAgent.match(/WebKit\//i)!=null);navigator.isIE=(navigator.userAgent.match(/MSIE/i)!=null);navigator.isOpera=((navigator.userAgent==undefined)||(navigator.userAgent.match(/Opera\//i)!=null));navigator.isChrome=(navigator.userAgent.match(/ Chrome\//)!=null);navigator.isSafari=(navigator.userAgent.match(/ Safari\//)!=null);navigator.iPad=(navigator.userAgent.match(/iPad/i)!=null);navigator.iPhone=(navigator.userAgent.match(/iPhone/i)!=null);var svgNS="http://www.w3.org/2000/svg";var htmlNS="http://www.w3.org/1999/xhtml";Core={};Core.Util={};Core.Util.idGenerator=0;Core.Util.generateId=function(){return ++Core.Util.idGenerator};String.prototype.utf8Encode=function(){var b="";for(var a=0;a<this.length;a++){var d=this.charCodeAt(a);if(d<128){b+=String.fromCharCode(d)}else{if((d>=128)&&(d<2048)){b+=String.fromCharCode((d>>6)|192);b+=String.fromCharCode((d&63)|128)}else{b+=String.fromCharCode((d>>12)|224);b+=String.fromCharCode(((d>>6)&63)|128);b+=String.fromCharCode((d&63)|128)}}}return b};String.prototype.utf8Decode=function(){var b="";var a=0;var d;while(a<this.length){d=this.charCodeAt(a++);if(d<128){b+=String.fromCharCode(d)}else{if((d>=192)&&(d<224)){b+=String.fromCharCode(((d&31)<<6)|(this.charCodeAt(a++)&63))}else{b+=String.fromCharCode(((d&15)<<12)|((this.charCodeAt(a++)&63)<<6)|(this.charCodeAt(a++)&63))}}}return b};String.prototype.toBase64=function(){var g=this.utf8Encode();var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var f="";var b=0;while(b+2<g.length){var e=g.charCodeAt(b++)&255;var d=g.charCodeAt(b++)&255;var c=g.charCodeAt(b++)&255;var l=a[e>>2];var k=a[((e&3)<<4)|(d>>4)];var j=a[((d&15)<<2)|(c>>6)];var h=a[c&63];f+=l+k+j+h}if(b+1<g.length){var e=g.charCodeAt(b++)&255;var d=g.charCodeAt(b++)&255;var l=a[e>>2];var k=a[((e&3)<<4)|(d>>4)];var j=a[(d&15)<<2];f+=l+k+j+"="}else{if(b<g.length){var e=g.charCodeAt(b++)&255;var l=a[e>>2];var k=a[(e&3)<<4];f+=l+k+"=="}}return f};String.prototype.fromBase64=function(){var d=this;var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var b="";var a=0;while(a<d.length){enc1=c.indexOf(d[a++]);enc2=c.indexOf(d[a++]);enc3=c.indexOf(d[a++]);enc4=c.indexOf(d[a++]);char1=(enc1<<2)|(enc2>>4);char2=((enc2&15)<<4)|(enc3>>2);char3=((enc3&3)<<6)|enc4;b+=String.fromCharCode(char1);if(enc3!=64){b+=String.fromCharCode(char2);if(enc4!=64){b+=String.fromCharCode(char3)}}}return b.utf8Decode()};if(navigator.isIE){SVGTextContentElement.prototype.__getStartPositionOfChar=SVGTextContentElement.prototype.getStartPositionOfChar;SVGTextContentElement.prototype.getStartPositionOfChar=function(b){var a=this.__getStartPositionOfChar(b);return a.matrixTransform(this.getScreenCTM().inverse())};SVGTextContentElement.prototype.__getEndPositionOfChar=SVGTextContentElement.prototype.getEndPositionOfChar;SVGTextContentElement.prototype.getEndPositionOfChar=function(b){var a=this.__getEndPositionOfChar(b);return a.matrixTransform(this.getScreenCTM().inverse())};SVGTextContentElement.prototype.__getCharNumAtPosition=SVGTextContentElement.prototype.getCharNumAtPosition;SVGTextContentElement.prototype.getCharNumAtPosition=function(a){return this.getCharNumAtPositionHelper(a.x,0,this.getNumberOfChars()-1)};SVGTextContentElement.prototype.getCharNumAtPositionHelper=function(a,e,b){startX=this.getStartPositionOfChar(e).x;endX=this.getEndPositionOfChar(b).x;if((a<startX)||(a>endX)){return -1}if(e==b){return e}var c=Math.floor((e+b)/2);var d=this.getCharNumAtPositionHelper(a,e,c);if(d!=-1){return d}return this.getCharNumAtPositionHelper(a,c+1,b)}}if(navigator.isOpera){CanvasRenderingContext2D.prototype.arcTo=function(b,d,a,c,e){this.quadraticCurveTo(b,d,a,c)}}if(window.JSON==undefined){var json={};json.parse=function(json){return eval("("+json+")")};json.stringify=function(b){var c="";var f=true;var a=(this.constructor.toString().indexOf("function Array()")!=-1);for(var g in this){try{var e=this[g];if((typeof(e)!="number")&&(typeof(e)!="string")&&(typeof(e)!="object")){continue}if(f){f=false}else{c+=", "}if(!a){c+='"'+g+'": '}if(typeof(e)=="object"){c+=JSON.stringify(e)}else{if(typeof(e)=="number"){c+=e}else{if(typeof(e)=="string"){c+='"'+e.replace('"','\\"')+'"'}}}}catch(d){}}if(a){c="[ "+c+" ]"}else{c="{ "+c+" }"}return c};window.JSON=json}if(window.console==undefined){window.console={log:function(){},error:function(){},warn:function(){}}}Object.prototype.toString=function(){if(this.classType!=undefined){return"[object "+this.classType+"]"}else{return"[object Object]"}};Object.prototype.dump=function(a){if(a!=undefined){a=new RegExp(a,"i")}console.log(this+":");for(var d in this){try{var c=true;if(a!=undefined){c=a.test(d)}if(c){console.log(d+" => "+this[d])}}catch(b){}}};Object.prototype.serialize=function(){return JSON.stringify(this)};Object.prototype.constructorHelper=function(a,b){if(b==undefined){b=this.__proto__}if(b==undefined){return}if(a==undefined){a={}}if(b.__baseclass__!=undefined){this.constructorHelper.call(this,a,b.__baseclass__)}else{if(b.__proto__!=undefined){this.constructorHelper.call(this,a,b.__proto__)}}if(b.__constructor!=undefined){b.__constructor.call(this,a)}};Function.prototype.extend=function(classType,classDefine,classOverride,classStatic){var tab=classType.split(".");var namespace="";var current=window;for(var i=0;i<tab.length-1;i++){if(namespace!=""){namespace+="."}namespace+=tab[i];if(current[tab[i]]==undefined){current[tab[i]]={}}current=current[tab[i]]}var shortName=tab[tab.length-1];var func=eval("( "+classType+" = function "+shortName+" (config) { this.constructorHelper.call(this, config); } )");if(navigator.isIE){for(var prop in this.prototype){func.prototype[prop]=this.prototype[prop]}func.prototype.__proto__=func.prototype}else{func.prototype.__proto__=this.prototype}func.prototype.__baseclass__=this.prototype;func.base=this.prototype;if(classStatic!=undefined){for(var prop in classStatic){func[prop]=classStatic[prop]}if(classStatic.constructor!=undefined){classStatic.constructor.call(func)}}for(var prop in classDefine){if(prop=="constructor"){func.prototype.__constructor=classDefine[prop]}else{if((typeof(classDefine[prop])=="object")&&(classDefine[prop]!=null)){throw ("object are not allowed in classDefine ("+prop+"). Create object in the constructor")}if(func.prototype[prop]!=undefined){if(func.prototype[prop]!=classDefine[prop]){throw ("Try to override "+prop+" on class "+classType+". Use classOverride you want to do it")}}else{func.prototype[prop]=classDefine[prop]}}}if((navigator.isIE)&&(classDefine.constructor!==Object.prototype.constructor)){func.prototype.__constructor=classDefine.constructor}if(classOverride!=undefined){for(var prop in classOverride){if((typeof(classOverride[prop])=="object")&&(classOverride[prop]!=null)){throw ("object are not allowed in classOverride ("+prop+"). Create object in the constructor")}func.prototype[prop]=classOverride[prop]}}func.prototype.classType=classType;return func};Object.prototype.addEvents=function(){if(this.events==undefined){this.events=[]}for(var a=0;a<arguments.length;a++){this.events[arguments[a]]=[]}};Object.prototype.fireEvent=function(a){var b=[];for(var c=1;c<arguments.length;c++){b[c-1]=arguments[c]}var d=false;for(var c=0;(c<this.events[a].length)&&!d;c++){d=this.events[a][c].method.apply(this.events[a][c].scope,b);if(d==undefined){d=false}}return d};Object.prototype.connect=function(d,b,f,a){if(a==undefined){a=false}if(d.addEventListener!=undefined){var e=function(){return arguments.callee.callback.apply(arguments.callee.scope,arguments)};e.scope=this;e.callback=f;e.eventName=b;e.capture=a;d.addEventListener(b,e,a);if(d.events==undefined){d.events=[]}d.events.push(e)}else{if(d.attachEvent!=undefined){var e=function(){return arguments.callee.callback.apply(arguments.callee.scope,arguments)};e.scope=this;e.callback=f;e.eventName=b;e.capture=a;d.attachEvent("on"+b,e);if(d.events==undefined){d.events=[]}d.events.push(e)}else{var c={scope:this,method:f,capture:a};d.events[b].push(c)}}};Object.prototype.disconnect=function(d,a,f){if(d.removeEventListener!=undefined){for(var b=0;b<d.events.length;b++){var e=d.events[b];if((e.scope==this)&&(e.eventName==a)){if((f!=undefined)&&(e.callback!=f)){continue}d.removeEventListener(e.eventName,e,e.capture);d.events.splice(b,1);b--}}}else{for(var b=0;b<d.events[a].length;b++){var c=d.events[a][b];if(c.scope==this){if((f!=undefined)&&(c.method!=f)){continue}d.events[a].splice(b,1);b--}}}};Object.prototype.isSubclass=function(a){var b=this;while(b!=undefined){if(b.classType==a){return true}b=b.__baseclass__}return false};Object.extend("Core.DelayedTask",{delay:1,scope:undefined,callback:undefined,arguments:undefined,isDone:false,constructor:function(a){if(a.delay!=undefined){this.delay=a.delay}if(a.scope!=undefined){this.scope=a.scope}if(a.arguments!=undefined){this.arguments=a.arguments}if(a.callback!=undefined){this.callback=a.callback}else{throw ("callback MUST be given for a DelayedTask")}var b=function(){arguments.callee.delayedtask.handle=undefined;arguments.callee.delayedtask.callback.apply(arguments.callee.delayedtask.scope,arguments.callee.delayedtask.arguments);arguments.callee.delayedtask.isDone=true};b.delayedtask=this;this.handle=setTimeout(b,this.delay*1000)},abort:function(){if(this.handle!=undefined){clearTimeout(this.handle);this.handle=undefined}},});Object.extend("Core.Timer",{interval:1,scope:undefined,callback:undefined,arguments:undefined,constructor:function(a){if(a.interval!=undefined){this.interval=a.interval}if(a.scope!=undefined){this.scope=a.scope}if(a.arguments!=undefined){this.arguments=a.arguments}if(a.callback!=undefined){this.callback=a.callback}else{throw ("callback MUST be given for a Timer")}this.wrapper=function(){var e=(new Date().getTime())/1000;var f=arguments.callee.timer;f.callback.apply(f.scope,f.arguments);var d=(new Date().getTime())/1000;var c=d-e;if(c<0){c=0}var b=(f.interval*1000)-c;if(b<0){b=0}if(f.handle!=undefined){f.handle=setTimeout(f.wrapper,b)}};this.wrapper.timer=this;this.handle=setTimeout(this.wrapper,0)},abort:function(){if(this.handle!=undefined){clearTimeout(this.handle);this.handle=undefined}},});Object.extend("Core.HttpRequest",{url:undefined,method:"GET",binary:false,constructor:function(a){if(a.url!=undefined){this.url=a.url}else{throw ("url MUST be given for an HttpRequest")}if(a&&(a.method!=undefined)){this.method=a.method}if(a.binary!=undefined){this.binary=a.binary}this.request=new XMLHttpRequest();if(this.binary){this.request.overrideMimeType("text/plain; charset=x-user-defined")}this.request.open(this.method,this.url,true);var b=function(){var c=arguments.callee.httprequest;if(c.request.readyState==4){if(c.request.status==200){c.fireEvent("done")}else{c.fireEvent("error",c.request.status)}}};b.httprequest=this;this.request.onreadystatechange=b;this.addEvents("error","done")},setRequestHeader:function(b,a){this.request.setRequestHeader(b,a)},abort:function(){this.request.abort()},send:function(){this.request.send.apply(this.request,arguments)},getResponseText:function(){return this.request.responseText},getResponseBase64:function(){var g=this.request.responseText;var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var f="";var b=0;while(b+2<g.length){var e=g.charCodeAt(b++)&255;var d=g.charCodeAt(b++)&255;var c=g.charCodeAt(b++)&255;var l=a[e>>2];var k=a[((e&3)<<4)|(d>>4)];var j=a[((d&15)<<2)|(c>>6)];var h=a[c&63];f+=l+k+j+h}if(b+1<g.length){var e=g.charCodeAt(b++)&255;var d=g.charCodeAt(b++)&255;var l=a[e>>2];var k=a[((e&3)<<4)|(d>>4)];var j=a[(d&15)<<2];f+=l+k+j+"="}else{if(b<g.length){var e=g.charCodeAt(b++)&255;var l=a[e>>2];var k=a[(e&3)<<4];f+=l+k+"=="}}return f},getResponseJSON:function(){var a;try{a=JSON.parse(this.getResponseText())}catch(b){a=undefined}return a},getResponseXML:function(){var c=new DOMParser();try{var a=c.parseFromString(this.getResponseText(),"text/xml");return a}catch(b){}return undefined},});Object.extend("Core.Socket",{host:undefined,service:"/",port:80,mode:undefined,websocket:undefined,emuopenrequest:undefined,emupollrequest:undefined,emusendrequest:undefined,emuid:undefined,emumessages:undefined,lastPosition:0,readSize:true,size:0,data:"",constructor:function(a){if(a.host!=undefined){this.host=a.host}else{this.host=document.location.hostname}if(a.port!=undefined){this.port=a.port}else{if((document.location.port!=undefined)&&(document.location.port!="")){this.port=document.location.port}else{this.port=80}}if(a.service!=undefined){this.service=a.service}if(a.mode!=undefined){this.mode=a.mode}else{if(Core.Socket.supportWebSocket){this.mode="websocket"}else{if(Core.Socket.supportStreamSocket){this.mode="stream"}else{this.mode="poll"}}}if(this.mode=="websocket"){this.websocket=new WebSocket("ws://"+this.host+":"+this.port+this.service);this.connect(this.websocket,"open",this.onWebSocketOpen);this.connect(this.websocket,"error",this.onWebSocketError);this.connect(this.websocket,"message",this.onWebSocketMessage);this.connect(this.websocket,"close",this.onWebSocketClose)}else{if(this.mode=="stream"){this.emumessages=[];this.emuopenrequest=new XMLHttpRequest();this.emuopenrequest.open("GET","http://"+this.host+":"+this.port+this.service+"?socket=stream&command=open",true);var b=function(){var c=arguments.callee.socket;c.onEmuSocketChange.call(c)};b.socket=this;this.emuopenrequest.onreadystatechange=b;this.emuopenrequest.send()}else{this.emumessages=[];this.emuopenrequest=new Core.HttpRequest({url:"http://"+this.host+":"+this.port+this.service+"?socket=poll&command=open"});this.connect(this.emuopenrequest,"done",this.onEmuSocketOpenDone);this.connect(this.emuopenrequest,"error",this.onEmuSocketOpenError);this.emuopenrequest.send()}}this.addEvents("error","message","close","open")},send:function(a){if(this.websocket!=undefined){this.websocket.send(a.serialize())}else{if(this.emusendrequest==undefined){this.emusendrequest=new Core.HttpRequest({url:"http://"+this.host+":"+this.port+this.service+"?socket="+this.mode+"&command=send&id="+this.emuid+"&messages="+encodeURIComponent(a.serialize().toBase64())});this.connect(this.emusendrequest,"done",this.onEmuSocketSendDone);this.connect(this.emusendrequest,"error",this.onEmuSocketSendError);this.emusendrequest.send()}else{this.emumessages.push(a.serialize().toBase64())}}},close:function(){if(this.websocket!=undefined){this.websocket.close()}else{if(this.emutimer!=undefined){this.emutimer.abort();this.emutimer=undefined}if(this.emusendrequest!=undefined){this.emusendrequest.abort();this.emusendrequest=undefined}if(this.emuopenrequest!=undefined){this.emuopenrequest.abort();this.emuopenrequest=undefined}if(this.emupollrequest!=undefined){this.emupollrequest.abort();this.emupollrequest=undefined}}},onWebSocketOpen:function(){this.fireEvent("open",this)},onWebSocketError:function(){this.fireEvent("error",this)},onWebSocketMessage:function(a){this.fireEvent("message",this,JSON.parse(a.data))},onWebSocketClose:function(a){this.fireEvent("close",this)},emuSocketDataAvailable:function(a){if(this.emuid==undefined){this.emuid=a;this.fireEvent("open",this)}else{if(a!="keepalive"){this.fireEvent("message",this,JSON.parse(a.fromBase64()))}}},emuSocketUpdate:function(c){for(var a=0;a<c.length;a++){var b=c[a];if(this.readSize){if(b==":"){this.readSize=false;this.size=parseInt("0x"+this.data);this.data=""}else{this.data+=b}}else{this.data+=b;if(this.data.length>=this.size+2){this.emuSocketDataAvailable(this.data.substring(0,this.data.length-2));this.readSize=true;this.data=""}}}},onEmuSocketChange:function(){if(this.emuopenrequest.readyState==2){if(this.emuopenrequest.status!=200){this.emuopenrequest.onreadystatechange=undefined;this.emuopenrequest.abort();this.emuopenrequest=undefined;this.fireEvent("error",this)}}else{if(this.emuopenrequest.readyState==3){var a=this.emuopenrequest.responseText;if(a.length!=this.lastPosition){var b=a.substring(this.lastPosition);this.emuSocketUpdate(b);this.lastPosition=a.length}}else{if(this.emuopenrequest.readyState==4){if(this.emuopenrequest.responseText.length!=this.lastPosition){var b=this.emuopenrequest.responseText.substring(this.lastPosition);this.emuSocketUpdate(b);this.lastPosition=this.emuopenrequest.responseText.length}this.emuopenrequest.onreadystatechange=undefined;this.emuopenrequest=undefined;this.fireEvent("close",this)}}}},onEmuSocketSendDone:function(){var a=this.emusendrequest.getResponseJSON();if(a.messages!=undefined){for(var b=0;b<a.messages.length;b++){var d=JSON.parse(a.messages[b].fromBase64());this.fireEvent("message",this,d)}}if(this.emumessages.length>0){var c="";for(var b=0;b<this.emumessages.length;b++){if(c!=""){c+=";"}c+=this.emumessages[b]}this.emusendrequest=new Core.HttpRequest({url:"http://"+this.host+":"+this.port+this.service+"?socket="+this.mode+"&command=send&id="+this.emuid+"&messages="+encodeURIComponent(c)});this.connect(this.emusendrequest,"done",this.onEmuSocketSendDone);this.connect(this.emusendrequest,"error",this.onEmuSocketSendError);this.emurequest.send();this.emumessages=[]}else{this.emusendrequest=undefined}},onEmuSocketSendError:function(){this.emusendrequest=undefined},onEmuSocketOpenDone:function(){var a=this.emuopenrequest.getResponseJSON();this.emuid=a.id;this.emuopenrequest=undefined;if(a.status!="open"){this.fireEvent("error",this)}else{this.emutimer=new Core.Timer({interval:5,scope:this,callback:this.onEmuSocketTimer});this.fireEvent("open",this)}},onEmuSocketOpenError:function(){this.emuopenrequest=undefined;this.fireEvent("error",this)},onEmuSocketTimer:function(){if(this.emupollrequest==undefined){this.emupollrequest=new Core.HttpRequest({url:"http://"+this.host+":"+this.port+this.service+"?socket=poll&command=poll&id="+this.emuid});this.connect(this.emupollrequest,"done",this.onEmuSocketPollDone);this.connect(this.emupollrequest,"error",this.onEmuSocketPollError);this.emupollrequest.send()}},onEmuSocketPollDone:function(){var a=this.emupollrequest.getResponseJSON();if(a.status!="open"){this.close();this.fireEvent("close",this)}else{if(a.messages!=undefined){for(var b=0;b<a.messages.length;b++){var c=JSON.parse(a.messages[b].fromBase64());this.fireEvent("message",this,c)}}}this.emupollrequest=undefined},onEmuSocketPollError:function(){this.emupollrequest=undefined;this.fireEvent("error",this);this.close()},});Core.Socket.supportWebSocket="WebSocket" in window;Core.Socket.supportStreamSocket=true;if(navigator.isIE){Core.Socket.supportStreamSocket=false}Object.extend("Anim.TimeManager",{clocks:undefined,timer:undefined,start:0,constructor:function(a){this.clocks=[];this.start=new Date().getTime();this.addEvents("tick")},add:function(a){this.clocks.push(a);if(this.clocks.length==1){this.timer=new Core.Timer({callback:this.onTick,scope:this,interval:1/60})}},remove:function(b){var a=0;while((a<this.clocks.length)&&(this.clocks[a]!=b)){a++}if(a<this.clocks.length){this.clocks.splice(a,1)}if(this.clocks.length==0){this.timer.abort();this.timer=undefined}},onTick:function(){var b=(new Date().getTime())-this.start;b/=1000;for(var a=0;a<this.clocks.length;a++){this.clocks[a].update(b)}this.fireEvent("tick")},});Anim.TimeManager.current=new Anim.TimeManager();Object.extend("Anim.EasingFunction",{mode:"in",constructor:function(a){if(a.mode!=undefined){this.setMode(a.mode)}},setMode:function(a){this.mode=a},getMode:function(){return this.mode},ease:function(a){if(this.mode=="in"){return this.easeInCore(a)}else{if(this.mode=="out"){return 1-this.easeInCore(1-a)}else{if(a<=0.5){return this.easeInCore(a*2)/2}else{return 0.5+((1-this.easeInCore(2-(a*2)))/2)}}}},easeInCore:function(a){return a},},{},{eases:{},register:function(a,b){this.eases[a]=b},create:function(b){if(b==undefined){return undefined}if(typeof(b)=="string"){return new this.eases[b]()}else{if(typeof(b)=="object"){if(b.isSubclass("Anim.EasingFunction")){return b}else{if(b.type!=undefined){var a=b.type;b.type=undefined;return new this.eases[a](b)}}}}throw ("invalid easing function ("+b+")")},});Anim.EasingFunction.extend("Anim.PowerEase",{power:2,constructor:function(a){if(a.power!=undefined){this.setPower(a.power)}},setPower:function(a){this.power=a},getPower:function(){return this.power},},{easeInCore:function(a){return Math.pow(a,this.power)},},{constructor:function(){Anim.EasingFunction.register("power",this)},});Anim.EasingFunction.extend("Anim.ElasticEase",{oscillations:3,springiness:3,constructor:function(a){if(a.oscillations!=undefined){this.setOscillations(a.oscillations)}},setOscillations:function(a){this.oscillations=a},getOscillations:function(){return this.oscillations},setSpringiness:function(a){this.springiness=a},getSpringiness:function(){return this.springiness},},{easeInCore:function(a){return Math.sin(a*(this.oscillations*2+0.5)*Math.PI)*Math.pow(a,this.springiness)},},{constructor:function(){Anim.EasingFunction.register("elastic",this)},});Anim.EasingFunction.extend("Anim.BounceEase",{bounces:3,bounciness:2,constructor:function(a){if(a.oscillations!=undefined){this.setOscillations(a.oscillations)}},setBounces:function(a){this.bounces=a},getBounces:function(){return this.Bounces},setBounciness:function(a){this.bounciness=a},getBounciness:function(){return this.bounciness},},{easeInCore:function(a){var c=Math.exp((1/this.bounciness)*Math.log(a));var b=Math.floor(c*(this.bounces+0.5));var d=(c*(this.bounces+0.5))-b;return Math.sin(d*Math.PI)/Math.exp(this.bounces-b)},},{constructor:function(){Anim.EasingFunction.register("bounce",this)},});Object.extend("Anim.Clock",{parent:undefined,time:undefined,iteration:undefined,progress:undefined,isActive:false,globalTime:0,startTime:0,lastTick:0,beginTime:0,isPaused:false,speed:1,duration:"forever",pendingState:"none",autoReverse:false,repeat:1,target:undefined,scope:undefined,callback:undefined,ease:undefined,constructor:function(a){if(a.parent!=undefined){this.parent=a.parent}if(a.beginTime!=undefined){this.beginTime=a.beginTime}if(a.autoReverse!=undefined){this.autoReverse=a.autoReverse}if(a.duration!=undefined){this.duration=a.duration}if(a.repeat!=undefined){this.repeat=a.repeat}if(a.speed!=undefined){this.speed=a.speed}if(a.callback!=undefined){this.callback=a.callback}if(a.target!=undefined){this.target=a.target}if(a.scope!=undefined){this.scope=a.scope}else{this.scope=this.target}if(a.ease!=undefined){this.ease=Anim.EasingFunction.create(a.ease)}if(this.duration=="automatic"){this.duration="forever"}this.addEvents("complete","timeupdate")},setParent:function(a){this.parent=a},getParent:function(){return this.parent},getGlobalTime:function(){return this.globalTime+(this.lastTick-this.startTime)*this.speed},getIsActive:function(){return this.isActive},getTime:function(){return this.time},getIteration:function(){return this.iteration},getProgress:function(){return this.progress},begin:function(){if(this.parent==undefined){Anim.TimeManager.current.add(this)}else{if(this.scope==undefined){this.scope=this.parent.scope}}this.pendingState="active";if((this.target!=undefined)&&(this.target.setAnimClock!=undefined)){this.target.setAnimClock(this)}},pause:function(){this.pendingState="paused"},resume:function(){this.pendingState="resumed"},stop:function(){this.pendingState="stopped"},onComplete:function(){if(this.parent==undefined){Anim.TimeManager.current.remove(this)}this.fireEvent("complete")},onTimeUpdate:function(b){var a=this.getProgress();if(this.ease!=undefined){a=this.ease.ease(a)}if(this.callback!=undefined){this.callback.call(this.scope,this,a,b)}this.fireEvent("timeupdate",this,a,b)},update:function(b){var d;do{d=this.pendingState;this.pendingState="none";if(d=="none"){if(this.isActive&&!this.isPaused){var g=b-this.lastTick;this.lastTick=b;var a=this.getGlobalTime();a-=this.beginTime;if(a>=0){if((this.duration!="forever")&&(this.duration!="automatic")){var c=a/this.duration;var f=Math.floor(c+1);var e=a%this.duration;if(this.autoReverse){if((f&1)==0){e=this.duration-e}c/=2;f=Math.floor(c+1)}if(this.repeat=="forever"){this.iteration=f;this.time=e;this.progress=e/this.duration;this.onTimeUpdate(g)}else{if(c>=this.repeat){this.pendingState="stopped";this.iteration=this.repeat;this.time=this.duration;if(this.autoReverse){this.progress=0}else{this.progress=1}this.onTimeUpdate(0)}else{this.iteration=f;this.time=e;this.progress=e/this.duration;this.onTimeUpdate(g)}}}else{this.time=a;this.progress=0;this.iteration=undefined;this.onTimeUpdate(g)}}}}else{if(d=="active"){if(!this.isActive){this.isActive=true;this.globalTime=0;this.startTime=b;this.lastTick=this.startTime;if(this.beginTime>0){this.time=undefined;this.progress=undefined;this.iteration=undefined}else{this.time=0;this.progress=0;this.iteration=1;this.onTimeUpdate(0)}}}else{if(d=="paused"){if(!this.isPaused&&this.isActive){this.isPaused=true;this.globalTime=this.getGlobalTime();this.startTime=0;this.lastTick=0}}else{if(d=="resumed"){if(this.isPaused&&this.isActive){this.isPaused=false;this.startTime=b;this.lastTick=b}}else{if(d=="stopped"){if(this.isActive){this.progress=undefined;this.time=undefined;this.iteration=undefined;this.isActive=false}}}}}}}while(this.pendingState!="none");if((this.parent==undefined)&&!this.isActive){this.onComplete()}},});Anim.Clock.extend("Anim.ClockGroup",{children:undefined,constructor:function(a){this.children=[]},appendChild:function(a){a.setParent(this);this.children.push(a)},},{begin:function(){Anim.ClockGroup.base.begin.call(this);for(var a=0;a<this.children.length;a++){this.children[a].begin()}},pause:function(){Anim.ClockGroup.base.pause.call(this);for(var a=0;a<this.children.length;a++){this.children[a].pause()}},resume:function(){Anim.ClockGroup.base.resume.call(this);for(var a=0;a<this.children.length;a++){this.children[a].resume()}},stop:function(){Anim.ClockGroup.base.stop.call(this);for(var a=0;a<this.children.length;a++){this.children[a].stop()}},onCompleted:function(){Anim.ClockGroup.base.onCompleted.call(this);for(var a=0;a<this.children.length;a++){this.children[a].onCompleted()}},update:function(b){do{Anim.ClockGroup.base.update.call(this,b);var d=true;for(var c=0;c<this.children.length;c++){var a=this.children[c];a.update(this.getGlobalTime());if(a.getIsActive()){d=false}}if(this.getIsActive()&&d){this.pendingState="stopped"}}while(this.pendingState!="none")},});Object.extend("Ui.Matrix",{svgMatrix:undefined,constructor:function(a){if(a.SVGMatrix!=undefined){this.svgMatrix=a.SVGMatrix}else{this.svgMatrix=Ui.App.current.svgRoot.createSVGMatrix()}},translate:function(a,b){this.svgMatrix=this.svgMatrix.translate(a,b)},rotate:function(a){this.svgMatrix=this.svgMatrix.rotate(a)},scale:function(b,a){if(a==undefined){a=b}this.svgMatrix=this.svgMatrix.scaleNonUniform(b,a)},multiply:function(a){this.svgMatrix=this.svgMatrix.multiply(a.svgMatrix)},inverse:function(){this.svgMatrix=this.svgMatrix.inverse()},setMatrix:function(h,g,l,k,j,i){this.svgMatrix.a=h;this.svgMatrix.b=g;this.svgMatrix.c=l;this.svgMatrix.d=k;this.svgMatrix.e=j;this.svgMatrix.f=i},getA:function(){return this.svgMatrix.a},getB:function(){return this.svgMatrix.b},getC:function(){return this.svgMatrix.c},getD:function(){return this.svgMatrix.d},getE:function(){return this.svgMatrix.e},getF:function(){return this.svgMatrix.f},},{toString:function(){return"matrix("+this.svgMatrix.a.toFixed(4)+", "+this.svgMatrix.b.toFixed(4)+", "+this.svgMatrix.c.toFixed(4)+", "+this.svgMatrix.d.toFixed(4)+", "+this.svgMatrix.e.toFixed(4)+", "+this.svgMatrix.f.toFixed(4)+")"},});Ui.Matrix.createRotate=function(b){var a=new Ui.Matrix();a.rotate(b);return a};Ui.Matrix.createTranslate=function(a,c){var b=new Ui.Matrix();b.translate(a,c);return b};Ui.Matrix.createScale=function(c,b){var a=new Ui.Matrix();a.scale(c,b);return a};Ui.Matrix.createMatrix=function(h,g,m,l,k,j){var i=new Ui.Matrix();i.setMatrix(h,g,m,l,k,j);return i};Object.extend("Ui.Point",{svgPoint:undefined,x:0,y:0,constructor:function(a){if(a.SVGPoint!=undefined){this.svgPoint=a.SVGPoint}else{this.svgPoint=Ui.App.current.svgRoot.createSVGPoint()}if(a.point!=undefined){this.setX(a.point.x);this.setY(a.point.y)}if(a.x!=undefined){this.setX(a.x)}if(a.y!=undefined){this.setY(a.y)}},matrixTransform:function(a){this.svgPoint=this.svgPoint.matrixTransform(a.svgMatrix);this.x=this.svgPoint.x;this.y=this.svgPoint.y},setPoint:function(a,b){this.svgPoint.x=a;this.svgPoint.y=b;this.x=a;this.y=b},getX:function(){return this.x},setX:function(a){this.svgPoint.x=a;this.x=a},getY:function(){return this.y},setY:function(a){this.svgPoint.y=a;this.y=a},},{toString:function(){return"point("+this.x.toFixed(4)+", "+this.y.toFixed(4)+")"},});Object.extend("Ui.Color",{r:0,g:0,b:0,a:1,constructor:function(d){if((d.r!=undefined)||(d.g!=undefined)||(d.b!=undefined)){if(d.r!=undefined){this.r=Math.min(Math.max(d.r,0),1)}if(d.g!=undefined){this.g=Math.min(Math.max(d.g,0),1)}if(d.b!=undefined){this.b=Math.min(Math.max(d.b,0),1)}}else{if((d.h!=undefined)||(d.s!=undefined)||(d.l!=undefined)){var f=(d.h!=undefined)?d.h:0;var e=(d.s!=undefined)?d.s:0;var a=(d.l!=undefined)?d.l:0;this.initFromHsl(f,e,a)}else{if((d.y!=undefined)||(d.u!=undefined)||(d.v!=undefined)){var g=Math.max((d.y!=undefined)?d.y:0,0);var c=(d.u!=undefined)?d.u:0;var b=(d.v!=undefined)?d.v:0;this.initFromYuv(g,c,b)}}}if(d.a!=undefined){this.a=d.a}},getCssRgba:function(){return"rgba("+Math.round(this.r*255)+","+Math.round(this.g*255)+","+Math.round(this.b*255)+","+this.a+")"},getCssRgb:function(){return"rgb("+Math.round(this.r*255)+","+Math.round(this.g*255)+","+Math.round(this.b*255)+")"},getCssHtml:function(){var b="#";var a=Math.round(this.r*255).toString(16);if(a.length==1){a="0"+a}b+=a;a=Math.round(this.g*255).toString(16);if(a.length==1){a="0"+a}b+=a;a=Math.round(this.b*255).toString(16);if(a.length==1){a="0"+a}b+=a;return b},getRgba:function(){return{r:this.r,g:this.g,b:this.b,a:this.a}},getRgb:function(){return this.getRgba()},getHsla:function(){var a=this.r;var f=this.g;var i=this.b;var d=Math.min(a,Math.min(f,i));var j=Math.max(a,Math.max(f,i));var e;var m;var c=j;var k=j-d;if(j!=0){m=k/j}else{return{h:0,s:0,l:c,a:this.a}}if(a==j){e=(f-i)/k}else{if(f==j){e=2+(i-a)/k}else{e=4+(a-f)/k}}e*=60;if(e<0){e+=360}return{h:e,s:m,l:c,a:this.a}},getHsl:function(){return this.getHsla()},getYuva:function(){var c=0.299*this.r+0.587*this.g+0.114*this.b;var b=0.492*(this.b-c);var a=0.877*(this.r-c);return{y:c,u:b,v:a,a:this.a}},getYuv:function(){return this.getYuva()},initFromHsl:function(e,d,a){if(d<=0){this.r=a;this.g=a;this.b=a;return}e/=60;var c=Math.floor(e);var j=e-c;var k=a*(1-d);var g=a*(1-d*j);var b=a*(1-d*(1-j));if(c==0){this.r=a;this.g=b;this.b=k}else{if(c==1){this.r=g;this.g=a;this.b=k}else{if(c==2){this.r=k;this.g=a;this.b=b}else{if(c==3){this.r=k;this.g=g;this.b=a}else{if(c==4){this.r=b;this.g=k;this.b=a}else{this.r=a;this.g=k;this.b=g}}}}}},initFromYuv:function(c,b,a){this.r=Math.max(0,Math.min(c+1.13983*a,1));this.g=Math.max(0,Math.min(c-0.39465*b-0.5806*a,1));this.b=Math.max(0,Math.min(c+2.03211*b,1))},},{toString:function(){return"color("+this.r.toFixed(4)+", "+this.g.toFixed(4)+", "+this.b.toFixed(4)+", "+this.a.toFixed(4)+")"},});Ui.Color.create=function(c){if(typeof(c)=="string"){if(c.indexOf("rgba(")==0){}else{if(c.indexOf("rgb(")==0){}else{if(c.indexOf("#")==0){if(c.length==7){var e=parseInt(c.substr(1,2),16)/255;var d=parseInt(c.substr(3,2),16)/255;var a=parseInt(c.substr(5,2),16)/255;return new Ui.Color({r:e,g:d,b:a})}else{if(c.length==4){var e=parseInt(c.substr(1,1),16)/15;var d=parseInt(c.substr(2,1),16)/15;var a=parseInt(c.substr(3,1),16)/15;return new Ui.Color({r:e,g:d,b:a})}}}}}throw ("Unknown color format")}else{return c}};Object.extend("Ui.LinearGradient",{orientation:"vertical",stops:undefined,image:undefined,constructor:function(b){if(b.stops!=undefined){this.stops=b.stops}else{this.stops=[{offset:0,color:new Ui.Color({r:255,g:255,b:255,a:1})},{offset:1,color:new Ui.Color({r:0,g:0,b:0,a:1})}]}if(b.orientation!=undefined){this.orientation=b.orientation}if(navigator.isWebkit){this.image="-webkit-gradient(linear, 0% 0%, ";if(this.orientation=="vertical"){this.image+="0% 100%"}else{this.image+="100% 0%"}for(var e=0;e<this.stops.length;e++){var d=this.stops[e];this.image+=", color-stop("+d.offset+", "+d.color.getCssRgba()+")"}this.image+=")"}else{if(navigator.isGecko){this.image="-moz-linear-gradient(";if(this.orientation=="vertical"){this.image+="-90deg"}else{this.image+="-180deg"}for(var e=0;e<this.stops.length;e++){var d=this.stops[e];this.image+=", "+d.color.getCssRgba()+" "+Math.round(d.offset*100)+"%"}this.image+=")"}else{var a=document.createElementNS(htmlNS,"canvas");var c=a.getContext("2d");if(this.orientation=="vertical"){a.setAttribute("width",1,null);a.setAttribute("height",100,null);var f=c.createLinearGradient(0,0,0,100);for(var e=0;e<this.stops.length;e++){var d=this.stops[e];f.addColorStop(d.offset,d.color.getCssRgba())}c.fillStyle=f;c.fillRect(0,0,1,100)}else{a.setAttribute("width",100,null);a.setAttribute("height",1,null);var f=c.createLinearGradient(0,0,100,0);for(var e=0;e<this.stops.length;e++){var d=this.stops[e];f.addColorStop(d.offset,d.color.getCssRgbaTo())}c.fillStyle=f;c.fillRect(0,0,100,1)}this.image="url("+a.toDataURL()+")"}}},getBackgroundImage:function(){return this.image},getSVGGradient:function(){var d=document.createElementNS(svgNS,"linearGradient");d.setAttributeNS(null,"gradientUnits","objectBoundingBox");d.setAttributeNS(null,"x1",0);d.setAttributeNS(null,"y1",0);if(this.orientation=="vertical"){d.setAttributeNS(null,"x2",0);d.setAttributeNS(null,"y2",1)}else{d.setAttributeNS(null,"x2",1);d.setAttributeNS(null,"y2",0)}for(var c=0;c<this.stops.length;c++){var b=this.stops[c];var a=document.createElementNS(svgNS,"stop");a.setAttributeNS(null,"offset",b.offset);a.style.stopColor=b.color.getCssHtml();a.style.stopOpacity=b.color.getRgba().a;d.appendChild(a)}return d},},{});Object.extend("Ui.Keyboard",{shiftKey:false,altKey:false,ctrlKey:false,altGraphKey:false,metaKey:false,elementCapture:undefined,constructor:function(a){},capture:function(a){if(this.elementCapture!=undefined){throw ("keyboard capture already done on element (type: "+this.elementCapture.type+", id: "+this.elementCapture.id+", newid: "+a.id+")")}this.elementCapture=a},release:function(){if(this.elementCapture!=undefined){this.elementCapture=undefined}else{throw ("keyboard capture release but no element capture the keyboard")}},getShiftKey:function(){return this.shiftKey},getAltKey:function(){return this.altKey},getCtrlKey:function(){return this.ctrlKey},getAltGraphKey:function(){return this.altGraphKey},getMetaKey:function(){return this.metaKey},});Ui.Keyboard.current=new Ui.Keyboard();Object.extend("Ui.Element",{marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,parent:undefined,width:undefined,height:undefined,drawing:undefined,measureValid:false,measureConstraintWidth:0,measureConstraintHeight:0,measureWidth:0,measureHeight:0,arrangeValid:false,arrangeX:0,arrangeY:0,arrangeWidth:0,arrangeHeight:0,layoutValid:true,layoutNext:undefined,layoutX:0,layoutY:0,layoutWidth:0,layoutHeight:0,isLoaded:false,verticalAlign:"stretch",horizontalAlign:"stretch",clipToBounds:false,clipX:undefined,clipY:undefined,clipWidth:undefined,clipHeight:undefined,focusable:false,transform:undefined,transformOriginX:0.5,transformOriginY:0.5,transformOriginAbsolute:false,animClock:undefined,opacity:1,disabled:undefined,parentDisabled:undefined,style:undefined,parentStyle:undefined,mergeStyle:undefined,constructor:function(a){this.drawing=this.renderDrawing();this.drawing.style.position="absolute";this.drawing.style.left="-10000px";this.drawing.style.top="-10000px";var b=this.render();if(b!=undefined){this.drawing.appendChild(b)}if(a.width!=undefined){this.setWidth(a.width)}if(a.height!=undefined){this.setHeight(a.height)}if(a.verticalAlign!=undefined){this.setVerticalAlign(a.verticalAlign)}if(a.horizontalAlign!=undefined){this.setHorizontalAlign(a.horizontalAlign)}if(a.margin!=undefined){this.setMargin(a.margin)}if(a.marginTop!=undefined){this.setMarginTop(a.marginTop)}if(a.marginBottom!=undefined){this.setMarginBottom(a.marginBottom)}if(a.marginLeft!=undefined){this.setMarginLeft(a.marginLeft)}if(a.marginRight!=undefined){this.setMarginRight(a.marginRight)}if(a.opacity!=undefined){this.setOpacity(a.opacity)}if(a.focusable!=undefined){this.setFocusable(a.focusable)}if(a.clipToBounds!=undefined){this.setClipToBounds(a.clipToBounds)}if(a.id!=undefined){this.setId(a.id)}this.addEvents("keypress","keydown","focus","blur","load","unload","enable","disable")},getDrawing:function(){return this.drawing},getLayoutX:function(){return this.layoutX},getLayoutY:function(){return this.layoutY},getLayoutWidth:function(){return this.layoutWidth},getLayoutHeight:function(){return this.layoutHeight},setId:function(a){this.drawing.setAttributeNS(null,"id",a)},getId:function(){return this.drawing.getAttributeNS(null,"id")},setFocusable:function(a){this.focusable=a;if(a){this.drawing.setAttributeNS(null,"tabindex",0)}else{this.drawing.setAttributeNS(null,"tabindex",-1)}},getFocusable:function(){return this.focusable},setRole:function(a){if(a==undefined){if(this.drawing.hasAttributeNS("http://www.w3.org/2005/07/aaa","role")){this.drawing.removeAttributeNS("http://www.w3.org/2005/07/aaa","role")}}else{this.drawing.setAttributeNS("http://www.w3.org/2005/07/aaa","role",a)}},measure:function(c,h){if((this.measureValid)&&(this.measureConstraintWidth==c)&&(this.measureConstraintHeight==h)){return{width:this.measureWidth,height:this.measureHeight}}this.measureConstraintWidth=c;this.measureConstraintHeight=h;var d=this.getMarginLeft();var f=this.getMarginRight();var b=this.getMarginTop();var e=this.getMarginBottom();var g=Math.max(c-(d+f),0);var a=Math.max(h-(b+e),0);if(this.horizontalAlign!="stretch"){g=0}if(this.verticalAlign!="stretch"){a=0}if(this.width!=undefined){g=Math.max(this.width,g)}if(this.height!=undefined){a=Math.max(this.height,a)}var i=this.measureCore(g,a);if((this.width!=undefined)&&(i.width<this.width)){this.measureWidth=this.width+d+f}else{this.measureWidth=i.width+d+f}if((this.height!=undefined)&&(i.height<this.height)){this.measureHeight=this.height+b+e}else{this.measureHeight=i.height+b+e}this.measureValid=true;return{width:this.measureWidth,height:this.measureHeight}},measureCore:function(b,a){return{width:0,height:0}},invalidateMeasure:function(){this.invalidateArrange();if(this.measureValid){this.measureValid=false;if((this.parent!=undefined)&&(this.parent.measureValid)){this.parent.onChildInvalidateMeasure(this)}}},invalidateLayout:function(){if(this.layoutValid){console.log("invalidateLayout enqueue ("+(new Date()).getTime()+")");this.layoutValid=false;Ui.App.current.enqueueLayout(this)}},onChildInvalidateMeasure:function(a){this.invalidateMeasure()},updateLayout:function(){},arrange:function(b,h,c,a){if((!this.arrangeValid)||(this.arrangeX!=b)||(this.arrangeY!=h)||(this.arrangeWidth!=c)||(this.arrangeHeight!=a)){this.arrangeX=b;this.arrangeY=h;this.arrangeWidth=c;this.arrangeHeight=a;if(this.verticalAlign=="top"){a=this.measureHeight}else{if(this.verticalAlign=="bottom"){h+=a-this.measureHeight;a=this.measureHeight}else{if(this.verticalAlign=="center"){h+=(a-this.measureHeight)/2;a=this.measureHeight}}}if(this.horizontalAlign=="left"){c=this.measureWidth}else{if(this.horizontalAlign=="right"){b+=c-this.measureWidth;c=this.measureWidth}else{if(this.horizontalAlign=="center"){b+=(c-this.measureWidth)/2;c=this.measureWidth}}}var f=this.getMarginLeft();var e=this.getMarginRight();var d=this.getMarginTop();var g=this.getMarginBottom();b+=f;h+=d;c-=f+e;a-=d+g;this.layoutX=b;this.layoutY=h;this.layoutWidth=c;this.layoutHeight=a;this.drawing.style.left=this.layoutX+"px";this.drawing.style.top=this.layoutY+"px";if(this.transform!=undefined){this.updateTransform()}this.drawing.style.width=c+"px";this.drawing.style.height=a+"px";if(this.clipToBounds){this.clipX=0;this.clipY=0;this.clipWidth=this.layoutWidth;this.clipHeight=this.layoutHeight;this.updateClipRectangle()}this.arrangeCore(c,a)}this.arrangeValid=true},arrangeCore:function(b,a){},invalidateArrange:function(){if(this.arrangeValid){this.arrangeValid=false;if(this.parent!=undefined){this.parent.onChildInvalidateArrange(this)}}},onChildInvalidateArrange:function(a){this.invalidateArrange()},renderDrawing:function(){return document.createElementNS(htmlNS,"div")},render:function(){return undefined},getWidth:function(){return this.width},setWidth:function(a){if(this.width!=a){this.width=a;this.invalidateMeasure()}},getHeight:function(){return this.height},setHeight:function(a){if(this.height!=a){this.height=a;this.invalidateMeasure()}},getVerticalAlign:function(){return this.verticalAlign},setVerticalAlign:function(a){this.verticalAlign=a;this.invalidateArrange()},getHorizontalAlign:function(){return this.horizontalAlign},setHorizontalAlign:function(a){this.horizontalAlign=a;this.invalidateArrange()},getClipToBounds:function(){return this.clipToBounds},setClipToBounds:function(a){if(this.clipToBounds!=a){this.clipToBounds=a;if(a){this.clipX=0;this.clipY=0;this.clipWidth=this.layoutWidth;this.clipHeight=this.layoutHeight}else{this.clipX=undefined;this.clipY=undefined;this.clipWidth=undefined;this.clipHeight=undefined}this.updateClipRectangle()}},setClipRectangle:function(b,d,c,a){this.clipX=b;this.clipY=d;this.clipWidth=c;this.clipHeight=a;this.updateClipRectangle()},updateClipRectangle:function(){if(this.clipX!=undefined){x=Math.round(this.clipX);y=Math.round(this.clipY);width=Math.round(this.clipWidth);height=Math.round(this.clipHeight);this.drawing.style.clip="rect("+y+"px "+(x+width)+"px "+(y+height)+"px "+x+"px)"}else{this.drawing.style.removeProperty("clip")}},setMargin:function(a){this.setMarginTop(a);this.setMarginBottom(a);this.setMarginLeft(a);this.setMarginRight(a)},getMarginTop:function(){return this.marginTop},setMarginTop:function(a){if(a!=this.marginTop){this.marginTop=a;this.invalidateMeasure()}},getMarginBottom:function(){return this.marginBottom},setMarginBottom:function(a){if(a!=this.marginBottom){this.marginBottom=a;this.invalidateMeasure()}},getMarginLeft:function(){return this.marginLeft},setMarginLeft:function(a){if(a!=this.marginLeft){this.marginLeft=a;this.invalidateMeasure()}},getMarginRight:function(){return this.marginRight},setMarginRight:function(a){if(a!=this.marginRight){this.marginRight=a;this.invalidateMeasure()}},getOpacity:function(){return this.opacity},setOpacity:function(a){if(this.opacity!=a){this.opacity=a;this.drawing.style.opacity=this.opacity}},focus:function(){var a=this;while(a.parent!=undefined){a=a.parent}if(a.isSubclass("Ui.App")){a.askFocus(this)}},blur:function(){var a=this;while(a.parent!=undefined){a=a.parent}if(a.isSubclass("Ui.App")){a.removeFocus(this)}},setTransform:function(a){if(this.transform!=a){this.transform=a;this.updateTransform()}},setTransformOrigin:function(a,c,b){if((this.transformOriginX!=a)||(this.transformOriginY!=c)||(this.transformOriginAbsolute!=b)){this.transformOriginX=a;this.transformOriginY=c;if(b==undefined){this.transformOriginAbsolute=false}else{this.transformOriginAbsolute=b}this.updateTransform()}},transformToWindow:function(){if(navigator.isWebkit){var p=new Ui.Matrix();var o=this.drawing;while(o!=undefined){var h=window.getComputedStyle(o,null).getPropertyValue("-webkit-transform");if(h!="none"){var z=window.getComputedStyle(o,null).getPropertyValue("-webkit-transform-origin");var n=0;var l=0;if(z!="0px 0px"){var g=z.split(" ");n=new Number(g[0].replace(/px$/,""));l=new Number(g[1].replace(/px$/,""))}var q=new WebKitCSSMatrix(h);var j=Ui.Matrix.createMatrix(q.a,q.b,q.c,q.d,q.e,q.f);p.translate(o.offsetLeft-n,o.offsetTop-l);p.multiply(j);p.translate(n,l)}p.translate(o.offsetLeft,o.offsetTop);o=o.offsetParent}return p}else{if(navigator.isGecko){var p=new Ui.Matrix();var o=this.drawing;while(o!=undefined){var h=window.getComputedStyle(o,null).getPropertyValue("-moz-transform");if(h!="none"){var k=h.split(" ");var w=new Number(k[0].slice(7,k[0].length-1));var v=new Number(k[1].slice(0,k[1].length-1));var u=new Number(k[2].slice(0,k[2].length-1));var t=new Number(k[3].slice(0,k[3].length-1));var s=new Number(k[4].slice(0,k[4].length-3));var r=new Number(k[5].slice(0,k[5].length-3));var z=window.getComputedStyle(o,null).getPropertyValue("-moz-transform-origin");var n=0;var l=0;if(z!="0px 0px"){var g=z.split(" ");n=new Number(g[0].replace(/px$/,""));l=new Number(g[1].replace(/px$/,""))}var j=Ui.Matrix.createMatrix(w,v,u,t,s,r);p.translate(o.offsetLeft-n,o.offsetTop-l);p.multiply(j);p.translate(n,l)}p.translate(o.offsetLeft,o.offsetTop);o=o.offsetParent}return p}else{if(navigator.isOpera){var p=new Ui.Matrix();var o=this.drawing;while(o!=undefined){var h=window.getComputedStyle(o,null).getPropertyValue("-o-transform");if((h!="none")&&(h!="matrix(1, 0, 0, 1, 0, 0)")){var k=h.split(" ");var w=new Number(k[0].slice(7,k[0].length-1));var v=new Number(k[1].slice(0,k[1].length-1));var u=new Number(k[2].slice(0,k[2].length-1));var t=new Number(k[3].slice(0,k[3].length-1));var s=new Number(k[4].slice(0,k[4].length-1));var r=new Number(k[5].slice(0,k[5].length-1));var z=window.getComputedStyle(o,null).getPropertyValue("-o-transform-origin");var n=0;var l=0;if(z!="0px 0px"){var g=z.split(" ");n=new Number(g[0].replace(/px$/,""));l=new Number(g[1].replace(/px$/,""))}var j=Ui.Matrix.createMatrix(w,v,u,t,s,r);p.translate(o.offsetLeft-n,o.offsetTop-l);p.multiply(j);p.translate(n,l)}p.translate(o.offsetLeft,o.offsetTop);o=o.offsetParent}return p}else{if(navigator.isIE){var p=new Ui.Matrix();var o=this.drawing;while(o!=undefined){var h=window.getComputedStyle(o,null).getPropertyValue("-ms-transform");if((h!="none")&&(h!="matrix(1, 0, 0, 1, 0, 0)")){var k=h.split(" ");var w=new Number(k[0].slice(7,k[0].length-1));var v=new Number(k[1].slice(0,k[1].length-1));var u=new Number(k[2].slice(0,k[2].length-1));var t=new Number(k[3].slice(0,k[3].length-1));var s=new Number(k[4].slice(0,k[4].length-1));var r=new Number(k[5].slice(0,k[5].length-1));var z=window.getComputedStyle(o,null).getPropertyValue("-ms-transform-origin");var n=0;var l=0;if(z!="0px 0px"){var g=z.split(" ");n=new Number(g[0].replace(/px$/,""));l=new Number(g[1].replace(/px$/,""))}var j=Ui.Matrix.createMatrix(w,v,u,t,s,r);p.translate(o.offsetLeft-n,o.offsetTop-l);p.multiply(j);p.translate(n,l)}p.translate(o.offsetLeft,o.offsetTop);o=o.offsetParent}return p}else{var m=document.createElementNS(svgNS,"svg");if(this.drawing.firstChild==undefined){this.drawing.appendChild(m)}else{this.drawing.insertBefore(m,this.drawing.firstChild)}var i=m.getScreenCTM();this.drawing.removeChild(m);return Ui.Matrix.createMatrix(i.a,i.b,i.c,i.d,i.e,i.f)}}}}},transformFromWindow:function(){var a=this.transformToWindow();a.inverse();return a},transformToElement:function(b){var a=this.transformToWindow();a.multiply(b.transformFromWindow());return a},pointToWindow:function(a){if(navigator.isWebkit){return window.webkitConvertPointFromNodeToPage(this.drawing,new WebKitPoint(a.x,a.y))}else{a=new Ui.Point({point:a});a.matrixTransform(this.transformToWindow());return a}},pointFromWindow:function(a){if(navigator.isWebkit){return window.webkitConvertPointFromPageToNode(this.drawing,new WebKitPoint(a.x,a.y))}else{a=new Ui.Point({point:a});a.matrixTransform(this.transformFromWindow());return a}},pointFromElement:function(b,a){return this.pointFromWindow(b.pointToWindow(a))},getIsLoaded:function(){return this.isLoaded},getMeasureWidth:function(){return this.measureWidth},getMeasureHeight:function(){return this.measureHeight},show:function(){this.drawing.style.visibility="visible"},hide:function(){this.drawing.style.visibility="hidden"},disable:function(){if((this.disabled==undefined)||!this.disabled){var a=this.getIsDisabled();this.disabled=true;if(!a){this.onInternalDisable()}}},enable:function(){if((this.disabled==undefined)||this.disabled){var a=this.getIsDisabled();this.disabled=false;if(a){this.onInternalEnable()}}},getIsDisabled:function(){if(this.disabled!=undefined){return this.disabled}else{if(this.parentDisabled!=undefined){return this.parentDisabled}else{return false}}},setParentDisabled:function(b){var a=this.getIsDisabled();this.parentDisabled=b;if(a!=this.getIsDisabled()){if(this.getIsDisabled()){this.onInternalDisable()}else{this.onInternalEnable()}}},onInternalDisable:function(){this.onDisable();this.fireEvent("disable",this)},onDisable:function(){},onInternalEnable:function(){this.onEnable();this.fireEvent("enable",this)},onEnable:function(){},containSubStyle:function(a){for(var b in a){if((b.indexOf(".")!=-1)&&(typeof(a[b])=="object")){return true}}return false},fusionStyle:function(e,c){for(var d in c){if((d.indexOf(".")==-1)||(typeof(c[d])!="object")){continue}if(e[d]!=undefined){var a=e[d];e[d]={};for(var b in a){e[d][b]=a[b]}for(var b in c[d]){e[d][b]=c[d][b]}}else{e[d]=c[d]}}},mergeStyles:function(){this.mergeStyle=undefined;if(this.constructor.style!=undefined){if(this.constructor.classStyle!=undefined){this.mergeStyle=this.constructor.classStyle}else{this.mergeStyle={};this.mergeStyle[this.classType]=this.constructor.style;this.fusionStyle(this.mergeStyle,this.constructor.style);this.constructor.classStyle=this.mergeStyle}}if(this.parentStyle!=undefined){if(this.mergeStyle!=undefined){var a=this.mergeStyle;this.mergeStyle={};this.fusionStyle(this.mergeStyle,a);this.fusionStyle(this.mergeStyle,this.parentStyle);if((this.parentStyle[this.classType]!=undefined)&&(this.containSubStyle(this.parentStyle[this.classType]))){this.fusionStyle(this.mergeStyle,this.parentStyle[this.classType])}}else{if((this.parentStyle[this.classType]!=undefined)&&(this.containSubStyle(this.parentStyle[this.classType]))){this.mergeStyle={};this.fusionStyle(this.mergeStyle,this.parentStyle[this.classType])}else{this.mergeStyle=this.parentStyle}}}if(this.style!=undefined){if(this.mergeStyle!=undefined){var a=this.mergeStyle;this.mergeStyle={};this.fusionStyle(this.mergeStyle,a);this.fusionStyle(this.mergeStyle,this.style);if((this.style[this.classType]!=undefined)&&(this.containSubStyle(this.style[this.classType]))){this.fusionStyle(this.mergeStyle,this.style[this.classType])}}else{if((this.style[this.classType]!=undefined)&&(this.containSubStyle(this.style[this.classType]))){this.mergeStyle={};this.fusionStyle(this.mergeStyle,this.style[this.classType])}else{this.mergeStyle=this.style}}}},setParentStyle:function(a){if(this.parentStyle!=a){this.parentStyle=a}this.mergeStyles();this.onInternalStyleChange()},setStyle:function(a){this.style=a;this.mergeStyles();this.onInternalStyleChange()},getStyleProperty:function(a){if((this.mergeStyle!=undefined)&&(this.mergeStyle[this.classType]!=undefined)&&(this.mergeStyle[this.classType][a]!=undefined)){return this.mergeStyle[this.classType][a]}else{return this.constructor.style[a]}},onInternalStyleChange:function(){this.onStyleChange()},onStyleChange:function(){},setIsLoaded:function(a){if(this.isLoaded!=a){this.isLoaded=a;if(a){this.onLoad()}else{this.onUnload()}}},updateTransform:function(){if(this.transform!=undefined){var b=new Ui.Matrix();var a=this.transformOriginX;var c=this.transformOriginY;if(!this.transformOriginAbsolute){a*=this.layoutWidth;c*=this.layoutHeight}b.translate(a,c);b.multiply(this.transform);b.translate(-a,-c);if(navigator.isIE){this.drawing.style.msTransform=b.toString();this.drawing.style.msTransformOrigin="0% 0%"}else{if(navigator.isGecko){this.drawing.style.MozTransform="matrix("+b.svgMatrix.a.toFixed(4)+", "+b.svgMatrix.b.toFixed(4)+", "+b.svgMatrix.c.toFixed(4)+", "+b.svgMatrix.d.toFixed(4)+", "+b.svgMatrix.e.toFixed(0)+"px, "+b.svgMatrix.f.toFixed(0)+"px)";this.drawing.style.MozTransformOrigin="0% 0%"}else{if(navigator.isWebkit){this.drawing.style.webkitTransform=b.toString();this.drawing.style.webkitTransformOrigin="0% 0%"}else{if(navigator.isOpera){this.drawing.style.OTransform=b.toString();this.drawing.style.OTransformOrigin="0% 0%"}}}}}else{if(navigator.isIE){this.drawing.style.removeProperty("-ms-transform");this.drawing.style.removeProperty("-ms-transform-origin")}else{if(navigator.isGecko){this.drawing.style.removeProperty("-moz-transform");this.drawing.style.removeProperty("-moz-transform-origin")}else{if(navigator.isWebkit){this.drawing.style.removeProperty("-webkit-transform");this.drawing.style.removeProperty("-webkit-transform-origin")}else{if(navigator.isOpera){this.drawing.style.removeProperty("-o-transform");this.drawing.style.removeProperty("-o-transform-origin")}}}}}},setAnimClock:function(a){if(this.animClock!=undefined){this.animClock.stop()}this.animClock=a;if(a!=undefined){this.connect(a,"complete",function(){this.animClock=undefined})}},onLoad:function(){if(this.parent!=undefined){this.setParentStyle(this.parent.mergeStyle);this.setParentDisabled(this.getIsDisabled())}this.fireEvent("load")},onUnload:function(){if(this.animClock!=undefined){this.animClock.stop();this.animClock=undefined}this.fireEvent("unload")},});Ui.Element.extend("Ui.SVGElement",{},{renderDrawing:function(){return document.createElementNS(svgNS,"svg")},});Ui.Element.extend("Ui.CanvasElement",{context:undefined,updateCanvas:function(a){},},{renderDrawing:function(){var a=document.createElementNS(htmlNS,"canvas");this.context=a.getContext("2d");return a},arrangeCore:function(b,a){this.getDrawing().setAttribute("width",b,null);this.getDrawing().setAttribute("height",a,null);this.updateCanvas(this.context)},});Ui.Element.extend("Ui.Container",{children:undefined,constructor:function(a){this.children=[]},appendChild:function(a){a.parent=this;this.children.push(a);this.getDrawing().appendChild(a.getDrawing());this.invalidateMeasure();a.setIsLoaded(this.isLoaded)},prependChild:function(a){a.parent=this;this.children.unshift(a);this.invalidateMeasure();if(this.getDrawing().firstChild!=undefined){this.getDrawing().insertBefore(a.getDrawing(),this.getDrawing().firstChild)}else{this.getDrawing().appendChild(a.getDrawing())}a.setIsLoaded(this.isLoaded)},removeChild:function(b){b.parent=undefined;this.getDrawing().removeChild(b.getDrawing());var a=0;while((a<this.children.length)&&(this.children[a]!=b)){a++}if(a<this.children.length){this.children.splice(a,1)}this.invalidateMeasure();b.setIsLoaded(false)},getChildren:function(){return this.children},},{setIsLoaded:function(a){if(a!=this.isLoaded){for(var b=0;b<this.children.length;b++){this.children[b].setIsLoaded(a)}Ui.Container.base.setIsLoaded.call(this,a)}},onInternalStyleChange:function(){this.onStyleChange();for(var a=0;a<this.children.length;a++){this.children[a].setParentStyle(this.mergeStyle)}},onInternalDisable:function(){Ui.Container.base.onInternalDisable.call(this);for(var a=0;a<this.children.length;a++){this.children[a].setParentDisabled(true)}},onInternalEnable:function(){Ui.Container.base.onInternalEnable.call(this);for(var a=0;a<this.children.length;a++){this.children[a].setParentDisabled(false)}},});Ui.Container.extend("Ui.LBox",{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,constructor:function(a){if(a.padding!=undefined){this.setPadding(a.padding)}if(a.paddingTop!=undefined){this.setPaddingTop(a.paddingTop)}if(a.paddingBottom!=undefined){this.setPaddingBottom(a.paddingBottom)}if(a.paddingLeft!=undefined){this.setPaddingLeft(a.paddingLeft)}if(a.paddingRight!=undefined){this.setPaddingRight(a.paddingRight)}},setPadding:function(a){this.setPaddingTop(a);this.setPaddingBottom(a);this.setPaddingLeft(a);this.setPaddingRight(a)},getPaddingTop:function(){return this.paddingTop},setPaddingTop:function(a){if(this.paddingTop!=a){this.paddingTop=a;this.invalidateMeasure()}},getPaddingBottom:function(){return this.paddingBottom},setPaddingBottom:function(a){if(this.paddingBottom!=a){this.paddingBottom=a;this.invalidateMeasure()}},getPaddingLeft:function(){return this.paddingLeft},setPaddingLeft:function(a){if(this.paddingLeft!=a){this.paddingLeft=a;this.invalidateMeasure()}},getPaddingRight:function(){return this.paddingRight},setPaddingRight:function(a){if(this.paddingRight!=a){this.paddingRight=a;this.invalidateMeasure()}},append:function(a){this.appendChild(a)},prepend:function(a){this.prependChild(a)},remove:function(a){this.removeChild(a)},},{measureCore:function(d,m){var f=this.getPaddingLeft();var k=this.getPaddingRight();var j=this.getPaddingTop();var b=this.getPaddingBottom();var h=Math.max(d-(f+k),0);var a=Math.max(m-(j+b),0);var c=0;var l=0;for(var g=0;g<this.getChildren().length;g++){var e=this.getChildren()[g];var n=e.measure(h,a);if(n.width>c){c=n.width}if(n.height>l){l=n.height}}c+=f+k;l+=j+b;return{width:c,height:l}},arrangeCore:function(e,a){var g=this.getPaddingLeft();var d=this.getPaddingRight();var f=this.getPaddingTop();var b=this.getPaddingBottom();e-=g+d;a-=f+b;for(var c=0;c<this.getChildren().length;c++){this.getChildren()[c].arrange(g,f,e,a)}},});Ui.Container.extend("Ui.Box",{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,uniform:false,spacing:0,star:0,vertical:true,constructor:function(a){if(a.padding!=undefined){this.setPadding(a.padding)}if(a.paddingTop!=undefined){this.setPaddingTop(a.paddingTop)}if(a.paddingBottom!=undefined){this.setPaddingBottom(a.paddingBottom)}if(a.paddingLeft!=undefined){this.setPaddingLeft(a.paddingLeft)}if(a.paddingRight!=undefined){this.setPaddingRight(a.paddingRight)}if(a.uniform!=undefined){this.setUniform(a.uniform)}if(a.spacing!=undefined){this.setSpacing(a.spacing)}if(a.orientation!=undefined){this.setOrientation(a.orientation)}},getOrientation:function(){if(this.vertical){return"vertical"}else{return"horizontal"}},setOrientation:function(b){var a=true;if(b!="vertical"){a=false}if(this.vertical!=a){this.vertical=a;this.invalidateMeasure()}},setPadding:function(a){this.setPaddingTop(a);this.setPaddingBottom(a);this.setPaddingLeft(a);this.setPaddingRight(a)},getPaddingTop:function(){return this.paddingTop},setPaddingTop:function(a){if(this.paddingTop!=a){this.paddingTop=a;this.invalidateMeasure()}},getPaddingBottom:function(){return this.paddingBottom},setPaddingBottom:function(a){if(this.paddingBottom!=a){this.paddingBottom=a;this.invalidateMeasure()}},getPaddingLeft:function(){return this.paddingLeft},setPaddingLeft:function(a){if(this.paddingLeft!=a){this.paddingLeft=a;this.invalidateMeasure()}},getPaddingRight:function(){return this.paddingRight},setPaddingRight:function(a){if(this.paddingRight!=a){this.paddingRight=a;this.invalidateMeasure()}},getUniform:function(){return this.uniform},setUniform:function(a){if(this.uniform!=a){this.uniform=a;this.invalidateMeasure()}},getSpacing:function(){return this.spacing},setSpacing:function(a){if(this.spacing!=a){this.spacing=a;this.invalidateMeasure()}},append:function(b,a){if(a==undefined){a=false}b.boxResizable=a;this.appendChild(b)},prepend:function(b,a){if(a==undefined){a=false}b.boxResizable=a;this.prependChild(b)},remove:function(a){this.removeChild(a)},getResizable:function(a){return a.boxResizable},setResizable:function(b,a){if(b.boxResizable!=a){b.boxResizable=a;this.invalidateMeasure()}},measureUniform:function(d,n){var b=0;var m=0;var l;var a;if(this.vertical){n-=this.spacing*(this.getChildren().length-1);l=d;a=n/this.getChildren().length}else{d-=this.spacing*(this.getChildren().length-1);l=d/this.getChildren().length;a=n}var g=0;for(var j=0;j<this.getChildren().length;j++){var f=this.getChildren()[j];if(!f.boxResizable){var o=f.measure(l,a);if(o.width>b){b=o.width}if(o.height>m){m=o.height}}else{g++}}var c=0;if(g==0){c=(this.vertical?m:b)*this.getChildren().length}else{var k=(this.vertical?n:d)/this.getChildren().length;if(c>k){k=c}var h=0;var e=true;do{h=0;e=true;c=0;for(var j=0;j<this.getChildren().length;j++){var f=this.getChildren()[j];if(f.boxResizable){var o;if(this.vertical){o=f.measure(d,k)}else{o=f.measure(k,n)}if((this.vertical?o.height:o.width)>k){e=false;k=this.vertical?o.height:o.width;break}else{if((this.vertical?o.width:o.height)>h){h=this.vertical?o.width:o.height}}}}}while(!e);if(this.vertical){if(h>b){b=h}}else{if(h>m){m=h}}c=k*this.getChildren().length}c+=this.spacing*(this.getChildren().length-1);if(this.vertical){return{width:b,height:c}}else{return{width:c,height:m}}},measureNonUniform:function(d,q){var b=0;var p=0;var m=d;var a=q;if(this.vertical){a-=this.spacing*(this.getChildren().length-1)}else{m-=this.spacing*(this.getChildren().length-1)}var g=this.vertical?a:m;var h=0;var c=0;var o=0;for(var j=0;j<this.getChildren().length;j++){var f=this.getChildren()[j];if(!f.boxResizable){var r;if(this.vertical){r=f.measure(m,0)}else{r=f.measure(0,a)}if((this.vertical?r.width:r.height)>o){o=this.vertical?r.width:r.height}c+=this.vertical?r.height:r.width}else{f.boxStarDone=false;h++}}if(h>0){var l=g-c;var n=0;var e=true;var k=l/h;do{n=0;e=true;c=0;for(var j=0;j<this.getChildren().length;j++){var f=this.getChildren()[j];if(!f.boxResizable){if(this.vertical){f.measure(m,f.getMeasureHeight())}else{f.measure(f.getMeasureWidth(),a)}c+=this.vertical?f.getMeasureHeight():f.getMeasureWidth()}else{if(!f.boxStarDone){var r;if(this.vertical){r=f.measure(m,k)}else{r=f.measure(k,a)}if((this.vertical?r.height:r.width)>k){f.boxStarDone=true;e=false;l-=this.vertical?r.height:r.width;h--;k=l/h;break}else{if((this.vertical?r.width:r.height)>n){n=this.vertical?r.width:r.height}c+=k}}else{if((this.vertical?f.getMeasureWidth():f.getMeasureHeight())>n){n=this.vertical?f.getMeasureWidth():f.getMeasureHeight()}c+=this.vertical?f.getMeasureHeight():f.getMeasureWidth()}}}}while(!e);if(n>o){o=n}}c+=this.spacing*(this.getChildren().length-1);this.star=k;if(this.vertical){return{width:o,height:c}}else{return{width:c,height:o}}},},{measureCore:function(c,h){var d=this.getPaddingLeft();var g=this.getPaddingRight();var f=this.getPaddingTop();var b=this.getPaddingBottom();var e=c-(d+g);var a=h-(f+b);var i;if(this.uniform){i=this.measureUniform(e,a)}else{i=this.measureNonUniform(e,a)}i.width+=d+g;i.height+=f+b;return i},arrangeCore:function(b,k){var d=this.paddingLeft;var j=this.paddingRight;var g=this.paddingTop;var a=this.paddingBottom;b-=d+j;k-=g+a;var e=this.vertical?g:d;var h=((this.vertical?k:b)-this.spacing*(this.getChildren().length-1))/this.getChildren().length;for(var f=0;f<this.getChildren().length;f++){var c=this.getChildren()[f];if(!this.uniform){h=this.vertical?c.getMeasureHeight():c.getMeasureWidth();if(c.boxResizable&&(h<this.star)){h=this.star}}if(f!=0){e+=this.spacing}if(this.vertical){c.arrange(d,e,b,h)}else{c.arrange(e,g,h,k)}e+=h}},});Ui.Box.extend("Ui.VBox",{constructor:function(a){this.setOrientation("vertical")},});Ui.Box.extend("Ui.HBox",{constructor:function(a){this.setOrientation("horizontal")},});Ui.Container.extend("Ui.Flow",{uniform:false,uniformWidth:undefined,uniformHeight:undefined,constructor:function(a){if(a.uniform!=undefined){this.setUniform(a.uniform)}},getUniform:function(){return this.uniform},setUniform:function(a){if(this.uniform!=a){this.uniform=a;this.invalidateMeasure()}},append:function(a){this.appendChild(a)},remove:function(a){this.removeChild(a)},measureChildrenNonUniform:function(f,a){var c={pos:0,y:0,width:0,height:0};var b={lineX:0,lineY:0,lineCount:0,lineHeight:0,minWidth:0};for(var e=0;e<this.getChildren().length;e++){var g=this.getChildren()[e];var d=g.measure(f,a);if((b.lineX!=0)&&(b.lineX+d.width>f)){c.width=b.lineX;c.height=b.lineHeight;b.lineX=0;b.lineY+=b.lineHeight;b.lineHeight=0;b.lineCount++;c={pos:b.lineCount,y:b.lineY,width:0,height:0}}g.flowLine=c;g.flowLineX=b.lineX;b.lineX+=d.width;if(d.height>b.lineHeight){b.lineHeight=d.height}if(b.lineX>b.minWidth){b.minWidth=b.lineX}}b.lineY+=b.lineHeight;c.width=b.lineX;c.height=b.lineHeight;return{width:b.minWidth,height:b.lineY}},measureChildrenUniform:function(a,h){var f=0;var g=0;for(var d=0;d<this.getChildren().length;d++){var b=this.getChildren()[d];var j=b.measure(a,h);if(j.width>f){f=j.width}if(j.height>g){g=j.height}}var c=Math.max(Math.floor(a/f),1);var e=Math.ceil(this.getChildren().length/c);for(var d=0;d<this.getChildren().length;d++){this.getChildren()[d].measure(f,g)}this.uniformWidth=f;this.uniformHeight=g;return{width:f*c,height:e*g}},},{measureCore:function(b,a){if(this.uniform){return this.measureChildrenUniform(b,a)}else{return this.measureChildrenNonUniform(b,a)}},arrangeCore:function(d,b){if(this.uniform){var a=0;var f=0;for(var c=0;c<this.getChildren().length;c++){var e=this.getChildren()[c];if(a+this.uniformWidth>d){a=0;f+=this.uniformHeight}e.arrange(a,f,this.uniformWidth,this.uniformHeight);a+=this.uniformWidth}}else{for(var c=0;c<this.getChildren().length;c++){var e=this.getChildren()[c];e.arrange(e.flowLineX,e.flowLine.y,e.getMeasureWidth(),e.flowLine.height)}}},});Ui.Container.extend("Ui.Grid",{cols:undefined,rows:undefined,constructor:function(b){if(b.cols!=undefined){this.cols=[];var e=b.cols.split(",");for(var c=0;c<e.length;c++){var a=e[c];if(a=="auto"){this.cols.push({auto:true,star:false,absolute:false,actualWidth:0,offset:0,width:0})}else{if(a=="*"){this.cols.push({auto:false,star:true,absolute:false,actualWidth:0,offset:0,width:1})}else{if(a.match(/^[0-9]+\.?[0-9]*\*$/)){this.cols.push({auto:false,star:true,absolute:false,actualWidth:0,offset:0,width:new Number(a.slice(0,a.length-1))})}else{this.cols.push({auto:false,star:false,absolute:true,actualWidth:0,offset:0,width:new Number(a)})}}}}}else{this.cols=[{auto:true,star:false,absolute:false,actualWidth:0,offset:0,width:0}]}if(b.rows!=undefined){this.rows=[];var d=b.rows.split(",");for(var c=0;c<d.length;c++){var f=d[c];if(f=="auto"){this.rows.push({auto:true,star:false,absolute:false,actualHeight:0,offset:0,height:0})}else{if(f=="*"){this.rows.push({auto:false,star:true,absolute:false,actualHeight:0,offset:0,height:1})}else{if(f.match(/^[0-9]+\.?[0-9]*\*$/)){this.rows.push({auto:false,star:true,absolute:false,actualHeight:0,offset:0,height:new Number(f.slice(0,f.length-1))})}else{this.rows.push({auto:false,star:false,absolute:true,actualHeight:0,offset:0,height:new Number(f)})}}}}}else{this.rows=[{auto:true,star:false,absolute:false,actualHeight:0,offset:0,height:0}]}},attach:function(e,a,d,c,b){if(c==undefined){c=1}if(b==undefined){b=1}e.gridCol=a;e.gridRow=d;e.gridColSpan=c;e.gridRowSpan=b;this.appendChild(e)},detach:function(a){a.gridCol=undefined;a.gridRow=undefined;a.gridColSpan=undefined;a.gridRowSpan=undefined;this.removeChild(a)},getColMin:function(g){var c=this.cols[g];var h=0;for(var k=0;k<this.getChildren().length;k++){var b=this.getChildren()[k];var l=b.gridCol;var j=b.gridColSpan;if((j==1)&&(l==g)){if(b.getMeasureWidth()>h){h=b.getMeasureWidth()}}else{if((l<=g)&&(l+j>g)){var d=true;var a=false;var f=0;for(var e=l;e<g;e++){var m=this.cols[e];f+=m.actualWidth;if(m.star){a=true;break}}if(!a){for(var e=g+1;e<l+j;e++){var m=this.cols[e];if(m.star){a=true;break}if(m.auto){d=false;break}}}if(!a&&d){if((b.getMeasureWidth()-f)>h){h=b.getMeasureWidth()-f}}}}}return h},getRowMin:function(a){var m=this.rows[a];var h=0;for(var j=0;j<this.getChildren().length;j++){var c=this.getChildren()[j];var g=c.gridRow;var k=c.gridRowSpan;if((k==1)&&(g==a)){if(c.getMeasureHeight()>h){h=c.getMeasureHeight()}}else{if((g<=a)&&(g+k>a)){var d=true;var b=false;var f=0;for(var e=g;e<a;e++){var l=this.rows[e];f+=l.actualHeight;if(l.star){b=true;break}}if(!b){for(var e=a+1;e<g+k;e++){var l=this.rows[e];if(l.star){b=true;break}if(l.auto){d=false;break}}}if(!b&&d){if((c.getMeasureHeight()-f)>h){h=c.getMeasureHeight()-f}}}}}return h},},{measureCore:function(s,r){for(var t=0;t<this.getChildren().length;t++){var l=this.getChildren()[t];var g=(s*l.gridColSpan)/this.cols.length;var h=(r*l.gridRowSpan)/this.rows.length;l.measure(g,h)}var d=0;var C=0;var c=0;var D=0;var A=0;for(var j=0;j<this.cols.length;j++){var k=this.cols[j];k.offset=A;if(k.absolute){k.actualWidth+=k.width}else{if(k.star){k.actualWidth=0;d+=k.width}else{if(k.auto){k.actualWidth=this.getColMin(j)}}}A+=k.actualWidth}var B=0;if(d>0){B=(s-A)/d}A=0;for(var t=0;t<this.cols.length;t++){var k=this.cols[t];k.offset=A;if(k.star){k.actualWidth=B*k.width}A+=k.actualWidth}for(var t=0;t<this.getChildren().length;t++){var l=this.getChildren()[t];var k=l.gridCol;var n=l.gridColSpan;var w=this.cols[k].offset;var a=0;for(var p=k;p<k+n;p++){a+=this.cols[p].actualWidth}l.measure(a,r)}A=0;for(var j=0;j<this.cols.length;j++){var k=this.cols[j];k.offset=A;if(k.absolute){k.actualWidth=k.width}else{if(k.star){k.actualWidth=Math.max(this.getColMin(j),B*k.width);C+=k.actualWidth}else{if(k.auto){k.actualWidth=this.getColMin(j)}}}A+=k.actualWidth}for(var t=0;t<this.getChildren().length;t++){var l=this.getChildren()[t];var k=l.gridCol;var n=l.gridColSpan;var w=this.cols[k].offset;var a=0;for(var p=k;p<k+n;p++){a+=this.cols[p].actualWidth}l.measure(a,r)}var z=0;for(var v=0;v<this.rows.length;v++){var m=this.rows[v];m.offset=z;if(m.absolute){m.actualHeight=m.height}else{if(m.star){m.actualHeight=0;c+=m.height}else{if(m.auto){m.actualHeight=this.getRowMin(v)}}}z+=m.actualHeight}var q=0;if(c>0){q=(r-z)/c}z=0;for(var t=0;t<this.rows.length;t++){var m=this.rows[t];m.offset=z;if(m.star){m.actualHeight=q*m.height}z+=m.actualHeight}for(var t=0;t<this.getChildren().length;t++){var l=this.getChildren()[t];var k=l.gridCol;var n=l.gridColSpan;var w=this.cols[k].offset;var a=0;for(var p=k;p<k+n;p++){a+=this.cols[p].actualWidth}var m=l.gridRow;var e=l.gridRowSpan;var u=this.rows[m].offset;var b=0;for(var o=m;o<m+e;o++){b+=this.rows[o].actualHeight}l.measure(a,b)}z=0;for(var v=0;v<this.rows.length;v++){var m=this.rows[v];m.offset=z;if(m.absolute){m.actualHeight=m.height}else{if(m.star){var f=this.getRowMin(v);m.actualHeight=Math.max(f,q*m.height);D+=m.actualHeight}else{if(m.auto){m.actualHeight=this.getRowMin(v)}}}z+=m.actualHeight}return{width:A,height:z}},arrangeCore:function(a,m){for(var e=0;e<this.getChildren().length;e++){var b=this.getChildren()[e];var d=b.gridCol;var f=b.gridColSpan;var o=b.gridRow;var g=b.gridRowSpan;var l=this.cols[d].offset;var k=this.rows[o].offset;var n=0;var c=0;for(var j=d;j<d+f;j++){n+=this.cols[j].actualWidth}for(var h=o;h<o+g;h++){c+=this.rows[h].actualHeight}b.arrange(l,k,n,c)}},});Ui.Container.extend("Ui.Fixed",{constructor:function(a){this.addEvents("resize")},setPosition:function(b,a,c){if(a!=undefined){b.fixedX=a}if(c!=undefined){b.fixedY=c}this.invalidateArrange()},append:function(c,a,b){c.fixedX=a;c.fixedY=b;this.appendChild(c)},},{measureCore:function(c,a){for(var b=0;b<this.getChildren().length;b++){this.getChildren()[b].measure(c,a)}return{width:0,height:0}},arrangeCore:function(c,a){this.fireEvent("resize",this,c,a);for(var b=0;b<this.getChildren().length;b++){var d=this.getChildren()[b];d.arrange((d.fixedX==undefined)?0:d.fixedX,(d.fixedY==undefined)?0:d.fixedY,d.getMeasureWidth(),d.getMeasureHeight())}},onChildInvalidateMeasure:function(a){a.measure(this.getLayoutWidth(),this.getLayoutHeight())},onChildInvalidateArrange:function(a){a.arrange((a.fixedX==undefined)?0:a.fixedX,(a.fixedY==undefined)?0:a.fixedY,a.getMeasureWidth(),a.getMeasureHeight())},});Ui.Container.extend("Ui.Fold",{headerBox:undefined,header:undefined,contentBox:undefined,content:undefined,offset:0,orientation:"horizontal",isFolded:true,over:true,mode:"extend",clock:undefined,contentSize:0,constructor:function(a){if(a.over!=undefined){this.over=a.over}if(a.extend!=undefined){this.extend=a.extend}if(a.orientation!=undefined){this.setOrientation(a.orientation)}this.headerBox=new Ui.Pressable();this.appendChild(this.headerBox);this.connect(this.headerBox,"press",this.onHeaderPress);this.contentBox=new Ui.LBox();this.appendChild(this.contentBox);this.contentBox.hide();if(a.header!=undefined){this.setHeader(a.header)}if(a.content!=undefined){this.setContent(a.content)}this.addEvents("fold","unfold","orientationchange")},getIsFolded:function(){return this.isFolded},fold:function(){if(!this.isFolded){this.isFolded=true;this.startAnimation();this.fireEvent("fold",this)}},unfold:function(){if(this.isFolded){this.isFolded=false;this.startAnimation();this.fireEvent("unfold",this)}},getOver:function(){return this.over},setOver:function(a){if(this.over!=a){this.over=a;this.stopAnimation();this.invalidateMeasure()}},getMode:function(){return this.mode},setMode:function(a){if(this.mode!=a){this.mode=a;this.stopAnimation();this.invalidateMeasure()}},getHeader:function(){return this.header},setHeader:function(a){if(a!=this.header){if(this.header!=undefined){this.headerBox.removeChild(this.header)}this.header=a;if(this.header!=undefined){this.headerBox.appendChild(this.header)}}},getContent:function(){return this.content},setContent:function(a){if(this.content!=a){if(this.content!=undefined){this.contentBox.removeChild(this.content)}this.content=a;if(this.content!=undefined){this.contentBox.appendChild(this.content)}}},getOrientation:function(){return this.orientation},setOrientation:function(a){if(this.orientation!=a){this.orientation=a;this.fireEvent("orientationchange",this,a);this.invalidateMeasure()}},getOffset:function(){return this.offset},setOffset:function(a){this.offset=a;if(!this.over){this.invalidateMeasure()}else{if(this.orientation=="horizontal"){if(this.mode=="slide"){this.setTransform(Ui.Matrix.createTranslate(-this.offset*this.contentSize,0))}this.contentBox.setClipRectangle(0,0,Math.round(this.contentSize*this.offset),this.getLayoutHeight())}else{if(this.mode=="slide"){this.setTransform(Ui.Matrix.createTranslate(0,-this.offset*this.contentSize))}this.contentBox.setClipRectangle(0,0,this.getLayoutWidth(),Math.round(this.contentSize*this.offset))}}},onHeaderPress:function(){if(this.isFolded){this.unfold()}else{this.fold()}},startAnimation:function(){if(this.clock!=undefined){this.clock.stop()}if(!this.isFolded){this.contentBox.show()}this.clock=new Anim.Clock({duration:2,target:this,callback:this.onClockTick});this.clock.begin()},stopAnimation:function(){if(this.clock!=undefined){this.clock.stop();this.clock=undefined}},onClockTick:function(b,a){if(this.content==undefined){if(this.clock!=undefined){this.clock.stop();this.clock=undefined}return}var d=this.getOffset();if(d>1){this.setOffset(1)}else{var c;if(this.isFolded){c=0}else{c=1}this.setOffset(c-((c-d)*(1-a)))}if((a==1)&&this.isFolded){console.log("hide content");this.contentBox.hide()}},},{measureCore:function(c,a){var b=this.headerBox.measure(c,a);var d={width:0,height:0};if(this.orientation=="horizontal"){d=this.contentBox.measure(c-b.width,a);if(d.height>b.height){b.height=d.height}if(!this.over){b.width+=d.width*this.offset}this.contentSize=d.width}else{d=this.contentBox.measure(c,a-b.height);if(d.width>b.width){b.width=d.width}if(!this.over){b.height+=d.height*this.offset}this.contentSize=d.height}return b},arrangeCore:function(b,a){if(this.orientation=="horizontal"){this.headerBox.arrange(0,0,this.headerBox.getMeasureWidth(),a);this.contentBox.arrange(this.headerBox.getMeasureWidth(),0,this.contentBox.getMeasureWidth(),a);this.contentBox.setClipRectangle(0,0,Math.round(this.contentSize*this.offset),Math.round(a))}else{this.headerBox.arrange(0,0,b,this.headerBox.getMeasureHeight());this.contentBox.arrange(0,this.headerBox.getMeasureHeight(),b,this.contentBox.getMeasureHeight());this.contentBox.setClipRectangle(0,0,Math.round(b),Math.round(this.contentSize*this.offset))}},});Ui.Container.extend("Ui.Accordeon",{current:0,clock:undefined,headersSize:0,contentSize:0,orientation:"horizontal",constructor:function(a){if(a.orientation!=undefined){this.setOrientation(a.orientation)}this.setClipToBounds(true)},getOrientation:function(){return this.orientation},setOrientation:function(a){if(this.orientation!=a){this.orientation=a;for(var b=0;b<this.getChildren().length;b++){this.getChildren()[b].setOrientation(a)}this.invalidateMeasure()}},setCurrentPage:function(b){for(var a=0;a<this.getChildren().length;a++){if(this.getChildren()[a]==b){this.setCurrentPosition(a);return}}},setCurrentPosition:function(a){this.current=a;if(this.clock!=undefined){this.clock.stop()}this.clock=new Anim.Clock({duration:2,target:this,callback:this.onClockTick});this.clock.begin()},appendPage:function(a){this.appendChild(a);a.setOffset(1);a.setOrientation(this.orientation);this.connect(a,"select",this.onPageSelect);this.connect(a,"close",this.onPageClose);this.setCurrentPage(a)},removePage:function(b){var c=-1;for(var a=0;a<this.getChildren().length;a++){if(this.getChildren()[a]==b){c=a;break}}if(c!=-1){this.disconnect(b,"select",this.onPageSelect);this.disconnect(b,"close",this.onPageClose);this.removeChild(b);if((this.current==c)&&(this.current==0)){this.setCurrentPosition(0)}else{if(this.current>=c){this.setCurrentPosition(this.current-1)}else{this.setCurrentPosition(this.current)}}}},onClockTick:function(c,a){for(var b=0;b<this.getChildren().length;b++){var f=this.getChildren()[b];if(b==this.current){f.showContent()}var e=f.getOffset();if(e>1){f.setOffset(1)}else{var d;if(b<=this.current){d=0}else{d=1}f.setOffset(d-((d-e)*(1-a)))}if((a==1)&&(b!=this.current)){f.hideContent()}}},onPageSelect:function(a){this.setCurrentPage(a)},onPageClose:function(a){this.removePage(a)},measureHorizontal:function(a,h){var c=0;var f=0;var g=0;for(var d=0;d<this.getChildren().length;d++){var b=this.getChildren()[d];var j=b.measure(a,h);c+=b.getHeader().getMeasureWidth();if(b.getHeader().getMeasureHeight()>g){g=b.getHeader().getMeasureHeight()}}for(var d=0;d<this.getChildren().length;d++){var b=this.getChildren()[d];var j=b.measure((a-c)+b.getHeader().getMeasureWidth(),h);var e=b.getContent();if((e!=undefined)&&(e.getMeasureWidth()>f)){f=e.getMeasureWidth();if(e.getMeasureHeight()>g){g=e.getMeasureHeight()}}}this.headersSize=c;return{width:c+f,height:g}},measureVertical:function(b,h){var d=0;var g=0;var a=0;for(var e=0;e<this.getChildren().length;e++){var c=this.getChildren()[e];var j=c.measure(b,h);d+=c.getHeader().getMeasureHeight();if(c.getHeader().getMeasureWidth()>a){a=c.getHeader().getMeasureWidth()}}for(var e=0;e<this.getChildren().length;e++){var c=this.getChildren()[e];var j=c.measure(b,(h-d)+c.getHeader().getMeasureHeight());var f=c.getContent();if((f!=undefined)&&(f.getMeasureHeight()>g)){g=f.getMeasureHeight();if(f.getMeasureWidth()>a){a=f.getMeasureWidth()}}}this.headersSize=d;return{width:a,height:d+g}},},{measureCore:function(b,a){if(this.orientation=="horizontal"){return this.measureHorizontal(b,a)}else{return this.measureVertical(b,a)}},arrangeCore:function(d,b){if(this.orientation=="horizontal"){var a=0;this.contentSize=d-this.headersSize;for(var c=0;c<this.getChildren().length;c++){var f=this.getChildren()[c];f.arrange(a,0,this.contentSize+f.getHeader().getMeasureWidth(),b);a+=f.getHeader().getMeasureWidth()}}else{var e=0;this.contentSize=b-this.headersSize;for(var c=0;c<this.getChildren().length;c++){var f=this.getChildren()[c];f.arrange(0,e,d,this.contentSize+f.getHeader().getMeasureHeight());e+=f.getHeader().getMeasureHeight()}}},});Ui.Container.extend("Ui.AccordeonPage",{headerBox:undefined,header:undefined,content:undefined,offset:0,orientation:"horizontal",constructor:function(a){if(a.orientation!=undefined){this.setOrientation(a.orientation)}this.headerBox=new Ui.Pressable();this.appendChild(this.headerBox);this.connect(this.headerBox,"press",this.onHeaderPress);if(a.header!=undefined){this.setHeader(a.header)}if(a.content!=undefined){this.setContent(a.content)}this.addEvents("select","close","orientationchange")},close:function(){this.fireEvent("close",this)},showContent:function(){if(this.content!=undefined){this.content.show()}},hideContent:function(){if(this.content!=undefined){this.content.hide()}},getHeader:function(){return this.header},setHeader:function(a){if(a!=this.header){if(this.header!=undefined){this.headerBox.removeChild(this.header)}this.header=a;if(this.header!=undefined){this.headerBox.appendChild(this.header)}}},getContent:function(){return this.content},setContent:function(a){if(this.content!=a){if(this.content!=undefined){this.removeChild(this.content)}this.content=a;if(this.content!=undefined){this.appendChild(this.content,true)}}},getOrientation:function(){return this.orientation},setOrientation:function(a){if(this.orientation!=a){this.orientation=a;this.fireEvent("orientationchange",this,a);this.invalidateMeasure()}},getOffset:function(){return this.offset},setOffset:function(a){this.offset=a;if(this.orientation=="horizontal"){this.setTransform(Ui.Matrix.createTranslate(this.offset*(this.getLayoutWidth()-this.headerBox.getMeasureWidth()),0))}else{this.setTransform(Ui.Matrix.createTranslate(0,this.offset*(this.getLayoutHeight()-this.headerBox.getMeasureHeight())))}},onHeaderPress:function(){this.fireEvent("select",this)},},{measureCore:function(c,a){var b=this.headerBox.measure(c,a);var d={width:0,height:0};if(this.content!=undefined){if(this.orientation=="horizontal"){d=this.content.measure(c-b.width,a);if(d.height>b.height){b.height=d.height}b.width+=d.width}else{d=this.content.measure(c,a-b.height);if(d.width>b.width){b.width=d.width}b.height+=d.height}}return b},arrangeCore:function(b,a){if(this.orientation=="horizontal"){this.headerBox.arrange(0,0,this.headerBox.getMeasureWidth(),a);if(this.content!=undefined){this.content.arrange(this.headerBox.getMeasureWidth(),0,b-this.headerBox.getMeasureWidth(),a)}}else{this.headerBox.arrange(0,0,b,this.headerBox.getMeasureHeight());if(this.content!=undefined){this.content.arrange(0,this.headerBox.getMeasureHeight(),b,a-this.headerBox.getMeasureHeight())}}this.setOffset(this.offset)},});Ui.Element.extend("Ui.Spacer",{constructor:function(a){},});Ui.Element.extend("Ui.Rectangle",{fill:undefined,stroke:undefined,strokeWidth:0,radiusTopLeft:0,radiusTopRight:0,radiusBottomLeft:0,radiusBottomRight:0,shadow:undefined,constructor:function(a){this.getDrawing().style.boxSizing="border-box";this.getDrawing().style.borderStyle="solid";this.getDrawing().style.borderWidth="0px";if(a.radius!=undefined){this.setRadius(a.radius)}if(a.radiusTopLeft!=undefined){this.setRadiusTopLeft(a.radiusTopLeft)}if(a.radiusTopRight!=undefined){this.setRadiusTopRight(a.radiusTopRight)}if(a.radiusBottomLeft!=undefined){this.setRadiusBottomLeft(a.radiusBottomLeft)}if(a.radiusBottomRight!=undefined){this.setRadiusBottomRight(a.radiusBottomRight)}if(a.stroke!=undefined){this.setStroke(a.stroke)}if(a.strokeWidth!=undefined){this.setStrokeWidth(a.strokeWidth)}if(a.fill!=undefined){this.setFill(a.fill)}if(a.shadow!=undefined){this.setShadow(a.shadow)}},setShadow:function(a){if(this.shadow!=a){this.shadow=a;if(a==undefined){a="none"}if(Ui.Rectangle.supportBoxShadow){this.getDrawing().style.boxShadow=a}else{if(Ui.Rectangle.supportMozBoxShadow){this.getDrawing().style.MozBoxShadow=a}else{if(Ui.Rectangle.supportWebkitBoxShadow){this.getDrawing().style.webkitBoxShadow=a}}}}},getBoxShadow:function(){return this.shadow},setRadius:function(a){this.setRadiusTopLeft(a);this.setRadiusTopRight(a);this.setRadiusBottomLeft(a);this.setRadiusBottomRight(a)},getRadiusTopLeft:function(){return this.radiusTopLeft},setRadiusTopLeft:function(a){if(this.radiusTopLeft!=a){this.radiusTopLeft=a;if(Ui.Rectangle.supportBorderRadius){this.getDrawing().style.borderTopLeftRadius=this.radiusTopLeft+"px"}else{if(Ui.Rectangle.supportMozBorderRadius){this.getDrawing().style.MozBorderRadiusTopleft=this.radiusTopLeft+"px"}else{if(Ui.Rectangle.supportWebkitBorderRadius){this.getDrawing().style.webkitBorderTopLeftRadius=this.radiusTopLeft+"px"}}}}},getRadiusTopRight:function(){return this.radiusTopRight},setRadiusTopRight:function(a){if(this.radiusTopRight!=a){this.radiusTopRight=a;if(Ui.Rectangle.supportBorderRadius){this.getDrawing().style.borderTopRightRadius=this.radiusTopRight+"px"}else{if(Ui.Rectangle.supportMozBorderRadius){this.getDrawing().style.MozBorderRadiusTopright=this.radiusTopRight+"px"}else{if(Ui.Rectangle.supportWebkitBorderRadius){this.getDrawing().style.webkitBorderTopRightRadius=this.radiusTopRight+"px"}}}}},getRadiusBottomLeft:function(){return this.radiusBottomLeft},setRadiusBottomLeft:function(a){if(this.radiusBottomLeft!=a){this.radiusBottomLeft=a;if(Ui.Rectangle.supportBorderRadius){this.getDrawing().style.borderBottomLeftRadius=this.radiusBottomLeft+"px"}else{if(Ui.Rectangle.supportMozBorderRadius){this.getDrawing().style.MozBorderRadiusBottomleft=this.radiusBottomLeft+"px"}else{if(Ui.Rectangle.supportWebkitBorderRadius){this.getDrawing().style.webkitBorderBottomLeftRadius=this.radiusBottomLeft+"px"}}}}},getRadiusBottomRight:function(){return this.radiusBottomRight},setRadiusBottomRight:function(a){if(this.radiusBottomRight!=a){this.radiusBottomRight=a;if(Ui.Rectangle.supportBorderRadius){this.getDrawing().style.borderBottomRightRadius=this.radiusBottomRight+"px"}else{if(Ui.Rectangle.supportMozBorderRadius){this.getDrawing().style.MozBorderRadiusBottomright=this.radiusBottomRight+"px"}else{if(Ui.Rectangle.supportWebkitBorderRadius){this.getDrawing().style.webkitBorderBottomRightRadius=this.radiusBottomRight+"px"}}}}},setFill:function(a){if(this.fill!=a){this.fill=a;if(this.fill==undefined){this.getDrawing().style.barkground="none"}else{if(typeof(this.fill)=="string"){this.getDrawing().style.background=this.fill}else{if(this.fill.isSubclass("Ui.Color")){this.getDrawing().style.background=this.fill.getCssRgba()}else{if(this.fill.isSubclass("Ui.LinearGradient")){this.getDrawing().style.backgroundImage=this.fill.getBackgroundImage();this.getDrawing().style.backgroundSize="100% 100%"}}}}}},getFill:function(){return this.fill},setStroke:function(a){if(this.stroke!=a){this.stroke=a;if(typeof(this.stroke)=="string"){this.getDrawing().style.borderColor=this.stroke}else{if(this.stroke.isSubclass("Ui.Color")){this.getDrawing().style.borderColor=this.stroke.getCssRgba()}}}},getStroke:function(){return this.stroke},setStrokeWidth:function(a){if(this.strokeWidth!=a){this.strokeWidth=a;this.getDrawing().style.borderWidth=this.strokeWidth+"px"}},},{});Ui.Rectangle.supportBorderRadius=false;Ui.Rectangle.supportMozBorderRadius=false;Ui.Rectangle.supportWebkitBorderRadius=false;var test=document.createElementNS(htmlNS,"div");test.style.borderTopLeftRadius="8px";var res=test.style.getPropertyValue("border-top-left-radius");if((res!=null)&&(res!=undefined)&&(res!="")){Ui.Rectangle.supportBorderRadius=true}else{test.style.MozBorderRadiusTopleft="8px";res=test.style.getPropertyValue("-moz-border-radius-topleft");if((res!=null)&&(res!=undefined)&&(res!="")){Ui.Rectangle.supportMozBorderRadius=true}else{test.style.webkitBorderTopLeftRadius="8px";res=test.style.getPropertyValue("-webkit-border-top-left-radius");if((res!=null)&&(res!=undefined)&&(res!="")){Ui.Rectangle.supportWebkitBorderRadius=true}}}Ui.Rectangle.supportBoxShadow=false;Ui.Rectangle.supportMozBoxShadow=false;Ui.Rectangle.supportWebkitBoxShadow=false;test.style.boxShadow="0px 0px 4px black";var res=test.style.getPropertyValue("box-shadow");if((res!=null)&&(res!=undefined)&&(res!="")){Ui.Rectangle.supportBoxShadow=true}else{test.style.MozBoxShadow="0px 0px 4px black";res=test.style.getPropertyValue("-moz-box-shadow");if((res!=null)&&(res!=undefined)&&(res!="")){Ui.Rectangle.supportMozBoxShadow=true}else{test.style.webkitBoxShadow="0px 0px 4px black";res=test.style.getPropertyValue("-webkit-box-shadow");if((res!=null)&&(res!=undefined)&&(res!="")){Ui.Rectangle.supportWebkitBoxShadow=true}}}test=undefined;Ui.SVGElement.extend("Ui.Icon",{iconDrawing:undefined,fill:"black",path:undefined,constructor:function(a){if(a.fill!=undefined){this.setFill(a.fill)}if(a.path!=undefined){this.setPath(a.path)}},setFill:function(a){if(this.fill!=a){this.fill=a;if(a.isSubclass("Ui.Color")){a=a.getCssHtml()}this.iconDrawing.style.fill=a}},setPath:function(a){if(this.path!=a){this.path=a;this.iconDrawing.setAttributeNS(null,"d",this.path,null)}},},{render:function(){this.iconDrawing=document.createElementNS(svgNS,"path");this.iconDrawing.style.fill=this.fill;this.iconDrawing.style.fillOpacity="1";this.iconDrawing.style.stroke="none";return this.iconDrawing},arrangeCore:function(b,a){var c=Math.min(b,a)/48;this.iconDrawing.setAttributeNS(null,"transform","scale( "+c.toFixed(4)+", "+c.toFixed(4)+" )")},},{icons:{},constructor:function(){this.register("check","m 9.1916229,24 7.0000001,-7 7,7 14,-14 7,7 -21,21 z");this.register("home","M 25.78125 8.4375 C 25.324787 8.4375 24.892151 8.63045 24.53125 8.96875 C 24.53125 8.96875 6.032579 23.87715 5.6875 24.21875 C 4.081261 25.55365 4.524131 25.86215 4.96875 26.46875 C 7.1319435 26.472745 6.9387918 26.465628 8.875 26.46875 L 8.875 38.40625 C 8.875 40.46895 10.593558 42.1875 12.65625 42.1875 L 37.3125 42.1875 C 39.375192 42.1875 41.09375 40.46895 41.09375 38.40625 L 41.09375 26.5 C 42.834133 26.49218 44.96875 26.46875 44.96875 26.46875 C 45.304525 25.79985 45.215875 24.96585 44.65625 24.40625 L 39.96875 20.3125 C 40.040347 20.078087 40.09375 19.817094 40.09375 19.5625 L 40.09375 11.875 C 40.09375 10.4883 38.949133 9.34375 37.5625 9.34375 L 33.25 9.34375 C 31.863368 9.34375 30.71875 10.4883 30.71875 11.875 L 30.71875 12.1875 L 27.03125 8.96875 C 26.681485 8.61895 26.237713 8.4375 25.78125 8.4375 z M 33.71875 12.34375 L 37.09375 12.34375 L 37.09375 17.78125 L 33.71875 14.8125 L 33.71875 12.34375 z M 12.875 26.46875 C 23.518938 26.483067 32.947599 26.505366 37.09375 26.5 L 37.09375 38.1875 L 12.875 38.1875 L 12.875 26.46875 z");this.register("search","M 16.5625 2.78125 C 9.268416 2.78125 3.3125 8.73725 3.3125 16.03125 C 3.3125 23.32535 9.268416 29.28125 16.5625 29.28125 C 19.232656 29.28125 21.727527 28.494751 23.8125 27.125 L 26.53125 29.84375 C 26.040794 31.243763 26.345911 32.877161 27.46875 34 L 36.96875 43.5 C 38.531721 45.062971 41.062029 45.062971 42.625 43.5 L 44.3125 41.8125 C 45.875471 40.249529 45.875471 37.750471 44.3125 36.1875 L 34.78125 26.65625 C 33.730308 25.605308 32.270922 25.293885 30.9375 25.65625 L 28 22.71875 C 29.155313 20.754051 29.8125 18.465809 29.8125 16.03125 C 29.8125 8.73725 23.856584 2.78125 16.5625 2.78125 z M 16.5625 6.78125 C 21.694823 6.78125 25.8125 10.89895 25.8125 16.03125 C 25.8125 21.16365 21.694823 25.28125 16.5625 25.28125 C 11.430177 25.28125 7.3125 21.16365 7.3125 16.03125 C 7.3125 10.89895 11.430177 6.78125 16.5625 6.78125 z");this.register("close","m 9,4 -5,5 15,15 -15,15 5,5 15,-15 15,15 5,-5 -15,-15 15,-15 -5,-5 -15,15 -15,-15 z");this.register("arrowleft","m 30,4 5,5 -15,15 15,15 -5,5 -20,-20 z");this.register("arrowright","m 18,4 -5,5 15,15 -15,15 5,5 20,-20 z");this.register("refresh","M 23.9375 8.65625 C 18.315047 8.5110846 12.782031 11.461344 9.78125 16.8125 C 5.4164779 24.596 8.033743 34.59995 15.59375 39.09375 C 23.153757 43.58765 32.885228 40.9086 37.25 33.125 L 33.3125 30.78125 C 30.176679 36.37325 23.306402 38.25985 17.875 35.03125 C 12.443598 31.80275 10.582928 24.7169 13.71875 19.125 C 16.854571 13.533 23.724848 11.6464 29.15625 14.875 C 31.524806 16.282891 33.334721 18.493178 34.21875 21.125 L 25.9375 18.5 L 24.78125 22.125 L 39.25 26.6875 L 43.8125 12.21875 L 40.1875 11.0625 L 37.9375 18.21875 C 36.578889 15.137923 34.328741 12.531134 31.4375 10.8125 C 29.074997 9.4081875 26.493161 8.7222343 23.9375 8.65625 z M 36.84375 21.78125 L 36.78125 21.9375 L 36.5 21.84375 L 36.84375 21.78125 z");this.register("deny","M 24.375 4.5625 C 13.844791 4.5625 5.3125 13.094791 5.3125 23.625 C 5.3125 34.155209 13.844791 42.6875 24.375 42.6875 C 34.905209 42.6875 43.4375 34.155209 43.4375 23.625 C 43.4375 13.094791 34.905209 4.5625 24.375 4.5625 z M 12.875 20.46875 L 36.375 20.46875 L 36.375 27.8125 L 12.875 27.8125 L 12.875 20.46875 z");this.register("warning","M 24.71875 4.4375 C 23.303716 4.4375 21.840759 5.2267 20.8125 6.9375 L 4.21875 34.59375 C 2.3252709 37.74415 3.3675561 42.27165 7.125 42.28125 L 42.34375 42.375 C 46.101193 42.385 45.807964 37.35645 44 34.15625 L 28.625 6.9375 C 27.64318 5.1996 26.133784 4.4375 24.71875 4.4375 z M 22.15625 13.25 L 27.46875 13.25 L 27.46875 20.125 C 27.46874 22.170821 27.369577 24.007046 27.15625 25.6875 C 26.942909 27.343595 26.663738 29.000155 26.34375 30.65625 L 23.25 30.65625 C 22.929998 29.000155 22.682075 27.343595 22.46875 25.6875 C 22.255413 24.007046 22.156245 22.170821 22.15625 20.125 L 22.15625 13.25 z M 24.8125 32.96875 C 26.596301 32.96875 28.03125 34.403699 28.03125 36.1875 C 28.03125 37.971301 26.596301 39.40625 24.8125 39.40625 C 23.028699 39.40625 21.59375 37.971301 21.59375 36.1875 C 21.59375 34.403699 23.028699 32.96875 24.8125 32.96875 z");this.register("trash","m 22.83704,5 c -2.219688,0 -4.069448,1.8498 -4.069448,4.0695 l 0,0.7683 -10.3016789,0 c -2.4744975,0 -4.5247706,2.0503 -4.5247706,4.5248 l 0,1.1383 c 0,2.4745 2.0502731,4.5248 4.5247706,4.5248 l 1.1098496,0 0,18.3552 c 0,2.5298 2.2334483,4.6101 4.9231783,4.6101 l 18.042167,0 c 2.68973,0 4.923178,-2.0803 4.923178,-4.6101 l 0,-18.3552 2.162783,0 c 2.474498,0 4.524771,-2.0503 4.524771,-4.5248 l 0,-1.1383 c 0,-2.4745 -2.050273,-4.5248 -4.524771,-4.5248 l -9.504864,0 0,-0.7683 c 0,-2.2197 -1.849759,-4.0695 -4.069447,-4.0695 l -3.215718,0 z m 0.512238,2.8743 1.96358,0 c 1.045729,0 1.906664,0.8325 1.906664,1.8782 l 0,3.6995 c 3.933365,0.01 7.770635,0.028 12.407547,0.028 0.519514,0 0.882188,0.3627 0.882188,0.8822 l 0,1.1383 c 0,0.5196 -0.362674,0.8822 -0.882188,0.8822 -2.402264,0.1282 -4.712702,0.1729 -5.037008,0.2846 l 0,21.0586 c 0,1.5373 -1.22319,2.7889 -2.760395,2.7889 l -16.53391,0 c -1.537205,0 -2.782608,-1.2516 -2.788852,-2.7889 l -0.08537,-21.2294 c -3.1146968,-0.069 -0.416025,0.056 -3.9556179,-0.1138 -0.5195134,0 -0.882188,-0.3626 -0.882188,-0.8822 l 0,-1.1383 c 0,-0.5195 0.3626746,-0.8822 0.882188,-0.8822 5.0671389,-0.025 9.0192139,-0.032 13.0051589,-0.028 l 0,-3.6995 c 0,-1.0457 0.832477,-1.8782 1.878206,-1.8782 z m -5.890739,14.1434 c -0.573322,0 -1.024476,0.4796 -1.024476,1.053 l 0,13.3751 c 0,0.5733 0.451154,1.0245 1.024476,1.0245 l 0.825273,0 c 0.573322,0 1.052934,-0.4512 1.052934,-1.0245 l 0,-13.3751 c 0,-0.5734 -0.479612,-1.053 -1.052934,-1.053 l -0.825273,0 z m 5.463874,0 c -0.573322,0 -1.024476,0.4796 -1.024476,1.053 l 0,13.3751 c 0,0.5733 0.451154,1.0245 1.024476,1.0245 l 0.825273,0 c 0.573321,0 1.052934,-0.4512 1.052934,-1.0245 l 0,-13.3751 c 0,-0.5734 -0.479613,-1.053 -1.052934,-1.053 l -0.825273,0 z m 5.463874,0 c -0.573322,0 -1.024476,0.4796 -1.024476,1.053 l 0,13.3751 c 0,0.5733 0.451154,1.0245 1.024476,1.0245 l 0.825273,0 c 0.573321,0 1.052934,-0.4512 1.052934,-1.0245 l 0,-13.3751 c 0,-0.5734 -0.479613,-1.053 -1.052934,-1.053 l -0.825273,0 z");this.register("new","M 10.15625 5.65625 L 10.15625 9.65625 L 6.15625 9.65625 L 6.15625 13.65625 L 10.15625 13.65625 L 10.15625 17.65625 L 14.15625 17.65625 L 14.15625 13.65625 L 18.15625 13.65625 L 18.15625 9.65625 L 14.15625 9.65625 L 14.15625 5.65625 L 10.15625 5.65625 z M 22.15625 9.65625 L 22.15625 13.65625 L 35.28125 13.65625 C 35.991645 13.65625 36.5 14.1645 36.5 14.875 L 36.5 36.28125 C 36.5 36.99165 35.991645 37.5 35.28125 37.5 L 15.375 37.5 C 14.664605 37.5 14.15625 36.99165 14.15625 36.28125 L 14.15625 21.78125 L 10.15625 21.78125 L 10.15625 36.28125 C 10.15625 39.13855 12.517793 41.5 15.375 41.5 L 35.28125 41.5 C 38.138457 41.5 40.5 39.13855 40.5 36.28125 L 40.5 14.875 C 40.5 12.0177 38.138457 9.65625 35.28125 9.65625 L 22.15625 9.65625 z");this.register("star","m 23.757651,5 c -0.895163,0.015 -1.74266,0.4185 -2.31531,0.9115 -0.572649,0.493 -0.946681,1.0773 -1.269993,1.663 -0.646625,1.1715 -1.083333,2.481 -1.483178,3.7912 -0.399846,1.3103 -0.765223,2.611 -1.141013,3.6092 -0.375791,0.9982 -0.863354,1.6089 -0.826872,1.5814 0.03648,-0.027 -0.685072,0.2726 -1.748242,0.3583 -1.06317,0.086 -2.414188,0.078 -3.783891,0.1006 -1.3697035,0.023 -2.7488538,0.081 -4.0533165,0.3792 -0.6522312,0.1491 -1.3169807,0.3473 -1.9488982,0.7617 -0.6319175,0.4143 -1.2532513,1.1176 -1.515172,1.9737 -0.2619206,0.8562 -0.1215574,1.7731 0.1703706,2.47 0.2919279,0.697 0.7110554,1.2299 1.168227,1.7184 0.9143429,0.977 2.0261479,1.7874 3.1486997,2.5726 1.1225519,0.7851 2.2542114,1.524 3.0874544,2.1899 0.833242,0.6658 1.270874,1.3422 1.256012,1.299 -0.01486,-0.043 0.0533,0.7481 -0.193748,1.7857 -0.247047,1.0376 -0.682895,2.3074 -1.084578,3.6171 -0.401682,1.3097 -0.782999,2.6265 -0.902518,3.9592 -0.05976,0.6664 -0.06144,1.3623 0.137342,2.0913 0.198782,0.729 0.677406,1.5266 1.410693,2.0402 0.733287,0.5137 1.633944,0.686 2.387015,0.6237 0.753071,-0.062 1.403865,-0.2966 2.009725,-0.5804 1.21172,-0.5677 2.294997,-1.3744 3.388618,-2.1994 1.093621,-0.825 2.163213,-1.6885 3.053976,-2.2752 0.890762,-0.5867 1.655952,-0.8101 1.610285,-0.8093 -0.04567,8e-4 0.735345,0.2228 1.645831,0.7784 0.910486,0.5555 2.002164,1.3506 3.123614,2.1374 1.121449,0.7867 2.247516,1.5467 3.478111,2.0722 0.615298,0.2627 1.273355,0.4794 2.028127,0.5156 0.754772,0.036 1.657048,-0.1634 2.372165,-0.7021 0.715116,-0.5387 1.156065,-1.3508 1.329561,-2.0863 0.173495,-0.7354 0.146882,-1.4277 0.06415,-2.0916 -0.165459,-1.3279 -0.585097,-2.6199 -1.031754,-3.915 -0.446657,-1.295 -0.909557,-2.5637 -1.192279,-3.5922 -0.282722,-1.0284 -0.280534,-1.8404 -0.293896,-1.7967 -0.01336,0.044 0.412582,-0.6301 1.22234,-1.3244 0.809758,-0.6942 1.934952,-1.4839 3.029729,-2.3074 1.094777,-0.8234 2.169097,-1.642 3.049166,-2.6499 0.440034,-0.504 0.844908,-1.0649 1.112601,-1.7715 0.267692,-0.7066 0.350663,-1.6199 0.05934,-2.4664 -0.291321,-0.8466 -0.925793,-1.5268 -1.571637,-1.919 -0.645845,-0.3923 -1.315122,-0.5827 -1.972111,-0.7092 -1.313979,-0.253 -2.684905,-0.2499 -4.054575,-0.2253 -1.36967,0.025 -2.710455,0.093 -3.775949,0.044 -1.065494,-0.049 -1.807185,-0.3328 -1.769776,-0.3066 0.03741,0.026 -0.491907,-0.5811 -0.901934,-1.5658 -0.410028,-0.9846 -0.807845,-2.2763 -1.252686,-3.5719 -0.444841,-1.2957 -0.916948,-2.588 -1.603632,-3.7364 -0.343341,-0.5743 -0.739843,-1.1242 -1.329171,-1.5972 -0.589329,-0.4729 -1.431866,-0.8609 -2.327028,-0.8454 z m 0.04936,4.3522 c 0.05431,0.074 0.08677,0.06 0.149451,0.1649 0.375374,0.6278 0.800845,1.7333 1.223209,2.9635 0.422363,1.2302 0.846512,2.5796 1.362005,3.8175 0.515492,1.2379 1.017518,2.4514 2.291932,3.3441 1.274414,0.8927 2.575612,0.9499 3.915164,1.0114 1.339553,0.062 2.761636,-0.01 4.062098,-0.033 1.300462,-0.023 2.481817,0.024 3.2001,0.1626 0.109478,0.021 0.11064,0.032 0.193553,0.056 -0.05034,0.069 -0.03632,0.075 -0.10848,0.1574 -0.481088,0.551 -1.414422,1.3188 -2.453881,2.1007 -1.039458,0.7818 -2.180578,1.6122 -3.198616,2.485 -1.018038,0.8728 -2.008492,1.7049 -2.463696,3.1928 -0.455204,1.4879 -0.117336,2.7405 0.238105,4.0335 0.355441,1.293 0.845322,2.6325 1.269409,3.8621 0.424088,1.2295 0.770322,2.3592 0.860769,3.0851 0.01369,0.1099 -0.0028,0.1157 4.2e-4,0.2015 -0.08154,-0.027 -0.09172,-0.013 -0.193553,-0.056 -0.672702,-0.2873 -1.662942,-0.9319 -2.727726,-1.6789 -1.064785,-0.7469 -2.217014,-1.5875 -3.361689,-2.286 -1.144675,-0.6985 -2.25533,-1.3689 -3.811076,-1.3421 -1.555745,0.027 -2.628887,0.7492 -3.748765,1.4868 -1.119878,0.7376 -2.232995,1.6052 -3.271356,2.3885 -1.038361,0.7833 -2.033963,1.4685 -2.696346,1.7788 -0.09936,0.046 -0.101178,0.031 -0.18122,0.061 1.62e-4,-0.086 -0.01038,-0.09 -4.2e-4,-0.2015 0.06534,-0.7285 0.345562,-1.8772 0.726948,-3.1207 0.381386,-1.2435 0.841916,-2.5908 1.152507,-3.8953 0.310591,-1.3045 0.61475,-2.5709 0.10845,-4.0422 -0.5063,-1.4713 -1.534069,-2.2887 -2.581632,-3.1259 -1.047564,-0.8371 -2.227509,-1.6172 -3.29334,-2.3627 -1.0658309,-0.7455 -2.0109424,-1.4596 -2.5107659,-1.9936 -0.083457,-0.089 -0.06133,-0.1166 -0.1172617,-0.1892 0.080022,-0.026 0.076516,-0.037 0.18122,-0.061 0.7130816,-0.163 1.9269849,-0.2149 3.2274786,-0.2365 1.300494,-0.022 2.709163,-0.014 4.045793,-0.1212 1.336631,-0.1077 2.631554,-0.2164 3.874389,-1.1526 1.242836,-0.9362 1.70468,-2.1508 2.177128,-3.4058 0.472448,-1.255 0.853548,-2.6111 1.233189,-3.8552 0.379642,-1.244 0.76455,-2.3964 1.118026,-3.0368 0.0519,-0.094 0.06183,-0.087 0.10848,-0.1574 z");this.register("exit","m 20.089945,9 0,21.7148 -1.697743,0 -2.29084,3.9589 0,1.3567 3.988583,0 0,6.4425 24.398557,0 -0.04449,-18.0228 -6.22011,0 -3.143419,-3.1434 -2.86911,4.9672 7.517512,13.026 -2.921005,0 -6.479593,-11.2319 -1.186195,0 -1.779294,6.6502 -9.756458,0 1.623605,-2.8024 5.819772,0 1.386367,-5.1896 3.640137,-6.2943 -4.574267,0 -1.586536,2.7505 -1.749639,-1.0157 2.483597,-4.2999 10.171627,0 3.721689,3.7291 5.849424,0 0.04449,0.01 -0.02966,-12.6033 -24.317006,0 z m 15.123992,1.6903 c 1.497414,0 2.70601,1.216 2.70601,2.7134 0,1.4974 -1.208596,2.7134 -2.70601,2.7134 -1.497413,0 -2.713422,-1.216 -2.713422,-2.7134 0,-1.4974 1.216009,-2.7134 2.713422,-2.7134 z m -25.7256143,6.0051 0,4.7967 -6.4721792,0.1186 0,5.0265 6.3535598,0 0,5.1526 7.6064777,-7.6065 -7.4878583,-7.4879 z");this.register("loading","M 24 2.5 C 22.08477 2.5 20.5 4.0848 20.5 6 C 20.5 7.9152 22.08477 9.5 24 9.5 C 25.91523 9.5 27.5 7.9152 27.5 6 C 27.5 4.0848 25.91523 2.5 24 2.5 z M 11.28125 7.78125 C 10.382381 7.78125 9.4896359 8.1354 8.8125 8.8125 C 7.4582279 10.1668 7.4582281 12.3957 8.8125 13.75 C 10.166772 15.1043 12.395728 15.1043 13.75 13.75 C 15.104272 12.3957 15.104272 10.1668 13.75 8.8125 C 13.072864 8.1354 12.180119 7.78125 11.28125 7.78125 z M 36.71875 7.78125 C 35.819881 7.78125 34.927136 8.1354 34.25 8.8125 C 32.895728 10.1668 32.895728 12.3957 34.25 13.75 C 35.604272 15.1043 37.833228 15.1043 39.1875 13.75 C 40.541772 12.3957 40.541772 10.1668 39.1875 8.8125 C 38.510364 8.1354 37.617619 7.78125 36.71875 7.78125 z M 6 20.5 C 4.08477 20.5 2.5 22.0848 2.5 24 C 2.5 25.9152 4.08477 27.5 6 27.5 C 7.91523 27.5 9.5 25.9152 9.5 24 C 9.5 22.0848 7.91523 20.5 6 20.5 z M 42 20.5 C 40.08477 20.5 38.5 22.0848 38.5 24 C 38.5 25.9152 40.08477 27.5 42 27.5 C 43.91523 27.5 45.5 25.9152 45.5 24 C 45.5 22.0848 43.91523 20.5 42 20.5 z M 11.28125 33.25 C 10.382381 33.25 9.4896359 33.5729 8.8125 34.25 C 7.4582279 35.6043 7.4582281 37.8332 8.8125 39.1875 C 10.166772 40.5418 12.395728 40.5418 13.75 39.1875 C 15.104272 37.8332 15.104272 35.6043 13.75 34.25 C 13.072864 33.5729 12.180119 33.25 11.28125 33.25 z M 36.71875 33.25 C 35.819881 33.25 34.927136 33.5729 34.25 34.25 C 32.895728 35.6043 32.895728 37.8332 34.25 39.1875 C 35.604272 40.5418 37.833228 40.5418 39.1875 39.1875 C 40.541772 37.8332 40.541772 35.6043 39.1875 34.25 C 38.510364 33.5729 37.617619 33.25 36.71875 33.25 z M 24 38.5 C 22.08477 38.5 20.5 40.0848 20.5 42 C 20.5 43.9152 22.08477 45.5 24 45.5 C 25.91523 45.5 27.5 43.9152 27.5 42 C 27.5 40.0848 25.91523 38.5 24 38.5 z");this.register("edit","m 8.9095805,3.1557733 -4.59375,4.59375 L 16.28125,20.09375 20.875,15.5 z M 19.517767,9.65625 l 4.027443,4 11.73604,0 c 0.710395,0 1.21875,0.50825 1.21875,1.21875 l 0,21.40625 C 36.5,36.99165 35.991645,37.5 35.28125,37.5 l -19.90625,0 c -0.710395,0 -1.21875,-0.50835 -1.21875,-1.21875 l 0,-14.5 -4,-4.15625 0,18.65625 c 0,2.8573 2.361543,5.21875 5.21875,5.21875 l 19.90625,0 C 38.138457,41.5 40.5,39.13855 40.5,36.28125 l 0,-21.40625 c 0,-2.8573 -2.361543,-5.21875 -5.21875,-5.21875 z m 1.700983,6.3125 -4.59375,4.59375 4.96875,2.5 c 0.144661,-0.521597 0.402425,-1.027425 0.8125,-1.4375 0.359131,-0.359131 0.800227,-0.625707 1.25,-0.78125 z M 23.75,21.1875 c 0,0 -0.491533,0.163286 -0.75,0.34375 -0.258467,0.180464 -0.564407,0.503889 -0.75,0.78125 -0.185651,0.277304 -0.375,0.84375 -0.375,0.84375 l 3.03125,1.125 z")},register:function(b,a){if(this.icons[b]!=undefined){throw ("Icon '"+b+"' is already registered. To change it, use override")}this.icons[b]=a},override:function(b,a){this.icons[b]=a},create:function(d,b,a,c){return new Ui.Icon({path:this.icons[d],width:(b!=undefined)?b:48,height:(a!=undefined)?a:48,fill:(c!=undefined)?c:"black"})},});Ui.Element.extend("Ui.Label",{text:"",orientation:"horizontal",fontSize:16,fontFamily:"Sans-serif",fontWeight:"normal",color:"black",labelDrawing:undefined,constructor:function(a){if(a.text!=undefined){this.setText(a.text)}if(a.fontSize!=undefined){this.setFontSize(a.fontSize)}if(a.fontFamily!=undefined){this.setFontFamily(a.fontFamily)}if(a.fontWeight!=undefined){this.setFontWeight(a.fontWeight)}if(a.color!=undefined){this.setColor(a.color)}if(a.orientation!=undefined){this.setOrientation(a.orientation)}},getText:function(){return this.text},setText:function(a){if(this.text!=a){this.text=a;this.labelDrawing.textContent=this.text;this.invalidateMeasure()}},setFontSize:function(a){if(this.fontSize!=a){this.fontSize=a;this.labelDrawing.style.fontSize=this.getFontSize()+"px";this.invalidateMeasure()}},getFontSize:function(){return this.fontSize},setFontFamily:function(a){if(this.fontFamily!=a){this.fontFamily=a;this.labelDrawing.style.fontFamily=this.getFontFamily();this.invalidateMeasure()}},getFontFamily:function(){return this.fontFamily},setFontWeight:function(a){if(this.fontWeight!=a){this.fontWeight=a;this.labelDrawing.style.fontWeight=this.getFontWeight();this.invalidateMeasure()}},getFontWeight:function(){return this.fontWeight},setColor:function(a){if(this.color!=a){this.color=a;var a=this.getColor();if(a.isSubclass("Ui.Color")){a=a.getCssRgba()}this.labelDrawing.style.color=a}},getColor:function(){return this.color},getOrientation:function(){return this.orientation},setOrientation:function(a){if(this.orientation!=a){this.orientation=a;this.invalidateMeasure()}},},{verticalAlign:"center",horizontalAlign:"center",render:function(){this.labelDrawing=document.createElementNS(htmlNS,"div");this.labelDrawing.style.whiteSpace="nowrap";this.labelDrawing.style.display="inline";this.labelDrawing.style.position="absolute";this.labelDrawing.style.left="0px";this.labelDrawing.style.top="0px";this.labelDrawing.style.fontSize=this.fontSize+"px";this.labelDrawing.style.fontFamily=this.fontFamily;this.labelDrawing.style.fontWeight=this.fontWeight;this.labelDrawing.style.color=this.color;if(navigator.isWebkit){this.labelDrawing.style.webkitUserSelect="none"}else{if(navigator.isGecko){this.labelDrawing.style.MozUserSelect="none"}else{if(navigator.isIE){this.labelDrawing.onselectstart=function(a){a.preventDefault()}}else{if(navigator.isOpera){this.labelDrawing.onmousedown=function(a){a.preventDefault()}}}}}this.labelDrawing.style.pointerEvents="none";return this.labelDrawing},measureCore:function(b,a){if(this.orientation=="vertical"){return{width:this.labelDrawing.offsetHeight,height:this.labelDrawing.offsetWidth}}else{return{width:this.labelDrawing.offsetWidth,height:this.labelDrawing.offsetHeight}}},arrangeCore:function(c,a){var b;if(this.orientation=="vertical"){b=Ui.Matrix.createTranslate(this.labelDrawing.offsetHeight,0);b.rotate(90)}else{b=new Ui.Matrix()}if(navigator.isIE){this.labelDrawing.style.msTransform=b.toString();this.labelDrawing.style.msTransformOrigin="0% 0%"}else{if(navigator.isGecko){this.labelDrawing.style.MozTransform="matrix("+b.svgMatrix.a.toFixed(4)+", "+b.svgMatrix.b.toFixed(4)+", "+b.svgMatrix.c.toFixed(4)+", "+b.svgMatrix.d.toFixed(4)+", "+b.svgMatrix.e.toFixed(0)+"px, "+b.svgMatrix.f.toFixed(0)+"px)";this.labelDrawing.style.MozTransformOrigin="0% 0%"}else{if(navigator.isWebkit){this.labelDrawing.style.webkitTransform=b.toString();this.labelDrawing.style.webkitTransformOrigin="0% 0%"}else{if(navigator.isOpera){this.labelDrawing.style.OTransform=b.toString();this.labelDrawing.style.OTransformOrigin="0% 0%"}}}}},});Ui.SVGElement.extend("Ui.Text",{text:"",measureDrawing:undefined,textDrawing:undefined,line:undefined,word:undefined,flowRender:false,offsetX:0,offsetY:0,spaceWidth:undefined,maxWidth:undefined,lineHeight:undefined,fontSize:16,fontFamily:"Sans-serif",fontWeight:"normal",color:"black",constructor:function(a){if(a.text!=undefined){this.setText(a.text)}if(a.fontSize!=undefined){this.setFontSize(a.fontSize)}if(a.fontFamily!=undefined){this.setFamilySize(a.fontFamily)}if(a.fontWeight!=undefined){this.setFontWeight(a.fontWeight)}if(a.color!=undefined){this.setColor(a.color)}},getText:function(){return this.text},setText:function(a){if(this.text!=a){this.text=a;this.invalidateMeasure()}},setFontSize:function(a){if(this.fontSize!=a){this.fontSize=a;this.textDrawing.setAttributeNS(null,"font-size",this.fontSize);this.measureDrawing.setAttributeNS(null,"font-size",this.fontSize);this.invalidateMeasure()}},getFontSize:function(){return this.fontSize},setFontFamily:function(a){if(this.fontFamily!=a){this.fontFamily=a;this.textDrawing.setAttributeNS(null,"font-family",this.fontFamily);this.measureDrawing.setAttributeNS(null,"font-family",this.fontFamily);this.invalidateMeasure()}},getFontFamily:function(){return this.fontFamily},setFontWeight:function(a){if(this.fontWeight!=a){this.fontWeight=a;this.textDrawing.setAttributeNS(null,"font-weight",this.fontWeight);this.measureDrawing.setAttributeNS(null,"font-weight",this.fontWeight);this.invalidateMeasure()}},getFontWeight:function(){return this.fontWeight},setColor:function(a){if(this.color!=a){this.color=a;this.textDrawing.setAttributeNS(null,"fill",this.color,null)}},getColor:function(){return this.color},addWord:function(c){var a=this.measureText(c);if(a>this.maxWidth){this.maxWidth=a}var b=this.offsetX+a;if(this.line!=""){b+=this.spaceWidth}if(b>this.maxWidth){this.flushLine(this.offsetX)}if(this.line!=""){this.line+=" ";this.offsetX+=this.spaceWidth}this.line+=c;this.offsetX+=a;c=""},newLine:function(){this.flushLine(this.offsetX)},flushLine:function(a){if(this.flowRender&&(this.line!="")){var b=document.createElementNS(svgNS,"tspan");b.setAttributeNS(null,"x",0);b.setAttributeNS(null,"y",this.offsetY);b.textContent=this.line;this.textDrawing.appendChild(b)}this.offsetX=0;this.offsetY+=this.lineHeight;this.line=""},measureText:function(d){this.measureDrawing.textContent=d;var a;if(navigator.isGecko){var c=this.measureDrawing.getBBox();a=c.width}else{try{a=this.measureDrawing.getComputedTextLength()}catch(b){var c=this.measureDrawing.getBBox();a=c.width}}return a},updateFlow:function(d,c){this.flowRender=c;this.maxWidth=d;this.lineHeight=this.getFontSize();this.offsetX=0;this.offsetY=this.lineHeight;this.line="";this.spaceWidth=undefined;var a=0;var e="";var b=0;this.spaceWidth=this.measureText("x");for(b=0;b<this.text.length;b++){if((this.text[b]==" ")||(this.text[b]=="\n")){if(e!=""){this.addWord(e);e=""}if(this.text[b]=="\n"){this.newLine()}}else{e+=this.text[b]}}if(e!=""){this.addWord(e)}if(this.line!=""){this.lineHeight*=0.33;this.newLine()}},},{render:function(){var a=document.createElementNS(svgNS,"g");this.measureDrawing=document.createElementNS(svgNS,"text");this.measureDrawing.setAttributeNS(null,"visibility","hidden");a.appendChild(this.measureDrawing);this.textDrawing=document.createElementNS(svgNS,"text");if(navigator.isWebkit){this.textDrawing.style.webkitUserSelect="none"}else{if(navigator.isGecko){this.textDrawing.style.MozUserSelect="none"}else{if(navigator.isIE){this.textDrawing.onselectstart=function(b){b.preventDefault()}}else{if(navigator.isOpera){this.textDrawing.onmousedown=function(b){b.preventDefault()}}}}}this.textDrawing.style.pointerEvents="none";this.textDrawing.setAttributeNS(null,"font-family",this.fontFamily);this.textDrawing.setAttributeNS(null,"font-weight",this.fontWeight);this.textDrawing.setAttributeNS(null,"font-size",this.fontSize);this.textDrawing.setAttributeNS(null,"fill",this.color,null);this.measureDrawing.setAttributeNS(null,"font-family",this.fontFamily);this.measureDrawing.setAttributeNS(null,"font-weight",this.fontWeight);this.measureDrawing.setAttributeNS(null,"font-size",this.fontSize);a.appendChild(this.textDrawing);return a},measureCore:function(b,a){if(this.getWidth()!=undefined){b=this.getWidth()}this.updateFlow(b,false);return{width:this.maxWidth,height:this.offsetY}},arrangeCore:function(b,a){while(this.textDrawing.hasChildNodes()){this.textDrawing.removeChild(this.textDrawing.firstChild)}this.updateFlow(b,true)},});Ui.Element.extend("Ui.Html",{htmlDrawing:undefined,constructor:function(a){if(a.html!=undefined){this.setHtml(a.html)}},getHtml:function(){return this.htmlDrawing.innerHTML},setHtml:function(a){this.htmlDrawing.innerHTML=a},},{render:function(){this.htmlDrawing=document.createElementNS(htmlNS,"div");this.htmlDrawing.style.display="inline";if(navigator.isWebkit){this.htmlDrawing.style.webkitUserSelect="none"}else{if(navigator.isGecko){this.htmlDrawing.style.MozUserSelect="none"}else{if(navigator.isIE){this.htmlDrawing.onselectstart=function(a){a.preventDefault()}}else{if(navigator.isOpera){this.htmlDrawing.onmousedown=function(a){a.preventDefault()}}}}}this.htmlDrawing.style.pointerEvents="none";return this.htmlDrawing},arrangeCore:function(b,a){this.htmlDrawing.style.width=b+"px";this.htmlDrawing.style.height=a+"px"},});Ui.Element.extend("Ui.Image",{src:undefined,loaddone:false,naturalWidth:undefined,naturalHeight:undefined,constructor:function(a){if(a.src!=undefined){this.setSrc(a.src)}this.connect(this.imageDrawing,"load",this.onImageLoad);this.addEvents("ready")},getSrc:function(){return this.src},setSrc:function(a){this.loaddone=false;this.naturalWidth=undefined;this.naturalHeight=undefined;this.src=a;this.imageDrawing.setAttributeNS(null,"src",a)},getNaturalWidth:function(){return this.naturalWidth},getNaturalHeight:function(){return this.naturalHeight},getIsReady:function(){return this.loaddone},onImageLoad:function(a){this.loaddone=true;if((a.target.naturalWidth!=undefined)&&(a.target.naturalHeight!=undefined)){this.naturalWidth=a.target.naturalWidth;this.naturalHeight=a.target.naturalHeight}else{this.imageDrawing.style.removeProperty("width");this.imageDrawing.style.removeProperty("height");this.naturalWidth=a.target.width;this.naturalHeight=a.target.height}this.fireEvent("ready",this);this.invalidateMeasure()},},{render:function(){this.imageDrawing=document.createElementNS(htmlNS,"img");this.imageDrawing.style.width="0px";this.imageDrawing.style.height="0px";this.imageDrawing.setAttributeNS(null,"draggable",false);return this.imageDrawing},measureCore:function(d,a){if(!this.loaddone){return{width:0,height:0}}var c;if(this.getWidth()==undefined){if(this.getHeight()==undefined){c={width:this.naturalWidth,height:this.naturalHeight}}else{var b=this.getHeight()-(this.getMarginTop()+this.getMarginBottom());c={width:(this.naturalWidth*b)/this.naturalHeight,height:b}}}else{if(this.getHeight()==undefined){var e=this.getWidth()-(this.getMarginLeft()+this.getMarginRight());c={width:e,height:(this.naturalHeight*e)/this.naturalWidth}}else{c={width:0,height:0}}}return c},arrangeCore:function(b,a){this.imageDrawing.style.width=b+"px";this.imageDrawing.style.height=a+"px"},});Ui.Element.extend("Ui.Audio",{src:undefined,oggSrc:undefined,mp3Src:undefined,wavSrc:undefined,loaddone:false,audioDrawing:undefined,playing:false,paused:false,constructor:function(a){if((a.oggSrc!=undefined)||(a.mp3Src!=undefined)||(a.wavSrc!=undefined)){if((a.oggSrc!=undefined)&&(Ui.Audio.supportOgg)){this.setSrc(a.oggSrc)}else{if((a.mp3Src!=undefined)&&(Ui.Audio.supportMp3)){this.setSrc(a.mp3Src)}else{if((a.wavSrc!=undefined)&&(Ui.Audio.supportWav)){this.setSrc(a.wavSrc)}}}}else{if(a.src!=undefined){this.setSrc(a.src)}}if(a.volume!=undefined){this.setVolume(a.volume)}this.addEvents("ready","ended","timeupdate")},setSrc:function(a){this.loaddone=false;this.src=a;if(Ui.Audio.htmlAudio){this.audioDrawing.setAttributeNS(null,"src",a)}},play:function(){if(Ui.Audio.htmlAudio){try{this.audioDrawing.pause();this.audioDrawing.currentTime=0}catch(a){}this.audioDrawing.play()}this.playing=true;this.paused=false},pause:function(){if(!this.playing||this.paused){return}this.paused=true;if(Ui.Audio.htmlAudio){this.audioDrawing.pause()}},stop:function(){if(!this.playing){return}if(!this.paused){this.audioDrawing.pause()}this.onEnded()},resume:function(){if(!this.playing||!this.paused){return}this.paused=false;if(Ui.Audio.htmlAudio){this.audioDrawing.play()}},setVolume:function(a){if(Ui.Audio.htmlAudio){this.audioDrawing.volume=a}},getVolume:function(){if(Ui.Audio.htmlAudio){return this.audioDrawing.volume}return 1},getDuration:function(){return this.audioDrawing.duration},onReady:function(){this.fireEvent("ready")},onTimeupdate:function(){this.fireEvent("timeupdate",this.audioDrawing.currentTime)},onEnded:function(){this.playing=false;this.fireEvent("ended")},},{verticalAlign:"top",horizontalAlign:"left",render:function(){var a;if(Ui.Audio.htmlAudio){this.audioDrawing=document.createElementNS(htmlNS,"audio");this.audioDrawing.style.display="none";this.connect(this.audioDrawing,"canplaythrough",this.onReady);this.connect(this.audioDrawing,"ended",this.onEnded);this.connect(this.audioDrawing,"timeupdate",this.onTimeupdate);this.audioDrawing.setAttributeNS(null,"preload","auto");this.audioDrawing.load();a=this.audioDrawing}return a},});Ui.Audio.htmlAudio=false;Ui.Audio.flashAudio=false;Ui.Audio.supportOgg=false;Ui.Audio.supportMp3=false;Ui.Audio.supportWav=false;Ui.Audio.audioTest=document.createElementNS(htmlNS,"audio");if(Ui.Audio.audioTest.play!=undefined){Ui.Audio.htmlAudio=true;Ui.Audio.supportWav=!!Ui.Audio.audioTest.canPlayType&&""!=Ui.Audio.audioTest.canPlayType("audio/wav");Ui.Audio.supportMp3=!!Ui.Audio.audioTest.canPlayType&&""!=Ui.Audio.audioTest.canPlayType("audio/mpeg");Ui.Audio.supportOgg=!!Ui.Audio.audioTest.canPlayType&&""!=Ui.Audio.audioTest.canPlayType('audio/ogg; codecs="vorbis"')}Ui.Audio.audioTest=undefined;Ui.Element.extend("Ui.Video",{src:undefined,oggSrc:undefined,mp3Src:undefined,webmSrc:undefined,loaddone:false,videoDrawing:undefined,playing:false,paused:false,constructor:function(a){if((a.oggSrc!=undefined)||(a.mp4Src!=undefined)||(a.webmSrc!=undefined)){if((a.oggSrc!=undefined)&&(Ui.Video.supportOgg)){this.setSrc(a.oggSrc)}else{if((a.mp4Src!=undefined)&&(Ui.Video.supportMp4)){this.setSrc(a.mp4Src)}else{if((a.webmSrc!=undefined)&&(Ui.Video.supportWebm)){this.setSrc(a.webmSrc)}}}}else{if(a.src!=undefined){this.setSrc(a.src)}}if(a.volume!=undefined){this.setVolume(a.volume)}this.addEvents("ready","ended","timeupdate")},setSrc:function(a){this.loaddone=false;this.src=a;if(Ui.Video.htmlVideo){this.videoDrawing.setAttributeNS(null,"src",a)}},play:function(){if(Ui.Video.htmlVideo){try{this.videoDrawing.pause();this.videoDrawing.currentTime=0}catch(a){}this.videoDrawing.play()}this.playing=true;this.paused=false},pause:function(){if(!this.playing||this.paused){return}this.paused=true;if(Ui.Video.htmlVideo){this.videoDrawing.pause()}},stop:function(){if(!this.playing){return}if(!this.paused){if(Ui.Video.htmlVideo){this.videoDrawing.pause();this.videoDrawing.currentTime=0}}this.onEnded()},resume:function(){if(!this.playing||!this.paused){return}this.paused=false;if(Ui.Video.htmlVideo){this.videoDrawing.play()}},setVolume:function(a){if(Ui.Video.htmlVideo){this.videoDrawing.volume=a}},getVolume:function(){if(Ui.Video.htmlVideo){return this.videoDrawing.volume}return 1},getDuration:function(){return this.videoDrawing.duration},onReady:function(){this.fireEvent("ready")},onTimeupdate:function(){this.fireEvent("timeupdate",this.videoDrawing.currentTime)},onEnded:function(){this.playing=false;this.fireEvent("ended")},},{render:function(){var a;if(Ui.Video.htmlVideo){this.videoDrawing=document.createElementNS(htmlNS,"video");this.connect(this.videoDrawing,"canplaythrough",this.onReady);this.connect(this.videoDrawing,"ended",this.onEnded);this.connect(this.videoDrawing,"timeupdate",this.onTimeupdate);this.videoDrawing.setAttributeNS(null,"preload","auto");this.videoDrawing.load();this.videoDrawing.style.position="absolute";this.videoDrawing.style.left="0px";this.videoDrawing.style.top="0px";a=this.videoDrawing}return a},arrangeCore:function(b,a){if(Ui.Video.htmlVideo){this.videoDrawing.setAttributeNS(null,"width",b);this.videoDrawing.setAttributeNS(null,"height",a)}},});Ui.Video.htmlVideo=false;Ui.Video.flashVideo=false;Ui.Video.supportOgg=false;Ui.Video.supportMp4=false;Ui.Video.supportWebm=false;Ui.Video.videoTest=document.createElementNS(htmlNS,"video");if(Ui.Video.videoTest.play!=undefined){Ui.Video.htmlVideo=true;Ui.Video.supportMp4=!!Ui.Video.videoTest.canPlayType&&""!=Ui.Video.videoTest.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');Ui.Video.supportOgg=!!Ui.Video.videoTest.canPlayType&&""!=Ui.Video.videoTest.canPlayType('video/ogg; codecs="theora, vorbis"');Ui.Video.supportWebm=!!Ui.Video.videoTest.canPlayType&&""!=Ui.Video.videoTest.canPlayType('video/webm; codecs="vp8, vorbis"')}Ui.Video.videoTest=undefined;Ui.LBox.extend("Ui.Pressable",{isDown:false,constructor:function(a){this.getDrawing().style.cursor="pointer";this.setFocusable(true);this.setRole("button");this.addEvents("press","down","up");this.connect(this.getDrawing(),"mousedown",this.onMouseDown);this.connect(this.getDrawing(),"touchstart",this.onTouchStart);this.connect(this.getDrawing(),"touchmove",this.onTouchMove);this.connect(this.getDrawing(),"touchend",this.onTouchEnd);this.connect(this,"keydown",this.onKeyDown)},onMouseDown:function(a){if((a.button!=0)||this.getIsDisabled()){return}a.preventDefault();a.stopPropagation();this.mouseStartX=a.screenX;this.mouseStartY=a.screenY;this.connect(window,"mousemove",this.onMouseMove,true);this.connect(window,"mouseup",this.onMouseUp,true);this.onDown()},onMouseMove:function(d){var b=d.screenX-this.mouseStartX;var a=d.screenY-this.mouseStartY;var e=Math.sqrt(b*b+a*a);d.preventDefault();d.stopPropagation();if(e>10){this.onUp();this.disconnect(this.getDrawing(),"mousedown",this.onMouseDown);var c=document.createEvent("MouseEvents");c.initMouseEvent("mousedown",true,true,window,1,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,0,d.target);d.target.dispatchEvent(c);this.connect(this.getDrawing(),"mousedown",this.onMouseDown)}},getIsDown:function(){return this.isDown},onMouseUp:function(a){if(!this.isDown){return}a.preventDefault();a.stopPropagation();if(a.button==0){this.onUp();this.fireEvent("press",this)}},onTouchStart:function(a){if(this.getIsDisabled()){return}if(this.isDown){this.onUp();return}if(a.targetTouches.length!=1){return}a.preventDefault();a.stopPropagation();this.touchStartX=a.targetTouches[0].screenX;this.touchStartY=a.targetTouches[0].screenY;this.onDown()},onTouchMove:function(d){if(!this.isDown){return}var c=d.targetTouches[0].screenX-this.touchStartX;var a=d.targetTouches[0].screenY-this.touchStartY;var e=Math.sqrt(c*c+a*a);if(e>10){this.onUp();this.disconnect(this.getDrawing(),"touchstart",this.onTouchStart);var b=document.createEvent("TouchEvent");b.initTouchEvent("touchstart",true,true,window,0,0,0,0,0,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.touches,d.targetTouches,d.changedTouches,d.scale,d.rotation);d.target.dispatchEvent(b);this.connect(this.getDrawing(),"touchstart",this.onTouchStart)}d.preventDefault();d.stopPropagation()},onTouchEnd:function(a){if(!this.isDown){return}a.preventDefault();a.stopPropagation();this.onUp();this.fireEvent("press",this)},onKeyDown:function(a,b){if((b==13)&&this.getIsDisabled()){this.fireEvent("press",this)}},onDown:function(){this.isDown=true;this.focus();this.fireEvent("down",this)},onUp:function(){this.disconnect(window,"mousemove",this.onMouseMove);this.disconnect(window,"mouseup",this.onMouseUp);this.isDown=false;this.fireEvent("up",this)},});Ui.LBox.extend("Ui.Togglable",{isDown:false,isToggled:false,constructor:function(a){this.getDrawing().style.cursor="pointer";this.setFocusable(true);this.setRole("button");this.addEvents("down","up","toggle","untoggle");this.connect(this.getDrawing(),"mousedown",this.onMouseDown);this.connect(this.getDrawing(),"touchstart",this.onTouchStart);this.connect(this.getDrawing(),"touchmove",this.onTouchMove);this.connect(this.getDrawing(),"touchend",this.onTouchEnd);this.connect(this,"keydown",this.onKeyDown)},onMouseDown:function(a){if((a.button!=0)||this.getIsDisabled()){return}a.preventDefault();a.stopPropagation();this.mouseStartX=a.screenX;this.mouseStartY=a.screenY;this.connect(window,"mousemove",this.onMouseMove,true);this.connect(window,"mouseup",this.onMouseUp,true);this.onDown()},onMouseMove:function(d){var b=d.screenX-this.mouseStartX;var a=d.screenY-this.mouseStartY;var e=Math.sqrt(b*b+a*a);d.preventDefault();d.stopPropagation();if(e>10){this.onUp();this.disconnect(this.getDrawing(),"mousedown",this.onMouseDown);var c=document.createEvent("MouseEvents");c.initMouseEvent("mousedown",true,true,window,1,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,0,d.target);d.target.dispatchEvent(c);this.connect(this.getDrawing(),"mousedown",this.onMouseDown)}},getIsDown:function(){return this.isDown},getIsToggled:function(){return this.isToggled},onMouseUp:function(a){if(!this.isDown){return}a.preventDefault();a.stopPropagation();if(a.button==0){this.onUp();if(!this.isToggled){this.onToggle()}else{this.onUntoggle()}}},onTouchStart:function(a){if(this.getIsDisabled()){return}if(this.isDown){this.onUp();return}if(a.targetTouches.length!=1){return}a.preventDefault();a.stopPropagation();this.touchStartX=a.targetTouches[0].screenX;this.touchStartY=a.targetTouches[0].screenY;this.onDown()},onTouchMove:function(d){if(!this.isDown){return}var c=d.targetTouches[0].screenX-this.touchStartX;var a=d.targetTouches[0].screenY-this.touchStartY;var e=Math.sqrt(c*c+a*a);if(e>10){this.onUp();this.disconnect(this.getDrawing(),"touchstart",this.onTouchStart);var b=document.createEvent("TouchEvent");b.initTouchEvent("touchstart",true,true,window,0,0,0,0,0,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.touches,d.targetTouches,d.changedTouches,d.scale,d.rotation);d.target.dispatchEvent(b);this.connect(this.getDrawing(),"touchstart",this.onTouchStart)}d.preventDefault();d.stopPropagation()},onTouchEnd:function(a){if(!this.isDown){return}a.preventDefault();a.stopPropagation();this.onUp();if(!this.isToggled){this.onToggle()}else{this.onUntoggle()}},onKeyDown:function(a,b){if((b==13)&&this.getIsDisabled()){if(!this.isToggled){this.onToggle()}else{this.onUntoggle()}}},onDown:function(){this.isDown=true;this.focus();this.fireEvent("down",this)},onUp:function(){this.disconnect(window,"mousemove",this.onMouseMove);this.disconnect(window,"mouseup",this.onMouseUp);this.isDown=false;this.fireEvent("up",this)},onToggle:function(){if(!this.isToggled){this.isToggled=true;this.fireEvent("toggle",this)}},onUntoggle:function(){if(this.isToggled){this.isToggled=false;this.fireEvent("untoggle",this)}},toggle:function(){this.onToggle()},untoggle:function(){this.onUntoggle()},});Ui.LBox.extend("Ui.Selectable",{isDown:false,isSelected:false,lastTime:undefined,button:undefined,menuTimer:undefined,menuPosX:undefined,menuPosY:undefined,constructor:function(a){this.setFocusable(true);this.addEvents("down","up","select","unselect","activate","menu");this.connect(this.getDrawing(),"mousedown",this.onMouseDown);this.connect(this.getDrawing(),"touchstart",this.onTouchStart);this.connect(this.getDrawing(),"touchmove",this.onTouchMove);this.connect(this.getDrawing(),"touchend",this.onTouchEnd)},onMouseDown:function(a){if((a.button!=0)&&(a.button!=2)){return}this.button=a.button;a.preventDefault();a.stopPropagation();this.mouseStartX=a.screenX;this.mouseStartY=a.screenY;this.connect(window,"mousemove",this.onMouseMove,true);this.connect(window,"mouseup",this.onMouseUp,true);this.onDown()},onMouseMove:function(d){var b=d.screenX-this.mouseStartX;var a=d.screenY-this.mouseStartY;var e=Math.sqrt(b*b+a*a);if(e>10){this.disconnect(window,"mousemove",this.onMouseMove);this.disconnect(window,"mouseup",this.onMouseUp);this.disconnect(this.getDrawing(),"mousedown",this.onMouseDown);this.onUp();var c=document.createEvent("MouseEvents");c.initMouseEvent("mousedown",true,true,window,1,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,0,d.target);d.target.dispatchEvent(c);this.connect(this.getDrawing(),"mousedown",this.onMouseDown)}d.preventDefault();d.stopPropagation()},onMouseUp:function(b){if(!this.isDown){return}b.preventDefault();b.stopPropagation();if(this.button!=b.button){return}this.disconnect(window,"mousemove",this.onMouseMove);this.disconnect(window,"mouseup",this.onMouseUp);this.onUp();if(b.button==0){var a=(new Date().getTime())/1000;if((this.isSelected)&&(this.lastTime!=undefined)&&(a-this.lastTime<0.25)){this.fireEvent("activate",this)}this.lastTime=a;this.onSelect()}else{if(b.button==2){this.fireEvent("menu",this,b.clientX,b.clientY)}}},onTouchStart:function(a){if(this.isDown){return}if(a.targetTouches.length!=1){return}a.preventDefault();a.stopPropagation();this.touchStartX=a.targetTouches[0].screenX;this.touchStartY=a.targetTouches[0].screenY;this.onDown();if(this.menuTimer!=undefined){this.menuTimer.abort()}this.menuTimer=new Core.DelayedTask({delay:0.5,scope:this,callback:this.onMenuTimer});this.menuPosX=a.targetTouches[0].clientX;this.menuPosY=a.targetTouches[0].clientY},onTouchMove:function(d){if(!this.isDown){return}var c=d.targetTouches[0].screenX-this.touchStartX;var a=d.targetTouches[0].screenY-this.touchStartY;var e=Math.sqrt(c*c+a*a);if(e>10){this.onUp();if(this.menuTimer!=undefined){this.menuTimer.abort();this.menuTimer=undefined}this.disconnect(this.getDrawing(),"touchstart",this.onTouchStart);var b=document.createEvent("TouchEvent");b.initTouchEvent("touchstart",true,true,window,0,0,0,0,0,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.touches,d.targetTouches,d.changedTouches,d.scale,d.rotation);d.target.dispatchEvent(b);this.connect(this.getDrawing(),"touchstart",this.onTouchStart)}d.preventDefault();d.stopPropagation()},onTouchEnd:function(b){if(!this.isDown){return}this.onUp();b.preventDefault();b.stopPropagation();if(this.menuTimer!=undefined){this.menuTimer.abort();this.menuTimer=undefined;var a=(new Date().getTime())/1000;if((this.isSelected)&&(this.lastTime!=undefined)&&(a-this.lastTime<0.25)){this.fireEvent("activate",this)}this.lastTime=a;this.onSelect()}},onMenuTimer:function(){this.fireEvent("menu",this,this.menuPosX,this.menuPosY);this.menuTimer=undefined},getIsSelected:function(){return this.isSelected},select:function(){this.onSelect()},unselect:function(){this.onUnselect()},onDown:function(){if(!this.isDown){this.isDown=true;this.fireEvent("down",this)}},onUp:function(){if(this.isDown){this.isDown=false;this.fireEvent("up",this)}},onSelect:function(){if(!this.isSelected){this.isSelected=true;this.fireEvent("select",this)}},onUnselect:function(){if(this.isSelected){this.isSelected=false;this.fireEvent("unselect",this)}},},{});Ui.LBox.extend("Ui.Downloadable",{content:undefined,link:undefined,constructor:function(a){if(a.src!=undefined){this.setSrc(a.src)}this.getDrawing().style.cursor="pointer";this.setFocusable(true);this.setRole("button");this.connect(this.getDrawing(),"click",this.onClick);this.addEvents("download")},setSrc:function(a){this.getDrawing().setAttributeNS(null,"href",a)},setContent:function(a){if(this.content!=a){if(this.content!=undefined){this.remove(this.content)}if(a!=undefined){this.append(a)}this.content=a}},onClick:function(a){this.fireEvent("download",this)},},{renderDrawing:function(){var a=document.createElementNS(htmlNS,"a");a.style.display="block";a.style.textDecoration="none";return a},});Ui.LBox.extend("Ui.Movable",{moveHorizontal:true,moveVertical:true,mouseStart:undefined,contentBox:undefined,content:undefined,posX:0,posY:0,isMoving:false,hasMoved:false,measureSpeedTimer:undefined,speedX:0,speedY:0,speedComputed:false,lastPosX:undefined,lastPosY:undefined,lastTime:undefined,inertiaClock:undefined,inertia:false,touchId:undefined,touchStart:undefined,constructor:function(a){if(a.moveHorizontal!=undefined){this.setMoveHorizontal(a.moveHorizontal)}if(a.moveVertical!=undefined){this.setMoveVertical(a.moveVertical)}if(a.inertia!=undefined){this.setInertia(a.inertia)}this.contentBox=new Ui.LBox();this.appendChild(this.contentBox);this.contentBox.getDrawing().style.cursor="move";this.addEvents("move");this.connect(this.contentBox.getDrawing(),"mousedown",this.onMouseDown);this.connect(this.contentBox.getDrawing(),"touchstart",this.onTouchStart);this.connect(this.contentBox.getDrawing(),"touchmove",this.onTouchMove);this.connect(this.contentBox.getDrawing(),"touchend",this.onTouchEnd)},getInertia:function(){return this.inertia},setInertia:function(a){this.inertia=a},getMoveHorizontal:function(){return this.moveHorizontal},setMoveHorizontal:function(a){this.moveHorizontal=a},getMoveVertical:function(){return this.moveVertical},setMoveVertical:function(a){this.moveVertical=a},setContent:function(a){if(a!=this.content){if(this.content!=undefined){this.contentBox.removeChild(this.content)}this.content=a;if(this.content!=undefined){this.contentBox.appendChild(this.content)}}},setPosition:function(a,b){if(a!=undefined){this.posX=a}if(b!=undefined){this.posY=b}this.contentBox.setTransform(Ui.Matrix.createTranslate(this.posX,this.posY))},getPositionX:function(){return this.posX},getPositionY:function(){return this.posY},onMouseDown:function(a){if(a.button!=0){return}a.preventDefault();a.stopPropagation();this.connect(window,"mouseup",this.onMouseUp,true);this.connect(window,"mousemove",this.onMouseMove,true);this.mouseStart=this.pointFromWindow({x:a.clientX,y:a.clientY});this.startPosX=this.posX;this.startPosY=this.posY;if(this.inertia){this.startComputeInertia()}},onMouseMove:function(d){d.preventDefault();d.stopPropagation();var b=this.pointFromWindow({x:d.clientX,y:d.clientY});var c=b.x-this.mouseStart.x;if(!this.moveHorizontal){c=0}var a=b.y-this.mouseStart.y;if(!this.moveVertical){a=0}this.setPosition(this.startPosX+c,this.startPosY+a);this.fireEvent("move",this)},onMouseUp:function(a){a.preventDefault();a.stopPropagation();if(a.button!=0){return}this.disconnect(window,"mousemove",this.onMouseMove);this.disconnect(window,"mouseup",this.onMouseUp);if(this.measureSpeedTimer!=undefined){this.stopComputeInertia();this.startInertia()}},onTouchStart:function(a){if(a.targetTouches.length!=1){return}if(this.isMoving){return}this.touchId=a.targetTouches[0].identifier;this.isMoving=true;a.preventDefault();a.stopPropagation();this.stopInertia();this.touchStart=this.pointFromWindow({x:a.targetTouches[0].clientX,y:a.targetTouches[0].clientY});this.startPosX=this.posX;this.startPosY=this.posY;if(this.inertia){this.startComputeInertia()}},onTouchMove:function(d){if(!this.isMoving){return}if(d.targetTouches[0].identifier!=this.touchId){return}d.preventDefault();d.stopPropagation();var c=this.pointFromWindow({x:d.targetTouches[0].clientX,y:d.targetTouches[0].clientY});var b=c.x-this.touchStart.x;if(!this.moveHorizontal){b=0}var a=c.y-this.touchStart.y;if(!this.moveVertical){a=0}posX=this.startPosX+b;posY=this.startPosY+a;this.setPosition(posX,posY);this.hasMoved=true;this.fireEvent("move",this)},onTouchEnd:function(a){if(!this.isMoving){return}a.preventDefault();a.stopPropagation();this.isMoving=false;if(this.measureSpeedTimer!=undefined){this.stopComputeInertia();this.startInertia()}},measureSpeed:function(){if(!this.hasMoved){return}var d=(new Date().getTime())/1000;var a=d-this.lastTime;if(a<0.025){return}var c=this.posX-this.lastPosX;var b=this.posY-this.lastPosY;this.speedX=c/a;this.speedY=b/a;this.lastTime=d;this.lastPosX=this.posX;this.lastPosY=this.posY;this.speedComputed=true},startComputeInertia:function(){if(this.measureSpeedTimer!=undefined){this.measureSpeedTimer.abort()}this.lastPosX=this.posX;this.lastPosY=this.posY;this.lastTime=(new Date().getTime())/1000;this.speedX=0;this.speedY=0;this.speedComputed=false;this.hasMoved=false;this.measureSpeedTimer=new Core.Timer({interval:0.025,scope:this,callback:this.measureSpeed})},stopComputeInertia:function(){if(this.measureSpeedTimer!=undefined){this.measureSpeedTimer.abort();this.measureSpeedTimer=undefined}if(!this.speedComputed){var d=(new Date().getTime())/1000;var a=d-this.lastTime;var c=this.posX-this.lastPosX;var b=this.posY-this.lastPosY;this.speedX=c/a;this.speedY=b/a}},startInertia:function(){if(this.inertiaClock==undefined){this.inertiaClock=new Anim.Clock({duration:"forever",target:this,callback:function(d,c,g){if(g==0){return}var b=this.posX;var a=this.posY;var f=this.posX+(this.speedX*g);var e=this.posY+(this.speedY*g);this.setPosition(f,e);this.fireEvent("move",this);if((this.posX==b)&&(this.posY==a)){this.stopInertia();return}this.speedX-=this.speedX*g*3;this.speedY-=this.speedY*g*3;if(Math.abs(this.speedX)<0.1){this.speedX=0}if(Math.abs(this.speedY)<0.1){this.speedY=0}if((this.speedX==0)&&(this.speedY==0)){this.stopInertia()}}});this.inertiaClock.begin()}},stopInertia:function(){if(this.inertiaClock!=undefined){this.inertiaClock.stop();this.inertiaClock=undefined}},},{});Ui.Container.extend("Ui.Scrollable",{viewWidth:0,viewHeight:0,horizontalBarWidth:0,verticalBarHeight:0,offsetX:0,offsetY:0,mouseButton:0,measureSpeedTimer:undefined,speedX:0,speedY:0,speedComputed:false,isMoving:false,hasMoved:false,mouseStart:undefined,touchStart:undefined,touchId:undefined,scrollHorizontal:true,scrollVertical:true,contentBox:undefined,scrollbarHorizontalBox:undefined,scrollbarHorizontal:undefined,scrollbarVerticalBox:undefined,scrollbarVertical:undefined,constructor:function(a){if(a.scrollHorizontal!=undefined){this.setScrollHorizontal(a.scrollHorizontal)}if(a.scrollVertical!=undefined){this.setScrollVertical(a.scrollVertical)}this.contentBox=new Ui.ScrollableContent();this.appendChild(this.contentBox);this.connect(this.contentBox,"scroll",function(c,b,d){this.setOffset(b,d,true)});this.scrollbarHorizontalBox=new Ui.LBox();this.scrollbarHorizontalBox.getDrawing().style.cursor="move";this.appendChild(this.scrollbarHorizontalBox);this.scrollbarVerticalBox=new Ui.LBox();this.scrollbarVerticalBox.getDrawing().style.cursor="move";this.appendChild(this.scrollbarVerticalBox);this.connect(this.contentBox.getDrawing(),"mousedown",this.onMouseDown);this.connect(this.contentBox.getDrawing(),"mousedown",this.onMouseDownCtrl,true);this.connect(this.contentBox.getDrawing(),"mousewheel",this.onMouseWheel);this.connect(this.contentBox.getDrawing(),"DOMMouseScroll",this.onMouseWheel);this.connect(this.contentBox.getDrawing(),"touchstart",this.onTouchStart);this.connect(this.contentBox.getDrawing(),"touchmove",this.onTouchMove);this.connect(this.contentBox.getDrawing(),"touchend",this.onTouchEnd);this.connect(this.scrollbarHorizontalBox.getDrawing(),"mousedown",this.onHorizontalMouseDown);this.connect(this.scrollbarVerticalBox.getDrawing(),"mousedown",this.onVerticalMouseDown)},setContent:function(a){this.contentBox.setContent(a)},getScrollHorizontal:function(){return this.scrollHorizontal},setScrollHorizontal:function(a){if(a!=this.scrollHorizontal){this.scrollHorizontal=a;this.invalidateMeasure()}},getScrollVertical:function(){return this.scrollVertical},setScrollVertical:function(a){if(a!=this.scrollVertical){this.scrollVertical=a;this.invalidateMeasure()}},setScrollbarVertical:function(a){if(this.scrollbarVertical!=a){if(this.scrollbarVertical!=undefined){this.scrollbarVerticalBox.removeChild(this.scrollbarVertical)}this.scrollbarVertical=a;if(this.scrollbarVertical!=undefined){this.scrollbarVerticalBox.appendChild(this.scrollbarVertical)}}},setScrollbarHorizontal:function(a){if(this.scrollbarHorizontal!=a){if(this.scrollbarHorizontal!=undefined){this.scrollbarHorizontalBox.removeChild(this.scrollbarHorizontal)}this.scrollbarHorizontal=a;if(this.scrollbarHorizontal!=undefined){this.scrollbarHorizontalBox.appendChild(this.scrollbarHorizontal)}}},setOffsetX:function(a,b){this.setOffset(a,undefined,b)},setOffsetY:function(a,b){this.setOffset(undefined,a,b)},setOffset:function(a,c,b){if(b==undefined){b=false}if(a==undefined){a=this.offsetX}else{if(!b){a*=this.contentWidth-this.viewWidth}}if(c==undefined){c=this.offsetY}else{if(!b){c*=this.contentHeight-this.viewHeight}}if(a<0){a=0}else{if(a>this.contentWidth-this.viewWidth){a=this.contentWidth-this.viewWidth}}if(c<0){c=0}else{if(c>this.contentHeight-this.viewHeight){c=this.contentHeight-this.viewHeight}}if(!this.scrollVertical){c=0}if(!this.scrollHorizontal){a=0}this.offsetX=a;this.offsetY=c;this.updateOffset()},onMouseDownCtrl:function(a){if(a.ctrlKey){this.onMouseDown(a)}},onMouseDown:function(a){if((this.viewWidth>=this.contentWidth)&&(this.viewHeight>=this.contentHeight)){return}this.focus();this.mouseButton=a.button;a.preventDefault();a.stopPropagation();this.stopInertia();this.connect(window,"mouseup",this.onMouseUp,true);this.connect(window,"mousemove",this.onMouseMove,true);this.mouseStart=this.pointFromWindow({x:a.clientX,y:a.clientY});this.startOffsetX=this.offsetX;this.startOffsetY=this.offsetY;this.startComputeInertia()},onMouseMove:function(d){d.preventDefault();d.stopPropagation();this.hasMoved=true;var b=this.pointFromWindow({x:d.clientX,y:d.clientY});var c=b.x-this.mouseStart.x;var a=b.y-this.mouseStart.y;offsetX=this.startOffsetX-c;offsetY=this.startOffsetY-a;this.setOffset(offsetX,offsetY,true)},onMouseUp:function(a){a.preventDefault();a.stopPropagation();if(a.button!=this.mouseButton){return}this.disconnect(window,"mousemove",this.onMouseMove);this.disconnect(window,"mouseup",this.onMouseUp);this.stopComputeInertia();this.startInertia()},onMouseWheel:function(c){c.preventDefault();c.stopPropagation();var b=0;var a=0;if((c.wheelDeltaX!=undefined)&&(c.wheelDelaY!=undefined)){b=-c.wheelDeltaX/12;a=-c.wheelDeltaY/12}else{if(c.wheelDelta!=undefined){a=-c.wheelDelta/8}else{if(c.detail!=undefined){a=c.detail*10/3}}}this.setOffset(this.offsetX+b,this.offsetY+a,true)},onTouchStart:function(a){if((this.viewWidth>=this.contentWidth)&&(this.viewHeight>=this.contentHeight)){return}if(a.targetTouches.length!=1){return}if(this.isMoving){return}this.touchId=a.targetTouches[0].identifier;this.isMoving=true;a.preventDefault();a.stopPropagation();this.stopInertia();this.touchStart=this.pointFromWindow({x:a.targetTouches[0].clientX,y:a.targetTouches[0].clientY});this.startOffsetX=this.offsetX;this.startOffsetY=this.offsetY;this.startComputeInertia()},onTouchMove:function(d){if(!this.isMoving){return}if(d.targetTouches[0].identifier!=this.touchId){return}d.preventDefault();d.stopPropagation();var c=this.pointFromWindow({x:d.targetTouches[0].clientX,y:d.targetTouches[0].clientY});var b=c.x-this.touchStart.x;var a=c.y-this.touchStart.y;offsetX=this.startOffsetX-b;offsetY=this.startOffsetY-a;this.setOffset(offsetX,offsetY,true);this.hasMoved=true},onTouchEnd:function(a){if(!this.isMoving){return}a.preventDefault();a.stopPropagation();this.isMoving=false;this.stopComputeInertia();this.startInertia()},onKeyDown:function(a,b){if(b==37){this.setOffset(this.offsetX-10,undefined,true)}else{if(b==39){this.setOffset(this.offsetX+10,undefined,true)}else{if(b==38){this.setOffset(undefined,this.offsetY-10,true)}else{if(b==40){this.setOffset(undefined,this.offsetY+10,true)}else{if(b==36){this.setOffset(0,0,true)}else{if(b==35){this.setOffset(1,1,false)}else{console.log("key: "+b)}}}}}}},measureSpeed:function(){if(!this.hasMoved){return}var d=(new Date().getTime())/1000;var c=d-this.lastTime;if(c<0.025){return}var b=this.offsetX-this.lastOffsetX;var a=this.offsetY-this.lastOffsetY;this.speedX=b/c;this.speedY=a/c;this.lastTime=d;this.lastOffsetX=this.offsetX;this.lastOffsetY=this.offsetY;this.speedComputed=true},startComputeInertia:function(){if(this.measureSpeedTimer!=undefined){this.measureSpeedTimer.abort()}this.lastOffsetX=this.offsetX;this.lastOffsetY=this.offsetY;this.lastTime=(new Date().getTime())/1000;this.speedX=0;this.speedY=0;this.speedComputed=false;this.hasMoved=false;this.measureSpeedTimer=new Core.Timer({interval:0.025,scope:this,callback:this.measureSpeed})},stopComputeInertia:function(){if(this.measureSpeedTimer!=undefined){this.measureSpeedTimer.abort();this.measureSpeedTimer=undefined}if(!this.speedComputed){var d=(new Date().getTime())/1000;var c=d-this.lastTime;var b=this.offsetX-this.lastOffsetX;var a=this.offsetY-this.lastOffsetY;this.speedX=b/c;this.speedY=a/c}else{}},startInertia:function(){if(this.inertiaClock==undefined){this.inertiaClock=new Anim.Clock({duration:"forever",target:this,callback:function(c,b,g){if(g==0){return}var f=this.offsetX;var d=this.offsetY;var a=this.offsetX+(this.speedX*g);var e=this.offsetY+(this.speedY*g);this.setOffset(a,e,true);if((this.offsetX==f)&&(this.offsetY==d)){this.stopInertia();return}this.speedX-=this.speedX*g*3;this.speedY-=this.speedY*g*3;if(Math.abs(this.speedX)<0.1){this.speedX=0}if(Math.abs(this.speedY)<0.1){this.speedY=0}if((this.speedX==0)&&(this.speedY==0)){this.stopInertia()}}});this.inertiaClock.begin()}},stopInertia:function(){if(this.inertiaClock!=undefined){this.inertiaClock.stop();this.inertiaClock=undefined}},onVerticalMouseDown:function(a){if(a.button!=0){return}a.preventDefault();a.stopPropagation();this.stopInertia();this.connect(window,"mouseup",this.onVerticalMouseUp,true);this.connect(window,"mousemove",this.onVerticalMouseMove,true);this.mouseStart=this.pointFromWindow({x:a.clientX,y:a.clientY});this.startOffsetX=this.offsetX;this.startOffsetY=this.offsetY;this.lastOffsetX=this.offsetX;this.lastOffsetY=this.offsetY;this.lastTime=(new Date().getTime())/1000;this.speedX=0;this.speedY=0;this.speedComputed=false;this.measureSpeedTimer=new Core.Timer({interval:0.025,scope:this,callback:this.measureSpeed})},onVerticalMouseMove:function(c){c.preventDefault();c.stopPropagation();var b=this.pointFromWindow({x:c.clientX,y:c.clientY});var a=b.y-this.mouseStart.y;offsetY=this.startOffsetY+a*this.contentHeight/this.viewHeight;this.setOffset(this.startOffsetX,offsetY,true)},onVerticalMouseUp:function(e){e.preventDefault();e.stopPropagation();if(e.button!=0){return}if(this.measureSpeedTimer!=undefined){this.measureSpeedTimer.abort();this.measureSpeedTimer=undefined}this.disconnect(window,"mousemove",this.onVerticalMouseMove);this.disconnect(window,"mouseup",this.onVerticalMouseUp);if(!this.speedComputed){var d=(new Date().getTime())/1000;var c=d-this.lastTime;var b=this.offsetX-this.lastOffsetX;var a=this.offsetY-this.lastOffsetY;this.speedX=b/c;this.speedY=a/c}this.startInertia()},onHorizontalMouseDown:function(a){if(a.button!=0){return}a.preventDefault();a.stopPropagation();this.stopInertia();this.connect(window,"mouseup",this.onHorizontalMouseUp,true);this.connect(window,"mousemove",this.onHorizontalMouseMove,true);this.mouseStart=this.pointFromWindow({x:a.clientX,y:a.clientY});this.startOffsetX=this.offsetX;this.startOffsetY=this.offsetY;this.lastOffsetX=this.offsetX;this.lastOffsetY=this.offsetY;this.lastTime=(new Date().getTime())/1000;this.speedX=0;this.speedY=0;this.speedComputed=false;this.measureSpeedTimer=new Core.Timer({interval:0.025,scope:this,callback:this.measureSpeed})},onHorizontalMouseMove:function(c){c.preventDefault();c.stopPropagation();var a=this.pointFromWindow({x:c.clientX,y:c.clientY});var b=a.x-this.mouseStart.x;offsetX=this.startOffsetX+b*this.contentWidth/this.viewWidth;this.setOffset(offsetX,this.startOffsetY,true)},onHorizontalMouseUp:function(e){e.preventDefault();e.stopPropagation();if(e.button!=0){return}if(this.measureSpeedTimer!=undefined){this.measureSpeedTimer.abort();this.measureSpeedTimer=undefined}this.disconnect(window,"mousemove",this.onHorizontalMouseMove);this.disconnect(window,"mouseup",this.onHorizontalMouseUp);if(!this.speedComputed){var d=(new Date().getTime())/1000;var c=d-this.lastTime;var b=this.offsetX-this.lastOffsetX;var a=this.offsetY-this.lastOffsetY;this.speedX=b/c;this.speedY=a/c}this.startInertia()},updateOffset:function(){if(this.scrollbarHorizontalNeeded){var b=this.offsetX/(this.contentWidth-this.viewWidth);this.scrollbarHorizontalBox.setTransform(Ui.Matrix.createTranslate((this.viewWidth-this.scrollbarHorizontalWidth)*b,0))}if(this.scrollbarVerticalNeeded){var a=this.offsetY/(this.contentHeight-this.viewHeight);this.scrollbarVerticalBox.setTransform(Ui.Matrix.createTranslate(0,(this.viewHeight-this.scrollbarVerticalHeight)*a))}this.contentBox.getDrawing().scrollLeft=this.offsetX;this.contentBox.getDrawing().scrollTop=this.offsetY},},{measureCore:function(d,a){this.scrollbarVerticalBox.measure(d,a);this.scrollbarHorizontalBox.measure(d,a);this.contentBox.measure(d,a);var b=d;var e=a;this.scrollbarVerticalNeeded=false;this.scrollbarHorizontalNeeded=false;var c=this.scrollbarVerticalBox.getMeasureWidth()*2+this.scrollbarHorizontalBox.getMeasureWidth();var f=this.scrollbarHorizontalBox.getMeasureHeight()*2+this.scrollbarVerticalBox.getMeasureHeight();if((this.contentBox.getMeasureHeight()>a)&&this.scrollVertical){b=d-this.scrollbarVerticalBox.getMeasureWidth();this.scrollbarVerticalNeeded=true}if((this.contentBox.getMeasureWidth()>b)&&this.scrollHorizontal){e=a-this.scrollbarHorizontalBox.getMeasureHeight();this.scrollbarHorizontalNeeded=true;if((this.contentBox.getMeasureHeight()>e)&&this.scrollVertical){b=d-this.scrollbarVerticalBox.getMeasureWidth();this.scrollbarVerticalNeeded=true}}if(this.scrollbarHorizontalNeeded||this.scrollbarVerticalNeeded){this.scrollbarVerticalNeeded=false;this.scrollbarHorizontalNeeded=false;this.contentBox.measure(b,e);var b=d;var e=a;if(this.scrollVertical){if(this.contentBox.getMeasureHeight()>a){b=d-this.scrollbarVerticalBox.getMeasureWidth();this.scrollbarVerticalNeeded=true}}else{f=this.contentBox.getMeasureHeight()}if(this.scrollHorizontal){if(this.contentBox.getMeasureWidth()>b){e=a-this.scrollbarHorizontalBox.getMeasureHeight();this.scrollbarHorizontalNeeded=true;if((this.contentBox.getMeasureHeight()>e)&&this.scrollVertical){b=d-this.scrollbarVerticalBox.getMeasureWidth();this.scrollbarVerticalNeeded=true}}}else{c=this.contentBox.getMeasureWidth();if(this.scrollbarVerticalNeeded){c+=this.scrollbarVerticalBox.getMeasureWidth()}}if(!this.scrollVertical&&this.scrollbarHorizontalNeeded){f+=this.scrollbarHorizontalBox.getMeasureHeight()}return{width:c,height:f}}else{return{width:this.contentBox.getMeasureWidth(),height:this.contentBox.getMeasureHeight()}}},arrangeCore:function(b,a){if(this.scrollbarVerticalNeeded){this.scrollbarVerticalBox.show()}else{this.scrollbarVerticalBox.hide();this.offsetY=0}if(this.scrollbarHorizontalNeeded){this.scrollbarHorizontalBox.show()}else{this.scrollbarHorizontalBox.hide();this.offsetX=0}if(!this.scrollbarVerticalNeeded&&!this.scrollbarHorizontalNeeded){this.contentWidth=b;this.contentHeight=a;this.viewWidth=b;this.viewHeight=a}else{this.contentWidth=b;this.contentHeight=a;this.viewWidth=b;this.viewHeight=a;if(this.scrollbarVerticalNeeded){this.contentHeight=this.contentBox.getMeasureHeight();this.viewWidth-=this.scrollbarVerticalBox.getMeasureWidth();if(!this.scrollbarHorizontalNeeded){this.contentWidth-=this.scrollbarVerticalBox.getMeasureWidth()}}if(this.scrollbarHorizontalNeeded){this.contentWidth=this.contentBox.getMeasureWidth();this.viewHeight-=this.scrollbarHorizontalBox.getMeasureHeight()}else{if(!this.scrollbarVerticalNeeded){this.contentHeight-=this.scrollbarHorizontalBox.getMeasureHeight()}}if(this.scrollbarVerticalNeeded){this.scrollbarVerticalHeight=Math.max((this.viewHeight/this.contentHeight)*this.viewHeight,this.scrollbarVerticalBox.getMeasureHeight());this.scrollbarVerticalBox.arrange(b-this.scrollbarVerticalBox.getMeasureWidth(),0,this.scrollbarVerticalBox.getMeasureWidth(),this.scrollbarVerticalHeight)}if(this.scrollbarHorizontalNeeded){this.scrollbarHorizontalWidth=Math.max((this.viewWidth/this.contentWidth)*this.viewWidth,this.scrollbarHorizontalBox.getMeasureWidth());this.scrollbarHorizontalBox.arrange(0,a-this.scrollbarHorizontalBox.getMeasureHeight(),this.scrollbarHorizontalWidth,this.scrollbarHorizontalBox.getMeasureHeight())}}this.contentBox.arrange(0,0,this.viewWidth,this.viewHeight);this.updateOffset()},});Ui.Container.extend("Ui.ScrollableContent",{viewWidth:0,viewHeight:0,content:undefined,contentWidth:0,contentHeight:0,constructor:function(a){this.getDrawing().style.overflow="hidden";this.addEvents("scroll");this.connect(this.getDrawing(),"scroll",function(){this.fireEvent("scroll",this,this.getDrawing().scrollLeft,this.getDrawing().scrollTop)})},setContent:function(a){console.log(this+".setContent("+a+")");if(this.content!=a){if(this.content!=undefined){this.removeChild(this.content)}this.content=a;if(this.content!=undefined){this.appendChild(this.content)}}},setOffset:function(a,b){this.getDrawing().scrollLeft=a;this.getDrawing().scrollTop=b},getOffsetX:function(){return this.getDrawing().scrollLeft},getOffsetY:function(){return this.getDrawing().scrollLeft},},{measureCore:function(c,a){var b;if(this.content!=undefined){b=this.content.measure(c,a)}else{b={width:0,height:0}}this.contentWidth=b.width;this.contentHeight=b.height;return b},arrangeCore:function(b,a){if(this.content!=undefined){this.content.arrange(0,0,Math.max(b,this.contentWidth),Math.max(a,this.contentHeight))}},});Ui.LBox.extend("Ui.Draggable",{icon:undefined,downloadUrl:undefined,downloadMimetype:undefined,downloadFilename:undefined,allowedMode:"copyMove",mimetype:undefined,data:undefined,constructor:function(a){if(a.data!=undefined){this.setData(a.mimetype,a.data)}if(a.downloadUrl!=undefined){this.setDownloadUrl(a.downloadUrl,a.downloadMimetype,a.downloadFilename)}this.drawing.setAttributeNS(null,"draggable",true);this.connect(this.drawing,"dragstart",this.onDragStart,true);this.connect(this.drawing,"dragend",this.onDragEnd,true);this.addEvents("dragstart","dragend")},setData:function(a,b){if(a==undefined){this.mimetype="application/era-framework"}else{this.mimetype=a}this.data=b},setAllowedMode:function(a){this.allowedMode=a},setIcon:function(a){this.icon=a},setDownloadUrl:function(c,a,b){this.downloadUrl=c;if(b==undefined){}if(a==undefined){}this.downloadMimetype=a;this.downloadFilename=b},onDragStart:function(a){a.stopPropagation();a.dataTransfer.effectAllowed=this.allowedMode;if(this.downloadUrl!=undefined){try{a.dataTransfer.setData("DownloadURL",this.downloadMimetype+":"+this.downloadFilename+":"+this.downloadUrl)}catch(b){}}a.dataTransfer.setData("Text",this.mimetype+":"+this.data);if(this.icon!=undefined){if(a.dataTransfer.setDragImage!=undefined){a.dataTransfer.setDragImage(this.icon.drawing.childNodes[0],0,0)}}this.fireEvent("dragstart",this);return false},onDragEnd:function(a){a.stopPropagation();this.fireEvent("dragend",this,a.dataTransfer.dropEffect)},},{});Ui.LBox.extend("Ui.DropBox",{allowedMimetypes:undefined,allowFiles:false,allowText:false,constructor:function(a){this.allowedMimetypes=[];this.connect(this.drawing,"dragenter",this.onDragEnter);this.connect(this.drawing,"dragover",this.onDragOver);this.connect(this.drawing,"drop",this.onDrop);this.addEvents("drop","dropfiles")},addMimetype:function(a){this.allowedMimetypes.push(a);if(a.toLowerCase()=="files"){this.allowFiles=true}else{this.allowText=true}},onDragEnter:function(e){if(e.dataTransfer.types!=undefined){var a=false;var b=false;for(var c=0;c<e.dataTransfer.types.length;c++){var d=e.dataTransfer.types[c].toLowerCase();if((d=="text")||(d=="text/plain")){b=true}else{if(d.toLowerCase()=="files"){a=true}}}if(!(a&&this.allowFiles)&&!(b&&this.allowText)){return}}e.preventDefault();e.stopPropagation();return false},onDragOver:function(e){if(e.dataTransfer==undefined){return}if(e.dataTransfer.types!=undefined){var a=false;var b=false;for(var c=0;c<e.dataTransfer.types.length;c++){var d=e.dataTransfer.types[c].toLowerCase();if((d=="text")||(d=="text/plain")){b=true}else{if(d.toLowerCase()=="files"){a=true}}}if(!(a&&this.allowFiles)&&!(b&&this.allowText)){return}}var g="all";if(e.dataTransfer.effectAllowed!=undefined){g=e.dataTransfer.effectAllowed}var f="copy";if((g=="copy")||(g=="copyLink")||(g=="copyMove")||(g=="all")){f="copy"}else{if((g=="linkMove")||(g=="move")){f="move"}else{if(g=="link"){f="link"}}}e.dataTransfer.dropEffect=f;e.preventDefault();e.stopPropagation();return false},onDrop:function(b){b.preventDefault();b.stopPropagation();if((b.dataTransfer.files!=undefined)&&(b.dataTransfer.files.length>0)){this.fireEvent("dropfiles",this,b.dataTransfer.files)}else{var c=b.dataTransfer.getData("Text");if(c!=undefined){var d=c.indexOf(":");if(d!=-1){var a=c.substring(0,d);var c=c.substring(d+1);this.fireEvent("drop",this,a,c)}}}return false},},{});Ui.Element.extend("Ui.IFrame",{iframeDrawing:undefined,isReady:false,constructor:function(a){this.connect(this.iframeDrawing,"load",this.onIFrameLoad);if(a.src!=undefined){this.setSrc(a.src)}this.addEvents("ready")},getSrc:function(){return this.iframeDrawing.getAttributeNS(null,"src")},setSrc:function(a){this.iframeDrawing.setAttributeNS(null,"src",a)},getIFrame:function(){return this.iframeDrawing},onIFrameLoad:function(){if(!this.isReady){this.isReady=true;if(navigator.iPad){console.log("onIFrameLoad, setSize: "+this.getLayoutWidth()+" x "+this.getLayoutHeight());this.iframeDrawing.style.width=this.getLayoutWidth()+"px";this.iframeDrawing.style.height=this.getLayoutHeight()+"px"}this.fireEvent("ready",this)}},},{render:function(){this.iframeDrawing=document.createElementNS(htmlNS,"iframe");this.iframeDrawing.style.border="0px";return this.iframeDrawing},arrangeCore:function(c,a){if(navigator.isChrome){var b=this.transformFromWindow();this.iframeDrawing.style.width=(c*b.getA())+"px";this.iframeDrawing.style.height=(a*b.getD())+"px"}else{this.iframeDrawing.style.width=c+"px";this.iframeDrawing.style.height=a+"px"}},});Ui.Container.extend("Ui.Popup",{background:undefined,contentBox:undefined,visible:false,posX:undefined,posY:undefined,lbox:undefined,constructor:function(a){this.setHorizontalAlign("stretch");this.setVerticalAlign("stretch");this.shadow=new Ui.Rectangle({fill:"white",opacity:0.5});this.appendChild(this.shadow);this.background=new Ui.PopupBackground({radius:8,fill:"black"});this.appendChild(this.background);this.contentBox=new Ui.LBox({paddingLeft:15,paddingRight:15,paddingTop:11,paddingBottom:11});this.appendChild(this.contentBox);this.connect(this.getDrawing(),"mousedown",this.onMouseDown);this.connect(this.contentBox.getDrawing(),"mousedown",this.onContentMouseDown);this.connect(this.getDrawing(),"touchstart",this.onTouchStart);this.connect(this.contentBox.getDrawing(),"touchstart",this.onContentTouchStart);this.connect(window,"resize",this.onWindowResize)},setContent:function(a){if(this.content!=a){if(this.content!=undefined){this.contentBox.remove(this.content)}this.content=a;if(this.content!=undefined){this.contentBox.append(this.content)}}},onWindowResize:function(){if(this.visible){this.hide()}},onMouseDown:function(a){a.preventDefault();a.stopPropagation();this.hide()},onContentMouseDown:function(a){a.preventDefault();a.stopPropagation()},onTouchStart:function(a){a.preventDefault();a.stopPropagation();this.hide()},onContentTouchStart:function(a){a.preventDefault();a.stopPropagation()},},{onStyleChange:function(){this.background.setFill(this.getStyleProperty("color"))},show:function(d,c){if(!this.visible){this.visible=true;if((typeof(d)=="object")&&(d.isSubclass("Ui.Element"))){var b=d;var a=b.pointToWindow({x:b.getLayoutWidth(),y:b.getLayoutHeight()/2});this.posX=a.x;this.posY=a.y;this.background.setArrowBorder("left")}else{if((d!=undefined)&&(c!=undefined)){this.posX=d;this.posY=c;this.background.setArrowBorder("left")}else{this.posX=undefined;this.posY=undefined;this.background.setArrowBorder("none")}}this.invalidateArrange();Ui.App.current.appendDialog(this)}},hide:function(){if(this.visible){this.visible=false;Ui.App.current.removeDialog(this)}},measureCore:function(c,a){this.background.measure(c,a);var b=this.contentBox.measure(c,a);return{width:Math.max(c,b.width),height:Math.max(a,b.height)}},arrangeCore:function(c,b){var a=0;var e=0;if(this.posX==undefined){a=(c-this.contentBox.getMeasureWidth())/2;e=(b-this.contentBox.getMeasureHeight())/2;this.shadow.arrange(0,0,c,b);this.background.arrange(a,e,this.contentBox.getMeasureWidth(),this.contentBox.getMeasureHeight())}else{a=this.posX;e=this.posY;a+=10;e-=30;if(e+this.contentBox.getMeasureHeight()>b){e=b-this.contentBox.getMeasureHeight();var d=this.posY-e;if(d>this.contentBox.getMeasureHeight()-18){d=this.contentBox.getMeasureHeight()-18}this.background.setArrowOffset(d)}else{this.background.setArrowOffset(30)}this.shadow.arrange(0,0,0,0);this.background.arrange(a-10,e,this.contentBox.getMeasureWidth()+10,this.contentBox.getMeasureHeight())}this.contentBox.arrange(a,e,this.contentBox.getMeasureWidth(),this.contentBox.getMeasureHeight())},},{style:{color:new Ui.Color({r:0.1,g:0.15,b:0.2}),},});Ui.SVGElement.extend("Ui.PopupBackground",{popupDrawing:undefined,svgGradient:undefined,darkShadow:undefined,lightShadow:undefined,background:undefined,radius:8,fill:"black",arrowBorder:"left",arrowOffset:30,arrowSize:10,constructor:function(a){if(a.radius!=undefined){this.setRadius(a.radius)}if(a.fill!=undefined){this.setFill(a.fill)}if(a.arrowBorder!=undefined){this.setArrowBorder(a.arrowBorder)}},setArrowBorder:function(a){if(this.arrowBorder!=a){this.arrowBorder=a;this.invalidateArrange()}},setArrowOffset:function(a){if(this.arrowOffset!=a){this.arrowOffset=a;this.invalidateArrange()}},setRadius:function(a){if(this.radius!=a){this.radius=a;this.invalidateArrange()}},setFill:function(c){if(this.fill!=c){this.fill=Ui.Color.create(c);this.popupDrawing.removeChild(this.svgGradient);var a=this.fill.getYuv();var b=new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.2,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})},]});this.svgGradient=b.getSVGGradient();this.svgGradient.setAttributeNS(null,"id","bgGrad");this.popupDrawing.appendChild(this.svgGradient);this.darkShadow.style.fill=(new Ui.Color({y:a.y-0.9,u:a.u,v:a.v})).getCssHtml();this.lightShadow.style.fill=(new Ui.Color({y:a.y+0.3,u:a.u,v:a.v})).getCssHtml()}},genPath:function(e,b,a,f,d,c){if(f=="none"){var h=e-a;var g=b-a;return"M"+a+",0 L"+h+",0 A"+a+","+a+" 0 0,1 "+e+","+a+" L"+e+","+g+" A"+a+","+a+" 0 0,1 "+h+","+b+" L"+a+","+b+" A"+a+","+a+" 0 0,1 0,"+g+" L0,"+a+" A"+a+","+a+" 0 0,1 "+a+",0 z"}else{if(f=="left"){var h=e-this.radius;var g=b-this.radius;return"M"+(a+d)+",0 L"+h+",0 A"+a+","+a+" 0 0,1 "+e+","+a+" L"+e+","+g+" A"+a+","+a+" 0 0,1 "+h+","+b+" L"+(a+d)+","+b+" A"+a+","+a+" 0 0,1 "+d+","+g+" L"+d+","+(c+d)+" L0,"+c+" L"+d+","+(c-d)+" L"+d+","+a+" A"+a+","+a+" 0 0,1 "+(a+d)+",0 z"}}},},{render:function(){this.popupDrawing=document.createElementNS(svgNS,"g");this.darkShadow=document.createElementNS(svgNS,"path");this.popupDrawing.appendChild(this.darkShadow);this.darkShadow.style.fill="#010002";this.darkShadow.style.fillOpacity="0.8";this.darkShadow.style.stroke="none";this.lightShadow=document.createElementNS(svgNS,"path");this.popupDrawing.appendChild(this.lightShadow);this.lightShadow.style.fill="#5f625b";this.lightShadow.style.fillOpacity="1";this.lightShadow.style.stroke="none";var a=(new Ui.Color({r:0.5,g:0.5,b:0.5})).getYuv();var b=new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:0.25,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:0.16,u:a.u,v:a.v})},]});this.svgGradient=b.getSVGGradient();this.svgGradient.setAttributeNS(null,"id","bgGrad");this.popupDrawing.appendChild(this.svgGradient);this.background=document.createElementNS(svgNS,"path");this.popupDrawing.appendChild(this.background);this.background.style.fill="url(#bgGrad)";this.background.style.fillOpacity="1";this.background.style.stroke="none";return this.popupDrawing},arrangeCore:function(b,a){this.darkShadow.setAttributeNS(null,"d",this.genPath(b,a,this.radius,this.arrowBorder,this.arrowSize,this.arrowOffset));if(this.arrowBorder=="none"){this.lightShadow.setAttributeNS(null,"transform","translate(1,1)");this.background.setAttributeNS(null,"transform","translate(2,2)");this.lightShadow.setAttributeNS(null,"d",this.genPath(b-2,a-2,this.radius-1,this.arrowBorder));this.background.setAttributeNS(null,"d",this.genPath(b-4,a-4,this.radius-1.4,this.arrowBorder))}else{this.lightShadow.setAttributeNS(null,"transform","translate(1.6,1)");this.background.setAttributeNS(null,"transform","translate(3.2,2)");this.lightShadow.setAttributeNS(null,"d",this.genPath(b-3,a-2,this.radius-1,this.arrowBorder,this.arrowSize-1,this.arrowOffset-1));this.background.setAttributeNS(null,"d",this.genPath(b-5.7,a-3.7,this.radius-1.4,this.arrowBorder,this.arrowSize-1.3,this.arrowOffset-2))}},});Ui.Element.extend("Ui.Entry",{entryDrawing:undefined,fontSize:14,fontFamily:"Sans-serif",fontWeight:"normal",color:"black",value:"",constructor:function(a){if(a.fontSize!=undefined){this.setFontSize(a.fontSize)}if(a.fontFamily!=undefined){this.setFontFamily(a.fontFamily)}if(a.fontWeight!=undefined){this.setFontWeight(a.fontWeight)}if(a.color!=undefined){this.setColor(a.color)}this.connect(this.entryDrawing,"mousedown",this.onMouseDown);this.connect(this.entryDrawing,"change",this.onChange);this.connect(this.entryDrawing,"keyup",this.onKeyUp);this.addEvents("change","validate")},setFontSize:function(a){if(this.fontSize!=a){this.fontSize=a;this.entryDrawing.style.fontSize=this.fontSize+"px";this.invalidateMeasure()}},getFontSize:function(){return this.fontSize},setFontFamily:function(a){if(this.fontFamily!=a){this.fontFamily=a;this.entryDrawing.style.fontFamily=this.fontFamily;this.invalidateMeasure()}},getFontFamily:function(){return this.fontFamily},setFontWeight:function(a){if(this.fontWeight!=a){this.fontWeight=a;this.entryDrawing.style.fontWeight=this.fontWeight;this.invalidateMeasure()}},getFontWeight:function(){return this.fontWeight},setColor:function(a){if(this.color!=a){this.color=a;this.entryDrawing.style.color=this.color}},getColor:function(){return this.color},getValue:function(){return this.value},setValue:function(a){this.value=a;this.entryDrawing.value=this.value},onMouseDown:function(a){this.entryDrawing.focus()},onChange:function(a){a.preventDefault();a.stopPropagation();if(this.entryDrawing.value!=this.value){this.value=this.entryDrawing.value;this.fireEvent("change",this,this.value)}},onKeyUp:function(a){if(this.entryDrawing.value!=this.value){this.value=this.entryDrawing.value;this.fireEvent("change",this,this.value)}if(a.which==13){a.preventDefault();a.stopPropagation();this.fireEvent("validate",this)}},},{render:function(){this.entryDrawing=document.createElementNS(htmlNS,"input");this.entryDrawing.setAttributeNS(null,"type","text");this.entryDrawing.style.border="0px";this.entryDrawing.style.margin="0px";this.entryDrawing.style.padding="0px";this.entryDrawing.style.outline="none";this.entryDrawing.style.background="none";if(navigator.isWebkit){this.entryDrawing.style.webkitAppearance="none"}this.entryDrawing.style.fontSize=this.fontSize+"px";this.entryDrawing.style.fontFamily=this.fontFamily;this.entryDrawing.style.fontWeight=this.fontWeight;this.entryDrawing.style.color=this.color;return this.entryDrawing},measureCore:function(b,a){return{width:8,height:(this.fontSize*3/2)}},arrangeCore:function(b,a){this.entryDrawing.style.width=b+"px";this.entryDrawing.style.height=a+"px"},});Ui.Element.extend("Ui.TextArea",{textareaDrawing:undefined,fontSize:14,fontFamily:"sans-serif",fontWeight:"normal",color:"black",constructor:function(a){if(a.fontSize!=undefined){this.setFontSize(a.fontSize)}if(a.fontFamily!=undefined){this.setFontFamily(a.fontFamily)}if(a.fontWeight!=undefined){this.setFontWeight(a.fontWeight)}if(a.color!=undefined){this.setColor(a.color)}this.connect(this.textareaDrawing,"mousedown",function(b){this.textareaDrawing.focus()});this.connect(this.textareaDrawing,"focus",function(b){console.log("textarea focus")});this.connect(this.textareaDrawing,"blur",function(b){console.log("textarea blur")});this.connect(this.textareaDrawing,"keyup",this.onKeyUp)},setFontSize:function(a){if(this.fontSize!=a){this.fontSize=a;this.textareaDrawing.style.fontSize=this.fontSize+"px";this.invalidateMeasure()}},getFontSize:function(){return this.fontSize},setFontFamily:function(a){if(this.fontFamily!=a){this.fontFamily=a;this.textareaDrawing.style.fontFamily=this.fontFamily;this.invalidateMeasure()}},getFontFamily:function(){return this.fontFamily},setFontWeight:function(a){if(this.fontWeight!=a){this.fontWeight=a;this.textareaDrawing.style.fontWeight=this.fontWeight;this.invalidateMeasure()}},getFontWeight:function(){return this.fontWeight},setColor:function(a){if(this.color!=a){this.color=a;this.textareaDrawing.style.color=this.color;this.invalidateMeasure()}},getColor:function(){return this.color},getValue:function(){return this.entryDrawing.value},setValue:function(a){this.entryDrawing.value=a},onMouseDown:function(a){},onKeyUp:function(a){console.log(this+".onKeyUp "+this.textareaDrawing.scrollHeight+" / "+this.getLayoutHeight());if(this.textareaDrawing.scrollHeight!=this.getLayoutHeight()){this.invalidateMeasure()}},},{render:function(){this.textareaDrawing=document.createElementNS(htmlNS,"textarea");this.textareaDrawing.style.display="block";this.textareaDrawing.style.resize="none";this.textareaDrawing.style.overflow="hidden";this.textareaDrawing.style.border="0px";this.textareaDrawing.style.margin="0px";this.textareaDrawing.style.padding="0px";this.textareaDrawing.style.outline="none";this.textareaDrawing.style.background="none";if(navigator.isWebkit){this.textareaDrawing.style.webkitAppearance="none"}this.textareaDrawing.style.fontSize=this.fontSize+"px";this.textareaDrawing.style.fontFamily=this.fontFamily;this.textareaDrawing.style.fontWeight=this.fontWeight;this.textareaDrawing.style.color=this.color;return this.textareaDrawing},measureCore:function(b,a){console.log(this+".measureCore("+b+","+a+") = "+this.textareaDrawing.scrollHeight);return{width:8,height:this.textareaDrawing.scrollHeight}},arrangeCore:function(b,a){console.log(this+".arrangeCore("+b+","+a+")");this.textareaDrawing.style.width=b+"px";this.textareaDrawing.style.height=a+"px"},});Ui.Pressable.extend("Ui.Button",{allcontent:undefined,contentBox:undefined,content:undefined,text:undefined,textBox:undefined,text1:undefined,text2:undefined,icon:undefined,iconBox:undefined,icon1:undefined,icon2:undefined,orientation:"vertical",rect1:undefined,rect2:undefined,lightShadow:undefined,darkShadow:undefined,constructor:function(a){this.setPadding(3);this.lightShadow=new Ui.Rectangle({fill:new Ui.Color({r:1,g:1,b:1,a:0.25}),radius:4,marginTop:1});this.append(this.lightShadow);this.darkShadow=new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.4}),radius:4,marginBottom:1});this.append(this.darkShadow);this.allcontent=new Ui.LBox();this.append(this.allcontent);this.rect2=new Ui.Rectangle({radius:4,marginTop:1,marginBottom:2,marginLeft:1,marginRight:1});this.allcontent.append(this.rect2);this.rect1=new Ui.Rectangle({radius:3,marginTop:2,marginBottom:2,marginLeft:1,marginRight:1});this.allcontent.append(this.rect1);this.contentBox=new Ui.Box({verticalAlign:"center",horizontalAlign:"center"});this.allcontent.append(this.contentBox);this.iconBox=new Ui.LBox({verticalAlign:"center",horizontalAlign:"center"});this.contentBox.append(this.iconBox);if(a.text!=undefined){this.setText(a.text)}if(a.icon!=undefined){this.setIcon(a.icon)}if(a.orientation!=undefined){this.setOrientation(a.orientation)}this.connect(this,"down",this.onButtonDown);this.connect(this,"up",this.onButtonUp)},getText:function(){return this.text},setText:function(a){if(this.text!=a){this.text=a;if(this.text==undefined){if(this.textBox!=undefined){this.contentBox.remove(this.textBox);this.textBox=undefined;this.text1=undefined;this.text2=undefined}}else{if(this.textBox==undefined){this.textBox=new Ui.LBox({verticalAlign:"center",horizontalAlign:"center",height:24});this.contentBox.append(this.textBox);this.text1=new Ui.Label({text:this.text,color:this.getContentLightColor(),verticalAlign:"center"});this.text2=new Ui.Label({text:this.text,color:this.getContentColor(),verticalAlign:"center"});this.textBox.append(this.text1);this.textBox.append(this.text2)}else{this.text1.setText(this.text);this.text2.setText(this.text)}}this.updateSizes()}},getIcon:function(){return this.icon},setIcon:function(a){if(a==undefined){if(this.icon!=undefined){this.iconBox.remove(this.icon1);this.iconBox.remove(this.icon2);this.icon1=undefined;this.icon2=undefined;this.icon=undefined}if(this.content!=undefined){this.iconBox.remove(this.content);this.content=undefined}}else{if(typeof(a)=="string"){if(this.content!=undefined){this.iconBox.remove(this.content);this.content=undefined}if(this.icon!=a){this.icon=a;if(this.icon1!=undefined){this.iconBox.remove(this.icon1)}if(this.icon2!=undefined){this.iconBox.remove(this.icon2)}this.icon1=Ui.Icon.create(a,24,24,this.getContentLightColor());this.icon2=Ui.Icon.create(a,24,24,this.getContentColor());this.iconBox.append(this.icon1);this.iconBox.append(this.icon2)}}else{if(this.icon1!=undefined){this.iconBox.remove(this.icon1)}if(this.icon2!=undefined){this.iconBox.remove(this.icon2)}this.icon1=undefined;this.icon2=undefined;this.icon=undefined;if(this.content!=a){if(this.content!=undefined){this.iconBox.remove(this.content)}this.content=a;this.iconBox.append(this.content)}}}this.updateSizes()},getOrientation:function(){return this.orientation},setOrientation:function(a){if(this.orientation!=a){this.orientation=a;this.contentBox.setOrientation(this.orientation);this.updateSizes()}},updateSizes:function(){var a=this.getStyleProperty("spacing");if(this.orientation=="vertical"){if(this.text!=undefined){if(this.icon!=undefined){this.textBox.setMarginLeft(a+2);this.textBox.setMarginRight(a+2);this.textBox.setMarginTop(a);this.textBox.setMarginBottom(a+1);this.text1.setMargin(0);this.text1.setMarginTop(2);this.text2.setMargin(1);this.text1.setFontWeight("normal");this.text2.setFontWeight("normal");this.iconBox.setMarginLeft(a+2);this.iconBox.setMarginRight(a+2);this.iconBox.setMarginTop(a+1);this.iconBox.setMarginBottom(0);this.icon1.setMarginTop(2);this.icon1.setMarginBottom(0);this.icon2.setMarginTop(1);this.icon2.setMarginBottom(1)}else{if(this.content!=undefined){this.textBox.setMarginLeft(a+2);this.textBox.setMarginRight(a+2);this.textBox.setMarginTop(a+1);this.textBox.setMarginBottom(a+1);this.text1.setMargin(0);this.text1.setMarginTop(2);this.text2.setMargin(1);this.text1.setFontWeight("normal");this.text2.setFontWeight("normal");this.iconBox.setMarginLeft(a+2);this.iconBox.setMarginRight(a+2);this.iconBox.setMarginTop(a+2);this.iconBox.setMarginBottom(0)}else{this.textBox.setMarginLeft(a+4);this.textBox.setMarginRight(a+4);this.textBox.setMarginTop(a+1);this.textBox.setMarginBottom(a+1);this.text1.setMargin(0);this.text1.setMarginTop(2);this.text2.setMargin(1);this.text1.setFontWeight("bold");this.text2.setFontWeight("bold");this.iconBox.setMargin(0)}}}else{if(this.icon!=undefined){this.iconBox.setMarginLeft(a+2);this.iconBox.setMarginRight(a+2);this.iconBox.setMarginTop(a+1);this.iconBox.setMarginBottom(a+1);this.icon1.setMarginTop(2);this.icon1.setMarginBottom(0);this.icon2.setMarginTop(1);this.icon2.setMarginBottom(1)}else{if(this.content!=undefined){this.iconBox.setMargin(a+2)}}}}else{if(this.text!=undefined){if(this.icon!=undefined){this.textBox.setMarginLeft(a+2);this.textBox.setMarginRight(a+2);this.textBox.setMarginTop(a+1);this.textBox.setMarginBottom(a+1);this.text1.setMargin(0);this.text1.setMarginTop(2);this.text2.setMargin(1);this.text1.setFontWeight("bold");this.text2.setFontWeight("bold");this.iconBox.setMarginLeft(a+2);this.iconBox.setMarginRight(0);this.iconBox.setMarginTop(a+1);this.iconBox.setMarginBottom(a+1);this.icon1.setMarginTop(2);this.icon1.setMarginBottom(0);this.icon2.setMarginTop(1);this.icon2.setMarginBottom(1)}else{if(this.content!=undefined){this.textBox.setMarginLeft(a+2);this.textBox.setMarginRight(a+2);this.textBox.setMarginTop(a+1);this.textBox.setMarginBottom(a+1);this.text1.setMargin(0);this.text1.setMarginTop(2);this.text2.setMargin(1);this.text1.setFontWeight("bold");this.text2.setFontWeight("bold");this.iconBox.setMarginLeft(a+2);this.iconBox.setMarginRight(0);this.iconBox.setMarginTop(a+2);this.iconBox.setMarginBottom(0)}else{this.textBox.setMarginLeft(a+4);this.textBox.setMarginRight(a+4);this.textBox.setMarginTop(a+1);this.textBox.setMarginBottom(a+1);this.text1.setMargin(0);this.text1.setMarginTop(2);this.text2.setMargin(1);this.text1.setFontWeight("bold");this.text2.setFontWeight("bold");this.iconBox.setMargin(0)}}}else{if(this.icon!=undefined){this.iconBox.setMarginLeft(a+2);this.iconBox.setMarginRight(a+2);this.iconBox.setMarginTop(a+1);this.iconBox.setMarginBottom(a+1);this.icon1.setMarginTop(2);this.icon1.setMarginBottom(0);this.icon2.setMarginTop(1);this.icon2.setMarginBottom(1)}else{if(this.content!=undefined){this.iconBox.setMargin(a+2)}}}}},getGradient:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})},]})},getGradientDown:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1-0.2,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1-0.2,u:a.u,v:a.v})},]})},getContentColor:function(){var a=this.getStyleProperty("color").getYuv();if(a.y<0.4){return new Ui.Color({y:a.y+0.6,u:a.u,v:a.v})}else{return new Ui.Color({y:a.y-0.6,u:a.u,v:a.v})}},getContentLightColor:function(){var a=this.getStyleProperty("color").getYuv();if(a.y<0.4){return new Ui.Color({y:a.y-0.2,u:a.u,v:a.v})}else{return new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})}},getContentLightColorDown:function(){var a=this.getStyleProperty("color").getYuv();if(a.y<0.4){return new Ui.Color({y:a.y-0.2,u:a.u,v:a.v})}else{return new Ui.Color({y:a.y+0.1-0.2,u:a.u,v:a.v})}},getLightColor:function(){var a=this.getStyleProperty("color").getYuv();if(a.y<0.4){return new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})}else{return new Ui.Color({y:a.y+0.3,u:a.u,v:a.v})}},getLightColorDown:function(){var a=this.getStyleProperty("color").getYuv();if(a.y<0.4){return new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})}else{return new Ui.Color({y:a.y,u:a.u,v:a.v})}},onButtonDown:function(){this.rect1.setFill(this.getGradientDown());if(this.icon1!=undefined){this.icon1.setFill(this.getContentLightColorDown())}if(this.text1!=undefined){this.text1.setColor(this.getContentLightColorDown())}this.rect2.setFill(this.getLightColorDown())},onButtonUp:function(){this.rect1.setFill(this.getGradient());if(this.icon1!=undefined){this.icon1.setFill(this.getContentLightColor())}if(this.text1!=undefined){this.text1.setColor(this.getContentLightColor())}this.rect2.setFill(this.getLightColor())},},{onStyleChange:function(){var g;var h;var c;var f;var b;var e;var d=this.getStyleProperty("color").getYuv();g=new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:d.y+0.1,u:d.u,v:d.v})},{offset:1,color:new Ui.Color({y:d.y-0.1,u:d.u,v:d.v})},]});e=new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:d.y+0.1-0.2,u:d.u,v:d.v})},{offset:1,color:new Ui.Color({y:d.y-0.1-0.2,u:d.u,v:d.v})},]});if(d.y<0.4){h=new Ui.Color({y:d.y+0.6,u:d.u,v:d.v});c=new Ui.Color({y:d.y-0.2,u:d.u,v:d.v});f=new Ui.Color({y:d.y-0.2,u:d.u,v:d.v});b=new Ui.Color({y:d.y+0.3,u:d.u,v:d.v});lightColorDown=new Ui.Color({y:d.y+0.1,u:d.u,v:d.v})}else{h=new Ui.Color({y:d.y-0.6,u:d.u,v:d.v});c=new Ui.Color({y:d.y+0.1,u:d.u,v:d.v});f=new Ui.Color({y:d.y+0.1-0.2,u:d.u,v:d.v});b=new Ui.Color({y:d.y+0.3,u:d.u,v:d.v});lightColorDown=new Ui.Color({y:d.y,u:d.u,v:d.v})}this.rect1.setFill(g);if(this.getIsDown()){if(this.icon1!=undefined){this.icon1.setFill(f)}if(this.text1!=undefined){this.text1.setColor(f)}this.rect2.setFill(lightColorDown)}else{if(this.icon1!=undefined){this.icon1.setFill(c)}if(this.text1!=undefined){this.text1.setColor(c)}this.rect2.setFill(b)}if(this.icon2!=undefined){this.icon2.setFill(h)}if(this.text2!=undefined){this.text2.setColor(h)}var a=this.getStyleProperty("radius");this.lightShadow.setRadius(a);this.darkShadow.setRadius(a);this.rect2.setRadius(a);this.rect1.setRadius(a-1);this.updateSizes()},onDisable:function(){Ui.Button.base.onDisable.call(this);this.contentBox.setOpacity(0.2)},onEnable:function(){Ui.Button.base.onEnable.call(this);this.contentBox.setOpacity(1)},},{style:{color:new Ui.Color({r:0.31,g:0.66,b:1}),radius:4,spacing:3,},});Ui.Togglable.extend("Ui.CheckBox",{check:undefined,checkBox:undefined,contentBox:undefined,hbox:undefined,lightShadow:undefined,darkShadow:undefined,lightBorder:undefined,background:undefined,content:undefined,text:undefined,constructor:function(a){this.setPadding(3);this.hbox=new Ui.HBox();this.append(this.hbox);this.checkBox=new Ui.LBox();this.hbox.append(this.checkBox);this.lightShadow=new Ui.Rectangle({fill:new Ui.Color({r:1,g:1,b:1,a:0.25}),radius:4,margin:10,marginTop:11});this.checkBox.append(this.lightShadow);this.darkShadow=new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.4}),radius:4,margin:10,marginBottom:11});this.checkBox.append(this.darkShadow);this.lightBorder=new Ui.Rectangle({fill:"lightgray",radius:4,marginTop:11,marginBottom:12,marginLeft:11,marginRight:11});this.checkBox.append(this.lightBorder);this.background=new Ui.Rectangle({fill:"darkgray",radius:3,marginTop:12,marginBottom:12,marginLeft:11,marginRight:11});this.checkBox.append(this.background);this.check=Ui.Icon.create("check",24,24,"green");this.check.setMargin(12);this.check.hide();this.checkBox.append(this.check);this.connect(this,"down",this.onCheckBoxDown);this.connect(this,"up",this.onCheckBoxUp);this.connect(this,"toggle",this.onCheckBoxToggle);this.connect(this,"untoggle",this.onCheckBoxUntoggle);if(a.text!=undefined){this.setText(a.text)}if(a.content!=undefined){this.setContent(a.content)}},setText:function(a){if(a==undefined){if(this.contentBox!=undefined){this.hbox.remove(this.contentBox);this.contentBox=undefined}this.text=undefined;this.content=undefined}else{if(this.text!=undefined){this.text=a;this.contentBox.setText(this.text)}else{if(this.content!=undefined){this.hbox.remove(this.contentBox);this.content=undefined}this.text=a;this.contentBox=new Ui.Label({margin:8,text:this.text});this.hbox.append(this.contentBox,true)}}},getText:function(){return this.text},setContent:function(a){if(a==undefined){if(this.contentBox!=undefined){this.hbox.remove(this.contentBox);this.contentBox=undefined}this.text=undefined;this.content=undefined}else{if(this.text!=undefined){this.hbox.remove(this.contentBox);this.text=undefined}if(this.content!=undefined){this.contentBox.remove(this.content)}else{this.contentBox=new Ui.LBox({padding:8});this.hbox.append(this.contentBox,true)}this.content=a;this.contentBox.append(this.content)}},getContent:function(){return this.content},onCheckBoxDown:function(){this.background.setFill(this.getGradientDown());this.lightBorder.setFill(this.getLightBorderColorDown())},onCheckBoxUp:function(){this.background.setFill(this.getGradient());this.lightBorder.setFill(this.getLightBorderColor())},onCheckBoxToggle:function(){this.check.show()},onCheckBoxUntoggle:function(){this.check.hide()},getGradient:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})},{offset:0.05,color:new Ui.Color({y:a.y,u:a.u,v:a.v})},{offset:0.9,color:new Ui.Color({y:a.y,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})},]})},getGradientDown:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1-0.2,u:a.u,v:a.v})},{offset:0.1,color:new Ui.Color({y:a.y-0.2,u:a.u,v:a.v})},{offset:0.9,color:new Ui.Color({y:a.y-0.2,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1-0.2,u:a.u,v:a.v})},]})},getLightBorderColor:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.Color({y:a.y+0.2,u:a.u,v:a.v})},getLightBorderColorDown:function(){var a=this.getStyleProperty("color").getYuv();if(a.y<0.4){return new Ui.Color({y:a.y,u:a.u,v:a.v})}else{return new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})}},},{onStyleChange:function(){this.check.setFill(this.getStyleProperty("checkColor"));if(this.getIsDown()){this.background.setFill(this.getGradientDown());this.lightBorder.setFill(this.getLightBorderColorDown())}else{this.background.setFill(this.getGradient());this.lightBorder.setFill(this.getLightBorderColor())}var a=this.getStyleProperty("radius");this.lightShadow.setRadius(a);this.darkShadow.setRadius(a);this.lightBorder.setRadius(a);this.background.setRadius(a)},onDisable:function(){Ui.CheckBox.base.onDisable.call(this);this.check.setOpacity(0.4)},onEnable:function(){Ui.CheckBox.base.onEnable.call(this);this.check.setOpacity(1)},},{style:{color:new Ui.Color({r:0.89,g:0.89,b:0.89}),checkColor:new Ui.Color({r:0,g:0.6,b:0}),radius:4,},});Ui.VBox.extend("Ui.ToolBar",{hbox:undefined,background:undefined,constructor:function(a){this.topShadow=new Ui.Rectangle({height:1});Ui.ToolBar.base.append.call(this,this.topShadow);var b=new Ui.LBox();Ui.ToolBar.base.append.call(this,b);this.background=new Ui.Rectangle({});b.append(this.background);this.hbox=new Ui.HBox();b.append(this.hbox);this.bottomShadow=new Ui.Rectangle({height:1});Ui.ToolBar.base.append.call(this,this.bottomShadow)},getGradient:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})},]})},getLightColor:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.Color({y:a.y+0.3,u:a.u,v:a.v})},getDarkColor:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.Color({y:a.y-0.3,u:a.u,v:a.v})},},{append:function(b,a){this.hbox.append(b,a)},remove:function(a){this.hbox.remove(a)},onStyleChange:function(){var d;var b;var a;var c=this.getStyleProperty("color").getYuv();d=new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:c.y+0.1,u:c.u,v:c.v})},{offset:1,color:new Ui.Color({y:c.y-0.1,u:c.u,v:c.v})},]});b=new Ui.Color({y:c.y+0.3,u:c.u,v:c.v});a=new Ui.Color({y:c.y-0.3,u:c.u,v:c.v});this.background.setFill(d);this.topShadow.setFill(b);this.bottomShadow.setFill(a);var e=this.getStyleProperty("spacing");this.hbox.setMargin(e);this.hbox.setSpacing(e)},},{style:{color:new Ui.Color({r:0.11,g:0.56,b:1}),spacing:3,"Ui.Button":{color:new Ui.Color({r:0.96,g:0.96,b:0.96}),},"Ui.TextButtonField":{color:new Ui.Color({r:0.96,g:0.96,b:0.96}),},},});Ui.Scrollable.extend("Ui.ScrollingArea",{constructor:function(a){this.setScrollbarHorizontal(new Ui.Rectangle({fill:"#009ee0",radius:4,width:8,height:8,margin:5}));this.setScrollbarVertical(new Ui.Rectangle({fill:"#009ee0",radius:4,width:8,height:8,margin:5}))},},{});Ui.Container.extend("Ui.Slider",{value:0,background:undefined,button:undefined,constructor:function(b){if(b.value!=undefined){this.value=b.value}this.lightShadow=new Ui.Rectangle({fill:new Ui.Color({r:1,g:1,b:1,a:0.25}),radius:7});this.appendChild(this.lightShadow);this.darkShadow=new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.4}),radius:7});this.appendChild(this.darkShadow);this.background=new Ui.Rectangle({fill:new Ui.Color({r:0.85,g:0.85,b:0.85}),radius:7,shadow:"inset 0px 0px 1px 1px rgba(0, 0, 0, 0.20)"});this.appendChild(this.background);this.barBox=new Ui.LBox();this.appendChild(this.barBox);this.barBackground=new Ui.Rectangle({radius:6});this.barBox.append(this.barBackground);this.bar=new Ui.Rectangle({margin:1,radius:6});this.barBox.append(this.bar);this.button=new Ui.Movable({moveVertical:false});this.appendChild(this.button);this.connect(this.button,"move",this.onButtonMove);var a=new Ui.LBox();this.button.setContent(a);this.buttonContentBorder=new Ui.Rectangle({radius:20,fill:"black"});a.append(this.buttonContentBorder);this.buttonContent=new Ui.Rectangle({radius:20,fill:"lightblue",margin:3});a.append(this.buttonContent);this.addEvents("change")},getValue:function(){return this.value},setValue:function(a){if(this.value!=a){this.value=a;this.updateValue();this.fireEvent("change",this)}},onButtonMove:function(b){var e=this.button.getPositionX();var c=this.getLayoutWidth();var d=c-44;if(e<0){e=0}else{if(e>d){e=d}}var a=this.value;this.value=e/d;this.updateValue();if(a!=this.value){this.fireEvent("change",this)}},updateValue:function(){var b=this.getLayoutWidth();var a=this.getLayoutHeight();var c=b-44;this.button.setPosition(c*this.value,undefined);var d=(a-44)/2;this.barBox.arrange(18,d+15,(b-36)*this.value,15)},getGradient:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})},]})},getBarBorderColor:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.Color({y:a.y-0.2,u:a.u,v:a.v})},getContentBorderColor:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.Color({y:a.y-0.4,u:a.u,v:a.v})},},{measureCore:function(b,a){this.lightShadow.measure(b-34,16);this.darkShadow.measure(b-34,16);this.background.measure(b-36,16);this.barBox.measure(b-38,12);this.button.measure(40,40);return{width:88,height:44}},arrangeCore:function(b,a){var c=(a-44)/2;this.lightShadow.arrange(17,c+15,b-34,16);this.darkShadow.arrange(17,c+14,b-34,16);this.background.arrange(18,c+15,b-36,16);this.button.arrange(2,c+2,40,40);this.updateValue()},onStyleChange:function(){this.bar.setFill(this.getGradient());this.barBackground.setFill(this.getBarBorderColor());this.buttonContent.setFill(this.getGradient());this.buttonContentBorder.setFill(this.getContentBorderColor())},},{style:{color:new Ui.Color({r:0.31,g:0.66,b:1}),},});Ui.Container.extend("Ui.ProgressBar",{value:0,barBox:undefined,barBackground:undefined,bar:undefined,lightShadow:undefined,darkShadow:undefined,lightBorder:undefined,background:undefined,constructor:function(a){this.lightShadow=new Ui.Rectangle({fill:new Ui.Color({r:1,g:1,b:1,a:0.25}),radius:4,marginTop:1});this.appendChild(this.lightShadow);this.darkShadow=new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.4}),radius:4,marginBottom:1});this.appendChild(this.darkShadow);this.lightBorder=new Ui.Rectangle({fill:"lightgray",radius:4,marginTop:1,marginBottom:2,marginLeft:1,marginRight:1});this.appendChild(this.lightBorder);this.background=new Ui.Rectangle({fill:new Ui.Color({r:0.85,g:0.85,b:0.85}),radius:3,marginTop:1,marginBottom:2,marginLeft:1,marginRight:1,shadow:"inset 0px 0px 1px 1px rgba(0, 0, 0, 0.20)"});this.appendChild(this.background);this.barBox=new Ui.LBox();this.appendChild(this.barBox);this.barBackground=new Ui.Rectangle();this.barBox.append(this.barBackground);this.bar=new Ui.Rectangle({margin:1});this.barBox.append(this.bar);if(a.value!=undefined){this.setValue(a.value)}},setValue:function(b){if(b!=this.value){this.value=b;var a=(this.getLayoutWidth()-4)*this.value;if(a<2){this.barBox.hide()}else{this.barBox.show();this.barBox.arrange(2,2,a,this.getLayoutHeight()-5)}}},getValue:function(){return this.value},getGradient:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})},]})},getBarBorderColor:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.Color({y:a.y-0.2,u:a.u,v:a.v})},getLightBorderColor:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.Color({y:a.y+0.3,u:a.u,v:a.v})},},{measureCore:function(d,a){var e=0;var c=0;var b;b=this.lightShadow.measure(d,a);e=Math.max(b.height,e);c=Math.max(b.width,c);b=this.darkShadow.measure(d,a);e=Math.max(b.height,e);c=Math.max(b.width,c);b=this.lightBorder.measure(d,a);e=Math.max(b.height,e);c=Math.max(b.width,c);b=this.background.measure(d,a);e=Math.max(b.height,e);c=Math.max(b.width,c);this.barBox.measure(d,a);return{width:c,height:Math.max(e,12)}},arrangeCore:function(c,a){this.lightShadow.arrange(0,0,c,a);this.darkShadow.arrange(0,0,c,a);this.lightBorder.arrange(0,0,c,a);this.background.arrange(0,0,c,a);var b=(c-4)*this.value;if(b<2){this.barBox.hide()}else{this.barBox.show();this.barBox.arrange(2,2,b,this.getLayoutHeight()-5)}},onStyleChange:function(){var a=this.getStyleProperty("radius");this.bar.setRadius(a);this.bar.setFill(this.getGradient());this.barBackground.setRadius(a);this.barBackground.setFill(this.getBarBorderColor())},},{style:{color:new Ui.Color({r:0.39,g:0.92,b:0.39}),radius:4,},});Ui.LBox.extend("Ui.Loading",{icon:undefined,clock:undefined,constructor:function(a){this.icon=Ui.Icon.create("loading",48,48,"black");this.icon.setTransformOrigin(0.5,0.5);this.append(this.icon);this.clock=new Anim.Clock({repeat:"forever",duration:2,callback:this.onTick,scope:this})},onTick:function(b,a){this.icon.setTransform(Ui.Matrix.createRotate(a*360))},},{onLoad:function(){Ui.Loading.base.onLoad.call(this);this.clock.begin()},onUnload:function(){Ui.Loading.base.onUnload.call(this);this.clock.stop()},onStyleChange:function(){this.icon.setFill(this.getStyleProperty("color"))},},{style:{color:new Ui.Color({r:0.39,g:0.39,b:0.39}),},});Ui.ScrollingArea.extend("Ui.IconList",{flow:undefined,constructor:function(a){this.flow=new Ui.Flow({uniform:true});this.setContent(this.flow)},append:function(a){this.flow.append(a)},remove:function(a){this.flow.remove(a)},clear:function(){while(this.flow.getChildren().length>0){this.flow.remove(this.flow.getChildren()[0])}},},{});Ui.Selectable.extend("Ui.IconListItem",{constructor:function(a){this.setPadding(10);this.setVerticalAlign("top");this.setHorizontalAlign("center")},},{});Ui.Container.extend("Ui.Locator",{path:undefined,backgrounds:undefined,foregrounds:undefined,spacing:2,constructor:function(a){if(a.path!=undefined){this.setPath(a.path)}this.addEvents("change")},setPath:function(g){this.path=g;while(this.getChildren().length>0){this.removeChild(this.getChildren()[0])}this.backgrounds=[];this.foregrounds=[];var d;if(g=="/"){var c=new Ui.Pressable();c.locatorPath="/";c.locatorPos=0;this.connect(c,"press",this.onPathPress);this.connect(c,"down",this.onPathDown);this.connect(c,"up",this.onPathUp);c.appendChild(new Ui.Rectangle({fill:"lightblue",radius:8}));this.backgrounds.push(c);this.appendChild(c);var a=new Ui.Pressable();a.locatorPath="/";a.locatorPos=0;this.connect(a,"press",this.onPathPress);this.connect(a,"down",this.onPathDown);this.connect(a,"up",this.onPathUp);a.appendChild(new Ui.LocatorHome({verticalAlign:"center",horizontalAlign:"center",width:25,height:25,margin:5}));this.foregrounds.push(a);this.appendChild(a)}else{var h=g.split("/");var f=[];for(var b=0;b<h.length;b++){if(h[b]!=""){f.push(h[b])}}h=f;var e="/";var c=new Ui.Pressable();c.locatorPath=e;c.locatorPos=0;this.connect(c,"press",this.onPathPress);this.connect(c,"down",this.onPathDown);this.connect(c,"up",this.onPathUp);c.appendChild(new Ui.LocatorRightArrow({fill:"lightblue",radius:8}));this.backgrounds.push(c);this.appendChild(c);var a=new Ui.Pressable();a.locatorPath=e;a.locatorPos=0;this.connect(a,"press",this.onPathPress);this.connect(a,"down",this.onPathDown);this.connect(a,"up",this.onPathUp);a.appendChild(new Ui.LocatorHome({verticalAlign:"center",horizontalAlign:"center",width:25,height:25,margin:5}));this.foregrounds.push(a);this.appendChild(a);for(var b=0;b<h.length;b++){e+=h[b];var c=new Ui.Pressable();c.locatorPath=e;c.locatorPos=b+1;this.connect(c,"press",this.onPathPress);this.connect(c,"down",this.onPathDown);this.connect(c,"up",this.onPathUp);if(b==h.length-1){c.appendChild(new Ui.LocatorLeftArrow({fill:"lightblue",radius:8}))}else{c.appendChild(new Ui.LocatorLeftRightArrow({fill:"lightblue",radius:8}))}this.backgrounds.push(c);this.appendChild(c);var a=new Ui.Pressable();a.locatorPos=b+1;this.connect(a,"press",this.onPathPress);this.connect(a,"down",this.onPathDown);this.connect(a,"up",this.onPathUp);a.locatorPath=e;a.appendChild(new Ui.Label({text:h[b],margin:8}));this.foregrounds.push(a);this.appendChild(a);e+="/"}}},getPath:function(){return this.path},onPathPress:function(a){this.fireEvent("change",this,a.locatorPath)},onPathDown:function(a){this.backgrounds[a.locatorPos].getChildren()[0].setFill("#38acec")},onPathUp:function(a){this.backgrounds[a.locatorPos].getChildren()[0].setFill("lightblue")},},{measureCore:function(d,a){if(this.foregrounds.length==0){return{width:0,height:0}}for(var b=0;b<this.getChildren().length;b++){this.getChildren()[b].measure(d,a)}if(this.foregrounds.length==1){return{width:this.foregrounds[0].getMeasureWidth(),height:this.foregrounds[0].getMeasureHeight()}}else{var c=0;var e=0;for(var b=0;b<this.foregrounds.length;b++){var f=this.foregrounds[b];if(f.getMeasureHeight()>e){e=f.getMeasureHeight()}c+=f.getMeasureWidth()}c+=(this.foregrounds.length-1)*(e/2+this.spacing);return{width:c,height:e}}},arrangeCore:function(f,b){if(this.foregrounds.length==1){this.foregrounds[0].arrange(0,0,f,b);this.backgrounds[0].arrange(0,0,f,b);return}x=0;for(var e=0;e<this.foregrounds.length;e++){var d=this.backgrounds[e];var c=this.foregrounds[e];var a=c.getMeasureWidth();c.arrange(x,0,a,b);if(e==0){d.arrange(x,0,a+b/2,b)}else{if(e==this.foregrounds.length-1){d.arrange(x-b/2,0,a+b/2,b)}else{d.arrange(x-b/2,0,a+b,b)}}x+=a+b/2+this.spacing}},});Ui.SVGElement.extend("Ui.LocatorRightArrow",{arrowDrawing:undefined,radius:8,fill:"black",constructor:function(a){if(a.radius!=undefined){this.setRadius(a.radius)}if(a.fill!=undefined){this.setFill(a.fill)}},setRadius:function(a){this.radius=a},setFill:function(a){this.fill=a;this.arrowDrawing.style.fill=this.fill},},{render:function(){this.arrowDrawing=document.createElementNS(svgNS,"path");this.arrowDrawing.style.fill=this.fill;this.arrowDrawing.style.fillOpacity="1";this.arrowDrawing.style.stroke="none";return this.arrowDrawing},arrangeCore:function(b,a){var e=b-a/2;var d=a/2;var c=a-this.radius;this.arrowDrawing.setAttributeNS(null,"d","M"+this.radius+",0 L"+e+",0 L"+b+","+d+" L"+e+","+a+" L"+this.radius+","+a+" A"+this.radius+","+this.radius+" 0 0,1 0,"+c+" L0,"+this.radius+" A"+this.radius+","+this.radius+" 0 0,1 "+this.radius+",0 z")},});Ui.SVGElement.extend("Ui.LocatorLeftArrow",{arrowDrawing:undefined,radius:8,fill:"black",constructor:function(a){if(a.radius!=undefined){this.setRadius(a.radius)}if(a.fill!=undefined){this.setFill(a.fill)}},setRadius:function(a){this.radius=a},setFill:function(a){this.fill=a;this.arrowDrawing.style.fill=this.fill},},{render:function(){this.arrowDrawing=document.createElementNS(svgNS,"path");this.arrowDrawing.style.fill=this.fill;this.arrowDrawing.style.fillOpacity="1";this.arrowDrawing.style.stroke="none";return this.arrowDrawing},arrangeCore:function(b,a){var e=b-this.radius;var d=a-this.radius;var c=a/2;this.arrowDrawing.setAttributeNS(null,"d","M0,0 L"+e+",0 A"+this.radius+","+this.radius+" 0 0,1 "+b+","+this.radius+" L"+b+","+d+" A"+this.radius+","+this.radius+" 0 0,1 "+e+","+a+" L0,"+a+" L"+c+","+c+" z")},});Ui.SVGElement.extend("Ui.LocatorLeftRightArrow",{arrowDrawing:undefined,radius:8,fill:"black",constructor:function(a){if(a.radius!=undefined){this.setRadius(a.radius)}if(a.fill!=undefined){this.setFill(a.fill)}},setRadius:function(a){this.radius=a},setFill:function(a){this.fill=a;this.arrowDrawing.style.fill=this.fill},},{render:function(){this.arrowDrawing=document.createElementNS(svgNS,"path");this.arrowDrawing.style.fill=this.fill;this.arrowDrawing.style.fillOpacity="1";this.arrowDrawing.style.stroke="none";return this.arrowDrawing},arrangeCore:function(b,a){var d=b-a/2;var c=a/2;this.arrowDrawing.setAttributeNS(null,"d","M0,0 L"+d+",0 L"+b+","+c+" L"+d+","+a+" L0,"+a+" L"+c+","+c+" z")},});Ui.SVGElement.extend("Ui.LocatorHome",{homeDrawing:undefined,fill:"black",constructor:function(a){if(a.fill!=undefined){this.setFill(a.fill)}},setFill:function(a){this.fill=a;this.homeDrawing.style.fill=this.fill},},{render:function(){this.homeDrawing=document.createElementNS(svgNS,"path");this.homeDrawing.style.fill=this.fill;this.homeDrawing.style.fillOpacity="1";this.homeDrawing.style.stroke="none";this.homeDrawing.setAttributeNS(null,"d","M 25.78125 8.4375 C 25.324787 8.4375 24.892151 8.63045 24.53125 8.96875 C 24.53125 8.96875 6.032579 23.87715 5.6875 24.21875 C 4.081261 25.55365 4.524131 25.86215 4.96875 26.46875 C 7.1319435 26.472745 6.9387918 26.465628 8.875 26.46875 L 8.875 38.40625 C 8.875 40.46895 10.593558 42.1875 12.65625 42.1875 L 37.3125 42.1875 C 39.375192 42.1875 41.09375 40.46895 41.09375 38.40625 L 41.09375 26.5 C 42.834133 26.49218 44.96875 26.46875 44.96875 26.46875 C 45.304525 25.79985 45.215875 24.96585 44.65625 24.40625 L 39.96875 20.3125 C 40.040347 20.078087 40.09375 19.817094 40.09375 19.5625 L 40.09375 11.875 C 40.09375 10.4883 38.949133 9.34375 37.5625 9.34375 L 33.25 9.34375 C 31.863368 9.34375 30.71875 10.4883 30.71875 11.875 L 30.71875 12.1875 L 27.03125 8.96875 C 26.681485 8.61895 26.237713 8.4375 25.78125 8.4375 z M 33.71875 12.34375 L 37.09375 12.34375 L 37.09375 17.78125 L 33.71875 14.8125 L 33.71875 12.34375 z M 12.875 26.46875 C 23.518938 26.483067 32.947599 26.505366 37.09375 26.5 L 37.09375 38.1875 L 12.875 38.1875 L 12.875 26.46875 z");return this.homeDrawing},arrangeCore:function(b,a){var c=Math.min(b,a)/48;this.homeDrawing.setAttributeNS(null,"transform","scale( "+c.toFixed(4)+", "+c.toFixed(4)+" )")},});Ui.LBox.extend("Ui.TextField",{entry:undefined,constructor:function(a){this.setPadding(3);this.append(new Ui.Rectangle({fill:new Ui.Color({r:1,g:1,b:1,a:0.25}),radius:4,marginTop:1}));this.append(new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.4}),radius:4,marginBottom:1}));this.append(new Ui.Rectangle({fill:new Ui.Color({r:0.98,g:0.98,b:0.98}),radius:4,margin:1,marginBottom:2,shadow:"inset 0px 0px 1px 1px rgba(0, 0, 0, 0.20)"}));this.entry=new Ui.Entry({margin:4,fontSize:16});this.append(this.entry);this.connect(this.entry,"change",this.onEntryChange);this.connect(this.entry,"validate",this.onEntryValidate);this.addEvents("change","validate")},getValue:function(){return this.entry.getValue()},setValue:function(a){this.entry.setValue(a)},onEntryChange:function(a,b){this.fireEvent("change",this,b)},onEntryValidate:function(a){this.fireEvent("validate",this)},},{onStyleChange:function(){},onDisable:function(){Ui.TextField.base.onDisable.call(this)},onEnable:function(){Ui.TextField.base.onEnable.call(this)},});Ui.LBox.extend("Ui.TextButtonField",{entry:undefined,button:undefined,buttonIcon:undefined,buttonText:undefined,constructor:function(c){this.setPadding(3);this.lightShadow=new Ui.Rectangle({fill:new Ui.Color({r:1,g:1,b:1,a:0.25}),radius:4,marginTop:1});this.append(this.lightShadow);this.darkShadow=new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.4}),radius:4,marginBottom:1});this.append(this.darkShadow);var b=new Ui.HBox({margin:1});this.append(b);var a=new Ui.LBox({marginBottom:1});b.append(a,true);a.append(new Ui.Rectangle({fill:new Ui.Color({r:0.98,g:0.98,b:0.98}),radiusTopLeft:4,radiusBottomLeft:4,shadow:"inset 0px 0px 1px 1px rgba(0, 0, 0, 0.20)"}));this.entry=new Ui.Entry({margin:4,fontSize:16});a.append(this.entry);this.connect(this.entry,"change",this.onEntryChange);this.connect(this.entry,"validate",this.onEntryValidate);this.button=new Ui.Pressable();b.append(this.button);this.connect(this.button,"press",this.onButtonPress);this.connect(this.button,"down",this.onButtonDown);this.connect(this.button,"up",this.onButtonUp);this.rect2=new Ui.Rectangle({radiusTopRight:4,radiusBottomRight:4,marginBottom:1});this.button.append(this.rect2);this.rect1=new Ui.Rectangle({radiusTopRight:3,radiusBottomRight:3,marginLeft:1,marginTop:1,marginBottom:1});this.button.append(this.rect1);this.buttonContentBox=new Ui.HBox({verticalAlign:"center",horizontalAlign:"center"});this.button.append(this.buttonContentBox);this.iconBox=new Ui.LBox({verticalAlign:"center",horizontalAlign:"center"});this.buttonContentBox.append(this.iconBox);if(c.buttonText!=undefined){this.setButtonText(c.buttonText)}if(c.buttonIcon!=undefined){this.setButtonIcon(c.buttonIcon)}this.addEvents("change","validate")},getButtonIcon:function(){return this.buttonIcon},setButtonIcon:function(a){if(a==undefined){if(this.buttonIcon!=undefined){this.iconBox.remove(this.icon1);this.iconBox.remove(this.icon2);this.icon1=undefined;this.icon2=undefined;this.buttonIcon=undefined}if(this.buttonContent!=undefined){this.iconBox.remove(this.buttonContent);this.buttonContent=undefined}}else{if(typeof(a)=="string"){if(this.buttonContent!=undefined){this.iconBox.remove(this.buttonContent);this.buttonContent=undefined}if(this.buttonIcon!=a){this.buttonIcon=a;if(this.icon1!=undefined){this.iconBox.remove(this.icon1)}if(this.icon2!=undefined){this.iconBox.remove(this.icon2)}this.icon1=Ui.Icon.create(a,24,24,new Ui.Color({r:1,g:1,b:1}));this.icon2=Ui.Icon.create(a,24,24,new Ui.Color({r:0,g:0,b:0}));this.iconBox.append(this.icon1);this.iconBox.append(this.icon2)}}else{if(this.icon1!=undefined){this.iconBox.remove(this.icon1)}if(this.icon2!=undefined){this.iconBox.remove(this.icon2)}this.icon1=undefined;this.icon2=undefined;this.buttonIcon=undefined;if(this.buttonContent!=a){if(this.buttonContent!=undefined){this.iconBox.remove(this.buttonContent)}this.buttonContent=a;this.iconBox.append(this.buttonContent)}}}this.updateSizes()},setButtonText:function(a){if(this.buttonText!=a){this.buttonText=a;if(this.buttonText==undefined){if(this.textBox!=undefined){this.buttonContentBox.remove(this.textBox);this.textBox=undefined;this.text1=undefined;this.text2=undefined}}else{if(this.textBox==undefined){this.textBox=new Ui.LBox({verticalAlign:"center",horizontalAlign:"center"});this.buttonContentBox.append(this.textBox);this.text1=new Ui.Label({text:this.buttonText,color:new Ui.Color({r:0.96,g:0.96,b:0.96})});this.text2=new Ui.Label({text:this.buttonText,color:new Ui.Color({r:0.38,g:0.38,b:0.38})});this.textBox.append(this.text1);this.textBox.append(this.text2)}else{this.text1.setText(this.buttonText);this.text2.setText(this.buttonText)}}this.updateSizes()}},getValue:function(){return this.entry.getValue()},setValue:function(a){this.entry.setValue(a)},updateSizes:function(){var a=this.getStyleProperty("spacing");if(this.buttonText!=undefined){if(this.buttonIcon!=undefined){this.textBox.setMarginLeft(a+2);this.textBox.setMarginRight(a+2);this.textBox.setMarginTop(a+1);this.textBox.setMarginBottom(a+1);this.text1.setMargin(0);this.text1.setMarginTop(2);this.text2.setMargin(1);this.text1.setFontWeight("bold");this.text2.setFontWeight("bold");this.iconBox.setMarginLeft(a+2);this.iconBox.setMarginRight(0);this.iconBox.setMarginTop(a+1);this.iconBox.setMarginBottom(a+1);this.icon1.setMarginTop(2);this.icon1.setMarginBottom(0);this.icon2.setMarginTop(1);this.icon2.setMarginBottom(1)}else{if(this.content!=undefined){this.textBox.setMarginLeft(a+2);this.textBox.setMarginRight(a+2);this.textBox.setMarginTop(a+1);this.textBox.setMarginBottom(a+1);this.text1.setMargin(0);this.text1.setMarginTop(2);this.text2.setMargin(1);this.text1.setFontWeight("bold");this.text2.setFontWeight("bold");this.iconBox.setMarginLeft(a+2);this.iconBox.setMarginRight(0);this.iconBox.setMarginTop(a+2);this.iconBox.setMarginBottom(0)}else{this.textBox.setMarginLeft(a+4);this.textBox.setMarginRight(a+4);this.textBox.setMarginTop(a+1);this.textBox.setMarginBottom(a+1);this.text1.setMargin(0);this.text1.setMarginTop(2);this.text2.setMargin(1);this.text1.setFontWeight("bold");this.text2.setFontWeight("bold");this.iconBox.setMargin(0)}}}else{if(this.buttonIcon!=undefined){this.iconBox.setMarginLeft(a+2);this.iconBox.setMarginRight(a+2);this.iconBox.setMarginTop(a+1);this.iconBox.setMarginBottom(a+1);this.icon1.setMarginTop(2);this.icon1.setMarginBottom(0);this.icon2.setMarginTop(1);this.icon2.setMarginBottom(1)}else{if(this.content!=undefined){this.iconBox.setMargin(a+2)}}}},getGradient:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})},]})},getGradientDown:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1-0.2,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1-0.2,u:a.u,v:a.v})},]})},getContentColor:function(){var a=this.getStyleProperty("color").getYuv();if(a.y<0.4){return new Ui.Color({y:a.y+0.6,u:a.u,v:a.v})}else{return new Ui.Color({y:a.y-0.6,u:a.u,v:a.v})}},getContentLightColor:function(){var a=this.getStyleProperty("color");var b=this.getStyleProperty("color").getYuv();if(b.y<0.4){return new Ui.Color({y:b.y-0.2,u:b.u,v:b.v})}else{return new Ui.Color({y:b.y+0.1,u:b.u,v:b.v})}},getContentLightColorDown:function(){var a=this.getStyleProperty("color").getYuv();if(a.y<0.4){return new Ui.Color({y:a.y-0.2,u:a.u,v:a.v})}else{return new Ui.Color({y:a.y+0.1-0.2,u:a.u,v:a.v})}},getLightColor:function(){var a=this.getStyleProperty("color").getYuv();if(a.y<0.4){return new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})}else{return new Ui.Color({y:a.y+0.3,u:a.u,v:a.v})}},getLightColorDown:function(){var a=this.getStyleProperty("color").getYuv();if(a.y<0.4){return new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})}else{return new Ui.Color({y:a.y,u:a.u,v:a.v})}},onButtonPress:function(){this.fireEvent("validate",this)},onButtonDown:function(){this.rect1.setFill(this.getGradientDown());if(this.icon1!=undefined){this.icon1.setFill(this.getContentLightColorDown())}if(this.text1!=undefined){this.text1.setColor(this.getContentLightColorDown())}this.rect2.setFill(this.getLightColorDown())},onButtonUp:function(){this.rect1.setFill(this.getGradient());if(this.icon1!=undefined){this.icon1.setFill(this.getContentLightColor())}if(this.text1!=undefined){this.text1.setColor(this.getContentLightColor())}this.rect2.setFill(this.getLightColor())},onEntryChange:function(a,b){this.fireEvent("change",this,b)},onEntryValidate:function(a){this.fireEvent("validate",this)},},{onStyleChange:function(){var f;var g;var b;var e;var a;var d;var c=this.getStyleProperty("color").getYuv();f=new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:c.y+0.1,u:c.u,v:c.v})},{offset:1,color:new Ui.Color({y:c.y-0.1,u:c.u,v:c.v})},]});d=new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:c.y+0.1-0.2,u:c.u,v:c.v})},{offset:1,color:new Ui.Color({y:c.y-0.1-0.2,u:c.u,v:c.v})},]});if(c.y<0.4){g=new Ui.Color({y:c.y+0.6,u:c.u,v:c.v});b=new Ui.Color({y:c.y-0.2,u:c.u,v:c.v});e=new Ui.Color({y:c.y-0.2,u:c.u,v:c.v});a=new Ui.Color({y:c.y+0.3,u:c.u,v:c.v});lightColorDown=new Ui.Color({y:c.y+0.1,u:c.u,v:c.v})}else{g=new Ui.Color({y:c.y-0.6,u:c.u,v:c.v});b=new Ui.Color({y:c.y+0.1,u:c.u,v:c.v});e=new Ui.Color({y:c.y+0.1-0.2,u:c.u,v:c.v});a=new Ui.Color({y:c.y+0.3,u:c.u,v:c.v});lightColorDown=new Ui.Color({y:c.y,u:c.u,v:c.v})}this.rect1.setFill(f);if(this.button.getIsDown()){if(this.icon1!=undefined){this.icon1.setFill(e)}if(this.text1!=undefined){this.text1.setColor(e)}this.rect2.setFill(lightColorDown)}else{if(this.icon1!=undefined){this.icon1.setFill(b)}if(this.text1!=undefined){this.text1.setColor(b)}this.rect2.setFill(a)}if(this.icon2!=undefined){this.icon2.setFill(g)}if(this.text2!=undefined){this.text2.setColor(g)}this.updateSizes()},onDisable:function(){Ui.TextField.base.onDisable.call(this)},onEnable:function(){Ui.TextField.base.onEnable.call(this)},},{style:{color:new Ui.Color({r:0.31,g:0.66,b:1}),radius:4,spacing:3,},});Ui.LBox.extend("Ui.TextAreaField",{textarea:undefined,constructor:function(a){this.append(new Ui.Rectangle({fill:new Ui.Color({r:1,g:1,b:1,a:0.25}),radius:4,marginTop:1}));this.append(new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.4}),radius:4,marginBottom:1}));this.append(new Ui.Rectangle({fill:new Ui.Color({r:0.96,g:0.96,b:0.96}),radius:4,marginTop:1,marginBottom:1,shadow:"inset 0px 0px 2px 1px rgba(0, 0, 0, 0.15)"}));this.textarea=new Ui.TextArea({margin:4});this.append(this.textarea)},},{onStyleChange:function(){},onDisable:function(){Ui.TextAreaField.base.onDisable.call(this)},onEnable:function(){Ui.TextAreaField.base.onEnable.call(this)},});Ui.Container.extend("Ui.ListView",{data:undefined,headers:undefined,rowsHeight:0,headersHeight:0,selectedRow:undefined,constructor:function(a){this.rowContainer=new Ui.Container();this.appendChild(this.rowContainer);if(a.headers!=undefined){this.headers=a.headers}else{this.headers=[{width:100,type:"string",title:"Title",key:"default"}]}this.data=[];for(var b=0;b<this.headers.length;b++){var c=this.headers[b];c.ui=new Ui.ListViewHeader({title:c.title,width:c.width});c.rows=[];c.colWidth=c.width;this.appendChild(c.ui)}if(a.data!=undefined){for(var b=0;b<a.data.length;b++){this.appendData(a.data[b])}}this.addEvents("select","unselect")},getSelectedRow:function(){return this.selectedRow},appendData:function(c){this.data.push(c);for(var b=0;b<this.headers.length;b++){var a=new Ui.ListViewCellString({key:this.headers[b].key});this.connect(a,"down",this.onCellDown);this.connect(a,"up",this.onCellUp);this.connect(a,"select",this.onCellSelect);a.setString(c[this.headers[b].key]);this.headers[b].rows.push(a);this.rowContainer.appendChild(a)}this.invalidateMeasure()},removeData:function(a){var b=this.findDataRow(a);if(b!=-1){this.removeDataAt(b)}},removeDataAt:function(b){if(b<this.data.length){if(this.selectedRow==b){this.fireEvent("unselect",this.selectedRow)}this.data.splice(b,1);for(var c=0;c<this.headers.length;c++){var a=this.headers[c].rows[b];if(this.selectedRow==b){a.unselect()}this.disconnect(a,"down",this.onCellDown);this.disconnect(a,"up",this.onCellUp);this.disconnect(a,"select",this.onCellSelect);this.rowContainer.removeChild(a);this.headers[c].rows.splice(b,1)}if(this.selectedRow==b){this.selectedRow=undefined}this.invalidateMeasure()}},clearData:function(){while(this.data.length>0){this.removeDataAt(0)}},getData:function(){return this.data},findDataRow:function(a){for(var b=0;b<this.data.length;b++){if(a==this.data[b]){return b}}return -1},findCellRow:function(a){var c=a.getKey();var f=undefined;for(var b=0;b<this.headers.length;b++){if(this.headers[b].key==c){f=this.headers[b];break}}if(f==undefined){return -1}var e=undefined;for(var d=0;d<f.rows.length;d++){if(a==f.rows[d]){e=d;break}}if(e==undefined){return -1}return e},onCellDown:function(a){var c=this.findCellRow(a);if(c!=-1){for(var b=0;b<this.headers.length;b++){this.headers[b].rows[c].down()}}},onCellUp:function(a){var c=this.findCellRow(a);if(c!=-1){for(var b=0;b<this.headers.length;b++){this.headers[b].rows[c].up()}}},onCellSelect:function(a){var c=this.findCellRow(a);if(c!=-1){if(this.selectedRow!=undefined){if(this.selectedRow==c){return}for(var b=0;b<this.headers.length;b++){this.headers[b].rows[this.selectedRow].unselect()}this.fireEvent("unselect",this,this.selectedRow)}this.selectedRow=c;for(var b=0;b<this.headers.length;b++){var a=this.headers[b].rows[c];this.disconnect(a,"select",this.onCellSelect);this.headers[b].rows[c].select();this.connect(a,"select",this.onCellSelect)}this.fireEvent("select",this,this.selectedRow)}},},{measureCore:function(c,k){for(var d=0;d<this.headers.length;d++){this.headers[d].minWidth=0}var a;do{a=true;this.rowsHeight=0;this.headersHeight=0;var l;do{l=true;var i=0;var j=c;for(var d=0;d<this.headers.length;d++){var g=this.headers[d];var f=g.minWidth;if(d==this.headers.length-1){f=Math.max(j,f)}var m=g.ui.measure(f,this.headersHeight);if(m.height>i){i=m.height}if(m.width>g.minWidth){g.minWidth=m.width;a=false}j-=g.minWidth}if(i>this.headersHeight){this.headersHeight=i;l=false}}while(!l);for(var h=0;h<this.data.length;h++){var e=this.data[h];e.rowHeight=0;var l;do{l=true;var i=0;var j=c;for(var d=0;d<this.headers.length;d++){var g=this.headers[d];cell=this.headers[d].rows[h];var f=g.minWidth;if(d==this.headers.length-1){f=Math.max(j,f)}var m=cell.measure(f,e.rowHeight);if(m.height>i){i=m.height}if(m.width>g.minWidth){g.minWidth=m.width;a=false}j-=g.minWidth}if(i!=e.rowHeight){l=false;e.rowHeight=i}}while(!l);this.rowsHeight+=e.rowHeight}}while(!a);var b=0;for(var d=0;d<this.headers.length;d++){b+=this.headers[d].minWidth}return{width:b,height:this.headersHeight+this.rowsHeight}},arrangeCore:function(a,j){var g=0;var i=a;for(var b=0;b<this.headers.length;b++){var e=this.headers[b];var d=e.minWidth;if(b==this.headers.length-1){d=Math.max(d,i)}e.ui.arrange(g,0,d,this.headersHeight);g+=d;i-=d}if(this.data.length==0){return}var f=0;for(var k=0;k<this.data.length;k++){var c=this.data[k];var g=0;var i=a;for(var b=0;b<this.headers.length;b++){var e=this.headers[b];var d=e.minWidth;if(b==this.headers.length-1){d=Math.max(d,i)}var h=e.rows[k];h.arrange(g,f,d,c.rowHeight);g+=d;i-=d}f+=c.rowHeight}this.rowContainer.arrange(0,this.headersHeight,a,j-this.headersHeight)},});Ui.Pressable.extend("Ui.ListViewHeader",{title:undefined,uiTitle:undefined,background:undefined,border:undefined,constructor:function(a){this.border=new Ui.Rectangle();this.append(this.border);this.background=new Ui.Rectangle({marginTop:1,marginBottom:1,marginRight:1});this.append(this.background);this.uiTitle=new Ui.Label({margin:8});this.append(this.uiTitle);if(a.title!=undefined){this.setTitle(a.title)}this.connect(this,"down",this.onListViewHeaderDown);this.connect(this,"up",this.onListViewHeaderUp)},getTitle:function(){return this.title},setTitle:function(a){if(this.title!=a){this.title=a;this.uiTitle.setText(a)}},getGradient:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})},]})},getGradientDown:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1-0.2,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1-0.2,u:a.u,v:a.v})},]})},getDarkColor:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.Color({y:a.y-0.3,u:a.u,v:a.v})},onListViewHeaderDown:function(){this.background.setFill(this.getGradientDown())},onListViewHeaderUp:function(){this.background.setFill(this.getGradient())},},{onStyleChange:function(){var c;var a;var b=this.getStyleProperty("color").getYuv();c=new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:b.y+0.1,u:b.u,v:b.v})},{offset:1,color:new Ui.Color({y:b.y-0.1,u:b.u,v:b.v})},]});a=new Ui.Color({y:b.y-0.3,u:b.u,v:b.v});this.background.setFill(c);this.border.setFill(a);var d=this.getStyleProperty("spacing");this.uiTitle.setMargin(d+2)},},{style:{color:new Ui.Color({r:0.96,g:0.96,b:0.96}),spacing:5,}});Ui.Selectable.extend("Ui.ListViewCellString",{string:"",ui:undefined,background:undefined,border:undefined,cellDown:false,cellSelected:false,key:undefined,constructor:function(a){this.key=a.key;this.border=new Ui.Rectangle({fill:"pink"});this.append(this.border);this.background=new Ui.Rectangle({fill:"white",marginBottom:1,marginRight:1});this.append(this.background);this.ui=new Ui.Label({margin:8,horizontalAlign:"left"});this.append(this.ui);if(a.title!=undefined){this.setTitle(a.title)}this.connect(this,"select",this.onCellSelect);this.connect(this,"unselect",this.onCellUnselect)},getKey:function(){return this.key},getString:function(){return this.string},setString:function(a){if(this.string!=a){this.string=a;this.ui.setText(a)}},down:function(){this.cellDown=true;if(!this.getIsSelected()){this.background.setFill(this.getBackgroundDownColor())}},up:function(){this.cellDown=false;if(!this.getIsSelected()){this.background.setFill(this.getBackgroundColor())}},getDarkColor:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.Color({y:a.y-0.3,u:a.u,v:a.v})},getBackgroundSelectGradient:function(){var a=this.getStyleProperty("selectColor").getYuv();return new Ui.LinearGradient({stops:[{offset:0,color:new Ui.Color({y:a.y+0.1,u:a.u,v:a.v})},{offset:1,color:new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})},]})},getBackgroundColor:function(){return this.getStyleProperty("color")},getBackgroundDownColor:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})},onCellSelect:function(){this.background.setFill(this.getBackgroundSelectGradient())},onCellUnselect:function(){this.background.setFill(this.getBackgroundColor())},},{onStyleChange:function(){var b=this.getStyleProperty("color");var c=b.getYuv();var a=new Ui.Color({y:c.y-0.3,u:c.u,v:c.v});this.background.setFill(b);this.border.setFill(a);var d=this.getStyleProperty("spacing");this.ui.setMargin(d+2)},},{style:{color:new Ui.Color({r:0.99,g:0.99,b:0.99}),selectColor:new Ui.Color({r:0.31,g:0.66,b:1}),spacing:5,}});Ui.IFrame.extend("Ui.Program",{arguments:undefined,isReady:false,constructor:function(b){this.connect(window,"message",this.onMessage,false);if(b.location==undefined){throw ("location config parameter is NEEDED")}var a=b.location;if(b.arguments!=undefined){a+="?base64="+encodeURIComponent(b.arguments.serialize().toBase64())}this.setSrc(a);this.addEvents("message")},sendMessage:function(a){this.getIFrame().contentWindow.postMessage(a.serialize(),"*")},onMessage:function(a){if(this.getIFrame().contentWindow===a.source){a.preventDefault();a.stopPropagation();var b=JSON.parse(a.data);this.fireEvent("message",this,b)}},});Ui.LBox.extend("Ui.App",{defs:undefined,styles:undefined,updateTask:undefined,style:"../era/style/default/style.css",styleloaded:false,loaded:false,focusElement:undefined,hasFocus:false,arguments:undefined,autoscale:false,ready:false,layoutList:undefined,windowWidth:0,windowHeight:0,windowScale:1,contentBox:undefined,content:undefined,dialogs:undefined,constructor:function(e){Ui.App.current=this;this.contentBox=new Ui.LBox();this.append(this.contentBox);if(e.autoscale!=undefined){this.setAutoScale(e.autoscale)}document.documentElement.style.padding="0px";document.documentElement.style.margin="0px";document.documentElement.style.border="0px solid black";document.documentElement.style.overflow="hidden";document.documentElement.style.width="100%";document.documentElement.style.height="100%";this.svgRoot=document.createElementNS(svgNS,"svg");this.setTransformOrigin(0,0);this.connect(window,"load",this.onWindowLoad);this.connect(window,"resize",this.onWindowResize);this.addEvents("resize","ready","parentmessage");this.connect(window,"mousedown",function(i){if((i.target!=undefined)&&!((i.target.tagName=="INPUT")||(i.target.tagName=="TEXTAREA"))){i.preventDefault()}});this.connect(window,"mouseup",function(i){if((i.target!=undefined)&&!((i.target.tagName=="INPUT")||(i.target.tagName=="TEXTAREA"))){i.preventDefault()}});this.connect(window,"mousemove",function(i){if((i.target!=undefined)&&!((i.target.tagName=="INPUT")||(i.target.tagName=="TEXTAREA"))){i.preventDefault()}});this.connect(window,"dragenter",function(i){i.preventDefault();return false});this.connect(window,"dragover",function(i){i.dataTransfer.dropEffect="none";i.preventDefault();return false});this.connect(window,"drop",function(i){i.preventDefault();return false});this.connect(window,"contextmenu",function(i){i.preventDefault()});this.connect(window,"message",this.onMessage);if((window.location.search!=undefined)&&(window.location.search!="")){var h=undefined;var b={};var d=window.location.search.substring(1).split("&");for(var f=0;f<d.length;f++){var g=d[f].split("=");if(g.length==2){var j=decodeURIComponent(g[0]);var c=decodeURIComponent(g[1]);if(j=="base64"){h=JSON.parse(c.fromBase64())}else{b[j]=c}}}if(h!=undefined){this.arguments=h;for(var a in b){this.arguments[a]=b[a]}}else{this.arguments=b}}else{this.arguments={}}},onWindowLoad:function(){if(navigator.iPad||navigator.iPhone){var a=document.createElementNS(htmlNS,"meta");a.name="apple-mobile-web-app-capable";a.content="yes";document.getElementsByTagName("head")[0].appendChild(a);a=document.createElementNS(htmlNS,"meta");a.name="apple-mobile-web-app-status-bar-style";a.content="black";document.getElementsByTagName("head")[0].appendChild(a);a=document.createElementNS(htmlNS,"meta");a.name="viewport";a.content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no";document.getElementsByTagName("head")[0].appendChild(a);this.connect(this.getDrawing(),"touchstart",function(b){b.preventDefault()},true);this.connect(this.getDrawing(),"touchmove",function(b){b.preventDefault()},true);this.connect(this.getDrawing(),"touchend",function(b){b.preventDefault()},true)}this.loaded=true;this.onReady()},onWindowResize:function(){this.fireEvent("resize",this);this.invalidateMeasure()},onWindowKeyPress:function(a){a.preventDefault();Ui.Keyboard.current.shiftKey=a.shiftKey;Ui.Keyboard.current.altKey=a.altKey;Ui.Keyboard.current.ctrlKey=a.ctrlKey;Ui.Keyboard.current.altGraphKey=a.altGraphKey;Ui.Keyboard.current.metaKey=a.metaKey;if(navigator.isOpera){if((a.which==0)||(a.which==8)||(a.which==9)){return}keychar=String.fromCharCode(a.which)}else{if(a.charCode==0){return}keychar=String.fromCharCode(a.charCode)}if(Ui.Keyboard.current.elementCapture!=undefined){Ui.Keyboard.current.elementCapture.fireEvent("keypress",Ui.Keyboard.current,keychar)}else{if(this.focusElement!=undefined){this.focusElement.fireEvent("keypress",Ui.Keyboard.current,keychar)}}},onWindowKeyDown:function(b){Ui.Keyboard.current.shiftKey=b.shiftKey;Ui.Keyboard.current.altKey=b.altKey;Ui.Keyboard.current.ctrlKey=b.ctrlKey;Ui.Keyboard.current.altGraphKey=b.altGraphKey;Ui.Keyboard.current.metaKey=b.metaKey;if(Ui.Keyboard.current.elementCapture!=undefined){b.preventDefault();Ui.Keyboard.current.elementCapture.fireEvent("keydown",Ui.Keyboard.current,b.which);return}if(b.which==9){b.preventDefault();var a;if(this.focusElement!=undefined){if(b.shiftKey){a=this.findPreviousFocusable()}else{a=this.findNextFocusable()}}else{a=this.findFirstFocusable()}if(a!=undefined){a.focus()}else{window.dump()}}else{if(b.which==8){b.preventDefault()}if(this.focusElement!=undefined){this.focusElement.fireEvent("keydown",Ui.Keyboard.current,b.which)}}},update:function(){var a=document.body.clientWidth;var d=document.body.clientHeight;var b;if(this.autoscale){if((this.windowWidth!=a)||(this.windowHeight!=d)){var b=this.measure(a,d);if(b.width<a){b.width=a}if(b.height<d){b.height=d}this.windowScale=1;if((b.width>a)||(b.height>d)){this.windowScale=Math.max(b.width/a,b.height/d)}b=this.measure(a*this.windowScale,d*this.windowScale);this.setTransform(Ui.Matrix.createScale(1/this.windowScale))}else{b=this.measure(a*this.windowScale,d*this.windowScale);if((b.width>a*this.windowScale)||(b.height>d*this.windowScale)){if(b.width<a){b.width=a}if(b.height<d){b.height=d}this.windowScale=1;if((b.width>a)||(b.height>d)){this.windowScale=Math.max(b.width/a,b.height/d)}b=this.measure(a*this.windowScale,d*this.windowScale);this.setTransform(Ui.Matrix.createScale(1/scale))}}}else{this.windowScale=1;b=this.measure(a,d)}this.windowWidth=a;this.windowHeight=d;this.arrange(0,0,Math.max(this.windowWidth*this.windowScale,b.width),Math.max(this.windowHeight*this.windowScale,b.height));while(this.layoutList!=undefined){var c=this.layoutList.layoutNext;this.layoutList.layoutValid=true;this.layoutList.layoutNext=undefined;this.layoutList.updateLayout();this.layoutList=c}this.updateTask=undefined},setContent:function(a){if(this.content!=a){if(this.content!=undefined){this.contentBox.remove(this.content)}if(a!=undefined){this.contentBox.append(a)}this.content=a}},appendDialog:function(a){if(this.dialogs==undefined){this.dialogs=new Ui.LBox();this.append(this.dialogs)}this.dialogs.append(a)},removeDialog:function(a){this.dialogs.remove(a);if(this.dialogs.getChildren().length==0){this.remove(this.dialogs);this.dialogs=undefined}},getArguments:function(){return this.arguments},getAutoScale:function(){return this.autoscale},setAutoScale:function(a){if(this.autoscale!=a){this.autoscale=a;if(!this.autoscale){this.setTransform(undefined)}this.invalidateMeasure()}},onReady:function(){if(this.loaded){this.ready=true;if(document.body==undefined){this.htmlRoot=document.createElementNS(htmlNS,"body");document.body=this.htmlRoot}document.body.style.padding="0px";document.body.style.margin="0px";document.body.style.border="0px solid black";document.body.style.overflow="hidden";document.body.style.width="100%";document.body.style.height="100%";document.body.appendChild(this.getDrawing());this.update();this.setIsLoaded(true);this.fireEvent("ready")}},onMessage:function(a){if(parent===a.source){a.preventDefault();a.stopPropagation();var b=JSON.parse(a.data);this.fireEvent("parentmessage",b)}},sendMessageToParent:function(a){parent.postMessage(a.serialize(),"*")},findNextFocusable:function(){var a={element:this,seen:false,res:undefined};this.findFocusable(a);return a.res},findFirstFocusable:function(){var a={element:this,seen:true,res:undefined};this.findFocusable(a);return a.res},findPreviousFocusable:function(){var a={element:this,seen:false,res:undefined,previous:undefined};this.findFocusable(a);if(a.seen){return a.previous}else{return undefined}},findFocusable:function(c){var b=c.element;if(b.isSubclass("Ui.Container")){for(var a=0;a<b.children.length;a++){var d=b.children[a];if(d.getFocusable()){if(c.seen){c.res=d;return}if(d==this.focusElement){c.seen=true}else{c.previous=d}}c.element=d;this.findFocusable(c);if(c.res!=undefined){return}}}},askFocus:function(a){if(this.focusElement!=a){this.removeFocus(this.focusElement);this.focusElement=a;this.focusElement.fireEvent("focus")}},removeFocus:function(a){if((this.focusElement!=undefined)&&(this.focusElement==a)){this.focusElement.fireEvent("blur");this.focusElement=undefined}},onWindowMouseDown:function(a){if(this.focusElement!=undefined){this.removeFocus(this.focusElement)}},onWindowFocus:function(a){if(!this.hasFocus){this.hasFocus=true;var b=this.findFirstFocusable();if(b!=undefined){b.focus()}}},onWindowBlur:function(a){if(this.hasFocus){this.hasFocus=false;if(this.focusElement!=undefined){this.focusElement.blur()}}},enqueueLayout:function(a){a.layoutNext=this.layoutList;this.layoutList=a;if((this.updateTask==undefined)&&this.ready){this.updateTask=new Core.DelayedTask({delay:0,scope:this,callback:this.update})}},},{invalidateMeasure:function(){this.invalidateArrange();this.measureValid=false;if((this.updateTask==undefined)&&this.ready){this.updateTask=new Core.DelayedTask({delay:0,scope:this,callback:this.update})}},invalidateArrange:function(){this.arrangeValid=false;if((this.updateTask==undefined)&&this.ready){this.updateTask=new Core.DelayedTask({delay:0,scope:this,callback:this.update})}},});Ui.App.current=undefined;Object.extend("Ui.Transition",{run:function(c,b,a){throw ("transition classes MUST override run method")},},{},{transitions:{},register:function(a,b){this.transitions[a]=b},create:function(b){if(b==undefined){return undefined}if(typeof(b)=="string"){return new this.transitions[b]()}else{if(typeof(b)=="object"){if(b.isSubclass("Ui.Transition")){return b}else{if(b.type!=undefined){var a=b.type;b.type=undefined;return new this.transitions[a](b)}}}}throw ("invalid transition ("+b+")")},});Ui.Transition.extend("Ui.Fade",{},{run:function(c,b,a){if(c!=undefined){if(a==1){c.setOpacity(1);c.hide()}else{c.setOpacity(1-a)}}if(b!=undefined){b.setOpacity(a)}},},{constructor:function(){Ui.Transition.register("fade",this)},});Ui.Transition.extend("Ui.Flip",{orientation:"horizontal",constructor:function(a){if(a.orientation!=undefined){this.setOrientation(a.orientation)}},setOrientation:function(a){this.orientation=a},},{run:function(c,b,a){if(a<0.5){if(c!=undefined){c.setTransformOrigin(0.5,0.5);if(this.orientation=="horizontal"){c.setTransform(Ui.Matrix.createScale((1-a*2),1))}else{c.setTransform(Ui.Matrix.createScale(1,(1-a*2)))}}if(b!=undefined){b.hide()}}else{if(c!=undefined){c.hide();c.setTransformOrigin(0,0);c.setTransform(undefined)}if(b!=undefined){if(a==1){b.show();b.setTransformOrigin(0,0);b.setTransform(undefined)}else{b.show();b.setTransformOrigin(0.5,0.5);if(this.orientation=="horizontal"){b.setTransform(Ui.Matrix.createScale((a-0.5)*2,1))}else{b.setTransform(Ui.Matrix.createScale(1,(a-0.5)*2))}}}}},},{constructor:function(){Ui.Transition.register("flip",this)},});Ui.Transition.extend("Ui.Slide",{direction:"right",constructor:function(a){if(a.direction!=undefined){this.setDirection(a.direction)}},setDirection:function(a){this.direction=a},},{run:function(c,b,a){if(c!=undefined){if(a==1){c.hide();c.setTransformOrigin(0,0);c.setTransform(undefined)}else{c.setTransformOrigin(0,0);if(this.direction=="right"){c.setTransform(Ui.Matrix.createTranslate(-c.getLayoutWidth()*a,0))}else{if(this.direction=="left"){c.setTransform(Ui.Matrix.createTranslate(c.getLayoutWidth()*a,0))}else{if(this.direction=="top"){c.setTransform(Ui.Matrix.createTranslate(0,c.getLayoutHeight()*a))}else{c.setTransform(Ui.Matrix.createTranslate(0,-c.getLayoutHeight()*a))}}}}}if(b!=undefined){if(a==1){b.setTransformOrigin(0,0);b.setTransform(undefined)}else{b.setTransformOrigin(0,0);if(this.direction=="right"){b.setTransform(Ui.Matrix.createTranslate(b.getLayoutWidth()*(1-a),0))}else{if(this.direction=="left"){b.setTransform(Ui.Matrix.createTranslate(-b.getLayoutWidth()*(1-a),0))}else{if(this.direction=="top"){b.setTransform(Ui.Matrix.createTranslate(0,-b.getLayoutHeight()*(1-a)))}else{b.setTransform(Ui.Matrix.createTranslate(0,b.getLayoutHeight()*(1-a)))}}}}}},},{constructor:function(){Ui.Transition.register("slide",this)},});Ui.LBox.extend("Ui.TransitionBox",{transition:undefined,duration:0.5,ease:undefined,position:-1,transitionClock:undefined,current:undefined,next:undefined,constructor:function(a){if(a.duration!=undefined){this.setDuration(a.duration)}if(a.ease!=undefined){this.setEase(a.ease)}if(a.transition!=undefined){this.setTransition(a.transition)}else{this.setTransition("fade")}this.setClipToBounds(true);this.connect(this,"load",this.onTransitionBoxLoad);this.connect(this,"unload",this.onTransitionBoxUnload);this.addEvents("change")},setDuration:function(a){this.duration=a},setEase:function(a){this.ease=Anim.EasingFunction.create(a)},setTransition:function(a){this.transition=Ui.Transition.create(a)},setCurrent:function(b){var a=this.getChildPosition(b);if(a!=-1){this.setCurrentAt(a)}},setCurrentAt:function(a){if(this.position!=a){if(this.transitionClock!=undefined){this.transitionClock.stop()}if(this.position!=-1){this.current=this.getChildren()[this.position]}else{this.current=undefined}this.next=this.getChildren()[a];this.next.show();this.transition.run(this.current,this.next,0);this.transitionClock=new Anim.Clock({duration:this.duration,scope:this,callback:this.onTransitionTick,ease:this.ease});this.connect(this.transitionClock,"complete",this.onTransitionComplete);this.transitionClock.begin();this.position=a}},getChildPosition:function(b){for(var a=0;a<this.getChildren().length;a++){if(this.getChildren()[a].getChildren()[0]==b){return a}}return -1},onTransitionBoxLoad:function(){},onTransitionBoxUnload:function(){if(this.transitionClock!=undefined){this.transitionClock.stop();this.transitionClock=undefined}},onTransitionTick:function(b,a){this.progress=a;this.transition.run(this.current,this.next,a)},onTransitionComplete:function(a){if(this.current!=undefined){this.current.hide()}},},{arrangeCore:function(b,a){Ui.TransitionBox.base.arrangeCore.call(this,b,a);if(this.transitionClock!=undefined){this.transition.run(this.current,this.next,this.transitionClock.getProgress())}},append:function(b){var a=new Ui.TransitionBoxContent();a.append(b);a.hide();Ui.TransitionBox.base.append.call(this,a)},prepend:function(b){if(this.position!=-1){this.position++}var a=new Ui.TransitionBoxContent();a.append(b);a.hide();Ui.TransitionBox.base.prepend.call(this,a)},remove:function(b){for(var a=0;a<this.getChildren().length;a++){if(this.getChildren()[a].getChildren()[0]==b){this.getChildren()[a].remove(b);Ui.TransitionBox.base.remove.call(this,this.getChildren()[a]);break}}},});Ui.LBox.extend("Ui.TransitionBoxContent",{constructor:function(a){},});