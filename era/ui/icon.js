
Ui.Shape.extend('Ui.Icon', 
/**@lends Ui.Icon#*/
{
	/**
     * @constructs
	 * @class Predetermined Icon Shape which can be used to replace applicatives images.
     * @extends Ui.Shape
	 */
	constructor: function(config) {
	},

	setIcon: function(icon) {
		this.setPath(Ui.Icon.icons[icon]);
	}
}, 
/**@lends Ui.Icon# */ 
{
	arrangeCore: function(width, height) {
		Ui.Icon.base.arrangeCore.call(this, width, height);
		var scale = Math.min(width, height) / 48;
		this.setScale(scale);
	}
}, 
/**@lends Ui.Icon# */ 
{
	/**
	List of all the registered Icons which can be accessible by their names
	'check', 'home', 'search', 'close', 'arrowleft', 'arrowright', 'arrowtop', 'arrowbottom', 'refresh', 'deny', 'warning', 'trash', 'new', 'star', 'exit', 'loading', 'edit', 'upload', 'lock', 'savecloud', 'calendar', 'phone'
	*/
	icons: {},

	constructor: function() {
	    this.register('check', 'M18 32.34L9.66 24l-2.84 2.82L18 38 42 14l-2.82-2.82z');
		this.register('home', 'm24 6-20 18 6 0 0 16 10 0 0-12 8 0 0 12 10 0 0-16 6 0z');
		this.register('search', 'M 16.5625 2.78125 C 9.268416 2.78125 3.3125 8.73725 3.3125 16.03125 C 3.3125 23.32535 9.268416 29.28125 16.5625 29.28125 C 19.232656 29.28125 21.727527 28.494751 23.8125 27.125 L 26.53125 29.84375 C 26.040794 31.243763 26.345911 32.877161 27.46875 34 L 36.96875 43.5 C 38.531721 45.062971 41.062029 45.062971 42.625 43.5 L 44.3125 41.8125 C 45.875471 40.249529 45.875471 37.750471 44.3125 36.1875 L 34.78125 26.65625 C 33.730308 25.605308 32.270922 25.293885 30.9375 25.65625 L 28 22.71875 C 29.155313 20.754051 29.8125 18.465809 29.8125 16.03125 C 29.8125 8.73725 23.856584 2.78125 16.5625 2.78125 z M 16.5625 6.78125 C 21.694823 6.78125 25.8125 10.89895 25.8125 16.03125 C 25.8125 21.16365 21.694823 25.28125 16.5625 25.28125 C 11.430177 25.28125 7.3125 21.16365 7.3125 16.03125 C 7.3125 10.89895 11.430177 6.78125 16.5625 6.78125 z');
		this.register('close', 'M38 12.82L35.18 10 24 21.18 12.82 10 10 12.82 21.18 24 10 35.18 12.82 38 24 26.82 35.18 38 38 35.18 26.82 24z');
		this.register('backarrow', 'M40 22H15.86l11.18-11.18L24 8l-16 16 16 16 2.82-2.82L15.66 26H40v-4z');
		this.register('arrowleft', 'm30 4 5 5-15 15 15 15-5 5-20-20z');
		this.register('arrowright', 'm18 4-5 5 15 15-15 15 5 5 20-20z');
		this.register('arrowtop', 'm44 31-5 5-15-15-15 15-5-5 20-20z');
		this.register('arrowbottom', 'm4 16 5-5 15 15 15-15 5 5-20 20z');
		this.register('refresh', 'M 24,8 C 15.16,8 8.0195313,15.16 8.0195312,24 8.0195312,32.84 15.16,40 24,40 31.46,40 37.680938,34.9 39.460938,28 l -4.160157,0 C 33.660781,32.66 29.22,36 24,36 17.38,36 12,30.62 12,24 c 0,-6.62 5.38,-12 12,-12 3.32,0 6.279453,1.380547 8.439453,3.560547 L 26,22 40,22 40,8 35.300781,12.699219 C 32.400781,9.7992188 28.42,8 24,8 Z');
		this.register('deny', 'M 24.375 4.5625 C 13.844791 4.5625 5.3125 13.094791 5.3125 23.625 C 5.3125 34.155209 13.844791 42.6875 24.375 42.6875 C 34.905209 42.6875 43.4375 34.155209 43.4375 23.625 C 43.4375 13.094791 34.905209 4.5625 24.375 4.5625 z M 12.875 20.46875 L 36.375 20.46875 L 36.375 27.8125 L 12.875 27.8125 L 12.875 20.46875 z');
		this.register('warning', 'M2 42h44L24 4 2 42zm24-6h-4v-4h4v4zm0-8h-4v-8h4v8z');
		this.register('trash', 'm12 38 c0 2 1.8 4 4 4l16 0c2.2 0 4-1.8 4-4L36 14 11.6 14ZM38 8 31 8 29 6 19 6 17 8 10 8 10 12 38 12Z');
		this.register('new', 'M38 6H10c-2.22 0-4 1.8-4 4v28c0 2.2 2.78 4 4 4h28c2.2 0 4-1.8 4-4V10c0-2.2-1.8-4-4-4zm-4 20h-8v8h-4v-8H14v-4h8V14h4v8h8v4z');
		this.register('star', 'M24 34.54L36.36 42l-3.28-14.06L44 18.48l-14.38-1.22L24 4 18.38 17.26 4 18.48l10.92 9.46L11.64 42z');
		this.register('exit', 'M20.18 31.18L23 34l10-10-10-10-2.82 2.82L25.34 22H6v4h19.34l-5.16 5.18zM38 6H10c-2.22 0-4 1.8-4 4v4h4V10h28v28H10v-8H6v8c0 2.2 1.78 4 4 4h28c2.2 0 4-1.8 4-4V10c0-2.2-1.8-4-4-4z');
		this.register('loading', 'M 24 2.5 C 22.08477 2.5 20.5 4.0848 20.5 6 C 20.5 7.9152 22.08477 9.5 24 9.5 C 25.91523 9.5 27.5 7.9152 27.5 6 C 27.5 4.0848 25.91523 2.5 24 2.5 z M 11.28125 7.78125 C 10.382381 7.78125 9.4896359 8.1354 8.8125 8.8125 C 7.4582279 10.1668 7.4582281 12.3957 8.8125 13.75 C 10.166772 15.1043 12.395728 15.1043 13.75 13.75 C 15.104272 12.3957 15.104272 10.1668 13.75 8.8125 C 13.072864 8.1354 12.180119 7.78125 11.28125 7.78125 z M 36.71875 7.78125 C 35.819881 7.78125 34.927136 8.1354 34.25 8.8125 C 32.895728 10.1668 32.895728 12.3957 34.25 13.75 C 35.604272 15.1043 37.833228 15.1043 39.1875 13.75 C 40.541772 12.3957 40.541772 10.1668 39.1875 8.8125 C 38.510364 8.1354 37.617619 7.78125 36.71875 7.78125 z M 6 20.5 C 4.08477 20.5 2.5 22.0848 2.5 24 C 2.5 25.9152 4.08477 27.5 6 27.5 C 7.91523 27.5 9.5 25.9152 9.5 24 C 9.5 22.0848 7.91523 20.5 6 20.5 z M 42 20.5 C 40.08477 20.5 38.5 22.0848 38.5 24 C 38.5 25.9152 40.08477 27.5 42 27.5 C 43.91523 27.5 45.5 25.9152 45.5 24 C 45.5 22.0848 43.91523 20.5 42 20.5 z M 11.28125 33.25 C 10.382381 33.25 9.4896359 33.5729 8.8125 34.25 C 7.4582279 35.6043 7.4582281 37.8332 8.8125 39.1875 C 10.166772 40.5418 12.395728 40.5418 13.75 39.1875 C 15.104272 37.8332 15.104272 35.6043 13.75 34.25 C 13.072864 33.5729 12.180119 33.25 11.28125 33.25 z M 36.71875 33.25 C 35.819881 33.25 34.927136 33.5729 34.25 34.25 C 32.895728 35.6043 32.895728 37.8332 34.25 39.1875 C 35.604272 40.5418 37.833228 40.5418 39.1875 39.1875 C 40.541772 37.8332 40.541772 35.6043 39.1875 34.25 C 38.510364 33.5729 37.617619 33.25 36.71875 33.25 z M 24 38.5 C 22.08477 38.5 20.5 40.0848 20.5 42 C 20.5 43.9152 22.08477 45.5 24 45.5 C 25.91523 45.5 27.5 43.9152 27.5 42 C 27.5 40.0848 25.91523 38.5 24 38.5 z');
	    this.register('edit', 'M6 34.5V42h7.5L35.62 19.88l-7.5-7.5L6 35.5zM41.42 14.08c.78-.78.78-2.04 0-2.82l-4.68-4.68c-.78-.78-2.04-.78-2.82 0l-3.66 3.66 7.5 7.5 3.66-3.66z');
	    this.register('upload', 'M18 32h12v-12h8l-14-14-14 14h8zm-8 18h28v4H10z');
		this.register('lock', 'M 24,2 C 18.48,2 14,6.48 14,12 l 0,4 -2,0 c -2.2,0 -4,1.8 -4,4 l 0,20 c 0,2.2 1.8,4 4,4 l 24,0 c 2.2,0 4,-1.8 4,-4 0,-10.51875 0,-11.22695 0,-20 0,-2.2 -1.8,-4 -4,-4 l -2,0 0,-4 C 34,6.48 29.52,2 24,2 Z m 0,3.8007812 C 27.42,5.8007812 30.199219,8.58 30.199219,12 l 0,4 -12.398438,0 0,-4 C 17.800781,8.58 20.58,5.8007812 24,5.8007812 Z M 24,26 c 2.2,0 4,1.8 4,4 0,2.2 -1.8,4 -4,4 -2.2,0 -4,-1.8 -4,-4 0,-2.2 1.8,-4 4,-4 z');
		this.register('savecloud', 'M38.7 20.08C37.34 13.18 31.28 8 24 8 18.22 8 13.2 11.28 10.7 16.08 2.68 16.72 0 21.82 0 28c0 6.62 5.28 12 12 12h26c5.52 0 10-4.48 10-10 0-5.28-4.1-9.56-9.3-9.92zM28 26v8h-8v-8H14l10-10 10 10h-6z');
		this.register('calendar', 'M34 24h-10v10h10v-10zM32 2v4H16V2H12v4H10c-2.22 0-3.98 1.8-3.98 4L6 38c0 2.2 1.78 4 4 4h28c2.2 0 2-1.8 4-4V10c0-2.2-1.8-4-4-4h-2V2h-4zm6 36H10V16h28v22z');
		this.register('phone', 'M 13.24 21.58 c 2.88 5.66 7.52 10.28 13.18 13.18 l 4.4 -4.4 c 0.54 -0.54 1.34 -0.72 2.04 -0.48 2.24 0.74 4.66 1.14 7.14 1.14 1.1 0 2 0.9 2 2 V 40 c 0 1.1 -0.9 2 -2 2 -18.78 0 -34 -15.22 -34 -34 0 -1.1 0.9 -2 2 -2 h 7 c 1.1 0 2 0.9 2 2 0 2.5 0.4 4.9 1.14 7.14 0.22 0.7 0.06 1.48 -0.5 2.04 l -4.4 4.4 z');
		this.register('mail', 'M 40 8 H 8 c -2.2 0 -3.98 1.8 -3.98 4 L 4 36 c 0 2.2 1.8 4 4 4 h 32 c 2.2 0 4 -1.8 4 -4 V 12 c 0 -2.2 -1.8 -4 -4 -4 z m 0 8 l -16 10 -16 -10 V 12 l 16 10 16 -10 v 4 z');
		this.register('plus', 'M 38 26 h -12 v 12 h -4 v -12 H 10 v -4 h 12 V 10 h 4 v 12 h 12 v 4 z');
		this.register('eye', 'M 24.15625 10.40625 C 11.735751 10.40625 2.0024346 23.625025 1.59375 24.1875 L 0.90625 25.125 L 1.59375 26.09375 C 2.0024345 26.656226 11.735751 39.875 24.15625 39.875 C 36.576276 39.875 46.31054 26.655751 46.71875 26.09375 L 47.4375 25.125 L 46.71875 24.1875 C 46.31054 23.625025 36.576276 10.40625 24.15625 10.40625 z M 24.15625 13.6875 C 33.120256 13.6875 40.944331 22.21152 43.34375 25.125 C 40.948128 28.038954 33.140667 36.59375 24.15625 36.59375 C 15.193194 36.59375 7.3984708 28.038005 5 25.125 C 7.3946735 22.210571 15.171835 13.6875 24.15625 13.6875 z M 24.8125 15.1875 C 19.396945 15.1875 15 19.557753 15 24.9375 C 15 30.318383 19.396945 34.6875 24.8125 34.6875 C 30.229761 34.6875 34.625 30.318383 34.625 24.9375 C 34.625 23.144819 34.101438 21.474944 33.25 20.03125 C 33.134618 22.135405 31.391099 23.8125 29.25 23.8125 C 27.035579 23.8125 25.25 22.01328 25.25 19.8125 C 25.25 17.87204 26.649913 16.261489 28.5 15.90625 C 27.361528 15.448132 26.115803 15.1875 24.8125 15.1875 z');
		this.register('map', 'M41 6l-.32.06L30 10.2 18 6 6.72 9.8c-.42.14-.72.5-.72.96V41c0 .56.44 1 1 1l.32-.06L18 37.8l12 4.2 11.28-3.8c.42-.08.72-.5.72-.96V7c0-.56-.44-1-1-1zM30 38l-12-4.22V10l12 4.22V38z');
		this.register('sortarrow', 'm4 32 40 0-20-20z');
		this.register('dragcopy', 'M 24,0.15625 C 10.824064,0.15625 0.15625,10.824064 0.15625,24 0.15625,37.175937 10.824064,47.84375 24,47.84375 37.175936,47.84375 47.84375,37.175937 47.84375,24 47.84375,10.824064 37.175936,0.15625 24,0.15625 z m -4.46875,5.90625 8.9375,0 0,13.46875 13.46875,0 0,8.9375 -13.46875,0 0,13.46875 -8.9375,0 0,-13.611607 -13.46875,0.142857 0,-8.9375 13.46875,0 z');
		this.register('dragmove', 'M 24 0.15625 C 10.824064 0.15625 0.15625 10.824064 0.15625 24 C 0.15625 37.175936 10.824064 47.84375 24 47.84375 C 37.175936 47.84375 47.84375 37.175936 47.84375 24 C 47.84375 10.824064 37.175936 0.15625 24 0.15625 z M 26.59375 8.59375 L 42 24 L 26.59375 39.40625 L 21.40625 34.25 L 26.59375 29.15625 L 6 29.15625 L 6 18.75 L 26.59375 18.84375 L 21.40625 13.75 L 26.59375 8.59375 z');
		this.register('draglink', 'M 24 0.15625 C 10.824064 0.15625 0.15625 10.824064 0.15625 24 C 0.15625 37.175937 10.824064 47.84375 24 47.84375 C 37.175936 47.84375 47.84375 37.175937 47.84375 24 C 47.84375 10.824064 37.175936 0.15625 24 0.15625 z M 34.90625 13.90625 C 40.730244 13.90625 44.3125 18.306256 44.3125 23.90625 C 44.3125 29.562244 40.779744 34.09375 34.84375 34.09375 C 30.195755 34.09375 26.943247 31.091747 24.03125 27.84375 C 20.951253 31.091747 18.097245 34.0625 13.28125 34.0625 C 7.4012558 34.0625 3.6875 29.680744 3.6875 23.96875 C 3.6875 18.368756 7.2385058 13.9375 13.0625 13.9375 C 17.934495 13.9375 21.119253 17.153003 24.03125 20.625 C 26.887247 17.209003 30.090255 13.90625 34.90625 13.90625 z M 34.78125 19.28125 C 31.869253 19.28125 29.066748 22.109002 27.21875 24.125 C 29.178748 26.308998 31.801503 28.71875 34.9375 28.71875 C 37.681497 28.71875 39.25 26.669747 39.25 24.09375 C 39.25 21.405753 37.637247 19.28125 34.78125 19.28125 z M 13.0625 19.3125 C 10.430503 19.3125 8.75 21.573753 8.75 24.09375 C 8.75 26.837747 10.474753 28.6875 13.21875 28.6875 C 16.074747 28.6875 18.989252 26.140998 20.78125 24.125 C 18.933252 22.165002 15.918497 19.3125 13.0625 19.3125 z');
		this.register('dragchoose', 'M 24 0.15625 C 10.824064 0.15625 0.15625 10.824064 0.15625 24 C 0.15625 37.175937 10.824064 47.84375 24 47.84375 C 37.175936 47.84375 47.84375 37.175937 47.84375 24 C 47.84375 10.824064 37.175936 0.15625 24 0.15625 z M 23.5625 3.34375 L 25.875 3.34375 C 33.106993 3.34375 37.78125 8.0002566 37.78125 14.65625 C 37.78125 22.144243 33.302746 23.961002 29.71875 25.625 C 27.734752 26.584999 26 27.411752 26 29.84375 C 26 31.379748 26.375 32.33325 26.375 32.78125 C 26.375 33.165249 26.197999 33.28125 25.75 33.28125 L 19.65625 33.28125 C 19.27225 33.28125 19.09525 33.10125 19.03125 32.78125 C 18.83925 31.565251 18.625 30.153499 18.625 28.9375 C 18.625 22.985506 22.792503 21.323248 26.3125 19.53125 C 28.488498 18.443251 30.40625 17.344247 30.40625 14.65625 C 30.40625 12.096253 28.434997 10.0625 25.875 10.0625 L 23.5625 10.0625 C 21.834502 10.0625 20.183249 11.091753 19.03125 13.84375 C 18.90325 14.16375 18.692 14.28125 18.5 14.28125 C 18.244 14.28125 18.006 14.09675 17.75 13.96875 L 12.625 11.34375 C 12.369 11.21575 12.21875 11.09825 12.21875 10.90625 C 12.21875 10.52225 12.8615 9.4912491 13.4375 8.53125 C 15.357498 5.5232531 18.250505 3.34375 23.5625 3.34375 z M 23.375 36.375 C 25.678998 36.375 27.65625 38.352252 27.65625 40.65625 C 27.65625 42.960248 25.678998 44.9375 23.375 44.9375 C 21.071002 44.9375 19.09375 42.960248 19.09375 40.65625 C 19.09375 38.352252 21.071002 36.375 23.375 36.375 z');
		this.register('dragrun', 'M 24 2.375 C 12.051981 2.375 2.375 12.051981 2.375 24 C 2.375 35.94802 12.051981 45.625 24 45.625 C 35.948019 45.625 45.625 35.94802 45.625 24 C 45.625 12.051981 35.948019 2.375 24 2.375 z M 23.9375 7.75 C 23.95904 7.7499163 23.97845 7.75 24 7.75 C 26.988493 7.75 29.780526 8.5594242 32.1875 9.96875 L 30.40625 13.0625 C 32.285058 14.163081 33.836921 15.71494 34.9375 17.59375 L 38.03125 15.8125 C 39.440577 18.219469 40.25 21.011507 40.25 24 C 40.25 24.02155 40.250084 24.04096 40.25 24.0625 L 36.6875 24.03125 C 36.679841 26.304497 36.054728 28.438884 35 30.28125 L 38.125 32.0625 C 36.682086 34.581204 34.58227 36.683426 32.0625 38.125 L 30.28125 35 C 28.438884 36.054728 26.304497 36.6799 24.03125 36.6875 L 24.0625 40.25 C 24.04078 40.250083 24.02174 40.25 24 40.25 C 21.011506 40.25 18.219469 39.440577 15.8125 38.03125 L 17.59375 34.9375 C 15.71494 33.836919 14.163081 32.285059 13.0625 30.40625 L 9.96875 32.1875 C 8.5594244 29.780532 7.75 26.988494 7.75 24 C 7.75 23.97825 7.7499141 23.95921 7.75 23.9375 L 11.3125 23.96875 C 11.320158 21.695505 11.945272 19.561116 13 17.71875 L 9.875 15.9375 C 11.316963 13.417342 13.420268 11.316442 15.9375 9.875 L 17.71875 13 C 19.561117 11.945272 21.695505 11.3201 23.96875 11.3125 L 23.9375 7.75 z M 24 18.78125 C 21.125058 18.78125 18.78125 21.125058 18.78125 24 C 18.78125 26.874944 21.125058 29.21875 24 29.21875 C 26.874944 29.21875 29.21875 26.874944 29.21875 24 C 29.21875 21.125058 26.874944 18.78125 24 18.78125 z');
		this.register('dragplay', 'M 24 0.15625 C 10.824064 0.15625 0.15625 10.824064 0.15625 24 C 0.15625 37.175937 10.824064 47.84375 24 47.84375 C 37.175936 47.84375 47.84375 37.175937 47.84375 24 C 47.84375 10.824064 37.175936 0.15625 24 0.15625 z M 13.78125 7.75 L 42.21875 24 L 13.78125 40.25 L 13.78125 7.75 z');
	},

	getPath: function(icon) {
		return Ui.Icon.icons[icon];
	},

	getNames: function() {
		var names = [];
		for(var tmp in Ui.Icon.icons)
			names.push(tmp);
		return names;
	},

	register: function(iconName, iconPath) {
		if(Ui.Icon.icons[iconName] !== undefined)
			throw('Icon \''+iconName+'\' is already registered. To change it, use override');
		Ui.Icon.icons[iconName] = iconPath;
	},

	override: function(iconName, iconPath) {
		Ui.Icon.icons[iconName] = iconPath;
	},

	parse: function(icon) {
		return new Ui.Icon({ icon: icon });
	},

	drawIcon: function(ctx, icon, size, fill) {
		ctx.save();
		var scale = size/48;
		ctx.scale(scale, scale);
		ctx.svgPath(Ui.Icon.getPath(icon));
		ctx.fillStyle = fill;
		ctx.fill();
		ctx.restore();
	},

	drawIconAndBadge: function(ctx, icon, size, fill, badgeText, badgeSize, badgeFill, textFill) {
		ctx.save();
		var scale = size/48;
		badgeSize /= scale;
		var textHeight = badgeSize*0.75;
		ctx.font = 'bold '+textHeight+'px sans-serif';
		var textSize = ctx.measureText(badgeText);
		var textWidth = textSize.width;
		var badgeWidth = Math.max(badgeSize, textWidth*1.25);
		ctx.scale(scale, scale);

		ctx.save();

		ctx.beginPath();
		ctx.rect(0, 0, 48, 48);
		ctx.roundRect(1, 48-5-badgeSize, badgeWidth+4, badgeSize+4, badgeSize/2, badgeSize/2, badgeSize/2, badgeSize/2, true);
		ctx.closePath();
		ctx.clip();

		ctx.svgPath(Ui.Icon.getPath(icon));
		ctx.fillStyle = fill;
		ctx.fill();

		ctx.restore();

		ctx.fillStyle = badgeFill;
		ctx.beginPath();
		ctx.roundRect(3, 48-3-badgeSize, badgeWidth, badgeSize, badgeSize/2, badgeSize/2, badgeSize/2, badgeSize/2);
		ctx.closePath();
		ctx.fill();

		ctx.textBaseline = 'middle';
		ctx.fillStyle = textFill;
		ctx.fillText(badgeText, 3+((badgeWidth-textWidth)/2), 48-(3+(badgeSize/2)));

		ctx.restore();
	}
});
