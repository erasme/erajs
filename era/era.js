document.createElement("canvas").getContext||function(){function a(){return this.context_||(this.context_=new l(this))}function b(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function c(a){a.namespaces.g_vml_||a.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML");a.namespaces.g_o_||a.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML");a.styleSheets.ex_canvas_||(a=a.createStyleSheet(),a.owningElement.id="ex_canvas_",a.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}
function d(a){a=a.srcElement;a.firstChild&&(a.firstChild.style.width=a.clientWidth+"px",a.firstChild.style.height=a.clientHeight+"px")}function e(){return[[1,0,0],[0,1,0],[0,0,1]]}function f(a,b){for(var c=e(),d=0;3>d;d++)for(var f=0;3>f;f++){for(var g=0,h=0;3>h;h++)g+=a[d][h]*b[h][f];c[d][f]=g}return c}function g(a,b){b.fillStyle=a.fillStyle;b.lineCap=a.lineCap;b.lineJoin=a.lineJoin;b.lineWidth=a.lineWidth;b.miterLimit=a.miterLimit;b.shadowBlur=a.shadowBlur;b.shadowColor=a.shadowColor;b.shadowOffsetX=
a.shadowOffsetX;b.shadowOffsetY=a.shadowOffsetY;b.strokeStyle=a.strokeStyle;b.globalAlpha=a.globalAlpha;b.font=a.font;b.textAlign=a.textAlign;b.textBaseline=a.textBaseline;b.arcScaleX_=a.arcScaleX_;b.arcScaleY_=a.arcScaleY_;b.lineScale_=a.lineScale_}function h(a){var b=a.indexOf("(",3),c=a.indexOf(")",b+1),b=a.substring(b+1,c).split(",");if(4!=b.length||"a"!=a.charAt(3))b[3]=1;return b}function k(a,b,c){return Math.min(c,Math.max(b,a))}function m(a,b,c){0>c&&c++;1<c&&c--;return 1>6*c?a+6*(b-a)*c:
1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}function n(a){if(a in F)return F[a];var b,c=1;a=String(a);if("#"==a.charAt(0))b=a;else if(/^rgb/.test(a)){c=h(a);b="#";for(var d,e=0;3>e;e++)d=-1!=c[e].indexOf("%")?Math.floor(255*(parseFloat(c[e])/100)):+c[e],b+=B[k(d,0,255)];c=+c[3]}else if(/^hsl/.test(a)){e=c=h(a);b=parseFloat(e[0])/360%360;0>b&&b++;d=k(parseFloat(e[1])/100,0,1);e=k(parseFloat(e[2])/100,0,1);if(0==d)d=e=b=e;else{var f=0.5>e?e*(1+d):e+d-e*d,g=2*e-f;d=m(g,f,b+1/3);e=m(g,f,b);b=m(g,f,b-1/3)}b="#"+
B[Math.floor(255*d)]+B[Math.floor(255*e)]+B[Math.floor(255*b)];c=c[3]}else b=L[a]||a;return F[a]={color:b,alpha:c}}function l(a){this.m_=e();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.fillStyle=this.strokeStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=1*w;this.globalAlpha=1;this.font="10px sans-serif";this.textAlign="left";this.textBaseline="alphabetic";this.canvas=a;var b="width:"+a.clientWidth+"px;height:"+a.clientHeight+"px;overflow:hidden;position:absolute",
c=a.ownerDocument.createElement("div");c.style.cssText=b;a.appendChild(c);b=c.cloneNode(!1);b.style.backgroundColor="red";b.style.filter="alpha(opacity=0)";a.appendChild(b);this.element_=c;this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function p(a,b,c,d){a.currentPath_.push({type:"bezierCurveTo",cp1x:b.x,cp1y:b.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y});a.currentX_=d.x;a.currentY_=d.y}function q(a,b){var c=n(a.strokeStyle),d=c.color,c=c.alpha*a.globalAlpha,e=a.lineScale_*a.lineWidth;1>e&&(c*=e);b.push("<g_vml_:stroke",
' opacity="',c,'"',' joinstyle="',a.lineJoin,'"',' miterlimit="',a.miterLimit,'"',' endcap="',M[a.lineCap]||"square",'"',' weight="',e,'px"',' color="',d,'" />')}function s(a,b,c,d){var e=a.fillStyle,f=a.arcScaleX_,g=a.arcScaleY_,h=d.x-c.x,k=d.y-c.y;if(e instanceof C){var m=0,l=d=0,p=0,q=1;if("gradient"==e.type_){m=e.x1_/f;c=e.y1_/g;var r=u(a,e.x0_/f,e.y0_/g),m=u(a,m,c),m=180*Math.atan2(m.x-r.x,m.y-r.y)/Math.PI;0>m&&(m+=360);1E-6>m&&(m=0)}else r=u(a,e.x0_,e.y0_),d=(r.x-c.x)/h,l=(r.y-c.y)/k,h/=f*w,
k/=g*w,q=z.max(h,k),p=2*e.r0_/q,q=2*e.r1_/q-p;f=e.colors_;f.sort(function(a,b){return a.offset-b.offset});g=f.length;r=f[0].color;c=f[g-1].color;h=f[0].alpha*a.globalAlpha;a=f[g-1].alpha*a.globalAlpha;for(var k=[],s=0;s<g;s++){var v=f[s];k.push(v.offset*q+p+" "+v.color)}b.push('<g_vml_:fill type="',e.type_,'"',' method="none" focus="100%"',' color="',r,'"',' color2="',c,'"',' colors="',k.join(","),'"',' opacity="',a,'"',' g_o_:opacity2="',h,'"',' angle="',m,'"',' focusposition="',d,",",l,'" />')}else e instanceof
G?h&&k&&b.push("<g_vml_:fill",' position="',-c.x/h*f*f,",",-c.y/k*g*g,'"',' type="tile"',' src="',e.src_,'" />'):(e=n(a.fillStyle),b.push('<g_vml_:fill color="',e.color,'" opacity="',e.alpha*a.globalAlpha,'" />'))}function u(a,b,c){a=a.m_;return{x:w*(b*a[0][0]+c*a[1][0]+a[2][0])-A,y:w*(b*a[0][1]+c*a[1][1]+a[2][1])-A}}function t(a,b,c){isFinite(b[0][0])&&(isFinite(b[0][1])&&isFinite(b[1][0])&&isFinite(b[1][1])&&isFinite(b[2][0])&&isFinite(b[2][1]))&&(a.m_=b,c&&(a.lineScale_=N(O(b[0][0]*b[1][1]-b[0][1]*
b[1][0]))))}function C(a){this.type_=a;this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0;this.colors_=[]}function G(a,b){if(!a||1!=a.nodeType||"IMG"!=a.tagName)throw new D("TYPE_MISMATCH_ERR");if("complete"!=a.readyState)throw new D("INVALID_STATE_ERR");switch(b){case "repeat":case null:case "":this.repetition_="repeat";break;case "repeat-x":case "repeat-y":case "no-repeat":this.repetition_=b;break;default:throw new D("SYNTAX_ERR");}this.src_=a.src;this.width_=a.width;this.height_=a.height}
function D(a){this.code=this[a];this.message=a+": DOM Exception "+this.code}var z=Math,v=z.round,H=z.sin,I=z.cos,O=z.abs,N=z.sqrt,w=10,A=w/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);c(document);var K={init:function(a){(a||document).createElement("canvas")},init_:function(a){},initElement:function(b){if(!b.getContext){b.getContext=a;c(b.ownerDocument);b.innerHTML="";b.attachEvent("onresize",d);var e=b.attributes;e.width&&e.width.specified?b.style.width=e.width.nodeValue+"px":b.width=b.clientWidth;
e.height&&e.height.specified?b.style.height=e.height.nodeValue+"px":b.height=b.clientHeight}return b}};K.init();for(var B=[],r=0;16>r;r++)for(var E=0;16>E;E++)B[16*r+E]=r.toString(16)+E.toString(16);var L={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",
cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",
dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",
lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",
midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",
seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},F={},J={},M={butt:"flat",round:"round"},r=l.prototype;r.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null);this.element_.innerHTML=
""};r.beginPath=function(){this.currentPath_=[]};r.moveTo=function(a,b){var c=u(this,a,b);this.currentPath_.push({type:"moveTo",x:c.x,y:c.y});this.currentX_=c.x;this.currentY_=c.y};r.lineTo=function(a,b){var c=u(this,a,b);this.currentPath_.push({type:"lineTo",x:c.x,y:c.y});this.currentX_=c.x;this.currentY_=c.y};r.bezierCurveTo=function(a,b,c,d,e,f){e=u(this,e,f);a=u(this,a,b);c=u(this,c,d);p(this,a,c,e)};r.quadraticCurveTo=function(a,b,c,d){a=u(this,a,b);c=u(this,c,d);d={x:this.currentX_+2/3*(a.x-
this.currentX_),y:this.currentY_+2/3*(a.y-this.currentY_)};p(this,d,{x:d.x+(c.x-this.currentX_)/3,y:d.y+(c.y-this.currentY_)/3},c)};r.arc=function(a,b,c,d,e,f){c*=w;var g=f?"at":"wa",h=a+I(d)*c-A,k=b+H(d)*c-A;d=a+I(e)*c-A;e=b+H(e)*c-A;h==d&&!f&&(h+=0.125);a=u(this,a,b);h=u(this,h,k);d=u(this,d,e);this.currentPath_.push({type:g,x:a.x,y:a.y,radius:c,xStart:h.x,yStart:h.y,xEnd:d.x,yEnd:d.y})};r.rect=function(a,b,c,d){this.moveTo(a,b);this.lineTo(a+c,b);this.lineTo(a+c,b+d);this.lineTo(a,b+d);this.closePath()};
r.strokeRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath();this.moveTo(a,b);this.lineTo(a+c,b);this.lineTo(a+c,b+d);this.lineTo(a,b+d);this.closePath();this.stroke();this.currentPath_=e};r.fillRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath();this.moveTo(a,b);this.lineTo(a+c,b);this.lineTo(a+c,b+d);this.lineTo(a,b+d);this.closePath();this.fill();this.currentPath_=e};r.createLinearGradient=function(a,b,c,d){var e=new C("gradient");e.x0_=a;e.y0_=b;e.x1_=c;e.y1_=d;return e};
r.createRadialGradient=function(a,b,c,d,e,f){var g=new C("gradientradial");g.x0_=a;g.y0_=b;g.r0_=c;g.x1_=d;g.y1_=e;g.r1_=f;return g};r.drawImage=function(a,b){var c,d,e,f,g,h,k,m;e=a.runtimeStyle.width;f=a.runtimeStyle.height;a.runtimeStyle.width="auto";a.runtimeStyle.height="auto";var l=a.width,n=a.height;a.runtimeStyle.width=e;a.runtimeStyle.height=f;if(3==arguments.length)c=arguments[1],d=arguments[2],g=h=0,k=e=l,m=f=n;else if(5==arguments.length)c=arguments[1],d=arguments[2],e=arguments[3],f=
arguments[4],g=h=0,k=l,m=n;else if(9==arguments.length)g=arguments[1],h=arguments[2],k=arguments[3],m=arguments[4],c=arguments[5],d=arguments[6],e=arguments[7],f=arguments[8];else throw Error("Invalid number of arguments");var p=u(this,c,d),q=[];q.push(" <g_vml_:group",' coordsize="',10*w,",",10*w,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;");if(1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var r=[];r.push("M11=",this.m_[0][0],",","M12=",
this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",v(p.x/w),",","Dy=",v(p.y/w),"");var s=u(this,c+e,d),t=u(this,c,d+f);c=u(this,c+e,d+f);p.x=z.max(p.x,s.x,t.x,c.x);p.y=z.max(p.y,s.y,t.y,c.y);q.push("padding:0 ",v(p.x/w),"px ",v(p.y/w),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",r.join(""),", sizingmethod='clip');")}else q.push("top:",v(p.y/w),"px;left:",v(p.x/w),"px;");q.push(' ">','<g_vml_:image src="',a.src,'"',' style="width:',w*e,"px;"," height:",w*f,'px"',' cropleft="',
g/l,'"',' croptop="',h/n,'"',' cropright="',(l-g-k)/l,'"',' cropbottom="',(n-h-m)/n,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",q.join(""))};r.stroke=function(a){var b=[];b.push("<g_vml_:shape",' filled="',!!a,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*w,",",10*w,'"',' stroked="',!a,'"',' path="');for(var c={x:null,y:null},d={x:null,y:null},e=0;e<this.currentPath_.length;e++){var f=this.currentPath_[e];switch(f.type){case "moveTo":b.push(" m ",
v(f.x),",",v(f.y));break;case "lineTo":b.push(" l ",v(f.x),",",v(f.y));break;case "close":b.push(" x ");f=null;break;case "bezierCurveTo":b.push(" c ",v(f.cp1x),",",v(f.cp1y),",",v(f.cp2x),",",v(f.cp2y),",",v(f.x),",",v(f.y));break;case "at":case "wa":b.push(" ",f.type," ",v(f.x-this.arcScaleX_*f.radius),",",v(f.y-this.arcScaleY_*f.radius)," ",v(f.x+this.arcScaleX_*f.radius),",",v(f.y+this.arcScaleY_*f.radius)," ",v(f.xStart),",",v(f.yStart)," ",v(f.xEnd),",",v(f.yEnd))}if(f){if(null==c.x||f.x<c.x)c.x=
f.x;if(null==d.x||f.x>d.x)d.x=f.x;if(null==c.y||f.y<c.y)c.y=f.y;if(null==d.y||f.y>d.y)d.y=f.y}}b.push(' ">');a?s(this,b,c,d):q(this,b);b.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",b.join(""))};r.fill=function(){this.stroke(!0)};r.closePath=function(){this.currentPath_.push({type:"close"})};r.save=function(){var a={};g(this,a);this.aStack_.push(a);this.mStack_.push(this.m_);this.m_=f(e(),this.m_)};r.restore=function(){this.aStack_.length&&(g(this.aStack_.pop(),this),this.m_=
this.mStack_.pop())};r.translate=function(a,b){t(this,f([[1,0,0],[0,1,0],[a,b,1]],this.m_),!1)};r.rotate=function(a){var b=I(a);a=H(a);t(this,f([[b,a,0],[-a,b,0],[0,0,1]],this.m_),!1)};r.scale=function(a,b){this.arcScaleX_*=a;this.arcScaleY_*=b;t(this,f([[a,0,0],[0,b,0],[0,0,1]],this.m_),!0)};r.transform=function(a,b,c,d,e,g){t(this,f([[a,b,0],[c,d,0],[e,g,1]],this.m_),!0)};r.setTransform=function(a,b,c,d,e,f){t(this,[[a,b,0],[c,d,0],[e,f,1]],!0)};r.drawText_=function(a,c,d,e,f){var g=this.m_;e=0;
var h=1E3,k=0,m=[],l;l=this.font;if(J[l])l=J[l];else{var n=document.createElement("div").style;try{n.font=l}catch(p){}l=J[l]={style:n.fontStyle||"normal",variant:n.fontVariant||"normal",weight:n.fontWeight||"normal",size:n.fontSize||10,family:n.fontFamily||"sans-serif"}}var n=l,r=this.element_;l={};for(var t in n)l[t]=n[t];t=parseFloat(r.currentStyle.fontSize);r=parseFloat(n.size);"number"==typeof n.size?l.size=n.size:-1!=n.size.indexOf("px")?l.size=r:-1!=n.size.indexOf("em")?l.size=t*r:-1!=n.size.indexOf("%")?
l.size=t/100*r:-1!=n.size.indexOf("pt")?l.size=r/0.75:l.size=t;l.size*=0.981;t=l.style+" "+l.variant+" "+l.weight+" "+l.size+"px "+l.family;r=this.element_.currentStyle;n=this.textAlign.toLowerCase();switch(n){case "left":case "center":case "right":break;case "end":n="ltr"==r.direction?"right":"left";break;case "start":n="rtl"==r.direction?"right":"left";break;default:n="left"}switch(this.textBaseline){case "hanging":case "top":k=l.size/1.75;break;case "middle":break;default:case null:case "alphabetic":case "ideographic":case "bottom":k=
-l.size/2.25}switch(n){case "right":e=1E3;h=0.05;break;case "center":e=h=500}c=u(this,c+0,d+k);m.push('<g_vml_:line from="',-e,' 0" to="',h,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!f,'" stroked="',!!f,'" style="position:absolute;width:1px;height:1px;">');f?q(this,m):s(this,m,{x:-e,y:0},{x:h,y:l.size});f=g[0][0].toFixed(3)+","+g[1][0].toFixed(3)+","+g[0][1].toFixed(3)+","+g[1][1].toFixed(3)+",0,0";c=v(c.x/w)+","+v(c.y/w);m.push('<g_vml_:skew on="t" matrix="',f,'" ',' offset="',
c,'" origin="',e,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',b(a),'" style="v-text-align:',n,";font:",b(t),'" /></g_vml_:line>');this.element_.insertAdjacentHTML("beforeEnd",m.join(""))};r.fillText=function(a,b,c,d){this.drawText_(a,b,c,d,!1)};r.strokeText=function(a,b,c,d){this.drawText_(a,b,c,d,!0)};r.measureText=function(a){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),
this.textMeasureEl_=this.element_.lastChild);var b=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(b.createTextNode(a));return{width:this.textMeasureEl_.offsetWidth}};r.clip=function(){};r.arcTo=function(a,b,c,d,e,f,g){this.quadraticCurveTo(a,b,c,d)};r.createPattern=function(a,b){return new G(a,b)};C.prototype.addColorStop=function(a,b){b=n(b);this.colors_.push({offset:a,color:b.color,alpha:b.alpha})};r=D.prototype=
Error();r.INDEX_SIZE_ERR=1;r.DOMSTRING_SIZE_ERR=2;r.HIERARCHY_REQUEST_ERR=3;r.WRONG_DOCUMENT_ERR=4;r.INVALID_CHARACTER_ERR=5;r.NO_DATA_ALLOWED_ERR=6;r.NO_MODIFICATION_ALLOWED_ERR=7;r.NOT_FOUND_ERR=8;r.NOT_SUPPORTED_ERR=9;r.INUSE_ATTRIBUTE_ERR=10;r.INVALID_STATE_ERR=11;r.SYNTAX_ERR=12;r.INVALID_MODIFICATION_ERR=13;r.NAMESPACE_ERR=14;r.INVALID_ACCESS_ERR=15;r.VALIDATION_ERR=16;r.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=K;CanvasRenderingContext2D=l;CanvasGradient=C;CanvasPattern=G;DOMException=D}();var DEBUG=!1;navigator.isGecko=null!==navigator.userAgent.match(/Gecko\//i);navigator.isWebkit=null!==navigator.userAgent.match(/WebKit\//i);navigator.isIE=null!==navigator.userAgent.match(/MSIE/i)||null!==navigator.userAgent.match(/Trident/i);navigator.isIE7=null!==navigator.userAgent.match(/MSIE 7\./i);navigator.isIE8=null!==navigator.userAgent.match(/MSIE 8\./i);navigator.isIE10=null!==navigator.userAgent.match(/MSIE 10\./i);navigator.isIE11=navigator.isIE&&null!==navigator.userAgent.match(/rv:11\./i);
navigator.isOpera=void 0===navigator.userAgent||null!==navigator.userAgent.match(/Opera\//i);navigator.isChrome=null!==navigator.userAgent.match(/ Chrome\//);navigator.isSafari=null!==navigator.userAgent.match(/ Safari\//);navigator.isFirefox=null!==navigator.userAgent.match(/ Firefox\//);navigator.isFirefox3=null!==navigator.userAgent.match(/ Firefox\/3\./);navigator.isFirefox3_5=null!==navigator.userAgent.match(/ Firefox\/3\.5\./);navigator.isFirefox3_6=null!==navigator.userAgent.match(/ Firefox\/3\.6\./);
navigator.iPad=null!==navigator.userAgent.match(/iPad/i);navigator.iPhone=null!==navigator.userAgent.match(/iPhone/i);navigator.iOs=navigator.iPad||navigator.iPhone;navigator.Android=null!==navigator.userAgent.match(/Android/i);var svgNS="http://www.w3.org/2000/svg",htmlNS="http://www.w3.org/1999/xhtml";
(function(){var a;navigator.supportSVG=!1;try{a=document.createElementNS(svgNS,"g"),"ownerSVGElement"in a&&(navigator.supportSVG=!0)}catch(b){}a=document.createElement("canvas");navigator.supportCanvas="getContext"in a;navigator.supportRgba=!0;navigator.supportRgb=!0;a=document.createElement("div");try{a.style.background="rgba(0, 0, 0, 0.5)"}catch(c){navigator.supportRgba=!1}try{a.style.background="rgb(0, 0, 0)"}catch(d){navigator.supportRgb=!1}})();Core={Util:{}};Core.Util.idGenerator=0;
Core.Util.generateId=function(){return++Core.Util.idGenerator};Core.Util.baseDirectory=function(a){var b;b=void 0!==document.scripts?document.scripts:document.getElementsByTagName("script");for(var c=0;c<b.length;c++){var d=b[c].src.search(a);if(-1!=d)return b[c].src.substring(0,d)}};Core.Util.include=function(a){document.write("<script type='text/javascript' src='"+a+"'>\x3c/script>")};
Core.Util.clone=function(a){if(void 0!==a){if(null===a||"object"!==typeof a)return null;var b={},c;for(c in a)b[c]=a[c];return b}};Core.Util.encodeURIQuery=function(a){var b="";if(void 0!==a&&null!==a)for(var c in a){var d=a[c];"number"!==typeof d&&"string"!==typeof d&&"boolean"!==typeof d&&"object"!==typeof d||(""!==b&&(b+="&"),b+=encodeURIComponent(c)+"=",b="object"===typeof d?b+encodeURIComponent(JSON.stringify(d)):b+encodeURIComponent(d))}return b};
String.prototype.utf8Encode=function(){for(var a="",b=0;b<this.length;b++){var c=this.charCodeAt(b);128>c?a+=String.fromCharCode(c):(128<=c&&2048>c?a+=String.fromCharCode(c>>6|192):(a+=String.fromCharCode(c>>12|224),a+=String.fromCharCode(c>>6&63|128)),a+=String.fromCharCode(c&63|128))}return a};
String.prototype.utf8Decode=function(){for(var a="",b=0,c;b<this.length;)c=this.charCodeAt(b++),a=128>c?a+String.fromCharCode(c):192<=c&&224>c?a+String.fromCharCode((c&31)<<6|this.charCodeAt(b++)&63):a+String.fromCharCode((c&15)<<12|(this.charCodeAt(b++)&63)<<6|this.charCodeAt(b++)&63);return a};
String.prototype.toBase64=function(){for(var a,b,c,d,e=this.utf8Encode(),f="",g=0;g+2<e.length;)a=e.charCodeAt(g++)&255,b=e.charCodeAt(g++)&255,c=e.charCodeAt(g++)&255,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>2),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((a&3)<<4|b>>4),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((b&15)<<2|c>>6),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c&
63),f+=d+a+b+c;g+1<e.length?(a=e.charCodeAt(g++)&255,b=e.charCodeAt(g++)&255,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>2),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((a&3)<<4|b>>4),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((b&15)<<2),f+=d+a+b+"="):g<e.length&&(a=e.charCodeAt(g++)&255,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>2),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((a&
3)<<4),f+=d+a+"==");return f};
String.prototype.fromBase64=function(){for(var a,b,c,d,e,f="",g=0;g<this.length;)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(this.charAt(g++)),b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(this.charAt(g++)),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(this.charAt(g++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(this.charAt(g++)),a=a<<2|b>>4,b=(b&15)<<4|d>>2,c=(d&3)<<
6|e,f+=String.fromCharCode(a),64!==d&&(f+=String.fromCharCode(b),64!==e&&(f+=String.fromCharCode(c)));return f.utf8Decode()};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});
String.prototype.toNoDiacritics=function(){for(var a=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",
letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},
{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},
{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},
{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",
letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},
{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},
{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},
{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},
{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},
{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},
{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},
{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},
{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],b=this,c=0;c<a.length;c++)b=b.replace(a[c].letters,a[c].base);return b};
Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c;c=1<arguments.length?arguments.slice(1,arguments.length-1):[];return function(){return b.apply(a,c.concat(arguments))}});navigator.supportVML=!1;
if(navigator.isIE){if(navigator.supportSVG)SVGTextContentElement.prototype.__getStartPositionOfChar=SVGTextContentElement.prototype.getStartPositionOfChar,SVGTextContentElement.prototype.getStartPositionOfChar=function(a){return this.__getStartPositionOfChar(a).matrixTransform(this.getScreenCTM().inverse())},SVGTextContentElement.prototype.__getEndPositionOfChar=SVGTextContentElement.prototype.getEndPositionOfChar,SVGTextContentElement.prototype.getEndPositionOfChar=function(a){return this.__getEndPositionOfChar(a).matrixTransform(this.getScreenCTM().inverse())},
SVGTextContentElement.prototype.__getCharNumAtPosition=SVGTextContentElement.prototype.getCharNumAtPosition,SVGTextContentElement.prototype.getCharNumAtPosition=function(a){return this.getCharNumAtPositionHelper(a.x,0,this.getNumberOfChars()-1)},SVGTextContentElement.prototype.getCharNumAtPositionHelper=function(a,b,c){startX=this.getStartPositionOfChar(b).x;endX=this.getEndPositionOfChar(c).x;if(a<startX||a>endX)return-1;if(b==c)return b;var d=Math.floor((b+c)/2);b=this.getCharNumAtPositionHelper(a,
b,d);return-1!=b?b:this.getCharNumAtPositionHelper(a,d+1,c)};else{document.namespaces.vml||(navigator.isIE8?document.namespaces.add("vml","urn:schemas-microsoft-com:vml","#default#VML"):document.namespaces.add("vml","urn:schemas-microsoft-com:vml"));var styleSheet=0<document.styleSheets.length?document.styleSheets[0]:document.createStyleSheet();styleSheet.addRule("vml\\:shape","behavior:url(#default#VML)");styleSheet.addRule("vml\\:fill","behavior:url(#default#VML)");styleSheet.addRule("vml\\:rect",
"behavior:url(#default#VML)");styleSheet.addRule("vml\\:roundrect","behavior:url(#default#VML)");navigator.supportVML=!0}if((navigator.isIE7||navigator.isIE8)&&window.parent!=window)document.elementFromPoint=function(a,b,c){void 0===c&&(c=document.body);if("childNodes"in c&&"offsetLeft"in c&&"offsetTop"in c){for(var d=0;d<c.childNodes.length;d++){var e=document.elementFromPoint(a-c.offsetLeft,b-c.offsetTop,c.childNodes[d]);if(void 0!==e)return e}if(a>=c.offsetLeft&&b>=c.offsetTop&&a-c.offsetLeft<=
c.clientWidth&&b-c.offsetTop<=c.clientHeight)return c}};if((navigator.isIE7||navigator.isIE8)&&!("DOMParser"in window))window.DOMParser=function(){this.parseFromString=function(a){var b=new ActiveXObject("Microsoft.XMLDOM");b.async=!1;b.loadXML(a);return b}}}
if(void 0===window.JSON){var json={parse:function(a){return eval("("+a+")")},stringify:function(a){var b="",c=!0,d=-1!=a.constructor.toString().indexOf("function Array()"),e;for(e in a)try{var f=a[e];"number"!=typeof f&&"string"!=typeof f&&"object"!=typeof f&&"boolean"!=typeof f||(c?c=!1:b+=", ",d||(b+='"'+e+'": '),null===f?b+="null":"object"==typeof f?b+=JSON.stringify(f):"number"==typeof f?b+=f:"string"==typeof f?b+='"'+f.replace('"','\\"')+'"':"boolean"==typeof f&&(b+=f?"true":"false"))}catch(g){}return d?
"[ "+b+" ]":"{ "+b+" }"}};window.JSON=json}void 0===window.console&&(window.console={log:function(){},error:function(){},warn:function(){}});void 0===Object.create&&(Object.create=function(a){var b,c={};for(b in a)"constructor"!==b&&(c[b]=a[b]);return c});Core.Object=function(){};Core.Object.prototype.classType="Core.Object";Core.Object.prototype.toString=function(){return"[object "+this.classType+"]"};Core.Object.prototype.dump=function(a){void 0!==a&&(a=RegExp(a,"i"));console.log(this+":");for(var b in this)try{var c=!0;void 0!==a&&(c=a.test(b));c&&console.log(b+" => "+this[b])}catch(d){}};
Core.Object.dump=function(a,b){void 0!==b&&(b=RegExp(b,"i"));console.log(a+":");for(var c in a)try{var d=!0;void 0!==b&&(d=b.test(c));d&&console.log(c+" => "+a[c])}catch(e){}};Core.Object.diff=function(a,b){var c={},d=!0,e;for(e in b)e in a&&b[e]!==a[e]&&(c[e]=b[e],d=!1);return d?void 0:c};Core.Object.prototype.serialize=function(){return JSON.stringify(this)};
Core.Object.prototype.constructorHelper=function(a,b){void 0===b&&(b=this);void 0===b||null===b||(void 0===a&&(a={}),void 0!==b.__baseclass__&&this.constructorHelper.call(this,a,b.__baseclass__),void 0!==b.__constructor&&b.__constructor.call(this,a))};
Function.prototype.extend=function(a,b,c,d){for(var e,f=a.split("."),g="",h=window,k=0;k<f.length-1;k++)""!==g&&(g+="."),g+=f[k],void 0===h[f[k]]&&(h[f[k]]={}),h=h[f[k]];f=eval("( "+a+" = function(config) { this.constructorHelper.call(this, config); this.autoConfig(config); } )");f.prototype=Object.create(this.prototype);f.prototype.constructor=f;f.prototype.__baseclass__=this.prototype;f.base=this.prototype;for(e in f.base.constructor)"function"===typeof f.base.constructor[e]&&(f[e]=f.base.constructor[e]);
if(void 0!==d)for(e in d)f[e]=d[e];if(void 0!==b){for(e in b)if("constructor"===e)f.prototype.__constructor=b[e];else{if("object"===typeof b[e]&&null!==b[e])throw"object are not allowed in classDefine ("+e+"). Create object in the constructor";if(e in f.prototype)throw"Try to override "+e+" on class "+a+". Use classOverride you want to do it";f.prototype[e]=b[e]}b.constructor===Object.prototype.constructor&&(f.prototype.__constructor=void 0);navigator.isIE&&b.constructor!==Object.prototype.constructor&&
(f.prototype.__constructor=b.constructor)}else f.prototype.__constructor=void 0;if(void 0!==c)for(e in c){if("object"===typeof c[e]&&null!==c[e])throw"object are not allowed in classOverride ("+e+"). Create object in the constructor";f.prototype[e]=c[e]}f.prototype.classType=a;void 0!==d&&"constructor"in d&&d.constructor.call(f);return f};
Function.prototype.hasInstance=function(a){if("object"!==typeof a||null===a||a.constructorHelper!==Core.Object.prototype.constructorHelper)return!1;for(;void 0!==a;){if(a.classType===this.prototype.classType)return!0;a=a.__baseclass__}return!1};Core.Object.prototype.isSubclassOf=function(a){for(var b=this;void 0!==b;){if(b.classType===a)return!0;b=b.__baseclass__}return!1};
Core.Object.prototype.addEvents=function(){void 0===this.events&&(this.events=[]);for(var a=0;a<arguments.length;a++)this.events[arguments[a]]=[]};Core.Object.prototype.hasEvent=function(a){return void 0!==this.events&&a in this.events};
Core.Object.prototype.fireEvent=function(a){var b,c=[];for(b=1;b<arguments.length;b++)c[b-1]=arguments[b];var d=!1,e=this.events[a];if(void 0!==e){e=e.slice();for(b=0;b<e.length&&!d;b++)!0===e[b].capture&&(d=e[b].method.apply(e[b].scope,c),void 0===d&&(d=!1));for(b=0;b<e.length&&!d;b++)!0!==e[b].capture&&(d=e[b].method.apply(e[b].scope,c),void 0===d&&(d=!1))}else if(DEBUG)throw"Event '"+a+"' not found on "+this;return d};
Core.Object.prototype.connect=function(a,b,c,d){var e;void 0===d&&(d=!1);if(DEBUG&&"function"!==typeof c)throw"Invalid method to connect on event '"+b+"'";if("addEventListener"in a)e=function(){return e.callback.apply(e.scope,arguments)},e.scope=this,e.callback=c,e.eventName=b,e.capture=d,a.addEventListener(b,e,d),void 0===a.events&&(a.events=[]),a.events.push(e);else if("attachEvent"in a)e=function(){if(1===arguments.length){var a={},b;for(b in arguments[0])a[b]=arguments[0][b];"keyCode"in arguments[0]&&
!("which"in arguments[0])&&(a.which=arguments[0].keyCode);a.preventDefault=function(){this.defaultPrevented=!0;this.returnValue=!1};a.stopPropagation=function(){this.cancelBubble=!0};a.target=a.srcElement;b=arguments.callee.callback.call(arguments.callee.scope,a);arguments[0].returnValue=a.returnValue;arguments[0].cancelBubble=a.cancelBubble;return b}return e.callback.apply(arguments.callee.scope,arguments)},e.scope=this,e.callback=c,e.eventName=b,e.capture=d,a.attachEvent("on"+b,e),void 0===a.events&&
(a.events=[]),a.events.push(e);else if(c={scope:this,method:c,capture:d},d=a.events[b],void 0!==d)d.push(c);else if(DEBUG)throw"Event '"+b+"' not found on "+a;};Core.Object.prototype.getEventHandlers=function(a){a=this.events[a];return void 0!==a?a.slice():[]};
Core.Object.prototype.disconnect=function(a,b,c){var d,e;if("removeEventListener"in a)for(e=0;void 0!==a.events&&e<a.events.length;e++)d=a.events[e],d.scope===this&&d.eventName===b&&!(void 0!==c&&d.callback!==c)&&(a.removeEventListener(d.eventName,d,d.capture),a.events.splice(e,1),e--);else if("detachEvent"in a)for(e=0;void 0!==a.events&&e<a.events.length;e++)d=a.events[e],d.scope===this&&d.eventName===b&&!(void 0!==c&&d.callback!==c)&&(a.detachEvent("on"+d.eventName,d),a.events.splice(e,1),e--);
else for(e=0;void 0!==a.events&&e<a.events[b].length;e++)d=a.events[b][e],d.scope==this&&!(void 0!==c&&d.method!==c)&&(a.events[b].splice(e,1),e--)};
Core.Object.prototype.autoConfig=function(a){if(void 0!==a){var b,c;for(c in a)if(b="set"+c.charAt(0).toUpperCase()+c.substr(1),b in this&&"function"==typeof this[b])this[b].call(this,a[c]),delete a[c];else if(-1!=c.indexOf(".")){b=c.split(".");for(var d=window,e=0;e<b.length-1;e++)d=d[b[e]];b=b[b.length-1];b="set"+b.charAt(0).toUpperCase()+b.substr(1);if(b in d&&typeof("function"==d[b]))d[b].call(d,this,a[c]),delete a[c];else if(DEBUG)throw"Attached property '"+c+"' not found";}else if(DEBUG&&"type"!==
c)throw"Property '"+c+"' not found on "+this.classType;}};
Core.Object.create=function(a){if(void 0!==a){if("string"==typeof a){if("parse"in this)return this.parse(a);throw"static parse need to be defined in class "+this.prototype.classType+" to create from a string";}if(Core.Object.hasInstance(a))return a;var b=a.type;if(DEBUG&&"type"in a&&void 0===b)throw"Cannot create object of type undefined";if(void 0===b)b=this;else if(DEBUG)for(var c=b;void 0!==c&&c!==this;){if(void 0===c.base)throw"Expecting class "+this.prototype.classType+" got "+b.prototype.classType;
c=c.base.constructor}return new b(a)}};Core.Object.extend("Core.Uri",{scheme:void 0,user:void 0,password:void 0,host:void 0,port:void 0,path:void 0,query:void 0,fragment:void 0,constructor:function(a){var b=!0,c;c="baseURI"in document?document.baseURI:document.location.href;var d;"uri"in a?(d=a.uri,delete a.uri):d=c;a=d.match(/^([^:\/]+):\/\/([^\/]+)(\/.*)$/);null===a&&(b=!1,a=c.match(/^([^:\/]+):\/\/([^\/]+)(\/.*)$/));this.scheme=a[1];c=a[2];var e=a[3];a=c.match(/^(.+):(.+)@(.*)$/);null!==a&&(this.user=a[1],this.password=a[2],c=a[3]);
a=c.match(/^(.+):(.+)$/);null!==a?(c=a[1],this.port=a[2]):this.port="https"==this.scheme?443:80;this.host=c;b?this.path=e:0===d.indexOf("/")?this.path=Core.Uri.cleanPath(d):this.path=Core.Uri.mergePath(e,d)},getScheme:function(){return this.scheme},getUser:function(){return this.user},getPassword:function(){return this.password},getHost:function(){return this.host},getPort:function(){return this.port},getPath:function(){return this.path},getQuery:function(){return this.query},getFragment:function(){return this.fragment}},
{toString:function(){var a=this.scheme+"://";void 0!==this.user&&void 0!==this.password&&(a+=this.user+":"+this.password+"@");a+=this.host;void 0!==this.port&&(a+=":"+this.port);return a+=this.path}},{cleanPath:function(a){for(;a.match(/\/([^\/]*)\/\.\.\//);)a=a.replace(/\/([^\/]*)\/\.\.\//,"/");for(;a.match(/\/\//,"/");)a=a.replace(/\/\//,"/");for(;a.match(/\/\.\//);)a=a.replace(/\/\.\//,"/");return a},mergePath:function(a,b){var c=a.match(/^(.*)\//)[0];return Core.Uri.cleanPath(c+b)}});Core.Object.extend("Core.DelayedTask",{delay:1,scope:void 0,callback:void 0,arguments:void 0,isDone:!1,handle:void 0,constructor:function(a){"delay"in a&&(this.delay=a.delay,delete a.delay);"scope"in a&&(this.scope=a.scope,delete a.scope);"arguments"in a?(this.arguments=a.arguments,delete a.arguments):this.arguments=[];if("callback"in a)this.callback=a.callback,delete a.callback;else throw"callback MUST be given for a DelayedTask";this.handle=setTimeout(this.onTimeout.bind(this),1E3*this.delay)},
onTimeout:function(){this.handle=void 0;this.isDone=!0;this.callback.apply(this.scope,[this])},abort:function(){void 0!==this.handle&&(clearTimeout(this.handle),this.handle=void 0)}});Core.Object.extend("Core.Timer",{interval:1,arguments:void 0,constructor:function(a){this.addEvents("timeupdate");"interval"in a&&(this.interval=a.interval,delete a.interval);"arguments"in a?(this.arguments=a.arguments,delete a.arguments):this.arguments=[];this.wrapper=function(){var a=(new Date).getTime()/1E3,c=arguments.callee.timer;c.fireEvent("timeupdate",c,c.arguments);a=(new Date).getTime()/1E3-a;0>a&&(a=0);a=1E3*c.interval-a;0>a&&(a=0);void 0!==c.handle&&(c.handle=setTimeout(c.wrapper,a))};
this.wrapper.timer=this;this.handle=setTimeout(this.wrapper,0)},abort:function(){void 0!==this.handle&&(clearTimeout(this.handle),this.handle=void 0)}});Core.Object.extend("Core.HttpRequest",{url:void 0,method:"GET",binary:!1,request:void 0,arguments:void 0,content:void 0,headers:void 0,constructor:function(a){this.addEvents("error","done");this.request=new XMLHttpRequest;a=function(){var a=arguments.callee.httprequest;4==a.request.readyState&&(200<=a.request.status&&300>a.request.status?a.fireEvent("done",a):a.fireEvent("error",a,a.request.status),a.request.onreadystatechange=null,a.request=void 0)};a.httprequest=this;this.request.onreadystatechange=
a},setUrl:function(a){this.url=a},setBinary:function(a){this.binary=a},setMethod:function(a){this.method=a},setRequestHeader:function(a,b){void 0===this.headers&&(this.headers={});this.headers[a]=b},setArguments:function(a){this.arguments=a},addArgument:function(a,b){void 0===this.arguments&&(this.arguments={});this.arguments[a]=b},setContent:function(a){this.content=a},abort:function(){this.request.abort()},send:function(){if(void 0===this.url)throw"url MUST be given for an HttpRequest";var a,b=
"";void 0!==this.arguments&&(b=Core.Util.encodeURIQuery(this.arguments));var c=this.url;if(("GET"===this.method||"DELETE"===this.method||void 0!==this.content)&&""!==b)c=-1===this.url.indexOf("?")?c+("?"+b):c+("&"+b);this.request.open(this.method,c,!0);this.binary&&this.request.overrideMimeType("text/plain; charset=x-user-defined");this.request.setRequestHeader("X-Requested-With","XMLHttpRequest");if(void 0!==Core.HttpRequest.requestHeaders)for(a in Core.HttpRequest.requestHeaders)this.request.setRequestHeader(a,
Core.HttpRequest.requestHeaders[a]);if(void 0!==this.headers)for(a in this.headers)this.request.setRequestHeader(a,this.headers[a]);void 0!==this.content?((void 0===this.headers||void 0===this.headers["Content-Type"])&&this.request.setRequestHeader("Content-Type","text/plain; charset=utf-8"),this.request.send(this.content)):""!==b&&("POST"===this.method||"PUT"===this.method)?((void 0===this.headers||void 0===this.headers["Content-Type"])&&this.request.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),
this.request.send(b)):this.request.send()},getResponseHeader:function(a){return this.request.getResponseHeader(a)},getResponseText:function(){return this.request.responseText},getResponseBase64:function(){return this.request.responseText.toBase64()},getResponseJSON:function(){var a;try{a=JSON.parse(this.getResponseText())}catch(b){a=void 0}return a},getResponseXML:function(){var a=new DOMParser;try{return a.parseFromString(this.getResponseText(),"text/xml")}catch(b){}},getStatus:function(){return this.request.status}},
{},{requestHeaders:void 0,setRequestHeader:function(a,b){void 0===Core.HttpRequest.requestHeaders&&(Core.HttpRequest.requestHeaders={});Core.HttpRequest.requestHeaders[a]=b}});Core.Object.extend("Core.Socket",{host:void 0,service:"/",port:80,mode:void 0,secure:!1,websocket:void 0,websocketdelay:void 0,emuopenrequest:void 0,emupollrequest:void 0,emusendrequest:void 0,emuid:void 0,emumessages:void 0,lastPosition:0,readSize:!0,size:0,data:"",isClosed:!1,closeSent:!1,sep:"?",lastPoll:void 0,delayPollTask:void 0,pollInterval:2.5,constructor:function(a){this.addEvents("error","message","close","open");"host"in a?(this.host=a.host,delete a.host):this.host=document.location.hostname;
"secure"in a&&(this.secure=a.secure,delete a.secure);"port"in a?(this.port=a.port,delete a.port):this.port=void 0!==document.location.port&&""!==document.location.port?document.location.port:this.secure?443:80;"service"in a&&(this.service=a.service,delete a.service,-1==this.service.indexOf("?")?this.sep="?":this.sep="&");"mode"in a?(this.mode=a.mode,delete a.mode):this.mode=Core.Socket.supportWebSocket?"websocket":"poll";"websocket"==this.mode?(this.websocket=new WebSocket((this.secure?"wss":"ws")+
"://"+this.host+":"+this.port+this.service),this.websocketdelay=new Core.DelayedTask({scope:this,callback:this.onWebSocketOpenTimeout,delay:30}),this.connect(this.websocket,"open",this.onWebSocketOpen),this.connect(this.websocket,"error",this.onWebSocketError),this.connect(this.websocket,"message",this.onWebSocketMessage),this.connect(this.websocket,"close",this.onWebSocketClose)):(this.emumessages=[],this.emuopenrequest=new Core.HttpRequest({url:(this.secure?"https":"http")+"://"+this.host+":"+this.port+
this.service+this.sep+"socket=poll&command=open"}),this.connect(this.emuopenrequest,"done",this.onEmuSocketOpenDone),this.connect(this.emuopenrequest,"error",this.onEmuSocketOpenError),this.emuopenrequest.send())},send:function(a){void 0!==this.websocket?this.websocket.send(a):void 0===this.emusendrequest?(a=(this.secure?"https":"http")+"://"+this.host+":"+this.port+this.service+this.sep+"socket="+this.mode+"&command=send&id="+this.emuid+"&messages="+encodeURIComponent(a.toBase64()),this.emusendrequest=
new Core.HttpRequest({url:a}),this.connect(this.emusendrequest,"done",this.onEmuSocketSendDone),this.connect(this.emusendrequest,"error",this.onEmuSocketSendError),this.emusendrequest.send(),void 0!==this.delayPollTask&&(this.delayPollTask.abort(),this.delayPollTask=new Core.DelayedTask({delay:0.1,scope:this,callback:this.delayPollDone}))):this.emumessages.push(a.toBase64())},close:function(){void 0!==this.delayPollTask&&(this.delayPollTask.abort(),this.delayPollTask=void 0);void 0!==this.websocket?
(this.isClosed=!0,this.websocket.close()):this.isClosed||(this.isClosed=!0,void 0!==this.emuopenrequest?(this.emuopenrequest.abort(),this.emuopenrequest=void 0):void 0!==this.emuid&&void 0===this.emusendrequest&&(this.closeSent=!0,this.emusendrequest=new Core.HttpRequest({url:(this.secure?"https":"http")+"://"+this.host+":"+this.port+this.service+this.sep+"socket="+this.mode+"&command=close&id="+this.emuid}),this.connect(this.emusendrequest,"done",this.onEmuSocketSendDone),this.connect(this.emusendrequest,
"error",this.onEmuSocketSendError),this.emusendrequest.send()))},onWebSocketOpenTimeout:function(){this.websocketdelay=void 0;this.disconnect(this.websocket,"open",this.onWebSocketOpen);this.disconnect(this.websocket,"error",this.onWebSocketError);this.disconnect(this.websocket,"message",this.onWebSocketMessage);this.disconnect(this.websocket,"close",this.onWebSocketClose);this.websocket.close();this.websocket=void 0;this.mode="poll";this.emumessages=[];this.emuopenrequest=new Core.HttpRequest({url:(this.secure?
"https":"http")+"://"+this.host+":"+this.port+this.service+this.sep+"socket=poll&command=open"});this.connect(this.emuopenrequest,"done",this.onEmuSocketOpenDone);this.connect(this.emuopenrequest,"error",this.onEmuSocketOpenError);this.emuopenrequest.send()},onWebSocketOpen:function(){void 0!==this.websocketdelay&&(this.websocketdelay.abort(),this.websocketdelay=void 0);this.fireEvent("open",this)},onWebSocketError:function(){void 0!==this.websocketdelay&&(this.websocketdelay.abort(),this.websocketdelay=
void 0);this.fireEvent("error",this)},onWebSocketMessage:function(a){"PING"===a.data?this.websocket.send("PONG"):this.fireEvent("message",this,a.data)},onWebSocketClose:function(a){void 0!==this.websocketdelay&&(this.websocketdelay.abort(),this.websocketdelay=void 0);this.fireEvent("close",this)},emuSocketDataAvailable:function(a){void 0===this.emuid?(this.emuid=a,this.fireEvent("open",this)):"keepalive"!==a&&this.fireEvent("message",this,a.fromBase64())},emuSocketUpdate:function(a){for(var b=0;b<
a.length;b++){var c=a[b];this.readSize?":"===c?(this.readSize=!1,this.size=parseInt("0x"+this.data),this.data=""):this.data+=c:(this.data+=c,this.data.length>=this.size+2&&(this.emuSocketDataAvailable(this.data.substring(0,this.data.length-2)),this.readSize=!0,this.data=""))}},onEmuSocketSendDone:function(){this.emusendrequest.getResponseJSON();if(0<this.emumessages.length){for(var a="",b=0;b<this.emumessages.length;b++)""!==a&&(a+=";"),a+=this.emumessages[b];this.emusendrequest=new Core.HttpRequest({url:(this.secure?
"https":"http")+"://"+this.host+":"+this.port+this.service+this.sep+"socket="+this.mode+"&command=send&id="+this.emuid+"&messages="+encodeURIComponent(a)});this.connect(this.emusendrequest,"done",this.onEmuSocketSendDone);this.connect(this.emusendrequest,"error",this.onEmuSocketSendError);this.emusendrequest.send();this.emumessages=[]}else this.isClosed&&!this.closeSent?(this.emusendrequest=new Core.HttpRequest({url:(this.secure?"https":"http")+"://"+this.host+":"+this.port+this.service+this.sep+
"socket="+this.mode+"&command=close&id="+this.emuid}),this.connect(this.emusendrequest,"done",this.onEmuSocketSendDone),this.connect(this.emusendrequest,"error",this.onEmuSocketSendError),this.emusendrequest.send()):this.emusendrequest=void 0},onEmuSocketSendError:function(){this.emusendrequest=void 0},onEmuSocketOpenDone:function(){this.lastPoll=new Date;var a=this.emuopenrequest.getResponseJSON();this.emuopenrequest=void 0;void 0===a?(this.fireEvent("error",this),this.fireEvent("close",this)):(this.emuid=
a.id,"keepAliveInterval"in a&&(this.pollInterval=Math.min(a.keepAliveInterval,2.5)),"open"!=a.status?(this.fireEvent("error",this),this.fireEvent("close",this)):(this.fireEvent("open",this),this.emupollrequest=new Core.HttpRequest({url:(this.secure?"https":"http")+"://"+this.host+":"+this.port+this.service+this.sep+"socket=poll&command=poll&id="+this.emuid}),this.connect(this.emupollrequest,"done",this.onEmuSocketPollDone),this.connect(this.emupollrequest,"error",this.onEmuSocketPollError),this.emupollrequest.send()))},
onEmuSocketOpenError:function(a,b){this.emuopenrequest=void 0;this.fireEvent("error",this);this.fireEvent("close",this)},onEmuSocketPollDone:function(){var a=this.emupollrequest.getResponseJSON();this.emupollrequest=void 0;if(void 0===a)this.close(),this.fireEvent("close",this);else{if(void 0!==a.messages)for(var b=0;b<a.messages.length;b++){var c=a.messages[b].fromBase64();this.fireEvent("message",this,c)}"open"!==a.status?(this.close(),this.fireEvent("close",this)):(a=new Date,b=Math.max(0,a.getTime()-
this.lastPoll.getTime()),this.lastPoll=a,b>=1E3*this.pollInterval?this.sendPoll():this.delayPollTask=new Core.DelayedTask({delay:this.pollInterval,scope:this,callback:this.delayPollDone}))}},onEmuSocketPollError:function(){this.emupollrequest=void 0;this.fireEvent("error",this);this.close()},delayPollDone:function(){this.delayPollTask=void 0;void 0===this.emupollrequest&&this.sendPoll()},sendPoll:function(){this.lastPoll=new Date;this.emupollrequest=new Core.HttpRequest({url:(this.secure?"https":
"http")+"://"+this.host+":"+this.port+this.service+this.sep+"socket=poll&command=poll&id="+this.emuid});this.connect(this.emupollrequest,"done",this.onEmuSocketPollDone);this.connect(this.emupollrequest,"error",this.onEmuSocketPollError);this.emupollrequest.send()}});Core.Socket.supportWebSocket="WebSocket"in window;Core.Object.extend("Core.File",{iframe:void 0,form:void 0,fileInput:void 0,fileApi:void 0,constructor:function(a){void 0!==a.form&&(this.form=a.form,delete a.form);void 0!==a.iframe&&(this.iframe=a.iframe,delete a.iframe);void 0!==a.fileInput&&(this.fileInput=a.fileInput,delete a.fileInput);void 0!==a.fileApi&&(this.fileApi=a.fileApi,delete a.fileApi)},getFileName:function(){return void 0!==this.fileApi?void 0!==this.fileApi.fileName?this.fileApi.fileName:this.fileApi.name:void 0!==this.fileInput.fileName?
this.fileInput.fileName:this.fileInput.name},getRelativePath:function(){var a;void 0!==this.fileApi&&("relativePath"in this.fileApi?a=this.fileApi.relativePath:"webkitRelativePath"in this.fileApi?a=this.fileApi.webkitRelativePath:"mozRelativePath"in this.fileApi&&(a=this.fileApi.mozRelativePath));""===a&&(a=void 0);return a},getMimetype:function(){return void 0!==this.fileApi&&"type"in this.fileApi?this.fileApi.type:"application/octet-stream"}});Core.Object.extend("Core.FilePostUploader",{file:void 0,service:void 0,reader:void 0,request:void 0,binaryString:!1,responseText:void 0,fileReader:void 0,boundary:void 0,method:"POST",fields:void 0,isCompleted:!1,loadedOctets:void 0,totalOctets:void 0,constructor:function(a){this.addEvents("progress","complete","error");this.fields={}},setMethod:function(a){this.method=a},getFile:function(){return this.file},setFile:function(a){this.file=a},setService:function(a){this.service=a},setField:function(a,
b){this.fields[a]=b},setDestination:function(a){this.setField("destination",a)},send:function(){var a;if(void 0!==this.file.fileApi)if(navigator.supportFormData){var b=new FormData;void 0===this.destination&&(this.destination=this.file.getFileName());for(a in this.fields)b.append(a,this.fields[a]);b.append("file",this.file.fileApi);this.request=new XMLHttpRequest;"upload"in this.request&&this.connect(this.request.upload,"progress",this.onUpdateProgress);this.request.open(this.method,this.service);
this.request.send(b);a=function(){return arguments.callee.callback.apply(arguments.callee.scope,arguments)};a.scope=this;a.callback=this.onStateChange;this.request.onreadystatechange=a}else{this.fileReader=new FileReader;this.request=new XMLHttpRequest;"upload"in this.request&&this.connect(this.request.upload,"progress",this.onUpdateProgress);this.request.open(this.method,this.service);this.boundary="----";for(a=0;16>a;a++)this.boundary+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[Math.floor(62*
Math.random())];this.boundary+="----";this.request.setRequestHeader("Content-Type","multipart/form-data, boundary="+this.boundary);this.request.setRequestHeader("Content-Length",this.file.fileApi.size);a=function(){return arguments.callee.callback.apply(arguments.callee.scope,arguments)};a.scope=this;a.callback=this.onStateChange;this.request.onreadystatechange=a;a=function(){return arguments.callee.callback.apply(arguments.callee.scope,arguments)};a.scope=this;a.callback=this.onFileReaderLoad;this.fileReader.onload=
a;a=function(){return arguments.callee.callback.apply(arguments.callee.scope,arguments)};a.scope=this;a.callback=this.onFileReaderError;this.fileReader.onerror=a;this.fileReader.readAsBinaryString(this.file.fileApi)}else{this.file.form.action=this.service;for(a in this.fields)b=document.createElement("input"),b.type="hidden",b.setAttribute("name",a),destDrawing.setAttribute("value",this.fields[a]),this.file.form.insertBefore(b,this.file.form.firstChild);this.connect(this.file.iframe,"load",this.onIFrameLoad);
a=0;for(b=!1;!b&&5>a;)try{this.file.form.submit(),b=!0}catch(c){a++}}},abort:function(){void 0!==this.request&&(this.request.abort(),this.request=void 0)},getResponseText:function(){return this.responseText},getResponseJSON:function(){var a;try{a=JSON.parse(this.getResponseText())}catch(b){a=void 0}return a},onStateChange:function(a){4==this.request.readyState&&(this.isCompleted=!0,200==this.request.status?(this.responseText=this.request.responseText,this.fireEvent("complete",this)):(this.responseText=
this.request.responseText,this.fireEvent("error",this,this.request.status)),this.request=void 0)},getIsCompleted:function(){return this.isCompleted},getTotal:function(){return this.totalOctets},getLoaded:function(){return this.loadedOctets},onUpdateProgress:function(a){this.loadedOctets=a.loaded;this.totalOctets=a.total;this.fireEvent("progress",this,a.loaded,a.total)},onFileReaderError:function(a){this.request.abort();this.request=void 0;this.fireEvent("error",this);this.fileReader=void 0},onFileReaderLoad:function(a){var b=
"--"+this.boundary+"\r\n",b=b+("Content-Disposition: form-data; name='file'; filename='"+this.file.fileApi.name+"'\r\n"),b=b+("Content-Type: "+this.file.fileApi.type+"\r\n\r\n"),b=b+(a.target.result+"\r\n"),b=b+("--"+this.boundary+"--");this.request.sendAsBinary(b);this.fileReader=void 0},onIFrameLoad:function(a){this.responseText=a.target.contentWindow.document.body.innerText;document.body.removeChild(this.file.iframe);this.fireEvent("complete",this)}});"getUserMedia"in navigator||(navigator.getUserMedia="webkitGetUserMedia"in navigator?navigator.webkitGetUserMedia.bind(navigator):"mozGetUserMedia"in navigator?navigator.mozGetUserMedia.bind(navigator):void 0);navigator.supportUserMedia=void 0!==navigator.getUserMedia;"mozRTCPeerConnection"in window?RTCPeerConnection=mozRTCPeerConnection:"webkitRTCPeerConnection"in window&&(RTCPeerConnection=webkitRTCPeerConnection);"mozRTCSessionDescription"in window?RTCSessionDescription=mozRTCSessionDescription:"webkitRTCSessionDescription"in window&&(RTCSessionDescription=webkitRTCSessionDescription);"mozRTCIceCandidate"in window?RTCIceCandidate=mozRTCIceCandidate:"webkitRTCIceCandidate"in window&&(RTCIceCandidate=webkitRTCIceCandidate);
navigator.supportWebRTC="RTCPeerConnection"in window&&void 0!==RTCPeerConnection;Core.Object.extend("Core.RemoteDebug",{host:void 0,port:void 0,socket:void 0,socketAlive:!1,retryTask:void 0,nativeConsole:void 0,buffer:void 0,constructor:function(a){Core.RemoteDebug.current=this;this.host=a.host;delete a.host;this.port=a.port;delete a.port;this.buffer=[];this.nativeConsole=window.console;window.console={log:Core.RemoteDebug.onConsoleLog,error:Core.RemoteDebug.onConsoleError,warn:Core.RemoteDebug.onConsoleWarn};window.onerror=Core.RemoteDebug.onError;this.startSocket()},startSocket:function(){this.socket=
new Core.Socket({service:"/",host:this.host,port:this.port});this.connect(this.socket,"open",this.onSocketOpen);this.connect(this.socket,"message",this.onSocketMessage);this.connect(this.socket,"error",this.onSocketError);this.connect(this.socket,"close",this.onSocketClose)},onSocketOpen:function(){for(this.socketAlive=!0;0<this.buffer.length;)this.socket.send(this.buffer.shift())},onSocketMessage:function(a,b){eval(b)},onSocketError:function(){this.socketAlive=!1;this.socket.close()},onSocketClose:function(){this.socketAlive=
!1;this.disconnect(this.socket,"error",this.oSocketError);this.disconnect(this.socket,"close",this.onSocketClose);this.socket=void 0;this.retryTask=new Core.DelayedTask({delay:5,scope:this,callback:this.startSocket})},onConsoleLog:function(a){this.socketAlive?this.socket.send(JSON.stringify({type:"log",message:a})):this.buffer.push(JSON.stringify({type:"log",message:a}))},onConsoleError:function(a){this.socketAlive?this.socket.send(JSON.stringify({type:"error",message:a})):this.buffer.push(JSON.stringify({type:"error",
message:a}))},onConsoleWarn:function(a){this.socketAlive?this.socket.send(JSON.stringify({type:"warn",message:a})):this.buffer.push(JSON.stringify({type:"warn",message:a}))},onError:function(a,b,c){this.socketAlive?this.socket.send(JSON.stringify({type:"warn",message:a,url:b,line:c})):this.buffer.push(JSON.stringify({type:"warn",message:a,url:b,line:c}))}},{},{current:void 0,onConsoleLog:function(a){Core.RemoteDebug.current.onConsoleLog.call(Core.RemoteDebug.current,a)},onConsoleError:function(a){Core.RemoteDebug.current.onConsoleError.call(Core.RemoteDebug.current,
a)},onConsoleWarn:function(a){Core.RemoteDebug.current.onConsoleWarn.call(Core.RemoteDebug.current,a)},onError:function(a,b,c){Core.RemoteDebug.current.onError.call(Core.RemoteDebug.current,a,b,c)}});Core.Object.extend("Anim.TimeManager",{clocks:void 0,timer:void 0,start:0,constructor:function(a){this.clocks=[];this.start=(new Date).getTime();this.addEvents("tick")},add:function(a){this.clocks.push(a);1===this.clocks.length&&(this.timer=new Core.Timer({interval:1/60}),this.connect(this.timer,"timeupdate",this.onTick))},remove:function(a){for(var b=0;b<this.clocks.length&&this.clocks[b]!=a;)b++;b<this.clocks.length&&this.clocks.splice(b,1);0===this.clocks.length&&(this.timer.abort(),this.timer=
void 0)},onTick:function(){for(var a=(new Date).getTime()-this.start,a=a/1E3,b=0;b<this.clocks.length;b++)this.clocks[b].update(a);this.fireEvent("tick")}});Anim.TimeManager.current=new Anim.TimeManager;Core.Object.extend("Anim.AnimationManager",{clocks:void 0,start:0,onTickBind:void 0,constructor:function(a){this.addEvents("tick");this.clocks=[];this.start=(new Date).getTime();this.onTickBind=this.onTick.bind(this)},add:function(a){this.clocks.push(a);1==this.clocks.length&&requestAnimationFrame(this.onTickBind)},remove:function(a){for(var b=0;b<this.clocks.length&&this.clocks[b]!=a;)b++;b<this.clocks.length&&this.clocks.splice(b,1)},forceTick:function(){if(0<this.clocks.length)this.onTickBind()},
onTick:function(){(new Date).getTime();for(var a=(new Date).getTime()-this.start,a=a/1E3,b=0;b<this.clocks.length;b++)this.clocks[b].update(a);this.fireEvent("tick");0<this.clocks.length&&requestAnimationFrame(this.onTickBind)}});
"requestAnimationFrame"in window||(window.requestAnimationFrame="webkitRequestAnimationFrame"in window?window.webkitRequestAnimationFrame:"mozRequestAnimationFrame"in window?window.mozRequestAnimationFrame:"msRequestAnimationFrame"in window?window.msRequestAnimationFrame:function(a){setTimeout(a,1/60)});Anim.AnimationManager.current=new Anim.AnimationManager;Core.Object.extend("Anim.EasingFunction",{mode:"in",constructor:function(a){},setMode:function(a){this.mode=a},getMode:function(){return this.mode},ease:function(a){return"in"==this.mode?this.easeInCore(a):"out"==this.mode?1-this.easeInCore(1-a):0.5>=a?this.easeInCore(2*a)/2:0.5+(1-this.easeInCore(2-2*a))/2},easeInCore:function(a){return a}},{},{eases:{},register:function(a,b){this.eases[a]=b},parse:function(a){return new this.eases[a]}});Anim.EasingFunction.extend("Anim.LinearEase",{constructor:function(a){}},{easeInCore:function(a){return a}},{constructor:function(){Anim.EasingFunction.register("linear",this)}});Anim.EasingFunction.extend("Anim.PowerEase",{power:2,constructor:function(a){this.autoConfig(a,"power")},setPower:function(a){this.power=a},getPower:function(){return this.power}},{easeInCore:function(a){return Math.pow(a,this.power)}},{constructor:function(){Anim.EasingFunction.register("power",this)}});Anim.EasingFunction.extend("Anim.ElasticEase",{oscillations:3,springiness:3,constructor:function(a){this.autoConfig(a,"oscillations","springiness")},setOscillations:function(a){this.oscillations=a},getOscillations:function(){return this.oscillations},setSpringiness:function(a){this.springiness=a},getSpringiness:function(){return this.springiness}},{easeInCore:function(a){return Math.sin(a*(2*this.oscillations+0.5)*Math.PI)*Math.pow(a,this.springiness)}},{constructor:function(){Anim.EasingFunction.register("elastic",
this)}});Anim.EasingFunction.extend("Anim.BounceEase",{bounces:3,bounciness:2,constructor:function(a){this.autoConfig(a,"oscillations")},setBounces:function(a){this.bounces=a},getBounces:function(){return this.Bounces},setBounciness:function(a){this.bounciness=a},getBounciness:function(){return this.bounciness}},{easeInCore:function(a){a=Math.exp(1/this.bounciness*Math.log(a));var b=Math.floor(a*(this.bounces+0.5));return Math.sin((a*(this.bounces+0.5)-b)*Math.PI)/Math.exp(this.bounces-b)}},{constructor:function(){Anim.EasingFunction.register("bounce",
this)}});Core.Object.extend("Anim.Clock",{animation:!0,parent:void 0,time:void 0,iteration:void 0,progress:void 0,isActive:!1,globalTime:0,startTime:0,lastTick:0,beginTime:0,isPaused:!1,speed:1,duration:"forever",pendingState:"none",autoReverse:!1,repeat:1,target:void 0,ease:void 0,constructor:function(a){this.addEvents("complete","timeupdate")},setAnimation:function(a){this.animation=a},setRepeat:function(a){this.repeat=a},setSpeed:function(a){this.speed=a},setAutoReverse:function(a){this.autoReverse=a},
setBeginTime:function(a){this.beginTime=a},setEase:function(a){this.ease=Anim.EasingFunction.create(a)},setTarget:function(a){this.target=a},setDuration:function(a){this.duration="automatic"==a?"forever":a},setParent:function(a){this.parent=a},getParent:function(){return this.parent},getGlobalTime:function(){return this.globalTime+(this.lastTick-this.startTime)*this.speed},getIsActive:function(){return this.isActive},getTime:function(){return this.time},getIteration:function(){return this.iteration},
getProgress:function(){return this.progress},begin:function(){void 0===this.parent?this.animation?Anim.AnimationManager.current.add(this):Anim.TimeManager.current.add(this):void 0===this.scope&&(this.scope=this.parent.scope);this.pendingState="active";void 0!==this.target&&void 0!==this.target.setAnimClock&&this.target.setAnimClock(this)},pause:function(){this.pendingState="paused"},resume:function(){this.pendingState="resumed"},stop:function(){this.pendingState="stopped"},onComplete:function(){void 0===
this.parent&&(this.animation?Anim.AnimationManager.current.remove(this):Anim.TimeManager.current.remove(this));this.fireEvent("complete")},onTimeUpdate:function(a){var b=this.getProgress();void 0!==this.ease&&(b=this.ease.ease(b));this.fireEvent("timeupdate",this,b,a)},update:function(a){var b;do if(b=this.pendingState,this.pendingState="none","none"===b){if(this.isActive&&!this.isPaused){b=a-this.lastTick;this.lastTick=a;var c=this.getGlobalTime(),c=c-this.beginTime;if(0<=c)if("forever"!==this.duration&&
"automatic"!==this.duration){var d=c/this.duration,e=Math.floor(d+1),c=c%this.duration;this.autoReverse&&(0===(e&1)&&(c=this.duration-c),d/=2,e=Math.floor(d+1));"forever"==this.repeat?(this.iteration=e,this.time=c,this.progress=c/this.duration,this.onTimeUpdate(b)):d>=this.repeat?(this.pendingState="stopped",this.iteration=this.repeat,this.time=this.duration,this.progress=this.autoReverse?0:1,this.onTimeUpdate(0)):(this.iteration=e,this.time=c,this.progress=c/this.duration,this.onTimeUpdate(b))}else this.time=
c,this.progress=0,this.iteration=void 0,this.onTimeUpdate(b)}}else"active"==b?this.isActive||(this.isActive=!0,this.globalTime=0,this.lastTick=this.startTime=a,0<this.beginTime?this.iteration=this.progress=this.time=void 0:(this.progress=this.time=0,this.iteration=1,this.onTimeUpdate(0))):"paused"==b?!this.isPaused&&this.isActive&&(this.isPaused=!0,this.globalTime=this.getGlobalTime(),this.lastTick=this.startTime=0):"resumed"==b?this.isPaused&&this.isActive&&(this.isPaused=!1,this.lastTick=this.startTime=
a):"stopped"==b&&this.isActive&&(this.iteration=this.time=this.progress=void 0,this.isActive=!1);while("none"!=this.pendingState);if(void 0===this.parent&&!this.isActive)this.onComplete()}});Anim.Clock.extend("Anim.ClockGroup",{children:void 0,constructor:function(a){this.children=[]},appendChild:function(a){a.setParent(this);this.children.push(a)},setContent:function(a){this.children=[];if(void 0!==a&&"object"===typeof a)if(a.constructor==Array)for(var b=0;b<a.length;b++)this.appendChild(Anim.Clock.create(a[b]));else this.appendChild(Anim.Clock.create(a))}},{begin:function(){Anim.ClockGroup.base.begin.call(this);for(var a=0;a<this.children.length;a++)this.children[a].begin()},pause:function(){Anim.ClockGroup.base.pause.call(this);
for(var a=0;a<this.children.length;a++)this.children[a].pause()},resume:function(){Anim.ClockGroup.base.resume.call(this);for(var a=0;a<this.children.length;a++)this.children[a].resume()},stop:function(){Anim.ClockGroup.base.stop.call(this);for(var a=0;a<this.children.length;a++)this.children[a].stop()},onCompleted:function(){Anim.ClockGroup.base.onCompleted.call(this);for(var a=0;a<this.children.length;a++)this.children[a].onCompleted()},update:function(a){do{Anim.ClockGroup.base.update.call(this,
a);for(var b=!0,c=0;c<this.children.length;c++){var d=this.children[c];d.update(this.getGlobalTime());d.getIsActive()&&(b=!1)}this.getIsActive()&&b&&(this.pendingState="stopped")}while("none"!=this.pendingState)}});Core.Object.extend("Ui.Matrix",{a:1,b:0,c:0,d:1,e:0,f:0,constructor:function(a){},isTranslateOnly:function(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d},isIdentity:function(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f},translate:function(a,b){return this.multiply(Ui.Matrix.createTranslate(a,b))},rotate:function(a){return this.multiply(Ui.Matrix.createRotate(a))},scale:function(a,b){void 0===b&&(b=a);return this.multiply(Ui.Matrix.createScale(a,b))},multiply:function(a){var b=
a.c*this.a+a.d*this.c,c=a.e*this.a+a.f*this.c+this.e,d=a.a*this.b+a.b*this.d,e=a.c*this.b+a.d*this.d,f=a.e*this.b+a.f*this.d+this.f;this.a=a.a*this.a+a.b*this.c;this.b=d;this.c=b;this.d=e;this.e=c;this.f=f;return this},getDeterminant:function(){return this.a*this.d-this.b*this.c},inverse:function(){var a=this.getDeterminant();if(0===a)throw"Matrix not invertible";var a=1/a,b=-this.b*a,c=-this.c*a,d=this.a*a,e=(this.c*this.f-this.e*this.d)*a,f=(this.e*this.b-this.a*this.f)*a;this.a=this.d*a;this.b=
b;this.c=c;this.d=d;this.e=e;this.f=f;return this},setMatrix:function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.d=d;this.e=e;this.f=f},getA:function(){return this.a},getB:function(){return this.b},getC:function(){return this.c},getD:function(){return this.d},getE:function(){return this.e},getF:function(){return this.f},clone:function(){return Ui.Matrix.createMatrix(this.a,this.b,this.c,this.d,this.e,this.f)}},{toString:function(){return"matrix("+this.a.toFixed(4)+","+this.b.toFixed(4)+","+this.c.toFixed(4)+
","+this.d.toFixed(4)+","+this.e.toFixed(0)+","+this.f.toFixed(0)+")"}},{createMatrix:function(a,b,c,d,e,f){var g=new Ui.Matrix;g.setMatrix(a,b,c,d,e,f);return g},createTranslate:function(a,b){return Ui.Matrix.createMatrix(1,0,0,1,a,b)},createScaleAt:function(a,b,c,d){return Ui.Matrix.createMatrix(a,0,0,b,c-a*c,d-b*d)},createScale:function(a,b){void 0===b&&(b=a);return Ui.Matrix.createScaleAt(a,b,0,0)},createRotateAt:function(a,b,c){a=a%360*Math.PI/180;var d=Math.sin(a);a=Math.cos(a);return Ui.Matrix.createMatrix(a,
d,-d,a,b*(1-a)+c*d,c*(1-a)-b*d)},createRotate:function(a){return Ui.Matrix.createRotateAt(a,0,0)},parse:function(a){var b;if("string"===typeof a){var c;if(null!==(c=a.match(/^matrix\((-?\d+\.?\d*),(-?\d+\.?\d*),(-?\d+\.?\d*),(-?\d+\.?\d*),(-?\d+\.?\d*),(-?\d+\.?\d*)\)$/))){var d=parseFloat(c[1]),e=parseFloat(c[2]),f=parseFloat(c[3]),g=parseFloat(c[4]),h=parseFloat(c[5]);c=parseFloat(c[6]);b=new Ui.Matrix;b.setMatrix(d,e,f,g,h,c)}}if(void 0===b)throw"Unknown matrix format ("+a+")";return b}});Core.Object.extend("Ui.Point",{x:0,y:0,constructor:function(a){},matrixTransform:function(a){var b=this.x*a.b+this.y*a.d+a.f;this.x=this.x*a.a+this.y*a.c+a.e;this.y=b;return this},setPoint:function(a){this.x=a.x;this.y=a.y},getX:function(){return this.x},setX:function(a){this.x=a},getY:function(){return this.y},setY:function(a){this.y=a},clone:function(){return new Ui.Point({x:this.x,y:this.y})}},{toString:function(){return"point("+this.x.toFixed(4)+", "+this.y.toFixed(4)+")"}});Core.Object.extend("Ui.Color",{r:0,g:0,b:0,a:1,constructor:function(a){if(void 0!==a.r&&void 0!==a.g&&void 0!==a.b)this.r=Math.min(Math.max(a.r,0),1),this.g=Math.min(Math.max(a.g,0),1),this.b=Math.min(Math.max(a.b,0),1),delete a.r,delete a.g,delete a.b;else if(void 0!==a.h&&void 0!==a.s&&void 0!==a.l)this.initFromHsl(void 0!==a.h?a.h:0,void 0!==a.s?a.s:0,void 0!==a.l?a.l:0),delete a.h,delete a.s,delete a.l;else if(void 0!==a.y&&void 0!==a.u&&void 0!==a.v){var b=Math.max(void 0!==a.y?a.y:0,0);this.initFromYuv(b,
void 0!==a.u?a.u:0,void 0!==a.v?a.v:0);delete a.y;delete a.u;delete a.v}void 0!==a.a&&(this.a=Math.min(Math.max(a.a,0),1),delete a.a);isNaN(this.r)&&(this.r=0);isNaN(this.g)&&(this.g=0);isNaN(this.b)&&(this.b=0);isNaN(this.a)&&(this.a=1)},addA:function(a){return new Ui.Color({r:this.r,g:this.g,b:this.b,a:Math.max(0,Math.min(1,this.a+a))})},addY:function(a){var b=this.getYuva();b.y+=a;return new Ui.Color(b)},addH:function(a){var b=this.getHsla();hsl.h+=a;return new Ui.Color(b)},addS:function(a){var b=
this.getHsla();b.s+=a;return new Ui.Color(b)},addL:function(a){var b=this.getHsla();b.l+=a;return new Ui.Color(b)},getCssRgba:function(){return"rgba("+Math.round(255*this.r)+","+Math.round(255*this.g)+","+Math.round(255*this.b)+","+this.a+")"},getCssRgb:function(){return"rgb("+Math.round(255*this.r)+","+Math.round(255*this.g)+","+Math.round(255*this.b)+")"},getCssHtml:function(){var a="#",b=Math.round(255*this.r).toString(16);1==b.length&&(b="0"+b);a+=b;b=Math.round(255*this.g).toString(16);1==b.length&&
(b="0"+b);a+=b;b=Math.round(255*this.b).toString(16);1==b.length&&(b="0"+b);return a+b},getRgba:function(){return{r:this.r,g:this.g,b:this.b,a:this.a}},getRgb:function(){return this.getRgba()},getHsla:function(){var a=this.r,b=this.g,c=this.b,d=Math.min(a,Math.min(b,c)),e=Math.max(a,Math.max(b,c)),d=e-d;if(!(0!==d&&0!==e))return{h:0,s:0,l:e,a:this.a};a=60*(a===e?(b-c)/d:b===e?2+(c-a)/d:4+(a-b)/d);0>a&&(a+=360);return{h:a,s:d/e,l:e,a:this.a}},getHsl:function(){return this.getHsla()},getYuva:function(){var a=
0.299*this.r+0.587*this.g+0.114*this.b;return{y:a,u:0.492*(this.b-a),v:0.877*(this.r-a),a:this.a}},getYuv:function(){return this.getYuva()},initFromHsl:function(a,b,c){if(0>=b)this.b=this.g=this.r=c;else{a/=60;var d=Math.floor(a),e=a-d;a=c*(1-b);var f=c*(1-b*e);b=c*(1-b*(1-e));0===d?(this.r=c,this.g=b,this.b=a):1==d?(this.r=f,this.g=c,this.b=a):2==d?(this.r=a,this.g=c,this.b=b):3==d?(this.r=a,this.g=f,this.b=c):4==d?(this.r=b,this.g=a,this.b=c):(this.r=c,this.g=a,this.b=f)}},initFromYuv:function(a,
b,c){this.r=Math.max(0,Math.min(a+1.13983*c,1));this.g=Math.max(0,Math.min(a-0.39465*b-0.5806*c,1));this.b=Math.max(0,Math.min(a+2.03211*b,1))}},{toString:function(){return"color("+this.r.toFixed(4)+", "+this.g.toFixed(4)+", "+this.b.toFixed(4)+", "+this.a.toFixed(4)+")"}},{knownColor:{white:"#ffffff",black:"#000000",red:"#ff0000",green:"#008000",blue:"#0000ff",lightblue:"#add8e6",lightgreen:"#90ee90",orange:"#ffa500",purple:"#800080",lightgray:"#d3d3d3",darkgray:"#a9a9a9",pink:"#ffc0cb",brown:"#a52a2a"},
parse:function(a){var b,c,d;if("string"==typeof a){a in Ui.Color.knownColor&&(a=Ui.Color.knownColor[a]);if(null!==(d=a.match(/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+\.?\d*)\s*\)\s*$/)))return b=parseInt(d[1])/255,c=parseInt(d[2])/255,a=parseInt(d[3])/255,d=parseFloat(d[4]),new Ui.Color({r:b,g:c,b:a,a:d});if(null!==(d=a.match(/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/)))return b=parseInt(d[1])/255,c=parseInt(d[2])/255,a=parseInt(d[3])/255,new Ui.Color({r:b,g:c,b:a});if(0===
a.indexOf("#")){if(7==a.length)return b=parseInt(a.substr(1,2),16)/255,c=parseInt(a.substr(3,2),16)/255,a=parseInt(a.substr(5,2),16)/255,new Ui.Color({r:b,g:c,b:a});if(4==a.length)return b=parseInt(a.substr(1,1),16)/15,c=parseInt(a.substr(2,1),16)/15,a=parseInt(a.substr(3,1),16)/15,new Ui.Color({r:b,g:c,b:a})}}throw"Unknown color format ("+a+")";}});Core.Object.extend("Ui.LinearGradient",{orientation:"vertical",stops:void 0,image:void 0,constructor:function(a){"stops"in a?(this.stops=a.stops,delete a.stops):this.stops=[{offset:0,color:new Ui.Color({r:1,g:1,b:1,a:1})},{offset:1,color:new Ui.Color({r:0,g:0,b:0,a:1})}];void 0!==a.orientation&&(this.orientation=a.orientation,delete a.orientation);for(a=0;a<this.stops.length;a++)this.stops[a].color=Ui.Color.create(this.stops[a].color)},getBackgroundImage:function(){var a,b,c;if(void 0!==this.image)return this.image;
if(navigator.isWebkit){this.image="-webkit-gradient(linear, 0% 0%, ";this.image="vertical"==this.orientation?this.image+"0% 100%":this.image+"100% 0%";for(a=0;a<this.stops.length;a++)b=this.stops[a],this.image+=", color-stop("+b.offset+", "+b.color.getCssRgba()+")";this.image+=")"}else if(navigator.isGecko){this.image="-moz-linear-gradient(";this.image="vertical"==this.orientation?this.image+"-90deg":this.image+"0deg";for(a=0;a<this.stops.length;a++)b=this.stops[a],this.image+=", "+b.color.getCssRgba()+
" "+Math.round(100*b.offset)+"%";this.image+=")"}else if(navigator.supportCanvas){var d=document.createElement("canvas"),e=d.getContext("2d");if("vertical"==this.orientation){d.setAttribute("width",1,null);d.setAttribute("height",100,null);c=e.createLinearGradient(0,0,0,100);for(a=0;a<this.stops.length;a++)b=this.stops[a],c.addColorStop(b.offset,b.color.getCssRgba());e.fillStyle=c;e.fillRect(0,0,1,100)}else{d.setAttribute("width",100,null);d.setAttribute("height",1,null);c=e.createLinearGradient(0,
0,100,0);for(a=0;a<this.stops.length;a++)b=this.stops[a],c.addColorStop(b.offset,b.color.getCssRgba());e.fillStyle=c;e.fillRect(0,0,100,1)}this.image="url("+d.toDataURL()+")"}else this.image="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAAXNSR0IArs4c6QAAAAZiS0dEAO8AUQBRItXOlAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9gJDxcIBl8Z3A0AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAC0lEQVQI12NgwAUAABoAASRETuUAAAAASUVORK5CYII%3D)";return this.image},getSVGGradient:function(){var a=
document.createElementNS(svgNS,"linearGradient");a.setAttributeNS(null,"gradientUnits","objectBoundingBox");a.setAttributeNS(null,"x1",0);a.setAttributeNS(null,"y1",0);"vertical"==this.orientation?(a.setAttributeNS(null,"x2",0),a.setAttributeNS(null,"y2",1)):(a.setAttributeNS(null,"x2",1),a.setAttributeNS(null,"y2",0));for(var b=0;b<this.stops.length;b++){var c=this.stops[b],d=document.createElementNS(svgNS,"stop");d.setAttributeNS(null,"offset",c.offset);d.style.stopColor=c.color.getCssHtml();d.style.stopOpacity=
c.color.getRgba().a;a.appendChild(d)}return a},getCanvasGradient:function(a,b,c){a="vertical"==this.orientation?a.createLinearGradient(0,0,0,c):a.createLinearGradient(0,0,b,0);for(b=0;b<this.stops.length;b++)c=this.stops[b],a.addColorStop(c.offset,c.color.getCssRgba());return a},getVMLFill:function(){var a=document.createElement("vml:fill");a.type="gradient";a.angle="vertical"==this.orientation?180:270;a.color=this.stops[0].color.getCssHtml();a.opacity=this.stops[0].color.getRgba().a;a.color2=this.stops[this.stops.length-
1].color.getCssHtml();a.opacity2=this.stops[this.stops.length-1].color.getRgba().a;a.method="None";if(2<this.stops.length){for(var b="",c=1;c<this.stops.length-1;c++)""!==b&&(b+=","),b+=Math.round(100*this.stops[c].offset)+"% "+this.stops[c].color.getCssHtml();a.colors=b}return a}});Core.Object.extend("Ui.Event",{type:void 0,bubbles:!0,cancelable:!0,target:void 0,cancelBubble:!1,stop:!1,constructor:function(a){},stopPropagation:function(){this.cancelBubble=!0},stopImmediatePropagation:function(){this.stop=!0},setType:function(a){this.type=a},setBubbles:function(a){this.bubbles=a},dispatchEvent:function(a){var b;this.target=a;if(this.bubbles){var c=[];for(b=this.target;void 0!==b&&null!==b;)c.push(b),b=b.parent;for(a=c.length-1;0<=a&&!this.cancelBubble&&!this.stop;a--){b=c[a];
var d=b.getEventHandlers(this.type);for(b=0;b<d.length&&!this.stop;b++){var e=d[b];e.capture&&e.method.apply(e.scope,[this])}}for(a=0;a<c.length&&!this.cancelBubble&&!this.stop;a++){b=c[a];d=b.getEventHandlers(this.type);for(b=0;b<d.length&&!this.stop;b++)e=d[b],e.capture||e.method.apply(e.scope,[this])}}else{d=b.getEventHandlers(this.type);for(b=0;b<d.length&&!this.stop;b++)e=d[b],e.capture&&e.method.apply(e.scope,[this]);for(b=0;b<d.length&&!this.stop;b++)e=d[b],e.capture||e.method.apply(e.scope,
[this])}}});Ui.Event.extend("Ui.PointerEvent",{pointer:void 0,clientX:0,clientY:0,pointerType:"mouse",constructor:function(a){this.pointer=a.pointer;delete a.pointer;this.clientX=this.pointer.getX();this.clientY=this.pointer.getY();this.pointerType=this.pointer.getType()}});
Core.Object.extend("Ui.PointerWatcher",{element:void 0,pointer:void 0,constructor:function(a){this.addEvents("down","move","up","cancel");this.element=a.element;delete a.element;this.pointer=a.pointer;delete a.pointer},getAbsoluteDelta:function(){var a=this.pointer.getInitialX(),b=this.pointer.getInitialY(),c=this.pointer.getX(),d=this.pointer.getY();return{x:c-a,y:d-b}},getDelta:function(){var a={x:this.pointer.getInitialX(),y:this.pointer.getInitialY()},b={x:this.pointer.getX(),y:this.pointer.getY()},
a=this.element.pointFromWindow(a),b=this.element.pointFromWindow(b);return{x:b.x-a.x,y:b.y-a.y}},getPosition:function(){var a={x:this.pointer.getX(),y:this.pointer.getY()};return this.element.pointFromWindow(a)},getIsInside:function(){var a=this.getPosition();return 0<=a.x&&a.x<=this.element.getLayoutWidth()&&0<=a.y&&a.y<=this.element.getLayoutHeight()?!0:!1},getDirection:function(){var a=this.getDelta();return Math.abs(a.x)>Math.abs(a.y)?0>a.x?"left":"right":0>a.y?"top":"bottom"},getSpeed:function(){if(void 0===
this.pointer||2>this.pointer.history.length)return{x:0,y:0};var a=this.pointer.history.length,b=(new Date).getTime()/1E3,c=this.pointer.x,d=this.pointer.y;do var e=this.pointer.history[--a];while(0<a&&0.08>b-e.time);a=b-e.time;return{x:(c-e.x)/a,y:(d-e.y)/a}},getIsCaptured:function(){return void 0!==this.pointer&&this.pointer.captureWatcher===this},capture:function(){this.pointer.capture(this)},release:function(){this.pointer.release(this)},cancel:function(){void 0!==this.pointer&&(this.fireEvent("cancel",
this),this.pointer.unwatch(this),this.pointer=void 0)},down:function(){void 0!==this.pointer&&this.fireEvent("down",this)},move:function(){void 0!==this.pointer&&this.fireEvent("move",this)},up:function(){void 0!==this.pointer&&this.fireEvent("up",this)}},{unwatch:function(){void 0!==this.pointer&&this.pointer.unwatch(this)}});
Core.Object.extend("Ui.Pointer",{id:void 0,x:0,y:0,initialX:0,initialY:0,type:void 0,start:void 0,cumulMove:0,chainLevel:0,watchers:void 0,captureWatcher:void 0,history:void 0,buttons:0,constructor:function(a){this.addEvents("ptrmove","ptrup","ptrcancel");this.type=a.type;delete a.type;this.id=a.id;delete a.id;this.start=(new Date).getTime()/1E3;this.watchers=[];this.history=[]},capture:function(a){for(var b=this.watchers.slice(),c=0;c<b.length;c++)b[c]!==a&&b[c].cancel();this.captureWatcher=a},release:function(a){this.captureWatcher=
void 0},getType:function(){return this.type},getIsDown:function(){return 0!==this.buttons},getIsCaptured:function(){return void 0!==this.captureWatcher},getX:function(){return this.x},getY:function(){return this.y},getInitialX:function(){return this.initialX},getInitialY:function(){return this.initialY},setInitialPosition:function(a,b){this.initialX=a;this.initialY=b},getButtons:function(){return this.buttons},setButtons:function(a){this.buttons=a},getChainLevel:function(){return this.chainLevel},
move:function(a,b){void 0===a&&(a=this.x);void 0===b&&(b=this.y);if(this.x!==a||this.y!==b){var c=this.x-a,d=this.y-b;this.cumulMove+=Math.sqrt(c*c+d*d);this.x=a;this.y=b;c=(new Date).getTime()/1E3;for(this.history.push({time:c,x:this.x,y:this.y});2<this.history.length&&c-this.history[0].time>Ui.Pointer.HISTORY_TIMELAPS;)this.history.shift();c=this.watchers.slice();for(d=0;d<c.length;d++)c[d].move();void 0===this.captureWatcher&&(c=Ui.App.current.elementFromPoint(this.x,this.y),void 0!==c&&(d=new Ui.PointerEvent({type:"ptrmove",
pointer:this}),this.fireEvent("ptrmove",d),d.dispatchEvent(c)))}},getIsHold:function(){return(new Date).getTime()/1E3-this.start>=Ui.Pointer.HOLD_DELAY},getDelta:function(){var a=this.x-this.initialX,b=this.y-this.initialY;return Math.sqrt(a*a+b*b)},getCumulMove:function(){return this.cumulMove},getIsMove:function(){return this.cumulMove>=Ui.Pointer.MOVE_DELTA},down:function(a,b,c){this.start=(new Date).getTime()/1E3;this.initialX=this.x=a;this.initialY=this.y=b;this.history=[];this.history.push({time:this.start,
x:this.initialX,y:this.initialY});this.buttons=c;this.cumulMove=0;a=this.watchers.slice();for(b=0;b<a.length;b++)a[b].down();a=Ui.App.current.elementFromPoint(this.x,this.y);void 0!==a&&(new Ui.PointerEvent({type:"ptrdown",pointer:this})).dispatchEvent(a)},up:function(){for(var a=this.watchers.slice(),b=0;b<a.length;b++)a[b].up();this.watchers=[];this.buttons=0;void 0===this.captureWatcher&&(a=Ui.App.current.elementFromPoint(this.x,this.y),void 0!==a&&(b=new Ui.PointerEvent({type:"ptrup",pointer:this}),
this.fireEvent("ptrup",b),b.dispatchEvent(a)));this.captureWatcher=void 0}},{watch:function(a){a=new Ui.PointerWatcher({element:a,pointer:this});this.watchers.push(a);return a},unwatch:function(a){for(var b=0;b<this.watchers.length;b++)if(this.watchers[b]===a){this.watchers.splice(b,1);break}}},{HOLD_DELAY:0.75,MOVE_DELTA:15,HISTORY_TIMELAPS:0.5});
Core.Object.extend("Ui.PointerManager",{touches:void 0,lastUpdate:void 0,lastTouchX:-1,lastTouchY:-1,lastDownTouchX:-1,lastDownTouchY:-1,mouse:void 0,app:void 0,constructor:function(a){this.app=a.app;delete a.app;this.pointers={};window.PointerEvent?(this.connect(window,"pointerdown",this.onPointerDown),this.connect(window,"pointermove",this.onPointerMove),this.connect(window,"pointerup",this.onPointerUp),this.connect(window,"pointercancel",this.onPointerCancel)):"attachEvent"in window&&(navigator.isIE7||
navigator.isIE8)?(this.mouse=new Ui.Pointer({type:"mouse",id:0}),a=function(){return arguments.callee.callback.apply(arguments.callee.scope,arguments)},a.scope=this,a.callback=this.onIEMouseDown,document.attachEvent("onmousedown",a),a=function(){return arguments.callee.callback.apply(arguments.callee.scope,arguments)},a.scope=this,a.callback=this.onIEMouseMove,document.attachEvent("onmousemove",a),a=function(){return arguments.callee.callback.apply(arguments.callee.scope,arguments)},a.scope=this,
a.callback=this.onIEMouseUp,document.attachEvent("onmouseup",a),a=function(){return arguments.callee.callback.apply(arguments.callee.scope,arguments)},a.scope=this,a.callback=this.onIEMouseDblClick,document.attachEvent("ondblclick",a),this.connect(document,"selectstart",this.onSelectStart)):(this.mouse=new Ui.Pointer({type:"mouse",id:0}),this.connect(window,"mousedown",this.onMouseDown),this.connect(window,"mousemove",this.onMouseMove),this.connect(window,"mouseup",this.onMouseUp),this.connect(document,
"selectstart",this.onSelectStart),this.connect(document,"contextmenu",function(a){void 0!==this.mouse&&(this.mouse.capture(void 0),this.mouse.up())}),this.connect(document.body,"touchstart",this.updateTouches,!0),this.connect(document.body,"touchmove",this.updateTouches,!0),this.connect(document.body,"touchend",this.updateTouches,!0),this.connect(document.body,"touchcancel",this.updateTouches,!0))},onSelectStart:function(a){if(this.mouse.getIsCaptured())a.preventDefault();else{for(var b=!1,c=a.target;null!==
c&&void 0!==c;){if(!0===c.selectable){b=!0;break}c=c.parentNode}b?void 0!==this.mouse&&this.mouse.capture(void 0):a.preventDefault()}},onMouseDown:function(a){var b=(new Date).getTime()/1E3-this.lastUpdate,c=this.lastTouchX-a.clientX,d=this.lastTouchY-a.clientY,c=Math.sqrt(c*c+d*d),d=this.lastDownTouchX-a.clientX,e=this.lastDownTouchY-a.clientY,d=Math.sqrt(d*d+e*e);1>b||10>b&&(20>c||20>d)||(b=0,0===a.button?b|=1:1===a.button?b|=2:2===a.button&&(b|=4),c=this.mouse.getButtons(),0===c?this.mouse.down(a.clientX,
a.clientY,b):this.mouse.setButtons(c|b))},onMouseMove:function(a){var b=(new Date).getTime()/1E3-this.lastUpdate,c=this.lastTouchX-a.clientX,d=this.lastTouchY-a.clientY,c=Math.sqrt(c*c+d*d),d=this.lastDownTouchX-a.clientX,e=this.lastDownTouchY-a.clientY,d=Math.sqrt(d*d+e*e);1>b||10>b&&(20>c||20>d)||this.mouse.move(a.clientX,a.clientY)},onMouseUp:function(a){var b=(new Date).getTime()/1E3-this.lastUpdate,c=this.lastTouchX-a.clientX,d=this.lastTouchY-a.clientY,c=Math.sqrt(c*c+d*d),d=this.lastDownTouchX-
a.clientX,e=this.lastDownTouchY-a.clientY,d=Math.sqrt(d*d+e*e);1>b||10>b&&(20>c||20>d)||(this.mouse.move(a.clientX,a.clientY),this.mouse.up())},onIEMouseDown:function(a){var b=0;4===a.button?b|=2:2===a.button&&(b|=4);var c=this.mouse.getButtons();0===c?this.mouse.down(a.clientX,a.clientY,b):this.mouse.setButtons(c|b)},onIEMouseMove:function(a){this.mouse.move(a.clientX,a.clientY)},onIEMouseUp:function(a){this.mouse.move(a.clientX,a.clientY);this.mouse.up()},onIEMouseDblClick:function(a){this.onIEMouseDown(a);
this.onIEMouseUp(a)},onWindowLoad:function(){try{if(void 0===document.body){var a=document.createElement("body");document.body=a}}catch(b){}},onPointerDown:function(a){var b=new Ui.Pointer({type:"pen"===a.pointerType?"pen":"mouse"===a.pointerType?"mouse":"touch",id:a.pointerId});this.pointers[a.pointerId]=b;b.down(a.clientX,a.clientY,1)},onPointerMove:function(a){void 0!==this.pointers[a.pointerId]&&this.pointers[a.pointerId].move(a.clientX,a.clientY)},onPointerUp:function(a){void 0!==this.pointers[a.pointerId]&&
(this.pointers[a.pointerId].up(),delete this.pointers[a.pointerId])},onPointerCancel:function(a){},updateTouches:function(a){this.lastUpdate=(new Date).getTime()/1E3;for(var b in this.pointers){for(var c=!1,d=0;d<a.touches.length&&!c;d++)b==a.touches[d].identifier&&(c=!0,this.pointers[b].move(a.touches[d].clientX,a.touches[d].clientY));c||(this.pointers[b].up(),delete this.pointers[b])}for(d=0;d<a.touches.length;d++)this.lastTouchX=a.touches[d].clientX,this.lastTouchY=a.touches[d].clientY,void 0==
this.pointers[a.touches[d].identifier]&&(b=new Ui.Pointer({type:"touch",id:a.touches[d].identifier}),this.pointers[a.touches[d].identifier]=b,b.down(a.touches[d].clientX,a.touches[d].clientY,1));if("touchstart"===a.type)for(d=0;d<a.changedTouches.length;d++)this.lastDownTouchX=a.changedTouches[d].clientX,this.lastDownTouchY=a.changedTouches[d].clientY;"touchmove"===a.type&&a.preventDefault()}});Ui.Event.extend("Ui.WheelEvent",{deltaX:0,deltaY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,constructor:function(a){this.setType("wheel")},setClientX:function(a){this.clientX=a},setClientY:function(a){this.clientY=a},setDeltaX:function(a){this.deltaX=a},setDeltaY:function(a){this.deltaY=a},setCtrlKey:function(a){this.ctrlKey=a},setAltKey:function(a){this.altKey=a},setShiftKey:function(a){this.shiftKey=a},setMetaKey:function(a){this.metaKey=a}});
Core.Object.extend("Ui.WheelManager",{captureElement:void 0,app:void 0,constructor:function(a){this.app=a.app;delete a.app;this.connect(this.app.getDrawing(),"mousewheel",this.onMouseWheel);this.connect(this.app.getDrawing(),"DOMMouseScroll",this.onMouseWheel)},onMouseWheel:function(a){var b=0,c=0;void 0!=a.wheelDeltaX&&void 0!=a.wheelDeltaY?(b=-a.wheelDeltaX/5,c=-a.wheelDeltaY/5):void 0!=a.wheelDelta?c=-a.wheelDelta/2:void 0!=a.detail&&(c=20*a.detail);var d=Ui.App.current.elementFromPoint(a.clientX,
a.clientY);void 0!==d&&((new Ui.WheelEvent({clientX:a.clientX,clientY:a.clientY,deltaX:b,deltaY:c,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey})).dispatchEvent(d),a.preventDefault())}});Core.Object.extend("Ui.Element",{marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,parent:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,drawing:void 0,collapse:!1,measureValid:!1,measureConstraintPixelRatio:1,measureConstraintWidth:0,measureConstraintHeight:0,measureWidth:0,measureHeight:0,arrangeValid:!1,arrangeX:0,arrangeY:0,arrangeWidth:0,arrangeHeight:0,arrangePixelRatio:1,drawValid:!0,drawNext:void 0,layoutValid:!0,layoutNext:void 0,layoutX:0,layoutY:0,layoutWidth:0,
layoutHeight:0,isLoaded:!1,verticalAlign:"stretch",horizontalAlign:"stretch",clipToBounds:!1,clipX:void 0,clipY:void 0,clipWidth:void 0,clipHeight:void 0,visible:void 0,parentVisible:void 0,focusable:!1,hasFocus:!1,isMouseFocus:!1,isMouseDownFocus:!1,selectable:!1,transform:void 0,transformOriginX:0.5,transformOriginY:0.5,transformOriginAbsolute:!1,animClock:void 0,opacity:1,parentOpacity:1,disabled:void 0,parentDisabled:void 0,style:void 0,parentStyle:void 0,mergeStyle:void 0,constructor:function(a){this.drawing=
this.renderDrawing(a);DEBUG&&this.drawing.setAttribute("class",this.classType);this.drawing.style.position="absolute";this.drawing.style.left="0px";this.drawing.style.top="0px";this.drawing.style.width="0px";this.drawing.style.height="0px";this.drawing.style.visibility="hidden";this.drawing.style.outline="none";!navigator.isIE7&&!navigator.isIE8&&(this.drawing.style.transformOrigin="0 0");navigator.isIE&&!navigator.isIE7&&!navigator.isIE8?this.drawing.style.msTransformOrigin="0 0":navigator.isGecko?
this.drawing.style.MozTransformOrigin="0 0":navigator.isWebkit?this.drawing.style.webkitTransformOrigin="0 0":navigator.isOpera&&(this.drawing.style.OTransformOrigin="0 0");this.connect(this.drawing,"focus",this.onFocus);this.connect(this.drawing,"blur",this.onBlur);this.setSelectable(!1);this.addEvents("focus","blur","load","unload","enable","disable","visible","hidden","ptrdown","ptrmove","ptrup","ptrcancel","wheel","localdrop","localdragover")},setDisabled:function(a){a?this.disable():this.enable()},
getDrawing:function(){return this.drawing},getSelectable:function(){return this.selectable},setSelectable:function(a){this.selectable=a;this.getDrawing().selectable=a;Ui.Element.setSelectable(this.getDrawing(),a)},getLayoutX:function(){return this.layoutX},getLayoutY:function(){return this.layoutY},getLayoutWidth:function(){return this.layoutWidth},getLayoutHeight:function(){return this.layoutHeight},setId:function(a){this.drawing.setAttribute("id",a)},getId:function(){return this.drawing.getAttribute("id")},
setFocusable:function(a){this.focusable!==a&&((this.focusable=a)&&!this.getIsDisabled()?(this.drawing.tabIndex=0,this.connect(this.getDrawing(),"mousedown",this.onMouseDownFocus,!0)):(this.disconnect(this.getDrawing(),"mousedown",this.onMouseDownFocus,!0),a=this.drawing.getAttributeNode("tabIndex"),null!==a&&void 0!==a&&this.drawing.removeAttributeNode(a)))},onMouseDownFocus:function(a){this.isMouseDownFocus=!0;this.connect(window,"mouseup",this.onMouseUpFocus,!0)},onMouseUpFocus:function(a){this.isMouseDownFocus=
!1;this.disconnect(window,"mouseup",this.onMouseUpFocus,!0)},getFocusable:function(){return this.focusable},getIsMouseFocus:function(){return this.isMouseFocus},setRole:function(a){"setAttributeNS"in this.drawing&&(void 0===a?this.drawing.hasAttributeNS("http://www.w3.org/2005/07/aaa","role")&&this.drawing.removeAttributeNS("http://www.w3.org/2005/07/aaa","role"):this.drawing.setAttributeNS("http://www.w3.org/2005/07/aaa","role",a))},measure:function(a,b){if(this.isLoaded){if(this.collapse)return this.measureValid=
!0,{width:0,height:0};if(this.measureValid&&this.measureConstraintWidth===a&&this.measureConstraintHeight===b&&this.measureConstraintPixelRatio==(window.devicePixelRatio||1))return{width:this.measureWidth,height:this.measureHeight};this.measureConstraintPixelRatio=window.devicePixelRatio||1;this.measureConstraintWidth=a;this.measureConstraintHeight=b;var c=this.getMarginLeft(),d=this.getMarginRight(),e=this.getMarginTop(),f=this.getMarginBottom(),g=Math.max(a-(c+d),0),h=Math.max(b-(e+f),0);void 0!==
this.maxWidth&&(g=Math.min(g,this.maxWidth));void 0!==this.maxHeight&&(h=Math.min(h,this.maxHeight));"stretch"!==this.horizontalAlign&&(g=0);"stretch"!==this.verticalAlign&&(h=0);void 0!==this.width&&(g=Math.max(this.width,g));void 0!==this.height&&(h=Math.max(this.height,h));g=this.measureCore(g,h);this.measureWidth=void 0!==this.width&&g.width<this.width?this.width+c+d:Math.ceil(g.width)+c+d;this.measureHeight=void 0!==this.height&&g.height<this.height?this.height+e+f:Math.ceil(g.height)+e+f;this.measureValid=
!0;return{width:this.measureWidth,height:this.measureHeight}}},measureCore:function(a,b){return{width:0,height:0}},invalidateMeasure:function(){if(this.measureValid&&(this.measureValid=!1,void 0!==this.parent&&this.parent.measureValid))this.parent.onChildInvalidateMeasure(this,"change");this.invalidateArrange()},invalidateLayout:function(){this.layoutValid&&(this.arrangeValid=this.measureValid=this.layoutValid=!1,Ui.App.current.enqueueLayout(this))},onChildInvalidateMeasure:function(a,b){this.invalidateMeasure()},
updateLayout:function(){this.layoutCore();this.layoutValid=!0},layoutCore:function(){this.measure(this.layoutWidth,this.layoutHeight);this.arrange(this.layoutX,this.layoutY,this.layoutWidth,this.layoutHeight)},arrange:function(a,b,c,d){if(this.isLoaded&&!this.collapse){isNaN(a)&&(a=0);isNaN(b)&&(b=0);isNaN(c)&&(c=0);isNaN(d)&&(d=0);a=Math.round(a);b=Math.round(b);c=Math.round(c);d=Math.round(d);if(!this.arrangeValid||this.arrangeX!=a||this.arrangeY!=b||this.arrangeWidth!=c||this.arrangeHeight!=d||
this.arrangePixelRatio!=(window.devicePixelRatio||1)){this.arrangeX=a;this.arrangeY=b;this.arrangeWidth=c;this.arrangeHeight=d;this.arrangePixelRatio=window.devicePixelRatio||1;"top"==this.verticalAlign?d=this.measureHeight:"bottom"==this.verticalAlign?(b+=d-this.measureHeight,d=this.measureHeight):"center"==this.verticalAlign&&(b+=(d-this.measureHeight)/2,d=this.measureHeight);"left"==this.horizontalAlign?c=this.measureWidth:"right"==this.horizontalAlign?(a+=c-this.measureWidth,c=this.measureWidth):
"center"==this.horizontalAlign&&(a+=(c-this.measureWidth)/2,c=this.measureWidth);var e=this.getMarginLeft(),f=this.getMarginRight(),g=this.getMarginTop(),h=this.getMarginBottom();d-=g+h;this.layoutX=a+e;this.layoutY=b+g;this.layoutWidth=Math.max(c-(e+f),0);this.layoutHeight=Math.max(d,0);this.drawing.style.left=Math.round(this.layoutX)+"px";this.drawing.style.top=Math.round(this.layoutY)+"px";void 0!==this.transform&&this.updateTransform();this.drawing.style.width=Math.round(this.layoutWidth)+"px";
this.drawing.style.height=Math.round(this.layoutHeight)+"px";this.drawing.style.visibility="inherit";this.arrangeCore(this.layoutWidth,this.layoutHeight)}this.arrangeValid=!0}},arrangeCore:function(a,b){},invalidateArrange:function(){if(this.arrangeValid&&(this.arrangeValid=!1,void 0!==this.parent))this.parent.onChildInvalidateArrange(this)},onChildInvalidateArrange:function(a){this.invalidateArrange()},draw:function(){this.drawCore();this.drawValid=!0},drawCore:function(){},invalidateDraw:function(){void 0!==
Ui.App.current&&this.drawValid&&(this.drawValid=!1,Ui.App.current.enqueueDraw(this))},renderDrawing:function(){return document.createElement("div")},getWidth:function(){return this.width},setWidth:function(a){this.width!==a&&(this.width=a,this.invalidateMeasure())},getHeight:function(){return this.height},setHeight:function(a){this.height!==a&&(this.height=a,this.invalidateMeasure())},getMaxWidth:function(){return this.maxWidth},setMaxWidth:function(a){this.maxWidth!==a&&(this.maxWidth=a,this.layoutWidth>
this.maxWidth&&this.invalidateMeasure())},getMaxHeight:function(){return this.maxHeight},setMaxHeight:function(a){this.maxWidth!==a&&(this.maxHeight=a,this.layoutHeight>this.maxHeight&&this.invalidateMeasure())},getVerticalAlign:function(){return this.verticalAlign},setVerticalAlign:function(a){this.verticalAlign!==a&&(this.verticalAlign=a,this.invalidateArrange())},getHorizontalAlign:function(){return this.horizontalAlign},setHorizontalAlign:function(a){this.horizontalAlign!==a&&(this.horizontalAlign=
a,this.invalidateArrange())},getClipToBounds:function(){return this.clipToBounds},setClipToBounds:function(a){this.clipToBounds!==a&&((this.clipToBounds=a)?this.drawing.style.overflow="hidden":this.drawing.style.removeProperty("overflow"))},setClipRectangle:function(a,b,c,d){this.clipX=a;this.clipY=b;this.clipWidth=c;this.clipHeight=d;this.updateClipRectangle()},updateClipRectangle:function(){if(void 0!==this.clipX){var a=Math.round(this.clipX),b=Math.round(this.clipY),c=Math.round(this.clipWidth),
d=Math.round(this.clipHeight);this.drawing.style.clip="rect("+b+"px "+(a+c)+"px "+(b+d)+"px "+a+"px)"}else"removeProperty"in this.drawing.style?this.drawing.style.removeProperty("clip"):"removeAttribute"in this.drawing.style&&this.drawing.style.removeAttribute("clip")},setMargin:function(a){this.setMarginTop(a);this.setMarginBottom(a);this.setMarginLeft(a);this.setMarginRight(a)},getMarginTop:function(){return this.marginTop},setMarginTop:function(a){a!==this.marginTop&&(this.marginTop=a,this.invalidateMeasure())},
getMarginBottom:function(){return this.marginBottom},setMarginBottom:function(a){a!==this.marginBottom&&(this.marginBottom=a,this.invalidateMeasure())},getMarginLeft:function(){return this.marginLeft},setMarginLeft:function(a){a!==this.marginLeft&&(this.marginLeft=a,this.invalidateMeasure())},getMarginRight:function(){return this.marginRight},setMarginRight:function(a){a!==this.marginRight&&(this.marginRight=a,this.invalidateMeasure())},getOpacity:function(){return this.opacity},setOpacity:function(a){this.opacity!==
a&&(this.opacity=a,navigator.supportOpacity&&(this.drawing.style.opacity=this.opacity))},focus:function(){if(this.focusable)try{this.drawing.focus()}catch(a){}},blur:function(){try{this.drawing.blur()}catch(a){}},setTransform:function(a){this.transform!==a&&(this.transform=a,this.updateTransform())},setTransformOrigin:function(a,b,c){if(this.transformOriginX!==a||this.transformOriginY!==b||this.transformOriginAbsolute!==c)this.transformOriginX=a,this.transformOriginY=b,this.transformOriginAbsolute=
void 0===c?!1:c,this.updateTransform()},getInverseLayoutTransform:function(){var a=Ui.Matrix.createTranslate(this.layoutX,this.layoutY);if(void 0!==this.transform){var b=this.transformOriginX*this.layoutWidth,c=this.transformOriginY*this.layoutHeight;a.translate(-b,-c);a.multiply(this.transform);a.translate(b,c)}return a},getLayoutTransform:function(){var a=new Ui.Matrix;if(void 0!==this.transform){var a=this.transformOriginX*this.layoutWidth,b=this.transformOriginY*this.layoutHeight,c=new Ui.Matrix;
c.translate(-a,-b);c.multiply(this.transform);c.translate(a,b);c.inverse();a=c}a.translate(-this.layoutX,-this.layoutY);return a},transformToWindow:function(){return Ui.Element.transformToWindow2(this)},transformFromWindow:function(){return Ui.Element.transformFromWindow2(this)},transformToElement:function(a){var b=this.transformToWindow();a=a.transformFromWindow();b.multiply(a);return b},pointToWindow:function(a){a=new Ui.Point({point:a});a.matrixTransform(this.transformToWindow());return a},pointFromWindow:function(a){a=
new Ui.Point({point:a});a.matrixTransform(this.transformFromWindow());return a},pointFromElement:function(a,b){return this.pointFromWindow(a.pointToWindow(b))},getIsInside:function(a,b){var c=this.getLayoutTransform(),d=new Ui.Point({x:a,y:b});d.matrixTransform(c);return 0<=d.x&&d.x<=this.layoutWidth&&0<=d.y&&d.y<=this.layoutHeight?!0:!1},elementFromPoint:function(a,b){if(this.getIsVisible()&&this.getIsInside(a,b))return this},getIsLoaded:function(){return this.isLoaded},getMeasureWidth:function(){return this.collapse?
0:this.measureWidth},getMeasureHeight:function(){return this.collapse?0:this.measureHeight},getIsCollapsed:function(){return this.collapse},hide:function(a){if(void 0===this.visible||this.visible){var b=this.getIsVisible();this.visible=!1;this.drawing.style.display="none";this.collapse=!0===a;if(b)this.onInternalHidden();this.collapse&&this.invalidateMeasure()}},show:function(){if(void 0===this.visible||!this.visible){var a=this.getIsVisible();this.visible=!0;this.drawing.style.display="block";if(this.getIsVisible()&&
!a)this.onInternalVisible();this.collapse&&(this.collapse=!1,this.invalidateMeasure())}},getIsVisible:function(){return!0===this.parentVisible&&!1!==this.visible},setParentVisible:function(a){var b=this.getIsVisible();this.parentVisible=a;if(b!=this.getIsVisible())if(this.getIsVisible())this.onInternalVisible();else this.onInternalHidden()},onInternalHidden:function(){this.onHidden();this.fireEvent("hidden",this)},onHidden:function(){},onInternalVisible:function(){this.onVisible();this.fireEvent("visible",
this)},checkVisible:function(){if(void 0!==this.getDrawing()){for(var a=!1,b=this.getDrawing();void 0!==b;){if("none"===b.style.display){a=!1;break}if(b==document.body){a=!0;break}b=b.parentNode}this.getIsVisible()!==a&&console.log("checkVisible expect: "+this.getIsVisible()+", got: "+a+" (on "+this+")")}},onVisible:function(){},disable:function(){if(void 0===this.disabled||!this.disabled){var a=this.getIsDisabled();this.disabled=!0;if(!a)this.onInternalDisable()}},enable:function(){if(void 0===this.disabled||
this.disabled){var a=this.getIsDisabled();this.disabled=!1;if(a&&!this.getIsDisabled())this.onInternalEnable()}},setEnable:function(a){a?this.enable():this.disable()},getIsDisabled:function(){return void 0!==this.disabled&&!0===this.disabled||void 0!==this.parentDisabled&&!0===this.parentDisabled?!0:!1},setParentDisabled:function(a){var b=this.getIsDisabled();this.parentDisabled=a;if(b!==this.getIsDisabled())if(this.getIsDisabled())this.onInternalDisable();else this.onInternalEnable()},onInternalDisable:function(){this.focusable&&
(this.drawing.tabIndex=-1,this.hasFocus&&this.blur());this.onDisable();this.fireEvent("disable",this)},onDisable:function(){},onInternalEnable:function(){this.focusable&&(this.drawing.tabIndex=0);this.onEnable();this.fireEvent("enable",this)},onEnable:function(){},containSubStyle:function(a){for(var b in a)if(-1!==b.indexOf(".")&&"object"===typeof a[b])return!0;return!1},fusionStyle:function(a,b){for(var c in b)if(!(-1===c.indexOf(".")||"object"!==typeof b[c]))if(void 0!==a[c]){var d=a[c];a[c]={};
for(var e in d)a[c][e]=d[e];for(e in b[c])a[c][e]=b[c][e]}else a[c]=b[c]},mergeStyles:function(){var a,b;this.mergeStyle=void 0;if(void 0!==this.parentStyle){a=this;for(b=!1;void 0!==a;){if(void 0!==this.parentStyle[a.classType]&&this.containSubStyle(this.parentStyle[a.classType])){void 0===this.mergeStyle&&(this.mergeStyle=Core.Util.clone(this.parentStyle));this.fusionStyle(this.mergeStyle,this.parentStyle[a.classType]);b=!0;break}a=a.__baseclass__}b||(this.mergeStyle=this.parentStyle)}if(void 0!==
this.style)if(void 0!==this.mergeStyle){this.mergeStyle=Core.Util.clone(this.mergeStyle);this.fusionStyle(this.mergeStyle,this.style);for(a=this;void 0!==a;){if(void 0!==this.style[a.classType]&&this.containSubStyle(this.style[a.classType])){this.fusionStyle(this.mergeStyle,this.style[a.classType]);break}a=a.__baseclass__}}else{a=this;for(b=!1;void 0!==a;){if(void 0!==this.style[a.classType]&&this.containSubStyle(this.style[a.classType])){void 0===this.mergeStyle&&(this.mergeStyle=Core.Util.clone(this.style));
this.fusionStyle(this.mergeStyle,this.style[a.classType]);b=!0;break}a=a.__baseclass__}b||(this.mergeStyle=this.style)}},getParent:function(){return this.parent},setParentStyle:function(a){this.parentStyle!==a&&(this.parentStyle=a);this.mergeStyles();this.onInternalStyleChange()},setStyle:function(a){this.style=a;this.mergeStyles();this.onInternalStyleChange()},setStyleProperty:function(a,b){void 0===this.style&&(this.style={});void 0===this.style[this.classType]&&(this.style[this.classType]={});
this.style[this.classType][a]=b},getStyleProperty:function(a){var b;if(void 0!==this.mergeStyle)for(b=this;void 0!==b;){if(void 0!==this.mergeStyle[b.classType]&&void 0!==this.mergeStyle[b.classType][a])return this.mergeStyle[b.classType][a];b=b.__baseclass__}for(b=this;void 0!==b;){if(void 0!==b.constructor.style&&a in b.constructor.style)return b.constructor.style[a];b=b.__baseclass__}},onInternalStyleChange:function(){if(this.isLoaded)this.onStyleChange()},onStyleChange:function(){},getHasFocus:function(){return this.hasFocus},
scrollIntoView:function(){this.onScrollIntoView(this)},onScrollIntoView:function(a){if(void 0!==this.parent)this.parent.onScrollIntoView(a)},onFocus:function(a){this.focusable&&!this.getIsDisabled()&&(a.preventDefault(),a.stopPropagation(),this.hasFocus=!0,this.isMouseFocus=this.isMouseDownFocus,this.scrollIntoView(),this.fireEvent("focus",this))},onBlur:function(a){this.focusable&&(a.preventDefault(),a.stopPropagation(),this.hasFocus=this.isMouseFocus=!1,this.fireEvent("blur",this))},setIsLoaded:function(a){if(this.isLoaded!==
a)if(this.isLoaded=a)this.onLoad();else this.onUnload()},updateTransform:function(){if(void 0!==this.transform){var a=this.transform,b=this.transformOriginX,c=this.transformOriginY;this.transformOriginAbsolute||(b*=this.layoutWidth,c*=this.layoutHeight);if(0!==b||0!==c)a=Ui.Matrix.createTranslate(b,c),a.multiply(this.transform),a.translate(-b,-c);navigator.isIE7||navigator.isIE8?(this.drawing.style.left=Math.round(this.layoutX+(isNaN(a.getE())?0:a.getE()))+"px",this.drawing.style.top=Math.round(this.layoutY+
(isNaN(a.getF())?0:a.getF()))+"px"):(this.drawing.style.transform=a.toString(),navigator.isIE?this.drawing.style.msTransform=a.toString():navigator.isGecko?this.drawing.style.MozTransform="matrix("+a.getA().toFixed(4)+", "+a.getB().toFixed(4)+", "+a.getC().toFixed(4)+", "+a.getD().toFixed(4)+", "+a.getE().toFixed(0)+"px, "+a.getF().toFixed(0)+"px)":navigator.isWebkit?this.drawing.style.webkitTransform=a.toString()+" translate3d(0,0,0)":navigator.isOpera&&(this.drawing.style.OTransform=a.toString()))}else navigator.isIE7||
navigator.isIE8?(this.drawing.style.left=Math.round(this.layoutX)+"px",this.drawing.style.top=Math.round(this.layoutY)+"px"):("removeProperty"in this.drawing.style&&this.drawing.style.removeProperty("transform"),navigator.isIE&&"removeProperty"in this.drawing.style?this.drawing.style.removeProperty("-ms-transform"):navigator.isGecko?this.drawing.style.removeProperty("-moz-transform"):navigator.isWebkit?this.drawing.style.removeProperty("-webkit-transform"):navigator.isOpera&&this.drawing.style.removeProperty("-o-transform"))},
setAnimClock:function(a){void 0!==this.animClock&&this.animClock.stop();this.animClock=a;void 0!==a&&this.connect(a,"complete",this.onAnimClockComplete)},onAnimClockComplete:function(){this.animClock=void 0},onLoad:function(){void 0!==this.parent&&(this.setParentStyle(this.parent.mergeStyle),this.setParentDisabled(this.parent.getIsDisabled()),this.setParentVisible(this.parent.getIsVisible()));this.fireEvent("load",this)},onUnload:function(){void 0!==this.animClock&&(this.animClock.stop(),this.animClock=
void 0);this.fireEvent("unload",this)}},{},{transformToWindow2:function(a){for(var b=new Ui.Matrix;void 0!==a;){var c=a.getInverseLayoutTransform();c.multiply(b);b=c;a=a.parent}return b},transformFromWindow2:function(a){a=Ui.Element.transformToWindow2(a);a.inverse();return a},elementFromPoint:function(a,b){return Ui.App.current.elementFromPoint(a,b)},transformToWindow:function(a,b){var c,d,e,f,g,h,k,m,n,l,p,q;void 0===b&&(b=window);if(navigator.isWebkit){p=new Ui.Matrix;for(l=a;void 0!==l&&null!==
l;)q=b.getComputedStyle(l,null).getPropertyValue("-webkit-transform"),"none"!=q&&(n=b.getComputedStyle(l,null).getPropertyValue("-webkit-transform-origin"),m=k=0,"0px 0px"!==n&&""!==n&&(m=n.split(" "),k=parseFloat(m[0].replace(/px$/,"")),m=parseFloat(m[1].replace(/px$/,""))),q=new WebKitCSSMatrix(q),c=Ui.Matrix.createMatrix(q.a,q.b,q.c,q.d,q.e,q.f),p.translate(-k,-m),p.multiply(c),p.translate(k,m)),p.translate(l.offsetLeft,l.offsetTop),p.translate(-l.scrollLeft,-l.scrollTop),l=l.offsetParent}else if(navigator.isGecko){p=
new Ui.Matrix;for(l=a;void 0!==l&&null!==l;)q=b.getComputedStyle(l,null).getPropertyValue("-moz-transform"),"none"!==q&&(k=q.split(" "),c=parseFloat(k[0].slice(7,k[0].length-1)),d=parseFloat(k[1].slice(0,k[1].length-1)),e=parseFloat(k[2].slice(0,k[2].length-1)),f=parseFloat(k[3].slice(0,k[3].length-1)),g=parseFloat(k[4].slice(0,k[4].length-1)),h=parseFloat(k[5].slice(0,k[5].length-1)),n=b.getComputedStyle(l,null).getPropertyValue("-moz-transform-origin"),m=k=0,"0px 0px"!=n&&(m=n.split(" "),k=parseFloat(m[0].replace(/px$/,
"")),m=parseFloat(m[1].replace(/px$/,""))),c=Ui.Matrix.createMatrix(c,d,e,f,g,h),p.translate(-k,-m),p.multiply(c),p.translate(k,m)),p.translate(l.offsetLeft,l.offsetTop),p.translate(-l.scrollLeft,-l.scrollTop),l=l.offsetParent}else if(navigator.isOpera){p=new Ui.Matrix;for(l=a;void 0!==l&&null!==l;)q=b.getComputedStyle(l,null).getPropertyValue("-o-transform"),"none"!=q&&"matrix(1, 0, 0, 1, 0, 0)"!=q&&(k=q.split(" "),c=parseFloat(k[0].slice(7,k[0].length-1)),d=parseFloat(k[1].slice(0,k[1].length-1)),
e=parseFloat(k[2].slice(0,k[2].length-1)),f=parseFloat(k[3].slice(0,k[3].length-1)),g=parseFloat(k[4].slice(0,k[4].length-1)),h=parseFloat(k[5].slice(0,k[5].length-1)),n=b.getComputedStyle(l,null).getPropertyValue("-o-transform-origin"),m=k=0,"0px 0px"!=n&&(m=n.split(" "),k=parseFloat(m[0].replace(/px$/,"")),m=parseFloat(m[1].replace(/px$/,""))),c=Ui.Matrix.createMatrix(c,d,e,f,g,h),p.translate(-k,-m),p.multiply(c),p.translate(k,m)),p.translate(l.offsetLeft,l.offsetTop),p.translate(-l.scrollLeft,
-l.scrollTop),l=l.offsetParent}else if(navigator.isIE){p=new Ui.Matrix;for(l=a;void 0!==l&&null!==l&&l!==window;){try{q=b.getComputedStyle(l,null).getPropertyValue("-ms-transform")}catch(s){q="none"}"none"!==q&&"matrix(1, 0, 0, 1, 0, 0)"!=q&&(k=q.split(" "),c=parseFloat(k[0].slice(7,k[0].length-1)),d=parseFloat(k[1].slice(0,k[1].length-1)),e=parseFloat(k[2].slice(0,k[2].length-1)),f=parseFloat(k[3].slice(0,k[3].length-1)),g=parseFloat(k[4].slice(0,k[4].length-1)),h=parseFloat(k[5].slice(0,k[5].length-
1)),n=b.getComputedStyle(l,null).getPropertyValue("-ms-transform-origin"),m=k=0,"0px 0px"!=n&&(m=n.split(" "),k=parseFloat(m[0].replace(/px$/,"")),m=parseFloat(m[1].replace(/px$/,""))),c=Ui.Matrix.createMatrix(c,d,e,f,g,h),p.translate(-k,-m),p.multiply(c),p.translate(k,m));p.translate(l.offsetLeft,l.offsetTop);p.translate(-l.scrollLeft,-l.scrollTop);l=l.offsetParent}}else if(navigator.supportSVG)l=document.createElementNS(svgNS,"svg"),void 0===a.firstChild?a.appendChild(l):a.insertBefore(l,a.firstChild),
p=l.getScreenCTM(),a.removeChild(l),p=Ui.Matrix.createMatrix(p.a,p.b,p.c,p.d,p.e,p.f);else{p=new Ui.Matrix;for(l=a;void 0!==l&&null!==l&&l!==window;)p.translate(l.offsetLeft,l.offsetTop),p.translate(-l.scrollLeft,-l.scrollTop),l=l.offsetParent}return p},transformFromWindow:function(a,b){var c=Ui.Element.transformToWindow(a,b);c.inverse();return c},pointToWindow:function(a,b,c){b=new Ui.Point({point:b});b.matrixTransform(Ui.Element.transformToWindow(a,c));return b},pointFromWindow:function(a,b,c){b=
new Ui.Point({point:b});b.matrixTransform(Ui.Element.transformFromWindow(a,c));return b},setSelectable:function(a,b){(a.selectable=b)?(a.style.cursor="text",navigator.isWebkit?a.style.webkitUserSelect="text":navigator.isGecko?a.style.MozUserSelect="text":navigator.isIE&&(!navigator.isIE7&&!navigator.isIE8)&&(a.style.msUserSelect="element")):(a.style.cursor="inherit",navigator.isWebkit?a.style.webkitUserSelect="none":navigator.isGecko?a.style.MozUserSelect="none":navigator.isIE&&(!navigator.isIE7&&
!navigator.isIE8)&&(a.style.msUserSelect="none"))}});navigator.supportOpacity=!navigator.isIE7&&!navigator.isIE8;Ui.Element.extend("Ui.Container",{children:void 0,containerDrawing:void 0,constructor:function(a){this.children=[];void 0===this.containerDrawing&&(this.containerDrawing=this.getDrawing())},getContainerDrawing:function(){return this.containerDrawing},setContainerDrawing:function(a){this.containerDrawing=a},appendChild:function(a){a.parent=this;this.children.push(a);this.containerDrawing.appendChild(a.getDrawing());a.setIsLoaded(this.isLoaded);a.setParentVisible(this.getIsVisible());a.setParentDisabled(this.getIsDisabled());
this.onChildInvalidateMeasure(a,"add")},prependChild:function(a){a.parent=this;this.children.unshift(a);void 0!==this.containerDrawing.firstChild?this.containerDrawing.insertBefore(a.getDrawing(),this.containerDrawing.firstChild):this.containerDrawing.appendChild(a.getDrawing());a.setIsLoaded(this.isLoaded);a.setParentVisible(this.getIsVisible());a.setParentDisabled(this.getIsDisabled());this.onChildInvalidateMeasure(a,"add")},removeChild:function(a){a.parent=void 0;this.containerDrawing.removeChild(a.getDrawing());
for(var b=0;b<this.children.length&&this.children[b]!==a;)b++;b<this.children.length&&this.children.splice(b,1);a.setIsLoaded(!1);a.setParentVisible(!1);this.onChildInvalidateMeasure(a,"remove")},insertChildAt:function(a,b){b=Math.max(0,Math.min(b,this.children.length));a.parent=this;this.children.splice(b,0,a);void 0!==this.containerDrawing.firstChild&&b<this.children.length-1?this.containerDrawing.insertBefore(a.getDrawing(),this.containerDrawing.childNodes[b]):this.containerDrawing.appendChild(a.getDrawing());
a.setIsLoaded(this.isLoaded);a.setParentVisible(this.getIsVisible());a.setParentDisabled(this.getIsDisabled());this.onChildInvalidateMeasure(a,"add")},moveChildAt:function(a,b){0>b&&(b=this.children.length+b);0>b&&(b=0);b>=this.children.length&&(b=this.children.length);for(var c=0;c<this.children.length&&this.children[c]!==a;)c++;c<this.children.length&&(this.children.splice(c,1),this.children.splice(b,0,a),this.containerDrawing.removeChild(a.getDrawing()),void 0!==this.containerDrawing.firstChild&&
b<this.containerDrawing.childNodes.length?this.containerDrawing.insertBefore(a.getDrawing(),this.containerDrawing.childNodes[b]):this.containerDrawing.appendChild(a.getDrawing()));this.onChildInvalidateMeasure(a,"move")},getChildren:function(){return this.children},getFirstChild:function(){if(0<this.children.length)return this.children[0]},getLastChild:function(){if(0<this.children.length)return this.children[this.children.length-1]},getChildPosition:function(a){for(var b=0;b<this.children.length;b++)if(this.children[b]===
a)return b;return-1},hasChild:function(a){return-1!==this.getChildPosition(a)},clear:function(){for(;void 0!==this.getFirstChild();)this.removeChild(this.getFirstChild())}},{get:function(a){if(this.name==a)return this;for(var b=0;b<this.children.length;b++){var c=this.children[b].get(a);if(void 0!==c)return c}},elementFromPoint:function(a,b){if(this.getIsVisible()){var c=this.getLayoutTransform(),d=new Ui.Point({x:a,y:b});d.matrixTransform(c);c=0<=d.x&&d.x<=this.layoutWidth&&0<=d.y&&d.y<=this.layoutHeight;
if(!this.getClipToBounds()||c){if(void 0!==this.children)for(var e=this.children.length-1;0<=e;e--){var f=this.children[e].elementFromPoint(d.x,d.y);if(void 0!==f)return f}if(c)return this}}},setIsLoaded:function(a){if(this.isLoaded!=a){if(this.isLoaded=a)this.onLoad();else this.onUnload();for(var b=0;b<this.children.length;b++)this.children[b].setIsLoaded(a)}},onInternalStyleChange:function(){if(this.isLoaded&&(this.onStyleChange(),void 0!==this.children))for(var a=0;a<this.children.length;a++)this.children[a].setParentStyle(this.mergeStyle)},
onInternalDisable:function(){Ui.Container.base.onInternalDisable.call(this);for(var a=0;a<this.children.length;a++)this.children[a].setParentDisabled(!0)},onInternalEnable:function(){Ui.Container.base.onInternalEnable.call(this);for(var a=0;a<this.children.length;a++)this.children[a].setParentDisabled(!1)},onInternalVisible:function(){Ui.Container.base.onInternalVisible.call(this);for(var a=0;a<this.children.length;a++)this.children[a].setParentVisible(!0)},onInternalHidden:function(){Ui.Container.base.onInternalHidden.call(this);
for(var a=0;a<this.children.length;a++)this.children[a].setParentVisible(!1)}});Core.Object.extend("Ui.SvgParser",{path:void 0,pos:0,cmd:void 0,current:void 0,value:!1,end:!1,constructor:function(a){this.path=navigator.isIE7||navigator.isIE8?a.path.split(""):a.path;delete a.path},isEnd:function(){return this.end},next:function(){this.end=this.pos>=this.path.length;if(!this.end){for(;this.pos<this.path.length&&(" "==this.path[this.pos]||","==this.path[this.pos]||";"==this.path[this.pos]);)this.pos++;this.current="";for(var a;this.pos<this.path.length&&" "!=this.path[this.pos]&&
","!=this.path[this.pos]&&";"!=this.path[this.pos];){var b=this.path[this.pos],c="e"!=b&&"a"<=b&&"z">=b||"A"<=b&&"Z">=b;if(void 0===a||a==c)a=c,this.current+=b,this.pos++;else break}a=parseFloat(this.current);(this.value=!isNaN(a))?this.current=a:this.cmd=this.current}},setCmd:function(a){this.cmd=a},getCmd:function(){return this.cmd},getCurrent:function(){return this.current},isCmd:function(){return!this.value},isValue:function(){return this.value}});Ui.Element.extend("Ui.SVGElement",{renderSVG:function(a){}},{renderDrawing:function(){var a=document.createElementNS(svgNS,"svg");a.setAttribute("focusable",!1);var b=this.renderSVG(a);void 0!==b&&a.appendChild(b);return a}});Ui.Container.extend("Ui.CanvasElement",{canvasEngine:"svg",context:void 0,svgDrawing:void 0,vmlDrawing:void 0,eventCatcher:void 0,dpiRatio:1,constructor:function(a){this.setSelectable(!1)},update:function(){if("canvas"===this.canvasEngine||"vml"===this.canvasEngine)this.context.clearRect(0,0,Math.ceil(this.getLayoutWidth()*this.dpiRatio),Math.ceil(this.getLayoutHeight()*this.dpiRatio)),this.context.save(),1!==this.dpiRatio&&this.context.scale(this.dpiRatio,this.dpiRatio),this.updateCanvas(this.context),
this.context.restore();else{void 0!==this.svgDrawing&&this.getDrawing().removeChild(this.svgDrawing);var a=document.createElementNS(svgNS,"svg");a.style.position="absolute";a.style.top="0px";a.style.left="0px";a.style.width=this.getLayoutWidth()+"px";a.style.height=this.getLayoutHeight()+"px";a.setAttribute("focusable",!1);a.setAttribute("draggable",!1);a.setAttribute("pointer-events","none");var b=new Core.SVG2DContext({document:a});this.updateCanvas(b);this.svgDrawing=a;this.svgDrawing.appendChild(b.getSVG());
this.getDrawing().appendChild(this.svgDrawing)}},getContext:function(){return this.context},updateCanvas:function(a){}},{renderDrawing:function(a){"canvasEngine"in a&&(this.canvasEngine=a.canvasEngine,delete a.canvasEngine);"canvas"===this.canvasEngine&&!navigator.supportCanvas&&(this.canvasEngine=navigator.supportSVG?"svg":"vml");"svg"===this.canvasEngine&&!navigator.supportSVG&&(this.canvasEngine=navigator.supportCanvas?"canvas":"vml");"vml"===this.canvasEngine&&!navigator.supportVML&&(this.canvasEngine=
navigator.supportCanvas?"canvas":"svg");var b;"canvas"===this.canvasEngine?(a=document.createElement("canvas"),this.context=a.getContext("2d")):"vml"===this.canvasEngine?(a=document.createElement("div"),b=document.createElement("div"),b.style.width="0px",b.style.height="0px",b.style.visibility="hidden",a.appendChild(b),this.setContainerDrawing(b),this.vmlDrawing=document.createElement("canvas"),this.vmlDrawing=G_vmlCanvasManager.initElement(this.vmlDrawing),this.vmlDrawing.style.position="absolute",
this.vmlDrawing.style.top="0px",this.vmlDrawing.style.left="0px",this.context=this.vmlDrawing.getContext("2d"),this.context.roundRect=Core.SVG2DPath.prototype.roundRect,this.context.svgPath=Core.SVG2DContext.prototype.svgPath,this.context.roundRectFilledShadow=Core.SVG2DContext.prototype.roundRectFilledShadow,a.appendChild(this.vmlDrawing),this.eventCatcher=document.createElement("div"),this.eventCatcher.style.position="absolute",this.eventCatcher.style.top="0px",this.eventCatcher.style.left="0px",
this.eventCatcher.style.background="red",this.eventCatcher.style.filter="alpha(opacity=0)",a.appendChild(this.eventCatcher)):(a=document.createElement("div"),b=document.createElement("div"),b.style.width="0px",b.style.height="0px",b.style.visibility="hidden",a.appendChild(b),this.setContainerDrawing(b),navigator.supportCanvas&&(a.toDataURL=this.svgToDataURL.bind(this)));return a},svgToDataURL:function(){var a=document.createElement("canvas"),b=a.getContext("2d");a.setAttribute("width",Math.ceil(this.getLayoutWidth()),
null);a.setAttribute("height",Math.ceil(this.getLayoutHeight()),null);this.updateCanvas(b);return a.toDataURL.apply(a,arguments)},arrangeCore:function(a,b){var c=window.devicePixelRatio||1,d=1;void 0!==this.context&&(d=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1);this.dpiRatio=c/d;this.getDrawing().setAttribute("width",Math.ceil(a*this.dpiRatio),
null);this.getDrawing().setAttribute("height",Math.ceil(b*this.dpiRatio),null);"vml"===this.canvasEngine&&(this.vmlDrawing.style.width=a+"px",this.vmlDrawing.style.height=b+"px",this.vmlDrawing.setAttribute("width",Math.ceil(a),null),this.vmlDrawing.setAttribute("height",Math.ceil(b),null),this.eventCatcher.style.width=a+"px",this.eventCatcher.style.height=b+"px");this.getIsVisible()&&this.getIsLoaded()&&this.update()},drawCore:function(){0!==this.getLayoutWidth()&&0!==this.getLayoutHeight()&&this.update()},
onInternalVisible:function(){Ui.CanvasElement.base.onInternalVisible.call(this);this.invalidateDraw()}});
Core.Object.extend("Core.SVG2DPath",{path:void 0,context:void 0,x:0,y:0,constructor:function(a){this.path=document.createElementNS(svgNS,"path");this.context=a.context;delete a.context},moveTo:function(a,b){this.path.pathSegList.appendItem(this.path.createSVGPathSegMovetoAbs(a,b));this.x=a;this.y=b},lineTo:function(a,b){this.path.pathSegList.appendItem(this.path.createSVGPathSegLinetoAbs(a,b));this.x=a;this.y=b},quadraticCurveTo:function(a,b,c,d){this.path.pathSegList.appendItem(this.path.createSVGPathSegCurvetoQuadraticAbs(c,
d,a,b));this.x=c;this.y=d},bezierCurveTo:function(a,b,c,d,e,f){this.path.pathSegList.appendItem(this.path.createSVGPathSegCurvetoCubicAbs(e,f,a,b,c,d));this.x=e;this.y=f},arcTo:function(a,b,c,d,e,f,g){a=(this.x-a)*(d-b)-(this.y-b)*(c-a);void 0===g&&(g=f,f=e);this.path.pathSegList.appendItem(this.path.createSVGPathSegArcAbs(c,d,e,f,g*Math.PI/180,0,0>a?1:0));this.x=c;this.y=d},closePath:function(){this.path.pathSegList.appendItem(this.path.createSVGPathSegClosePath())},rect:function(a,b,c,d){this.moveTo(a,
b);this.lineTo(a+c,b);this.lineTo(a+c,b+d);this.lineTo(a,b+d)},arc:function(a,b,c,d,e,f){this.ellipse(a,b,c,c,0,d,e,f)},ellipse:function(a,b,c,d,e,f,g,h){0===e&&0===f&&g===2*Math.PI?(this.moveTo(a,b+d),this.arcTo(a+c,b+d,a+c,b,c,d,Math.PI/2),this.arcTo(a+c,b-d,a,b-d,c,d,Math.PI/2),this.arcTo(a-c,b-d,a-c,b,c,d,Math.PI/2),this.arcTo(a-c,b+d,a,b+d,c,d,Math.PI/2)):(this.moveTo(a,b),this.lineTo(a,b+d))},roundRect:function(a,b,c,d,e,f,g,h,k){!0===k?(this.moveTo(a+e,b),0<e&&this.arcTo(a,b,a,b+e,e,e,Math.PI/
4),this.lineTo(a,b+d-h),0<h&&this.arcTo(a,b+d,a+h,b+d,h,h,Math.PI/4),this.lineTo(a+c-g,b+d),0<g&&this.arcTo(a+c,b+d,a+c,b+d-g,g,g,Math.PI/4),this.lineTo(a+c,b+f),0<f&&this.arcTo(a+c,b,a+c-f,b,f,f,Math.PI/4)):(this.moveTo(a,b+e),0<e&&this.arcTo(a,b,a+e,b,e,e,Math.PI/4),this.lineTo(a+c-f,b),0<f&&this.arcTo(a+c,b,a+c,b+f,f,f,Math.PI/4),this.lineTo(a+c,b+d-g),0<g&&this.arcTo(a+c,b+d,a+c-g,b+d,g,g,Math.PI/4),this.lineTo(a+h,b+d),0<h&&this.arcTo(a,b+d,a,b+d-h,h,h,Math.PI/4))},getSVG:function(){return this.path.cloneNode()}});
Core.Object.extend("Core.SVGGradient",{gradient:void 0,id:void 0,constructor:function(a){this.gradient=document.createElementNS(svgNS,"linearGradient");this.gradient.setAttributeNS(null,"gradientUnits","userSpaceOnUse");this.gradient.setAttributeNS(null,"x1",a.x0);this.gradient.setAttributeNS(null,"y1",a.y0);this.gradient.setAttributeNS(null,"x2",a.x1);this.gradient.setAttributeNS(null,"y2",a.y1);delete a.x0;delete a.y0;delete a.x1;delete a.y1;this.id="_grad"+ ++Core.SVGGradient.counter;this.gradient.setAttributeNS(null,
"id",this.id)},getId:function(){return this.id},addColorStop:function(a,b){var c=document.createElementNS(svgNS,"stop");c.setAttributeNS(null,"offset",a);c.style.stopColor=b;b=Ui.Color.create(b);c.style.stopOpacity=b.getRgba().a;this.gradient.appendChild(c)},getSVG:function(){return this.gradient}},{},{counter:0});
Core.Object.extend("Core.SVG2DContext",{fillStyle:"black",strokeStyle:"black",lineWidth:1,globalAlpha:1,currentTransform:void 0,font:"default 10px sans-serif",textAlign:"start",textBaseLine:"alphabetic",direction:"inherit",clipId:void 0,document:void 0,currentPath:void 0,g:void 0,defs:void 0,states:void 0,constructor:function(a){this.document=a.document;delete a.document;this.g=document.createElementNS(svgNS,"g");this.currentTransform=this.document.createSVGMatrix();this.states=[];this.defs=document.createElementNS(svgNS,
"defs");this.g.appendChild(this.defs)},beginPath:function(){this.currentPath=new Core.SVG2DPath({context:this})},moveTo:function(a,b){this.currentPath.moveTo(a,b)},lineTo:function(a,b){this.currentPath.lineTo(a,b)},quadraticCurveTo:function(a,b,c,d){this.currentPath.quadraticCurveTo(a,b,c,d)},bezierCurveTo:function(a,b,c,d,e,f){this.currentPath.bezierCurveTo(a,b,c,d,e,f)},rect:function(a,b,c,d){this.currentPath.rect(a,b,c,d)},arc:function(a,b,c,d,e,f){this.currentPath.arc(a,b,c,d,e,f)},ellipse:function(a,
b,c,d,e,f,g,h){this.currentPath.ellipse(a,b,c,d,e,f,g,h)},roundRect:function(a,b,c,d,e,f,g,h,k){this.currentPath.roundRect(a,b,c,d,e,f,g,h,k)},closePath:function(){this.currentPath.closePath()},fill:function(){var a=this.currentPath.getSVG();if(Core.SVGGradient.hasInstance(this.fillStyle)){var b=this.fillStyle.getId();this.defs.appendChild(this.fillStyle.getSVG());a.style.fill="url(#"+b+")"}else a.style.fill=this.fillStyle;void 0!==this.clipId&&a.setAttributeNS(null,"clip-path","url(#"+this.clipId+
")");a.style.opacity=this.globalAlpha;a.transform.baseVal.initialize(this.document.createSVGTransformFromMatrix(this.currentTransform));this.g.appendChild(a)},stroke:function(){var a=this.currentPath.getSVG();a.style.stroke=this.strokeStyle;a.style.fill="none";a.style.opacity=this.globalAlpha;a.style.strokeWidth=this.lineWidth;void 0!==this.clipId&&a.setAttributeNS(null,"clip-path","url(#"+this.clipId+")");a.setAttributeNS(null,"pointer-events","none");a.transform.baseVal.initialize(this.document.createSVGTransformFromMatrix(this.currentTransform));
this.g.appendChild(a)},clip:function(){var a=document.createElementNS(svgNS,"clipPath");this.clipId="_clip"+ ++Core.SVG2DContext.counter;a.setAttributeNS(null,"id",this.clipId);a.appendChild(this.currentPath.getSVG());this.defs.appendChild(a)},resetClip:function(){this.clipId=void 0},drawImage:function(a,b,c,d,e,f,g,h,k){var m,n=a.naturalWidth,l=a.naturalHeight;void 0===d?(f=b,g=c,c=b=0,d=n,e=l,h=n,k=l):void 0===f&&(f=b,g=c,h=d,k=e,c=b=0,d=n,e=l);if(0===b&&0===c&&d===n&&e==l)m=document.createElementNS(svgNS,
"image"),void 0!==this.clipId&&m.setAttributeNS(null,"clip-path","url(#"+this.clipId+")"),m.style.opacity=this.globalAlpha,m.setAttributeNS(null,"pointer-events","none"),m.href.baseVal=a.src,m.setAttributeNS(null,"x",f),m.setAttributeNS(null,"y",g),m.setAttributeNS(null,"width",h),m.setAttributeNS(null,"height",k),m.transform.baseVal.initialize(this.document.createSVGTransformFromMatrix(this.currentTransform)),this.g.appendChild(m);else{var p=document.createElementNS(svgNS,"pattern"),q="_pat"+ ++Core.SVG2DContext.counter;
p.setAttributeNS(null,"id",q);p.setAttributeNS(null,"patternUnits","userSpaceOnUse");p.setAttributeNS(null,"x",f);p.setAttributeNS(null,"y",g);p.setAttributeNS(null,"width",h);p.setAttributeNS(null,"height",k);m=document.createElementNS(svgNS,"image");m.href.baseVal=a.src;m.setAttributeNS(null,"x",-b*h/d);m.setAttributeNS(null,"y",-c*k/e);m.setAttributeNS(null,"width",n*h/d);m.setAttributeNS(null,"height",l*k/e);p.appendChild(m);this.defs.appendChild(p);a=document.createElementNS(svgNS,"path");a.setAttributeNS(null,
"pointer-events","none");a.pathSegList.appendItem(a.createSVGPathSegMovetoAbs(f,g));a.pathSegList.appendItem(a.createSVGPathSegLinetoAbs(f+h,g));a.pathSegList.appendItem(a.createSVGPathSegLinetoAbs(f+h,g+k));a.pathSegList.appendItem(a.createSVGPathSegLinetoAbs(f,g+k));a.pathSegList.appendItem(a.createSVGPathSegClosePath());a.style.fill="url(#"+q+")";void 0!==this.clipId&&a.setAttributeNS(null,"clip-path","url(#"+this.clipId+")");a.style.opacity=this.globalAlpha;a.transform.baseVal.initialize(this.document.createSVGTransformFromMatrix(this.currentTransform));
this.g.appendChild(a)}},fillText:function(a,b,c,d){d=document.createElementNS(svgNS,"text");a=document.createTextNode(a);d.appendChild(a);d.style.fill=this.fillStyle;d.style.opacity=this.globalAlpha;d.setAttributeNS(null,"pointer-events","none");d.transform.baseVal.initialize(this.document.createSVGTransformFromMatrix(this.currentTransform));"center"==this.textAlign?d.style.textAnchor="middle":"end"==this.textAlign?d.style.textAnchor="end":"right"==this.textAlign&&(d.style.textAnchor="end");a=this.parseFont(this.font);
d.style.fontFamily=a.family;d.style.fontWeight=a.weight;d.style.fontSize=a.size;d.style.fontStyle=a.style;navigator.isWebkit?"top"===this.textBaseline?d.style.alignmentBaseline="text-before-edge":"hanging"===this.textBaseline?d.style.alignmentBaseline="text-before-edge":"middle"===this.textBaseline?d.style.alignmentBaseline="central":"alphabetic"===this.textBaseline?d.style.alignmentBaseline="alphabetic":"ideographic"===this.textBaseline?d.style.alignmentBaseline="ideographic":"bottom"===this.textBaseline&&
(d.style.alignmentBaseline="text-after-edge"):(a=parseInt(a.size),"top"===this.textBaseline?c+=0.8*a:"hanging"===this.textBaseline?c+=0.8*a:"middle"===this.textBaseline?c+=0.8*a/2:"bottom"===this.textBaseline&&(c+=-0.2*a));d.setAttributeNS(null,"x",b);d.setAttributeNS(null,"y",c);this.g.appendChild(d)},strokeText:function(a,b,c,d){},save:function(){this.states.push({fillStyle:this.fillStyle,strokeStyle:this.strokeStyle,lineWidth:this.lineWidth,globalAlpha:this.globalAlpha,matrix:{a:this.currentTransform.a,
b:this.currentTransform.b,c:this.currentTransform.c,d:this.currentTransform.d,e:this.currentTransform.e,f:this.currentTransform.f},font:this.font,textAlign:this.textAlign,textBaseLine:this.textBaseLine,direction:this.direction,clipId:this.clipId})},restore:function(){if(0<this.states.length){var a=this.states.pop();this.fillStyle=a.fillStyle;this.strokeStyle=a.strokeStyle;this.lineWidth=a.lineWidth;this.globalAlpha=a.globalAlpha;this.currentTransform=this.document.createSVGMatrix();this.currentTransform.a=
a.matrix.a;this.currentTransform.b=a.matrix.b;this.currentTransform.c=a.matrix.c;this.currentTransform.d=a.matrix.d;this.currentTransform.e=a.matrix.e;this.currentTransform.f=a.matrix.f;this.font=a.font;this.textAlign=a.textAlign;this.textBaseLine=a.textBaseLine;this.direction=a.direction;this.clipId=a.clipId}},scale:function(a,b){this.currentTransform=this.currentTransform.scaleNonUniform(a,void 0===b?a:b)},rotate:function(a){this.currentTransform=this.currentTransform.rotate(180*a/Math.PI)},translate:function(a,
b){this.currentTransform=this.currentTransform.translate(a,b)},transform:function(a,b,c,d,e,f){var g=this.document.createSVGMatrix();g.a=a;g.b=b;g.c=c;g.d=d;g.e=e;g.f=f;this.currentTransform.multiply(g)},setTransform:function(a,b,c,d,e,f){this.currentTransform.a=a;this.currentTransform.b=b;this.currentTransform.c=c;this.currentTransform.d=d;this.currentTransform.e=e;this.currentTransform.f=f},resetTransform:function(){this.currentTransform=this.document.createSVGMatrix()},clearRect:function(a,b,c,
d){},fillRect:function(a,b,c,d){this.beginPath();this.currentPath.rect(a,b,c,d);this.closePath();this.fill()},strokeRect:function(a,b,c,d){this.beginPath();this.currentPath.rect(a,b,c,d);this.closePath();this.stroke()},createLinearGradient:function(a,b,c,d){return new Core.SVGGradient({x0:a,y0:b,x1:c,y1:d})},measureText:function(a){var b=this.parseFont(this.font);return Ui.Label.measureText(a,b.size,b.family,b.weight)},svgPath:function(a){var b=0,c=0,d,e,f,g,h=new Ui.SvgParser({path:a});h.next();
for(this.beginPath();!h.isEnd();)if(d=h.getCmd(),h.isCmd()&&h.next(),"m"==d)h.setCmd("l"),b+=h.getCurrent(),h.next(),c+=h.getCurrent(),h.next(),this.moveTo(b,c);else if("M"==d)h.setCmd("L"),b=h.getCurrent(),h.next(),c=h.getCurrent(),h.next(),this.moveTo(b,c);else if("l"==d)b+=h.getCurrent(),h.next(),c+=h.getCurrent(),h.next(),this.lineTo(b,c);else if("L"==d)b=h.getCurrent(),h.next(),c=h.getCurrent(),h.next(),this.lineTo(b,c);else if("v"==d)c+=h.getCurrent(),h.next(),this.lineTo(b,c);else if("V"==
d)c=h.getCurrent(),h.next(),this.lineTo(b,c);else if("h"==d)b+=h.getCurrent(),h.next(),this.lineTo(b,c);else if("H"==d)b=h.getCurrent(),h.next(),this.lineTo(b,c);else if("c"==d)d=b+h.getCurrent(),h.next(),e=c+h.getCurrent(),h.next(),f=b+h.getCurrent(),h.next(),g=c+h.getCurrent(),h.next(),b+=h.getCurrent(),h.next(),c+=h.getCurrent(),h.next(),this.bezierCurveTo(d,e,f,g,b,c);else if("C"==d)d=h.getCurrent(),h.next(),e=h.getCurrent(),h.next(),f=h.getCurrent(),h.next(),g=h.getCurrent(),h.next(),b=h.getCurrent(),
h.next(),c=h.getCurrent(),h.next(),this.bezierCurveTo(d,e,f,g,b,c);else if("s"==d)d=b+h.getCurrent(),h.next(),e=c+h.getCurrent(),h.next(),f=d,g=e,b+=h.getCurrent(),h.next(),c+=h.getCurrent(),h.next(),this.bezierCurveTo(d,e,f,g,b,c),this.lineTo(b,c);else if("S"==d)d=h.getCurrent(),h.next(),e=h.getCurrent(),h.next(),f=d,g=e,b=h.getCurrent(),h.next(),c=h.getCurrent(),h.next(),this.bezierCurveTo(d,e,f,g,b,c);else if("q"==d)d=b+h.getCurrent(),h.next(),e=c+h.getCurrent(),h.next(),f=b+h.getCurrent(),h.next(),
g=c+h.getCurrent(),h.next(),this.quadraticCurveTo(d,e,f,g),b=f,c=g;else if("Q"==d)d=h.getCurrent(),h.next(),e=h.getCurrent(),h.next(),f=h.getCurrent(),h.next(),g=h.getCurrent(),h.next(),this.quadraticCurveTo(d,e,f,g),b=f,c=g;else if("z"==d||"Z"==d)this.closePath();else throw"Invalid SVG path cmd: "+d+" ("+a+")";},parseFont:function(a){a=a.split(" ");if(1===a.length)return{style:"default",weight:"normal",size:16,family:a[0]};if(2===a.length)return{style:"default",weight:"normal",size:parseInt(a[0]),
family:a[1]};if(3===a.length)return{style:"default",weight:a[0],size:parseInt(a[1]),family:a[2]};if(4===a.length)return{style:a[0],weight:a[1],size:parseInt(a[2]),family:a[3]}},roundRectFilledShadow:function(a,b,c,d,e,f,g,h,k,m,n){this.save();for(var l=n.getRgba(),p=0;p<m;p++)k?1==m?n=1:(n=(p+1)/m,n*=n):n=(p+1)/(m+1),n=new Ui.Color({r:l.r,g:l.g,b:l.b,a:l.a*n}),this.fillStyle=n.getCssRgba(),k?(this.beginPath(),this.roundRect(a,b,c,d,e,f,g,h),this.roundRect(a+m-p,b+m-p,c-2*(m-p),d-2*(m-p),e,f,g,h,!0)):
(this.beginPath(),this.roundRect(a+p,b+p,c-2*p,d-2*p,e,f,g,h)),this.closePath(),this.fill();this.restore()},getSVG:function(){return this.g}},{},{counter:0});navigator.supportCanvas&&(CanvasRenderingContext2D.prototype.roundRect=Core.SVG2DPath.prototype.roundRect,CanvasRenderingContext2D.prototype.svgPath=Core.SVG2DContext.prototype.svgPath,CanvasRenderingContext2D.prototype.roundRectFilledShadow=Core.SVG2DContext.prototype.roundRectFilledShadow);Ui.CanvasElement.extend("Ui.Shape",{fill:void 0,path:void 0,scale:1,constructor:function(a){},setScale:function(a){this.scale!=a&&(this.scale=a,this.invalidateDraw())},getFill:function(){return void 0===this.fill?Ui.Color.create(this.getStyleProperty("color")):this.fill},setFill:function(a){this.fill!==a&&("string"===typeof a&&(a=Ui.Color.create(a)),this.fill=a,this.invalidateDraw())},setPath:function(a){this.path!=a&&(this.path=a,this.invalidateDraw())}},{onStyleChange:function(){this.invalidateDraw()},
updateCanvas:function(a){if(void 0!==this.path){1!=this.scale&&a.scale(this.scale,this.scale);a.svgPath(this.path);var b=this.getFill();Ui.Color.hasInstance(b)?a.fillStyle=b.getCssRgba():Ui.LinearGradient.hasInstance(b)&&(a.fillStyle=b.getCanvasGradient(a,this.getLayoutWidth(),this.getLayoutHeight()));a.fill()}}},{style:{color:new Ui.Color({r:0,g:0,b:0})}});Ui.Container.extend("Ui.LBox",{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,constructor:function(a){},setContent:function(a){if(!(1===this.getChildren().length&&a===this.getFirstChild())){for(;void 0!==this.getFirstChild();)this.removeChild(this.getFirstChild());if(void 0!==a&&"object"===typeof a)if(a.constructor==Array)for(var b=0;b<a.length;b++)this.append(a[b]);else this.append(a)}},setPadding:function(a){this.setPaddingTop(a);this.setPaddingBottom(a);this.setPaddingLeft(a);this.setPaddingRight(a)},
getPaddingTop:function(){return this.paddingTop},setPaddingTop:function(a){this.paddingTop!=a&&(this.paddingTop=a,this.invalidateMeasure())},getPaddingBottom:function(){return this.paddingBottom},setPaddingBottom:function(a){this.paddingBottom!=a&&(this.paddingBottom=a,this.invalidateMeasure())},getPaddingLeft:function(){return this.paddingLeft},setPaddingLeft:function(a){this.paddingLeft!=a&&(this.paddingLeft=a,this.invalidateMeasure())},getPaddingRight:function(){return this.paddingRight},setPaddingRight:function(a){this.paddingRight!=
a&&(this.paddingRight=a,this.invalidateMeasure())},append:function(a){this.appendChild(a)},prepend:function(a){this.prependChild(a)},remove:function(a){this.removeChild(a)}},{measureCore:function(a,b){for(var c=this.getPaddingLeft(),d=this.getPaddingRight(),e=this.getPaddingTop(),f=this.getPaddingBottom(),g=Math.max(a-(c+d),0),h=Math.max(b-(e+f),0),k=0,m=0,n=0;n<this.getChildren().length;n++){var l=this.getChildren()[n].measure(g,h);l.width>k&&(k=l.width);l.height>m&&(m=l.height)}return{width:k+(c+
d),height:m+(e+f)}},arrangeCore:function(a,b){var c=this.getPaddingLeft(),d=this.getPaddingRight(),e=this.getPaddingTop(),f=this.getPaddingBottom();a-=c+d;b-=e+f;for(d=0;d<this.getChildren().length;d++)this.getChildren()[d].arrange(c,e,a,b)}});Ui.Container.extend("Ui.Box",{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,uniform:!1,spacing:0,star:0,vertical:!0,constructor:function(a){},setContent:function(a){for(;void 0!==this.getFirstChild();)this.removeChild(this.getFirstChild());if(void 0!==a&&"object"===typeof a)if(a.constructor==Array)for(var b=0;b<a.length;b++)this.append(a[b]);else this.append(a)},getOrientation:function(){return this.vertical?"vertical":"horizontal"},setOrientation:function(a){var b=!0;"vertical"!==a&&
(b=!1);this.vertical!==b&&(this.vertical=b,this.invalidateMeasure())},setPadding:function(a){this.setPaddingTop(a);this.setPaddingBottom(a);this.setPaddingLeft(a);this.setPaddingRight(a)},getPaddingTop:function(){return this.paddingTop},setPaddingTop:function(a){this.paddingTop!=a&&(this.paddingTop=a,this.invalidateMeasure())},getPaddingBottom:function(){return this.paddingBottom},setPaddingBottom:function(a){this.paddingBottom!=a&&(this.paddingBottom=a,this.invalidateMeasure())},getPaddingLeft:function(){return this.paddingLeft},
setPaddingLeft:function(a){this.paddingLeft!=a&&(this.paddingLeft=a,this.invalidateMeasure())},getPaddingRight:function(){return this.paddingRight},setPaddingRight:function(a){this.paddingRight!=a&&(this.paddingRight=a,this.invalidateMeasure())},getUniform:function(){return this.uniform},setUniform:function(a){this.uniform!=a&&(this.uniform=a,this.invalidateMeasure())},getSpacing:function(){return this.spacing},setSpacing:function(a){this.spacing!=a&&(this.spacing=a,this.invalidateMeasure())},append:function(a,
b){void 0!==b&&Ui.Box.setResizable(a,!0===b);this.appendChild(a)},prepend:function(a,b){void 0!==b&&Ui.Box.setResizable(a,!0===b);this.prependChild(a)},insertAt:function(a,b,c){void 0!==c&&Ui.Box.setResizable(a,!0===c);this.insertChildAt(a,b)},moveAt:function(a,b){this.moveChildAt(a,b)},remove:function(a){this.removeChild(a)},measureUniform:function(a,b){for(var c=this.vertical?b:a,d=this.vertical?a:b,c=c-this.spacing*(this.getChildren().length-1),e=c/this.getChildren().length,f=0,g=0,h=0,k=!0;k;){for(var m=
0;m<this.getChildren().length;m++){var n=this.getChildren()[m];Ui.Box.getResizable(n)&&f++;n=this.vertical?n.measure(d,e):n.measure(e,d);if((this.vertical?n.width:n.height)>h)h=this.vertical?n.width:n.height;if((this.vertical?n.height:n.width)>g)g=this.vertical?n.height:n.width}h>d||g>e?(g>e&&(e=g),d=h,f=g=h=0):k=!1}0<f&&g*this.getChildren().length<c&&(g=Math.floor(c/this.getChildren().length));this.uniformSize=g;c=this.uniformSize*this.getChildren().length;c+=this.spacing*(this.getChildren().length-
1);return this.vertical?{width:h,height:c}:{width:c,height:h}},measureNonUniformVertical:function(a,b){var c,d,e,f=a,g;g=b-this.spacing*(this.getChildren().length-1);for(var h,k,m,n=!0,l=0;n;){for(c=m=k=h=0;c<this.getChildren().length;c++)d=this.getChildren()[c],Ui.Box.getResizable(d)?(d.boxStarDone=!1,h++):(e=d.measure(f,0),e.width>k&&(k=e.width),m+=e.height);var p=0;if(0<h){var q=g-m,s=!0,l=q/h;do{p=0;s=!0;for(c=0;c<this.getChildren().length;c++)if(d=this.getChildren()[c],Ui.Box.getResizable(d)&&
!d.boxStarDone)if(e=d.measure(f,l),e.width>k&&(k=e.width),e.height>l){d.boxStarDone=!0;s=!1;q-=e.height;m+=e.height;h--;l=q/h;break}else p+=e.height}while(!s)}k>f?f=k:n=!1}m+=this.spacing*(this.getChildren().length-1);0<h?(m+=p,this.star=l):this.star=0;return{width:k,height:m}},measureNonUniformHorizontal:function(a,b){var c,d,e,f,g=b;f=a-this.spacing*(this.getChildren().length-1);for(var h,k,m,n=!0,l=0;n;){for(c=m=k=h=0;c<this.getChildren().length;c++)d=this.getChildren()[c],Ui.Box.getResizable(d)?
(d.boxStarDone=!1,h++):(e=d.measure(0,g),e.height>m&&(m=e.height),k+=e.width);var p=0;if(0<h){var q=f-k,s=!0,l=q/h;do{p=0;s=!0;for(c=0;c<this.getChildren().length;c++)if(d=this.getChildren()[c],Ui.Box.getResizable(d)&&!d.boxStarDone)if(e=d.measure(l,g),e.height>m&&(m=e.height),e.width>l){d.boxStarDone=!0;s=!1;q-=e.width;k+=e.width;h--;l=q/h;break}else p+=e.width}while(!s)}m>g?g=m:n=!1}k+=this.spacing*(this.getChildren().length-1);0<h?(k+=p,this.star=l):this.star=0;return{width:k,height:m}}},{measureCore:function(a,
b){var c=this.getPaddingLeft(),d=this.getPaddingRight(),e=this.getPaddingTop(),f=this.getPaddingBottom(),g=Math.max(0,a-(c+d)),h=Math.max(0,b-(e+f)),g=this.uniform?this.measureUniform(g,h):this.vertical?this.measureNonUniformVertical(g,h):this.measureNonUniformHorizontal(g,h);g.width+=c+d;g.height+=e+f;return g},arrangeCore:function(a,b){var c=this.paddingLeft,d=this.paddingTop,e=this.paddingBottom;a-=c+this.paddingRight;b-=d+e;for(var e=this.vertical?d:c,f=0,g=0,h=0,k=this.getChildren().length,m=
0,n=0;n<k;n++){var l=this.getChildren()[n],p=this.vertical?l.getMeasureHeight():l.getMeasureWidth();Ui.Box.getResizable(l)?(m++,f++,l.boxStarDone=!1):(0<p&&m++,g+=p);p>h&&(h=p)}var g=g+Math.max(0,m-1)*this.spacing,q=0,s=0;if(0<f)if(this.uniform)s=((this.vertical?b:a)-this.spacing*(m-1))/m;else{h=(this.vertical?b:a)-g;m=!0;q=h/f;do{resizableMinSize=0;m=!0;for(n=0;n<k;n++)if(l=this.getChildren()[n],Ui.Box.getResizable(l)&&(p=this.vertical?l.getMeasureHeight():l.getMeasureWidth(),!l.boxStarDone&&p>q)){l.boxStarDone=
!0;m=!1;h-=p;g+=p;f--;q=h/f;break}}while(!m)}else this.uniform&&(s=h);f=!0;for(n=0;n<k;n++)l=this.getChildren()[n],p=this.vertical?l.getMeasureHeight():l.getMeasureWidth(),this.uniform?(f?f=!1:e+=this.spacing,this.vertical?l.arrange(c,e,a,s):l.arrange(e,d,s,b),e+=s):Ui.Box.getResizable(l)&&(this.vertical?l.getMeasureHeight():l.getMeasureWidth())<this.star?(f?f=!1:e+=this.spacing,this.vertical?l.arrange(c,e,a,q):l.arrange(e,d,q,b),e+=q):0<p&&(f?f=!1:e+=this.spacing,this.vertical?(l.arrange(c,e,a,l.getMeasureHeight()),
e+=l.getMeasureHeight()):(l.arrange(e,d,l.getMeasureWidth(),b),e+=l.getMeasureWidth()))}},{getResizable:function(a){return a["Ui.Box.resizable"]?!0:!1},setResizable:function(a,b){Ui.Box.getResizable(a)!==b&&(a["Ui.Box.resizable"]=b,a.invalidateMeasure())}});Ui.Box.extend("Ui.VBox",{constructor:function(a){this.setOrientation("vertical")}});Ui.Box.extend("Ui.HBox",{constructor:function(a){this.setOrientation("horizontal")}});Ui.Container.extend("Ui.Flow",{uniform:!1,uniformWidth:void 0,uniformHeight:void 0,itemAlign:"left",spacing:0,constructor:function(a){},setContent:function(a){for(;void 0!==this.getFirstChild();)this.removeChild(this.getFirstChild());if(void 0!==a&&"object"==typeof a)if(a.constructor==Array)for(var b=0;b<a.length;b++)this.appendChild(a[b]);else this.appendChild(a)},getSpacing:function(){return this.spacing},setSpacing:function(a){this.spacing!=a&&(this.spacing=a,this.invalidateMeasure(),this.invalidateArrange())},
getItemAlign:function(){return this.itemAlign},setItemAlign:function(a){a!=this.itemAlign&&(this.itemAlign=a,this.invalidateMeasure(),this.invalidateArrange())},getUniform:function(){return this.uniform},setUniform:function(a){this.uniform!=a&&(this.uniform=a,this.invalidateMeasure())},append:function(a){this.appendChild(a)},prepend:function(a){this.prependChild(a)},insertAt:function(a,b){this.insertChildAt(a,b)},moveAt:function(a,b){this.moveChildAt(a,b)},remove:function(a){this.removeChild(a)},
measureChildrenNonUniform:function(a,b){for(var c={pos:0,y:0,width:0,height:0},d=0,e=0,f=0,g=0,h=0,k=0;k<this.getChildren().length;k++){var m=this.getChildren()[k],n=m.measure(a,b),l=0===d;if(!l&&d+n.width+(!l?this.spacing:0)>a)c.width=d,c.height=g,d=0,e+=g+this.spacing,g=0,l=!0,f++,c={pos:f,y:e,width:0,height:0};m.flowLine=c;l||(d+=this.spacing);m.flowLineX=d;d+=n.width;n.height>g&&(g=n.height);d>h&&(h=d)}c.width=d;c.height=g;return{width:h,height:e+g}},measureChildrenUniform:function(a,b){var c,
d,e=0,f=0;for(c=0;c<this.getChildren().length;c++)d=this.getChildren()[c],d=d.measure(a,b),d.width>e&&(e=d.width),d.height>f&&(f=d.height);d=Math.max(Math.floor((a+this.spacing)/(e+this.spacing)),1);var g=Math.ceil(this.getChildren().length/d);for(c=0;c<this.getChildren().length;c++)this.getChildren()[c].measure(e,f);this.uniformWidth=e;this.uniformHeight=f;return{width:e*d+(d-1)*this.spacing,height:g*f+(g-1)*this.spacing}}},{measureCore:function(a,b){return 0===this.getChildren().length?{width:0,
height:0}:this.uniform?this.measureChildrenUniform(a,b):this.measureChildrenNonUniform(a,b)},arrangeCore:function(a,b){var c,d,e,f;if(this.uniform)if("left"===this.itemAlign)for(e=d=c=0;e<this.getChildren().length;e++)f=this.getChildren()[e],c+this.uniformWidth>a&&(c=0,d+=this.uniformHeight+this.spacing),f.arrange(c,d,this.uniformWidth,this.uniformHeight),c+=this.uniformWidth+this.spacing;else{if("right"===this.itemAlign){var g=Math.max(Math.floor((a+this.spacing)/(this.uniformWidth+this.spacing)),
1),h=g*this.uniformWidth+(g-1)*this.spacing;c=this.getChildren().length<g?a-(this.getChildren().length*(this.uniformWidth+this.spacing)-this.spacing):a-h;for(e=d=0;e<this.getChildren().length;e++)f=this.getChildren()[e],c+this.uniformWidth>a&&(c=this.getChildren().length-e<g?a-((this.getChildren().length-e)*(this.uniformWidth+this.spacing)-this.spacing):a-h,d+=this.uniformHeight+this.spacing),f.arrange(c,d,this.uniformWidth,this.uniformHeight),c+=this.uniformWidth+this.spacing}}else for(e=0;e<this.getChildren().length;e++)f=
this.getChildren()[e],"left"==this.itemAlign?f.arrange(f.flowLineX,f.flowLine.y,f.getMeasureWidth(),f.flowLine.height):f.arrange(f.flowLineX+(a-f.flowLine.width),f.flowLine.y,f.getMeasureWidth(),f.flowLine.height)}});Core.Object.extend("Ui.SFlowState",{x:0,y:0,width:0,height:0,xpos:0,ypos:0,zones:void 0,currentZone:void 0,boxes:void 0,lineHeight:0,drawCount:0,drawCmd:void 0,drawWidth:0,drawSpaceWidth:0,render:!1,centerstatus:!1,spacing:0,align:"left",stretchMaxRatio:1.7,uniform:!1,uniformWidth:void 0,uniformHeight:void 0,firstLine:!0,lastLine:!1,stretchUniformWidth:void 0,constructor:function(a){this.width=a.width;delete a.width;this.render=a.render;delete a.render;"spacing"in a&&(this.spacing=a.spacing,delete a.spacing);
"align"in a&&(this.align=a.align,delete a.align);"uniform"in a&&(this.uniform=a.uniform,delete a.uniform);"uniformWidth"in a&&(this.stretchUniformWidth=this.uniformWidth=a.uniformWidth,delete a.uniformWidth);"uniformHeight"in a&&(this.uniformHeight=a.uniformHeight,delete a.uniformHeight);"stretchMaxRatio"in a&&(this.stretchMaxRatio=a.stretchMaxRatio,delete a.stretchMaxRatio);this.zones=[{xstart:0,xend:this.width}];this.currentZone=0;this.boxes=[];this.drawCmd=[]},getSize:function(){this.lastLine=
!0;this.flush();return{width:this.width,height:this.ypos}},append:function(a){var b,c;b=Ui.SFlow.getFloat(a);if("none"===b){var d;this.uniform?(a.measure(this.uniformWidth,this.uniformHeight),d={width:this.uniformWidth,height:this.uniformHeight}):d=a.measure(this.width,0);for(;;)if(b=this.zones[this.currentZone],c=!1,b.xstart===this.xpos&&(c=!0),this.xpos+d.width+(c?0:this.spacing)<=b.xend||c&&b.xend===this.width&&d.width>=this.width){this.pushDraw({width:d.width,height:d.height,spaceWidth:c?0:this.spacing,
el:a});c||(this.xpos+=this.spacing);this.xpos+=d.width;d.height>this.lineHeight&&(this.lineHeight=d.height);break}else this.nextZone()}else if("left"===b)for(d=a.measure(this.width,0);;)if(b=this.zones[this.currentZone],c=!1,0===this.xpos&&(c=!0),c&&d.width<=b.xend-this.xpos){this.render&&a.arrange(this.xpos,this.ypos,d.width,d.height);this.insertBox({x:this.xpos,y:this.ypos,width:d.width,height:d.height});break}else this.nextZone();else if("right"===b)for(d=a.measure(this.width,0);;)if(b=this.zones[this.currentZone],
c=!1,this.width==b.xend&&(c=!0),c&&d.width<=b.xend-this.xpos){this.render&&a.arrange(b.xend-d.width,this.ypos,d.width,d.height);this.insertBox({x:b.xend-d.width,y:this.ypos,width:d.width,height:d.height});break}else this.nextZone();else if(DEBUG)throw"Invalid Ui.SFlow float policy ("+b+")";},flushDraw:function(){if(this.render&&0<this.drawCmd.length){var a=this.zones[this.currentZone],b=a.xstart,c=0,d=0;"right"===this.align?b+=a.xend-a.xstart-(this.drawWidth+this.drawSpaceWidth):"center"===this.align?
b+=(a.xend-a.xstart-(this.drawWidth+this.drawSpaceWidth))/2:"stretch"===this.align&&(c=(a.xend-a.xstart-(this.drawWidth+this.drawSpaceWidth))/this.drawCmd.length);for(a=0;a<this.drawCmd.length;a++){var e=this.drawCmd[a],d=e.width+c>e.width*this.stretchMaxRatio?e.width*this.stretchMaxRatio:e.width+c;this.uniform&&"stretch"===this.align&&(this.lastLine&&!this.firstLine?d=Math.max(e.width,this.stretchUniformWidth):this.stretchUniformWidth=d);e.el.arrange(b+e.spaceWidth,this.ypos,d,this.lineHeight);b+=
d+e.spaceWidth}}this.drawCmd=[];this.drawSpaceWidth=this.drawCount=this.drawWidth=0},pushDraw:function(a){this.drawCmd.push(a);this.drawCount++;this.drawWidth+=a.width;this.drawSpaceWidth+=a.spaceWidth},insertBox:function(a){this.boxes.push(a);this.calculZone()},calculZone:function(){var a;this.zones=[{xstart:0,xend:this.width}];for(var b=0;b<this.boxes.length;b++){var c=this.boxes[b];if(!(this.ypos+this.lineHeight<c.y||this.ypos>=c.y+c.height)){for(var d=[],e=0;e<this.zones.length;e++)a=this.zones[e],
c.x<=a.xstart&&c.x+c.width<a.xend?d.push({xstart:c.x+c.width,xend:a.xend}):c.x<a.xend&&c.x+c.width>=a.xend?d.push({xstart:a.xstart,xend:c.x}):c.x>a.xstart&&c.x+c.width<a.xend?(d.push({xstart:a.xstart,xend:c.x}),d.push({xstart:c.x+c.width,xend:a.xend})):c.x<=a.xstart&&c.x+c.width>=a.xend||d.push({xstart:a.xstart,xend:a.xend});this.zones=d}}for(this.currentZone=0;this.currentZone<this.zones.length&&!(a=this.zones[this.currentZone],this.xpos>=a.xstart&&this.xpos<=a.xend);this.currentZone++);if(this.currentZone>=
this.zones.length){this.currentZone=-1;for(this.currentZone=0;this.currentZone<this.zones.length;this.currentZone++)if(a=this.zones[this.currentZone],a.xstart>=this.xpos){this.xpos=a.xstart;break}this.currentZone>=this.zones.length&&(this.xpos=0,this.nextLine())}},flush:function(){for(0!==this.drawCount&&this.nextLine();;){var a=this.zones[this.currentZone];if(a.xstart===this.xpos&&a.xend===this.xpos+this.width)break;else this.nextZone()}},nextLine:function(){this.flushDraw();do if(0<this.lineHeight)this.ypos+=
this.lineHeight+this.spacing,this.lineHeight=0,this.calculZone();else if(0<this.boxes.length){for(var a=Number.MAX_VALUE,b=0;b<this.boxes.length;b++){var c=this.boxes[b];this.ypos<c.y+c.height&&a>c.y+c.height&&(a=c.y+c.height)}a!==Number.MAX_VALUE&&(this.ypos=a+this.spacing);this.calculZone()}while(0===this.zones.length);this.currentZone=0;this.xpos=this.zones[0].xstart;this.firstLine=!1},nextZone:function(){this.flushDraw();this.currentZone>=this.zones.length-1?this.nextLine():(this.currentZone++,
this.xpos=this.zones[this.currentZone].xstart)}});
Ui.Container.extend("Ui.SFlow",{uniform:!1,uniformWidth:void 0,uniformHeight:void 0,itemAlign:"left",stretchMaxRatio:1.3,spacing:0,constructor:function(a){},setContent:function(a){for(;void 0!==this.getFirstChild();)this.removeChild(this.getFirstChild());if(void 0!==a&&"object"===typeof a)if(a.constructor===Array)for(var b=0;b<a.length;b++)this.appendChild(a[b]);else this.appendChild(a)},getSpacing:function(){return this.spacing},setSpacing:function(a){this.spacing!=a&&(this.spacing=a,this.invalidateMeasure(),
this.invalidateArrange())},getItemAlign:function(){return this.itemAlign},setItemAlign:function(a){a!=this.itemAlign&&(this.itemAlign=a,this.invalidateMeasure(),this.invalidateArrange())},getUniform:function(){return this.uniform},setUniform:function(a){this.uniform!=a&&(this.uniform=a,this.invalidateMeasure())},getStretchMaxRatio:function(){return this.stretchMaxRatio},setStretchMaxRatio:function(a){this.stretchMaxRatio!=a&&(this.stretchMaxRatio=a,this.invalidateMeasure())},append:function(a,b){this.appendChild(a);
b&&Ui.SFlow.setFloat(a,b)},prepend:function(a,b){this.prependChild(a);b&&Ui.SFlow.setFloat(a,b)},insertAt:function(a,b,c){this.insertChildAt(a,b);c&&Ui.SFlow.setFloat(a,c)},moveAt:function(a,b){this.moveChildAt(a,b)},remove:function(a){this.removeChild(a)}},{measureCore:function(a,b){if(0===this.getChildren().length)return{width:0,height:0};if(this.uniform)for(var c=this.uniformHeight=this.uniformWidth=0;c<this.getChildren().length;c++){var d=this.getChildren()[c],d=d.measure(a,b);d.width>this.uniformWidth&&
(this.uniformWidth=d.width);d.height>this.uniformHeight&&(this.uniformHeight=d.height)}for(var e=new Ui.SFlowState({width:a,render:!1,spacing:this.spacing,align:this.itemAlign,uniform:this.uniform,uniformWidth:this.uniformWidth,uniformHeight:this.uniformHeight,stretchMaxRatio:this.stretchMaxRatio}),c=0;c<this.getChildren().length;c++)d=this.getChildren()[c],e.append(d);return e.getSize()},arrangeCore:function(a,b){for(var c=new Ui.SFlowState({width:a,render:!0,spacing:this.spacing,align:this.itemAlign,
uniform:this.uniform,uniformWidth:this.uniformWidth,uniformHeight:this.uniformHeight,stretchMaxRatio:this.stretchMaxRatio}),d=0;d<this.getChildren().length;d++){var e=this.getChildren()[d];c.append(e)}c.getSize()}},{getFloat:function(a){return a["Ui.SFlow.float"]?a["Ui.SFlow.float"]:"none"},setFloat:function(a,b){Ui.SFlow.getFloat(a)!=b&&(a["Ui.SFlow.float"]=b,a.invalidateMeasure())}});Ui.Container.extend("Ui.Grid",{cols:void 0,rows:void 0,constructor:function(a){this.cols=[{auto:!0,star:!1,absolute:!1,actualWidth:0,offset:0,width:0}];this.rows=[{auto:!0,star:!1,absolute:!1,actualHeight:0,offset:0,height:0}]},setCols:function(a){this.cols=[];a=a.split(",");for(var b=0;b<a.length;b++){var c=a[b];if("auto"==c)this.cols.push({auto:!0,star:!1,absolute:!1,actualWidth:0,offset:0,width:0});else if("*"==c)this.cols.push({auto:!1,star:!0,absolute:!1,actualWidth:0,offset:0,width:1});else if(c.match(/^[0-9]+\.?[0-9]*\*$/))this.cols.push({auto:!1,
star:!0,absolute:!1,actualWidth:0,offset:0,width:parseInt(c.slice(0,c.length-1))});else if(c.match(/^[0-9]+$/))this.cols.push({auto:!1,star:!1,absolute:!0,actualWidth:0,offset:0,width:parseInt(c)});else if(DEBUG)throw'Ui.Grid column definition "'+c+'" not supported';}this.invalidateMeasure()},setRows:function(a){this.rows=[];a=a.split(",");for(var b=0;b<a.length;b++){var c=a[b];if("auto"==c)this.rows.push({auto:!0,star:!1,absolute:!1,actualHeight:0,offset:0,height:0});else if("*"==c)this.rows.push({auto:!1,
star:!0,absolute:!1,actualHeight:0,offset:0,height:1});else if(c.match(/^[0-9]+\.?[0-9]*\*$/))this.rows.push({auto:!1,star:!0,absolute:!1,actualHeight:0,offset:0,height:parseInt(c.slice(0,c.length-1))});else if(c.match(/^[0-9]+$/))this.rows.push({auto:!1,star:!1,absolute:!0,actualHeight:0,offset:0,height:parseInt(c)});else if(DEBUG)throw'Ui.Grid row definition "'+c+'" not supported';}},setContent:function(a){for(;void 0!==this.getFirstChild();)this.removeChild(this.getFirstChild());if(void 0!==a&&
"object"===typeof a)if(a.constructor==Array)for(var b=0;b<a.length;b++)this.appendChild(a[b]);else this.appendChild(a)},attach:function(a,b,c,d,e){void 0===d&&(d=1);void 0===e&&(e=1);Ui.Grid.setCol(a,b);Ui.Grid.setRow(a,c);Ui.Grid.setColSpan(a,d);Ui.Grid.setRowSpan(a,e);this.appendChild(a)},detach:function(a){this.removeChild(a)},getColMin:function(a){var b,c,d,e=0;for(b=0;b<this.getChildren().length;b++){var f=this.getChildren()[b],g=Ui.Grid.getCol(f),h=Ui.Grid.getColSpan(f);if(1==h&&g==a)f.getMeasureWidth()>
e&&(e=f.getMeasureWidth());else if(g<=a&&g+h>a){var k=!0,m=!1,n=0;for(c=g;c<a;c++)if(d=this.cols[c],n+=d.actualWidth,d.star){m=!0;break}if(!m)for(c=a+1;c<g+h;c++){d=this.cols[c];if(d.star){m=!0;break}if(d.auto){k=!1;break}}!m&&k&&f.getMeasureWidth()-n>e&&(e=f.getMeasureWidth()-n)}}return e},getRowMin:function(a){var b,c,d,e=0;for(b=0;b<this.getChildren().length;b++){var f=this.getChildren()[b],g=Ui.Grid.getRow(f),h=Ui.Grid.getRowSpan(f);if(1==h&&g==a)f.getMeasureHeight()>e&&(e=f.getMeasureHeight());
else if(g<=a&&g+h>a){var k=!0,m=!1,n=0;for(c=g;c<a;c++)if(d=this.rows[c],n+=d.actualHeight,d.star){m=!0;break}if(!m)for(c=a+1;c<g+h;c++){d=this.rows[c];if(d.star){m=!0;break}if(d.auto){k=!1;break}}!m&&k&&f.getMeasureHeight()-n>e&&(e=f.getMeasureHeight()-n)}}return e}},{measureCore:function(a,b){var c,d,e,f,g,h;for(c=0;c<this.getChildren().length;c++){d=this.getChildren()[c];var k=a*Ui.Grid.getColSpan(d)/this.cols.length,m=b*Ui.Grid.getRowSpan(d)/this.rows.length;d.measure(k,m)}var n=d=0;for(c=k=0;c<
this.cols.length;c++)e=this.cols[c],e.offset=k,e.absolute?e.actualWidth+=e.width:e.star?(e.actualWidth=0,d+=e.width):e.auto&&(e.actualWidth=this.getColMin(c)),k+=e.actualWidth;m=0;0<d&&(m=(a-k)/d);for(c=k=0;c<this.cols.length;c++)e=this.cols[c],e.offset=k,e.star&&(e.actualWidth=m*e.width),k+=e.actualWidth;for(c=0;c<this.getChildren().length;c++){d=this.getChildren()[c];e=Ui.Grid.getCol(d);f=Ui.Grid.getColSpan(d);g=0;for(h=e;h<e+f;h++)g+=this.cols[h].actualWidth;d.measure(g,b)}for(c=k=0;c<this.cols.length;c++)e=
this.cols[c],e.offset=k,e.absolute?e.actualWidth=e.width:e.star?e.actualWidth=Math.max(this.getColMin(c),m*e.width):e.auto&&(e.actualWidth=this.getColMin(c)),k+=e.actualWidth;for(c=0;c<this.getChildren().length;c++){d=this.getChildren()[c];e=Ui.Grid.getCol(d);f=Ui.Grid.getColSpan(d);g=0;for(h=e;h<e+f;h++)g+=this.cols[h].actualWidth;d.measure(g,b)}for(c=d=0;c<this.rows.length;c++)e=this.rows[c],e.offset=d,e.absolute?e.actualHeight=e.height:e.star?(e.actualHeight=0,n+=e.height):e.auto&&(e.actualHeight=
this.getRowMin(c)),d+=e.actualHeight;m=0;0<n&&(m=(b-d)/n);for(c=d=0;c<this.rows.length;c++)e=this.rows[c],e.offset=d,e.star&&(e.actualHeight=m*e.height),d+=e.actualHeight;for(c=0;c<this.getChildren().length;c++){d=this.getChildren()[c];e=Ui.Grid.getCol(d);f=Ui.Grid.getColSpan(d);g=0;for(h=e;h<e+f;h++)g+=this.cols[h].actualWidth;e=Ui.Grid.getRow(d);n=Ui.Grid.getRowSpan(d);f=0;for(h=e;h<e+n;h++)f+=this.rows[h].actualHeight;d.measure(g,f)}for(c=d=0;c<this.rows.length;c++)e=this.rows[c],e.offset=d,e.absolute?
e.actualHeight=e.height:e.star?(n=this.getRowMin(c),e.actualHeight=Math.max(n,m*e.height)):e.auto&&(e.actualHeight=this.getRowMin(c)),d+=e.actualHeight;return{width:k,height:d}},arrangeCore:function(a,b){for(var c=0;c<this.getChildren().length;c++){for(var d=this.getChildren()[c],e=Ui.Grid.getCol(d),f=Ui.Grid.getColSpan(d),g=Ui.Grid.getRow(d),h=Ui.Grid.getRowSpan(d),k=this.cols[e].offset,m=this.rows[g].offset,n=0,l=0,p=e;p<e+f;p++)n+=this.cols[p].actualWidth;for(e=g;e<g+h;e++)l+=this.rows[e].actualHeight;
d.arrange(k,m,n,l)}}},{getCol:function(a){return void 0!==a["Ui.Grid.col"]?a["Ui.Grid.col"]:0},setCol:function(a,b){Ui.Grid.getCol(a)!=b&&(a["Ui.Grid.col"]=b,a.invalidateMeasure())},getRow:function(a){return void 0!==a["Ui.Grid.row"]?a["Ui.Grid.row"]:0},setRow:function(a,b){Ui.Grid.getRow(a)!==b&&(a["Ui.Grid.row"]=b,a.invalidateMeasure())},getColSpan:function(a){return void 0!==a["Ui.Grid.colSpan"]?a["Ui.Grid.colSpan"]:1},setColSpan:function(a,b){Ui.Grid.getColSpan(a)!==b&&(a["Ui.Grid.colSpan"]=b,
a.invalidateMeasure())},getRowSpan:function(a){return void 0!==a["Ui.Grid.rowSpan"]?a["Ui.Grid.rowSpan"]:1},setRowSpan:function(a,b){Ui.Grid.getRowSpan(a)!==b&&(a["Ui.Grid.rowSpan"]=b,a.invalidateMeasure())}});Ui.Container.extend("Ui.Fixed",{constructor:function(a){this.addEvents("resize")},setPosition:function(a,b,c){void 0!==b&&(a["Ui.Fixed.x"]=b);void 0!==c&&(a["Ui.Fixed.y"]=c);this.updateItemTransform(a)},setRelativePosition:function(a,b,c,d){void 0!==b&&(a["Ui.Fixed.relativeX"]=b);void 0!==c&&(a["Ui.Fixed.relativeY"]=c);a["Ui.Fixed.relativeAbsolute"]=!0===d;this.updateItemTransform(a)},append:function(a,b,c){a["Ui.Fixed.x"]=b;a["Ui.Fixed.y"]=c;this.appendChild(a)},remove:function(a){delete a["Ui.Fixed.x"];
delete a["Ui.Fixed.y"];delete a["Ui.Fixed.relativeX"];delete a["Ui.Fixed.relativeY"];delete a["Ui.Fixed.relativeAbsolute"];this.removeChild(a)},updateItemTransform:function(a){var b=0;void 0!==a["Ui.Fixed.x"]&&(b=a["Ui.Fixed.x"]);void 0!==a["Ui.Fixed.relativeX"]&&(b-=a["Ui.Fixed.relativeX"]*(!0===a["Ui.Fixed.relativeAbsolute"]?1:a.getMeasureWidth()));var c=0;void 0!==a["Ui.Fixed.y"]&&(c=a["Ui.Fixed.y"]);void 0!==a["Ui.Fixed.relativeY"]&&(c-=a["Ui.Fixed.relativeY"]*(!0===a["Ui.Fixed.relativeAbsolute"]?
1:a.getMeasureHeight()));a.setTransform(Ui.Matrix.createTranslate(b,c))}},{measureCore:function(a,b){for(var c=0;c<this.getChildren().length;c++)this.getChildren()[c].measure(a,b);return{width:0,height:0}},arrangeCore:function(a,b){this.fireEvent("resize",this,a,b);for(var c=0;c<this.getChildren().length;c++){var d=this.getChildren()[c];d.arrange(0,0,d.getMeasureWidth(),d.getMeasureHeight());this.updateItemTransform(d)}},onChildInvalidateMeasure:function(a,b){"remove"!==b&&(a.measure(this.getLayoutWidth(),
this.getLayoutHeight()),a.arrange(0,0,a.getMeasureWidth(),a.getMeasureHeight()),this.updateItemTransform(a))},onChildInvalidateArrange:function(a){a.arrange(0,0,a.getMeasureWidth(),a.getMeasureHeight());this.updateItemTransform(a)}});Ui.Container.extend("Ui.Fold",{headerBox:void 0,header:void 0,contentBox:void 0,content:void 0,background:void 0,offset:0,position:"bottom",isFolded:!0,over:!0,mode:"extend",clock:void 0,contentSize:0,animDuration:2,constructor:function(a){this.addEvents("fold","unfold","positionchange");this.headerBox=new Ui.LBox;this.appendChild(this.headerBox);this.contentBox=new Ui.LBox;this.appendChild(this.contentBox);this.contentBox.hide()},getIsFolded:function(){return this.isFolded},setIsFolded:function(a){this.isFolded!=
a&&((this.isFolded=a)?(this.setOffset(0),this.contentBox.hide(),this.fireEvent("fold",this)):(this.setOffset(1),this.contentBox.show(),this.fireEvent("unfold",this)))},fold:function(){this.isFolded||(this.isFolded=!0,this.startAnimation(),this.fireEvent("fold",this))},unfold:function(){this.isFolded&&(this.isFolded=!1,this.startAnimation(),this.fireEvent("unfold",this))},getOver:function(){return this.over},setOver:function(a){this.over!=a&&(this.over=a,this.stopAnimation(),this.setTransform(Ui.Matrix.createTranslate(0,
0)),this.invalidateMeasure())},getMode:function(){return this.mode},setMode:function(a){this.mode!=a&&(this.mode=a,this.stopAnimation(),this.invalidateMeasure())},getHeader:function(){return this.header},setHeader:function(a){a!==this.header&&(this.header=a,this.headerBox.setContent(this.header))},getContent:function(){return this.content},setContent:function(a){this.content!==a&&(this.content=a,this.contentBox.setContent(this.content))},getBackground:function(){return this.background},setBackground:function(a){this.background!==
a&&(void 0!==this.background&&this.removeChild(this.background),this.background=a,void 0!==this.background&&this.prependChild(this.background))},getPosition:function(){return this.position},setPosition:function(a){this.position!=a&&(this.position=a,this.fireEvent("positionchange",this,a),this.invalidateMeasure())},getOffset:function(){return this.offset},setOffset:function(a){this.offset!==a&&(this.offset=a,this.over?"right"===this.position?("slide"===this.mode?this.setTransform(Ui.Matrix.createTranslate(-this.offset*
this.contentSize,0)):this.setTransform(Ui.Matrix.createTranslate(0,0)),this.contentBox.setClipRectangle(0,0,Math.round(this.contentSize*this.offset),this.getLayoutHeight()),void 0!==this.background&&this.background.arrange(0,0,Math.round(this.headerBox.getMeasureWidth()+this.contentSize*this.offset),Math.round(this.getLayoutHeight()))):"left"===this.position?("slide"===this.mode?this.setTransform(Ui.Matrix.createTranslate(-this.contentSize+this.offset*this.contentSize,0)):this.setTransform(Ui.Matrix.createTranslate(-this.contentSize,
0)),this.contentBox.setClipRectangle(Math.round(this.contentSize*(1-this.offset)),0,this.contentSize,this.getLayoutHeight()),void 0!==this.background&&this.background.arrange(Math.round(this.contentSize*(1-this.offset)),0,Math.round(this.headerBox.getMeasureWidth()+this.contentSize*this.offset),Math.round(this.getLayoutHeight()))):"top"===this.position?("slide"===this.mode?this.setTransform(Ui.Matrix.createTranslate(0,-this.contentSize+this.offset*this.contentSize)):this.setTransform(Ui.Matrix.createTranslate(0,
-this.contentSize)),this.contentBox.setClipRectangle(0,Math.round(this.contentSize*(1-this.offset)),this.getLayoutWidth(),Math.round(this.contentSize*this.offset)),void 0!==this.background&&this.background.arrange(0,Math.round(this.contentSize*(1-this.offset)),this.getLayoutWidth(),Math.round(this.headerBox.getMeasureHeight()+this.contentSize*this.offset))):("slide"===this.mode?this.setTransform(Ui.Matrix.createTranslate(0,-this.offset*this.contentSize)):this.setTransform(Ui.Matrix.createTranslate(0,
0)),this.contentBox.setClipRectangle(0,0,this.getLayoutWidth(),Math.round(this.contentSize*this.offset)),void 0!==this.background&&this.background.arrange(0,0,this.getLayoutWidth(),Math.round(this.headerBox.getMeasureHeight()+this.contentSize*this.offset))):this.invalidateMeasure())},invert:function(){this.isFolded?this.unfold():this.fold()},setAnimDuration:function(a){this.animDuration=a},startAnimation:function(){void 0!==this.clock&&this.clock.stop();this.isFolded||this.contentBox.show();this.clock=
new Anim.Clock({duration:this.animDuration,target:this});this.connect(this.clock,"timeupdate",this.onClockTick);this.clock.begin()},stopAnimation:function(){void 0!==this.clock&&(this.clock.stop(),this.clock=void 0)},onClockTick:function(a,b){if(void 0===this.content)void 0!==this.clock&&(this.clock.stop(),this.clock=void 0);else{var c=this.getOffset();if(1<c)this.setOffset(1);else{var d;d=this.isFolded?0:1;this.setOffset(d-(d-c)*(1-b))}1==b&&this.isFolded&&this.contentBox.hide()}}},{measureCore:function(a,
b){void 0!==this.background&&this.background.measure(a,b);var c=this.headerBox.measure(a,b),d={width:0,height:0};"left"==this.position||"right"==this.position?(d=this.contentBox.measure(a-c.width,b),d.height>c.height&&(c.height=d.height),this.over||(c.width+=d.width*this.offset),this.contentSize=d.width):(d=this.contentBox.measure(a,b-c.height),d.width>c.width&&(c.width=d.width),this.over||(c.height+=d.height*this.offset),this.contentSize=d.height);return c},arrangeCore:function(a,b){"left"==this.position?
(this.over||this.setTransform(Ui.Matrix.createTranslate(-this.contentSize+this.offset*this.contentSize,0)),this.contentBox.arrange(0,0,this.contentBox.getMeasureWidth(),b),this.headerBox.arrange(this.contentBox.getMeasureWidth(),0,this.headerBox.getMeasureWidth(),b),void 0!==this.background&&this.background.arrange(Math.round(this.contentSize*(1-this.offset)),0,Math.round(this.headerBox.getMeasureWidth()+this.contentSize*this.offset),Math.round(b)),this.contentBox.setClipRectangle(Math.round(this.contentSize*
(1-this.offset)),0,Math.round(this.contentSize*this.offset),Math.round(b))):"right"==this.position?(this.headerBox.arrange(0,0,this.headerBox.getMeasureWidth(),b),this.contentBox.arrange(this.headerBox.getMeasureWidth(),0,this.contentBox.getMeasureWidth(),b),void 0!==this.background&&this.background.arrange(0,0,Math.round(this.headerBox.getMeasureWidth()+this.contentSize*this.offset),Math.round(b)),this.contentBox.setClipRectangle(0,0,Math.round(this.contentSize*this.offset),Math.round(b))):"top"==
this.position?(this.over||this.setTransform(Ui.Matrix.createTranslate(0,-this.contentSize+this.offset*this.contentSize)),this.contentBox.arrange(0,0,a,this.contentBox.getMeasureHeight()),this.headerBox.arrange(0,this.contentBox.getMeasureHeight(),a,this.headerBox.getMeasureHeight()),void 0!==this.background&&this.background.arrange(0,Math.round(this.contentSize*(1-this.offset)),a,Math.round(this.headerBox.getMeasureHeight()+this.contentSize*this.offset)),this.contentBox.setClipRectangle(0,Math.round(this.contentSize*
(1-this.offset)),Math.round(a),Math.round(this.contentSize*this.offset))):(this.headerBox.arrange(0,0,a,this.headerBox.getMeasureHeight()),this.contentBox.arrange(0,this.headerBox.getMeasureHeight(),a,this.contentBox.getMeasureHeight()),void 0!==this.background&&this.background.arrange(0,0,a,Math.round(this.headerBox.getMeasureHeight()+this.contentSize*this.offset)),this.contentBox.setClipRectangle(0,0,Math.round(a),Math.round(this.contentSize*this.offset)));this.setOffset(this.offset)}});Ui.Container.extend("Ui.Accordeonable",{current:-1,currentPage:void 0,clock:void 0,headersSize:0,contentSize:0,orientation:"horizontal",constructor:function(a){this.addEvents("change");this.setClipToBounds(!0)},getOrientation:function(){return this.orientation},setOrientation:function(a){if(this.orientation!=a){this.orientation=a;for(var b=0;b<this.getChildren().length;b++)this.getChildren()[b].setOrientation(a);this.invalidateMeasure()}},getPages:function(){return this.getChildren()},getCurrentPage:function(){return this.currentPage},
setCurrentPage:function(a){for(var b=0;b<this.getChildren().length;b++)if(this.getChildren()[b]==a){this.setCurrentPosition(b);break}},getCurrentPosition:function(){return this.current},setCurrentPosition:function(a){0===this.getChildren().length?(void 0!==this.currentPage&&this.currentPage.unselect(),this.currentPage=void 0,this.current=-1):(this.current=a,a=this.getChildren()[this.current],a!==this.currentPage&&(void 0!==this.currentPage&&this.currentPage.unselect(),this.currentPage=a,this.fireEvent("change",
this,this.currentPage,this.current),this.disconnect(this.currentPage,"select",this.onPageSelect),this.currentPage.select(),this.connect(this.currentPage,"select",this.onPageSelect)),void 0!==this.clock&&this.clock.stop(),this.clock=new Anim.Clock({duration:2,target:this}),this.connect(this.clock,"timeupdate",this.onClockTick),this.clock.begin())},appendPage:function(a){a=Ui.AccordeonPage.create(a);this.appendChild(a);a.setOffset(1);a.setOrientation(this.orientation);this.connect(a,"select",this.onPageSelect);
this.connect(a,"close",this.onPageClose);a.select()},removePage:function(a){for(var b=-1,c=0;c<this.getChildren().length;c++)if(this.getChildren()[c]==a){b=c;break}-1!==b&&(this.disconnect(a,"select",this.onPageSelect),this.disconnect(a,"close",this.onPageClose),this.removeChild(a),this.current===b&&0===this.current?this.setCurrentPosition(0):this.current>=b?this.setCurrentPosition(this.current-1):this.setCurrentPosition(this.current))},onClockTick:function(a,b){for(var c=0;c<this.getChildren().length;c++){var d=
this.getChildren()[c];c==this.current&&d.showContent();var e=d.getOffset();if(1<e)d.setOffset(1);else{var f;f=c<=this.current?0:1;d.setOffset(f-(f-e)*(1-b))}1==b&&c!=this.current&&d.hideContent()}},onPageSelect:function(a){this.setCurrentPage(a)},onPageClose:function(a){this.removePage(a)},measureHorizontal:function(a,b){var c,d,e=0,f=0,g=0;for(c=0;c<this.getChildren().length;c++)d=this.getChildren()[c],d.measure(a,b),e+=d.getHeader().getMeasureWidth(),d.getHeader().getMeasureHeight()>g&&(g=d.getHeader().getMeasureHeight());
for(c=0;c<this.getChildren().length;c++)d=this.getChildren()[c],d.measure(a-e+d.getHeader().getMeasureWidth(),b),d=d.getContent(),void 0!==d&&d.getMeasureWidth()>f&&(f=d.getMeasureWidth(),d.getMeasureHeight()>g&&(g=d.getMeasureHeight()));this.headersSize=e;return{width:e+f,height:g}},measureVertical:function(a,b){var c,d,e=0,f=0,g=0;for(c=0;c<this.getChildren().length;c++)d=this.getChildren()[c],d.measure(a,b),e+=d.getHeader().getMeasureHeight(),d.getHeader().getMeasureWidth()>g&&(g=d.getHeader().getMeasureWidth());
for(c=0;c<this.getChildren().length;c++)d=this.getChildren()[c],d.measure(a,b-e+d.getHeader().getMeasureHeight()),d=d.getContent(),void 0!==d&&d.getMeasureHeight()>f&&(f=d.getMeasureHeight(),d.getMeasureWidth()>g&&(g=d.getMeasureWidth()));this.headersSize=e;return{width:g,height:e+f}}},{measureCore:function(a,b){return"horizontal"==this.orientation?this.measureHorizontal(a,b):this.measureVertical(a,b)},arrangeCore:function(a,b){var c,d,e;if("horizontal"==this.orientation){e=0;this.contentSize=a-this.headersSize;
for(c=0;c<this.getChildren().length;c++)d=this.getChildren()[c],d.arrange(e,0,this.contentSize+d.getHeader().getMeasureWidth(),b),e+=d.getHeader().getMeasureWidth()}else{e=0;this.contentSize=b-this.headersSize;for(c=0;c<this.getChildren().length;c++)d=this.getChildren()[c],d.arrange(0,e,a,this.contentSize+d.getHeader().getMeasureHeight()),e+=d.getHeader().getMeasureHeight()}}});
Ui.Container.extend("Ui.AccordeonPage",{headerBox:void 0,header:void 0,content:void 0,offset:0,orientation:"horizontal",isSelected:!1,constructor:function(a){this.addEvents("select","unselect","close","orientationchange");this.headerBox=new Ui.Pressable;this.appendChild(this.headerBox);this.connect(this.headerBox,"press",this.onHeaderPress)},close:function(){this.fireEvent("close",this)},select:function(){this.isSelected||(this.isSelected=!0,this.fireEvent("select",this))},getIsSelected:function(){return this.isSelected},
getHeader:function(){return this.header},setHeader:function(a){a!==this.header&&(void 0!==this.header&&this.headerBox.removeChild(this.header),this.header=a,void 0!==this.header&&this.headerBox.appendChild(this.header))},getContent:function(){return this.content},setContent:function(a){this.content!==a&&(void 0!==this.content&&this.removeChild(this.content),this.content=a,void 0!==this.content&&this.appendChild(this.content,!0))},getOrientation:function(){return this.orientation},setOrientation:function(a){this.orientation!=
a&&(this.orientation=a,this.fireEvent("orientationchange",this,a),this.invalidateMeasure())},unselect:function(){this.isSelected&&(this.isSelected=!1,this.fireEvent("unselect",this))},showContent:function(){void 0!==this.content&&this.content.show()},hideContent:function(){void 0!==this.content&&this.content.hide()},getOffset:function(){return this.offset},setOffset:function(a){this.offset=a;"horizontal"==this.orientation?this.setTransform(Ui.Matrix.createTranslate(this.offset*(this.getLayoutWidth()-
this.headerBox.getMeasureWidth()),0)):this.setTransform(Ui.Matrix.createTranslate(0,this.offset*(this.getLayoutHeight()-this.headerBox.getMeasureHeight())))},onHeaderPress:function(){this.select()}},{measureCore:function(a,b){var c=this.headerBox.measure(a,b),d={width:0,height:0};void 0!==this.content&&("horizontal"==this.orientation?(d=this.content.measure(a-c.width,b),d.height>c.height&&(c.height=d.height),c.width+=d.width):(d=this.content.measure(a,b-c.height),d.width>c.width&&(c.width=d.width),
c.height+=d.height));return c},arrangeCore:function(a,b){"horizontal"==this.orientation?(this.headerBox.arrange(0,0,this.headerBox.getMeasureWidth(),b),void 0!==this.content&&this.content.arrange(this.headerBox.getMeasureWidth(),0,a-this.headerBox.getMeasureWidth(),b)):(this.headerBox.arrange(0,0,a,this.headerBox.getMeasureHeight()),void 0!==this.content&&this.content.arrange(0,this.headerBox.getMeasureHeight(),a,b-this.headerBox.getMeasureHeight()));this.setOffset(this.offset)}});Ui.Element.extend("Ui.Spacer",{constructor:function(a){}});Ui.CanvasElement.extend("Ui.Rectangle",{fill:void 0,radiusTopLeft:0,radiusTopRight:0,radiusBottomLeft:0,radiusBottomRight:0,constructor:function(a){this.fill=new Ui.Color({r:0,g:0,b:0})},getFill:function(){return this.fill},setFill:function(a){this.fill!==a&&("string"===typeof a&&(a=Ui.Color.create(a)),this.fill=a,this.invalidateDraw())},setRadius:function(a){this.setRadiusTopLeft(a);this.setRadiusTopRight(a);this.setRadiusBottomLeft(a);this.setRadiusBottomRight(a)},getRadiusTopLeft:function(){return this.radiusTopLeft},
setRadiusTopLeft:function(a){this.radiusTopLeft!=a&&(this.radiusTopLeft=a,this.invalidateDraw())},getRadiusTopRight:function(){return this.radiusTopRight},setRadiusTopRight:function(a){this.radiusTopRight!=a&&(this.radiusTopRight=a,this.invalidateDraw())},getRadiusBottomLeft:function(){return this.radiusBottomLeft},setRadiusBottomLeft:function(a){this.radiusBottomLeft!=a&&(this.radiusBottomLeft=a,this.invalidateDraw())},getRadiusBottomRight:function(){return this.radiusBottomRight},setRadiusBottomRight:function(a){this.radiusBottomRight!=
a&&(this.radiusBottomRight=a,this.invalidateDraw())}},{updateCanvas:function(a){var b=this.getLayoutWidth(),c=this.getLayoutHeight(),d=this.radiusTopLeft,e=this.radiusTopRight;d+e>b&&(d=b/2,e=b/2);var f=this.radiusBottomLeft,g=this.radiusBottomRight;f+g>b&&(f=b/2,g=b/2);d+f>c&&(d=c/2,f=c/2);e+g>c&&(e=c/2,g=c/2);a.beginPath();a.roundRect(0,0,b,c,d,e,g,f);a.closePath();Ui.Color.hasInstance(this.fill)?a.fillStyle=this.fill.getCssRgba():Ui.LinearGradient.hasInstance(this.fill)&&(a.fillStyle=this.fill.getCanvasGradient(a,
b,c));a.fill()}});Ui.CanvasElement.extend("Ui.Frame",{fill:void 0,radiusTopLeft:0,radiusTopRight:0,radiusBottomLeft:0,radiusBottomRight:0,frameWidth:10,constructor:function(a){this.fill=new Ui.Color({r:0,g:0,b:0})},getFrameWidth:function(){return this.frameWidth},setFrameWidth:function(a){a!=this.frameWidth&&(this.frameWidth=a,this.invalidateDraw())},getFill:function(){return this.fill},setFill:function(a){this.fill!=a&&("string"===typeof a&&(a=Ui.Color.create(a)),this.fill=a,this.invalidateDraw())},setRadius:function(a){this.setRadiusTopLeft(a);
this.setRadiusTopRight(a);this.setRadiusBottomLeft(a);this.setRadiusBottomRight(a)},getRadiusTopLeft:function(){return this.radiusTopLeft},setRadiusTopLeft:function(a){this.radiusTopLeft!=a&&(this.radiusTopLeft=a,this.invalidateDraw())},getRadiusTopRight:function(){return this.radiusTopRight},setRadiusTopRight:function(a){this.radiusTopRight!=a&&(this.radiusTopRight=a,this.invalidateDraw())},getRadiusBottomLeft:function(){return this.radiusBottomLeft},setRadiusBottomLeft:function(a){this.radiusBottomLeft!=
a&&(this.radiusBottomLeft=a,this.invalidateDraw())},getRadiusBottomRight:function(){return this.radiusBottomRight},setRadiusBottomRight:function(a){this.radiusBottomRight!=a&&(this.radiusBottomRight=a,this.invalidateDraw())}},{updateCanvas:function(a){var b=this.getLayoutWidth(),c=this.getLayoutHeight(),d=this.radiusTopLeft,e=this.radiusTopRight;d+e>b&&(d=b/2,e=b/2);var f=this.radiusBottomLeft,g=this.radiusBottomRight;f+g>b&&(f=b/2,g=b/2);d+f>c&&(d=c/2,f=c/2);e+g>c&&(e=c/2,g=c/2);a.beginPath();a.roundRect(0,
0,b,c,d,e,g,f);a.roundRect(this.frameWidth,this.frameWidth,b-2*this.frameWidth,c-2*this.frameWidth,Math.max(0,d-this.frameWidth),Math.max(0,e-this.frameWidth),Math.max(0,g-this.frameWidth),Math.max(0,f-this.frameWidth),!0);a.closePath();Ui.Color.hasInstance(this.fill)?a.fillStyle=this.fill.getCssRgba():Ui.LinearGradient.hasInstance(this.fill)&&(a.fillStyle=this.fill.getCanvasGradient(a,b,c));a.fill()}});Ui.CanvasElement.extend("Ui.Shadow",{radiusTopLeft:0,radiusTopRight:0,radiusBottomLeft:0,radiusBottomRight:0,shadowWidth:0,inner:!1,color:void 0,constructor:function(a){this.color=Ui.Color.create("black");this.setShadowWidth(4)},getColor:function(){return this.color},setColor:function(a){this.color!=a&&(this.color=Ui.Color.create(a),this.invalidateDraw())},getInner:function(){return this.inner},setInner:function(a){this.inner!=a&&(this.inner=a,this.invalidateDraw())},setShadowWidth:function(a){this.shadowWidth!=
a&&(this.shadowWidth=a,this.invalidateDraw())},getShadowWidth:function(){return this.shadowWidth},setRadius:function(a){this.radiusBottomRight=this.radiusBottomLeft=this.radiusTopRight=this.radiusTopLeft=a;this.invalidateDraw()},getRadiusTopLeft:function(){return this.radiusTopLeft},setRadiusTopLeft:function(a){this.radiusTopLeft!=a&&(this.radiusTopLeft=a,this.invalidateDraw())},getRadiusTopRight:function(){return this.radiusTopRight},setRadiusTopRight:function(a){this.radiusTopRight!=a&&(this.radiusTopRight=
a,this.invalidateDraw())},getRadiusBottomLeft:function(){return this.radiusBottomLeft},setRadiusBottomLeft:function(a){this.radiusBottomLeft!=a&&(this.radiusBottomLeft=a,this.invalidateDraw())},getRadiusBottomRight:function(){return this.radiusBottomRight},setRadiusBottomRight:function(a){this.radiusBottomRight!=a&&(this.radiusBottomRight=a,this.invalidateDraw())}},{updateCanvas:function(a){for(var b=this.getLayoutWidth(),c=this.getLayoutHeight(),d=0;d<this.shadowWidth;d++){var e=this.color.getRgba(),
f;this.inner?1==this.shadowWidth?f=1:(f=(d+1)/this.shadowWidth,f*=f):f=(d+1)/(this.shadowWidth+1);e=new Ui.Color({r:e.r,g:e.g,b:e.b,a:e.a*f});a.fillStyle=e.getCssRgba();this.inner?(a.beginPath(),a.roundRect(0,0,b,c,this.radiusTopLeft,this.radiusTopRight,this.radiusBottomRight,this.radiusBottomLeft),a.roundRect(this.shadowWidth-d,this.shadowWidth-d,b-2*(this.shadowWidth-d),c-2*(this.shadowWidth-d),this.radiusTopLeft,this.radiusTopRight,this.radiusBottomRight,this.radiusBottomLeft,!0)):(a.beginPath(),
a.roundRect(d,d,b-2*d,c-2*d,this.radiusTopLeft,this.radiusTopRight,this.radiusBottomRight,this.radiusBottomLeft));a.closePath();a.fill()}}});Ui.Shape.extend("Ui.Icon",{constructor:function(a){},setIcon:function(a){this.setPath(Ui.Icon.icons[a])}},{arrangeCore:function(a,b){Ui.Icon.base.arrangeCore.call(this,a,b);var c=Math.min(a,b)/48;this.setScale(c)}},{icons:{},constructor:function(){this.register("check","m 9.1916229,24 7.0000001,-7 7,7 14,-14 7,7 -21,21 z");this.register("home","M 25.78125 8.4375 C 25.324787 8.4375 24.892151 8.63045 24.53125 8.96875 C 24.53125 8.96875 6.032579 23.87715 5.6875 24.21875 C 4.081261 25.55365 4.524131 25.86215 4.96875 26.46875 C 7.1319435 26.472745 6.9387918 26.465628 8.875 26.46875 L 8.875 38.40625 C 8.875 40.46895 10.593558 42.1875 12.65625 42.1875 L 37.3125 42.1875 C 39.375192 42.1875 41.09375 40.46895 41.09375 38.40625 L 41.09375 26.5 C 42.834133 26.49218 44.96875 26.46875 44.96875 26.46875 C 45.304525 25.79985 45.215875 24.96585 44.65625 24.40625 L 39.96875 20.3125 C 40.040347 20.078087 40.09375 19.817094 40.09375 19.5625 L 40.09375 11.875 C 40.09375 10.4883 38.949133 9.34375 37.5625 9.34375 L 33.25 9.34375 C 31.863368 9.34375 30.71875 10.4883 30.71875 11.875 L 30.71875 12.1875 L 27.03125 8.96875 C 26.681485 8.61895 26.237713 8.4375 25.78125 8.4375 z M 33.71875 12.34375 L 37.09375 12.34375 L 37.09375 17.78125 L 33.71875 14.8125 L 33.71875 12.34375 z M 12.875 26.46875 C 23.518938 26.483067 32.947599 26.505366 37.09375 26.5 L 37.09375 38.1875 L 12.875 38.1875 L 12.875 26.46875 z");
this.register("search","M 16.5625 2.78125 C 9.268416 2.78125 3.3125 8.73725 3.3125 16.03125 C 3.3125 23.32535 9.268416 29.28125 16.5625 29.28125 C 19.232656 29.28125 21.727527 28.494751 23.8125 27.125 L 26.53125 29.84375 C 26.040794 31.243763 26.345911 32.877161 27.46875 34 L 36.96875 43.5 C 38.531721 45.062971 41.062029 45.062971 42.625 43.5 L 44.3125 41.8125 C 45.875471 40.249529 45.875471 37.750471 44.3125 36.1875 L 34.78125 26.65625 C 33.730308 25.605308 32.270922 25.293885 30.9375 25.65625 L 28 22.71875 C 29.155313 20.754051 29.8125 18.465809 29.8125 16.03125 C 29.8125 8.73725 23.856584 2.78125 16.5625 2.78125 z M 16.5625 6.78125 C 21.694823 6.78125 25.8125 10.89895 25.8125 16.03125 C 25.8125 21.16365 21.694823 25.28125 16.5625 25.28125 C 11.430177 25.28125 7.3125 21.16365 7.3125 16.03125 C 7.3125 10.89895 11.430177 6.78125 16.5625 6.78125 z");
this.register("close","m 9,4 -5,5 15,15 -15,15 5,5 15,-15 15,15 5,-5 -15,-15 15,-15 -5,-5 -15,15 -15,-15 z");this.register("backarrow","m 18.890625,7.8278 -16.125,16.1562 0,0.031 16.15625,16.1562 3.53125,-3.5312 -10.15625,-10.1563 32.9375,0 0,-5 -32.875,0 10.09375,-10.0937 z");this.register("arrowleft","m 30,4 5,5 -15,15 15,15 -5,5 -20,-20 z");this.register("arrowright","m 18,4 -5,5 15,15 -15,15 5,5 20,-20 z");this.register("arrowtop","m 44,31 -5,5 -15,-15 -15,15 -5,-5 20,-20 z");this.register("arrowbottom",
"m 4,16 5,-5 15,15 15,-15 5,5 -20,20 z");this.register("refresh","M 23.9375 8.65625 C 18.315047 8.5110846 12.782031 11.461344 9.78125 16.8125 C 5.4164779 24.596 8.033743 34.59995 15.59375 39.09375 C 23.153757 43.58765 32.885228 40.9086 37.25 33.125 L 33.3125 30.78125 C 30.176679 36.37325 23.306402 38.25985 17.875 35.03125 C 12.443598 31.80275 10.582928 24.7169 13.71875 19.125 C 16.854571 13.533 23.724848 11.6464 29.15625 14.875 C 31.524806 16.282891 33.334721 18.493178 34.21875 21.125 L 25.9375 18.5 L 24.78125 22.125 L 39.25 26.6875 L 43.8125 12.21875 L 40.1875 11.0625 L 37.9375 18.21875 C 36.578889 15.137923 34.328741 12.531134 31.4375 10.8125 C 29.074997 9.4081875 26.493161 8.7222343 23.9375 8.65625 z M 36.84375 21.78125 L 36.78125 21.9375 L 36.5 21.84375 L 36.84375 21.78125 z");
this.register("deny","M 24.375 4.5625 C 13.844791 4.5625 5.3125 13.094791 5.3125 23.625 C 5.3125 34.155209 13.844791 42.6875 24.375 42.6875 C 34.905209 42.6875 43.4375 34.155209 43.4375 23.625 C 43.4375 13.094791 34.905209 4.5625 24.375 4.5625 z M 12.875 20.46875 L 36.375 20.46875 L 36.375 27.8125 L 12.875 27.8125 L 12.875 20.46875 z");this.register("warning","M 24.71875 4.4375 C 23.303716 4.4375 21.840759 5.2267 20.8125 6.9375 L 4.21875 34.59375 C 2.3252709 37.74415 3.3675561 42.27165 7.125 42.28125 L 42.34375 42.375 C 46.101193 42.385 45.807964 37.35645 44 34.15625 L 28.625 6.9375 C 27.64318 5.1996 26.133784 4.4375 24.71875 4.4375 z M 22.15625 13.25 L 27.46875 13.25 L 27.46875 20.125 C 27.46874 22.170821 27.369577 24.007046 27.15625 25.6875 C 26.942909 27.343595 26.663738 29.000155 26.34375 30.65625 L 23.25 30.65625 C 22.929998 29.000155 22.682075 27.343595 22.46875 25.6875 C 22.255413 24.007046 22.156245 22.170821 22.15625 20.125 L 22.15625 13.25 z M 24.8125 32.96875 C 26.596301 32.96875 28.03125 34.403699 28.03125 36.1875 C 28.03125 37.971301 26.596301 39.40625 24.8125 39.40625 C 23.028699 39.40625 21.59375 37.971301 21.59375 36.1875 C 21.59375 34.403699 23.028699 32.96875 24.8125 32.96875 z");
this.register("trash","m 22.83704,5 c -2.219688,0 -4.069448,1.8498 -4.069448,4.0695 l 0,0.7683 -10.3016789,0 c -2.4744975,0 -4.5247706,2.0503 -4.5247706,4.5248 l 0,1.1383 c 0,2.4745 2.0502731,4.5248 4.5247706,4.5248 l 1.1098496,0 0,18.3552 c 0,2.5298 2.2334483,4.6101 4.9231783,4.6101 l 18.042167,0 c 2.68973,0 4.923178,-2.0803 4.923178,-4.6101 l 0,-18.3552 2.162783,0 c 2.474498,0 4.524771,-2.0503 4.524771,-4.5248 l 0,-1.1383 c 0,-2.4745 -2.050273,-4.5248 -4.524771,-4.5248 l -9.504864,0 0,-0.7683 c 0,-2.2197 -1.849759,-4.0695 -4.069447,-4.0695 l -3.215718,0 z m 0.512238,2.8743 1.96358,0 c 1.045729,0 1.906664,0.8325 1.906664,1.8782 l 0,3.6995 c 3.933365,0.01 7.770635,0.028 12.407547,0.028 0.519514,0 0.882188,0.3627 0.882188,0.8822 l 0,1.1383 c 0,0.5196 -0.362674,0.8822 -0.882188,0.8822 -2.402264,0.1282 -4.712702,0.1729 -5.037008,0.2846 l 0,21.0586 c 0,1.5373 -1.22319,2.7889 -2.760395,2.7889 l -16.53391,0 c -1.537205,0 -2.782608,-1.2516 -2.788852,-2.7889 l -0.08537,-21.2294 c -3.1146968,-0.069 -0.416025,0.056 -3.9556179,-0.1138 -0.5195134,0 -0.882188,-0.3626 -0.882188,-0.8822 l 0,-1.1383 c 0,-0.5195 0.3626746,-0.8822 0.882188,-0.8822 5.0671389,-0.025 9.0192139,-0.032 13.0051589,-0.028 l 0,-3.6995 c 0,-1.0457 0.832477,-1.8782 1.878206,-1.8782 z m -5.890739,14.1434 c -0.573322,0 -1.024476,0.4796 -1.024476,1.053 l 0,13.3751 c 0,0.5733 0.451154,1.0245 1.024476,1.0245 l 0.825273,0 c 0.573322,0 1.052934,-0.4512 1.052934,-1.0245 l 0,-13.3751 c 0,-0.5734 -0.479612,-1.053 -1.052934,-1.053 l -0.825273,0 z m 5.463874,0 c -0.573322,0 -1.024476,0.4796 -1.024476,1.053 l 0,13.3751 c 0,0.5733 0.451154,1.0245 1.024476,1.0245 l 0.825273,0 c 0.573321,0 1.052934,-0.4512 1.052934,-1.0245 l 0,-13.3751 c 0,-0.5734 -0.479613,-1.053 -1.052934,-1.053 l -0.825273,0 z m 5.463874,0 c -0.573322,0 -1.024476,0.4796 -1.024476,1.053 l 0,13.3751 c 0,0.5733 0.451154,1.0245 1.024476,1.0245 l 0.825273,0 c 0.573321,0 1.052934,-0.4512 1.052934,-1.0245 l 0,-13.3751 c 0,-0.5734 -0.479613,-1.053 -1.052934,-1.053 l -0.825273,0 z");
this.register("new","M 10.15625 5.65625 L 10.15625 9.65625 L 6.15625 9.65625 L 6.15625 13.65625 L 10.15625 13.65625 L 10.15625 17.65625 L 14.15625 17.65625 L 14.15625 13.65625 L 18.15625 13.65625 L 18.15625 9.65625 L 14.15625 9.65625 L 14.15625 5.65625 L 10.15625 5.65625 z M 22.15625 9.65625 L 22.15625 13.65625 L 35.28125 13.65625 C 35.991645 13.65625 36.5 14.1645 36.5 14.875 L 36.5 36.28125 C 36.5 36.99165 35.991645 37.5 35.28125 37.5 L 15.375 37.5 C 14.664605 37.5 14.15625 36.99165 14.15625 36.28125 L 14.15625 21.78125 L 10.15625 21.78125 L 10.15625 36.28125 C 10.15625 39.13855 12.517793 41.5 15.375 41.5 L 35.28125 41.5 C 38.138457 41.5 40.5 39.13855 40.5 36.28125 L 40.5 14.875 C 40.5 12.0177 38.138457 9.65625 35.28125 9.65625 L 22.15625 9.65625 z");
this.register("star","m 23.757651,5 c -0.895163,0.015 -1.74266,0.4185 -2.31531,0.9115 -0.572649,0.493 -0.946681,1.0773 -1.269993,1.663 -0.646625,1.1715 -1.083333,2.481 -1.483178,3.7912 -0.399846,1.3103 -0.765223,2.611 -1.141013,3.6092 -0.375791,0.9982 -0.863354,1.6089 -0.826872,1.5814 0.03648,-0.027 -0.685072,0.2726 -1.748242,0.3583 -1.06317,0.086 -2.414188,0.078 -3.783891,0.1006 -1.3697035,0.023 -2.7488538,0.081 -4.0533165,0.3792 -0.6522312,0.1491 -1.3169807,0.3473 -1.9488982,0.7617 -0.6319175,0.4143 -1.2532513,1.1176 -1.515172,1.9737 -0.2619206,0.8562 -0.1215574,1.7731 0.1703706,2.47 0.2919279,0.697 0.7110554,1.2299 1.168227,1.7184 0.9143429,0.977 2.0261479,1.7874 3.1486997,2.5726 1.1225519,0.7851 2.2542114,1.524 3.0874544,2.1899 0.833242,0.6658 1.270874,1.3422 1.256012,1.299 -0.01486,-0.043 0.0533,0.7481 -0.193748,1.7857 -0.247047,1.0376 -0.682895,2.3074 -1.084578,3.6171 -0.401682,1.3097 -0.782999,2.6265 -0.902518,3.9592 -0.05976,0.6664 -0.06144,1.3623 0.137342,2.0913 0.198782,0.729 0.677406,1.5266 1.410693,2.0402 0.733287,0.5137 1.633944,0.686 2.387015,0.6237 0.753071,-0.062 1.403865,-0.2966 2.009725,-0.5804 1.21172,-0.5677 2.294997,-1.3744 3.388618,-2.1994 1.093621,-0.825 2.163213,-1.6885 3.053976,-2.2752 0.890762,-0.5867 1.655952,-0.8101 1.610285,-0.8093 -0.04567,8e-4 0.735345,0.2228 1.645831,0.7784 0.910486,0.5555 2.002164,1.3506 3.123614,2.1374 1.121449,0.7867 2.247516,1.5467 3.478111,2.0722 0.615298,0.2627 1.273355,0.4794 2.028127,0.5156 0.754772,0.036 1.657048,-0.1634 2.372165,-0.7021 0.715116,-0.5387 1.156065,-1.3508 1.329561,-2.0863 0.173495,-0.7354 0.146882,-1.4277 0.06415,-2.0916 -0.165459,-1.3279 -0.585097,-2.6199 -1.031754,-3.915 -0.446657,-1.295 -0.909557,-2.5637 -1.192279,-3.5922 -0.282722,-1.0284 -0.280534,-1.8404 -0.293896,-1.7967 -0.01336,0.044 0.412582,-0.6301 1.22234,-1.3244 0.809758,-0.6942 1.934952,-1.4839 3.029729,-2.3074 1.094777,-0.8234 2.169097,-1.642 3.049166,-2.6499 0.440034,-0.504 0.844908,-1.0649 1.112601,-1.7715 0.267692,-0.7066 0.350663,-1.6199 0.05934,-2.4664 -0.291321,-0.8466 -0.925793,-1.5268 -1.571637,-1.919 -0.645845,-0.3923 -1.315122,-0.5827 -1.972111,-0.7092 -1.313979,-0.253 -2.684905,-0.2499 -4.054575,-0.2253 -1.36967,0.025 -2.710455,0.093 -3.775949,0.044 -1.065494,-0.049 -1.807185,-0.3328 -1.769776,-0.3066 0.03741,0.026 -0.491907,-0.5811 -0.901934,-1.5658 -0.410028,-0.9846 -0.807845,-2.2763 -1.252686,-3.5719 -0.444841,-1.2957 -0.916948,-2.588 -1.603632,-3.7364 -0.343341,-0.5743 -0.739843,-1.1242 -1.329171,-1.5972 -0.589329,-0.4729 -1.431866,-0.8609 -2.327028,-0.8454 z m 0.04936,4.3522 c 0.05431,0.074 0.08677,0.06 0.149451,0.1649 0.375374,0.6278 0.800845,1.7333 1.223209,2.9635 0.422363,1.2302 0.846512,2.5796 1.362005,3.8175 0.515492,1.2379 1.017518,2.4514 2.291932,3.3441 1.274414,0.8927 2.575612,0.9499 3.915164,1.0114 1.339553,0.062 2.761636,-0.01 4.062098,-0.033 1.300462,-0.023 2.481817,0.024 3.2001,0.1626 0.109478,0.021 0.11064,0.032 0.193553,0.056 -0.05034,0.069 -0.03632,0.075 -0.10848,0.1574 -0.481088,0.551 -1.414422,1.3188 -2.453881,2.1007 -1.039458,0.7818 -2.180578,1.6122 -3.198616,2.485 -1.018038,0.8728 -2.008492,1.7049 -2.463696,3.1928 -0.455204,1.4879 -0.117336,2.7405 0.238105,4.0335 0.355441,1.293 0.845322,2.6325 1.269409,3.8621 0.424088,1.2295 0.770322,2.3592 0.860769,3.0851 0.01369,0.1099 -0.0028,0.1157 4.2e-4,0.2015 -0.08154,-0.027 -0.09172,-0.013 -0.193553,-0.056 -0.672702,-0.2873 -1.662942,-0.9319 -2.727726,-1.6789 -1.064785,-0.7469 -2.217014,-1.5875 -3.361689,-2.286 -1.144675,-0.6985 -2.25533,-1.3689 -3.811076,-1.3421 -1.555745,0.027 -2.628887,0.7492 -3.748765,1.4868 -1.119878,0.7376 -2.232995,1.6052 -3.271356,2.3885 -1.038361,0.7833 -2.033963,1.4685 -2.696346,1.7788 -0.09936,0.046 -0.101178,0.031 -0.18122,0.061 1.62e-4,-0.086 -0.01038,-0.09 -4.2e-4,-0.2015 0.06534,-0.7285 0.345562,-1.8772 0.726948,-3.1207 0.381386,-1.2435 0.841916,-2.5908 1.152507,-3.8953 0.310591,-1.3045 0.61475,-2.5709 0.10845,-4.0422 -0.5063,-1.4713 -1.534069,-2.2887 -2.581632,-3.1259 -1.047564,-0.8371 -2.227509,-1.6172 -3.29334,-2.3627 -1.0658309,-0.7455 -2.0109424,-1.4596 -2.5107659,-1.9936 -0.083457,-0.089 -0.06133,-0.1166 -0.1172617,-0.1892 0.080022,-0.026 0.076516,-0.037 0.18122,-0.061 0.7130816,-0.163 1.9269849,-0.2149 3.2274786,-0.2365 1.300494,-0.022 2.709163,-0.014 4.045793,-0.1212 1.336631,-0.1077 2.631554,-0.2164 3.874389,-1.1526 1.242836,-0.9362 1.70468,-2.1508 2.177128,-3.4058 0.472448,-1.255 0.853548,-2.6111 1.233189,-3.8552 0.379642,-1.244 0.76455,-2.3964 1.118026,-3.0368 0.0519,-0.094 0.06183,-0.087 0.10848,-0.1574 z");
this.register("exit","m 20.089945,9 0,21.7148 -1.697743,0 -2.29084,3.9589 0,1.3567 3.988583,0 0,6.4425 24.398557,0 -0.04449,-18.0228 -6.22011,0 -3.143419,-3.1434 -2.86911,4.9672 7.517512,13.026 -2.921005,0 -6.479593,-11.2319 -1.186195,0 -1.779294,6.6502 -9.756458,0 1.623605,-2.8024 5.819772,0 1.386367,-5.1896 3.640137,-6.2943 -4.574267,0 -1.586536,2.7505 -1.749639,-1.0157 2.483597,-4.2999 10.171627,0 3.721689,3.7291 5.849424,0 0.04449,0.01 -0.02966,-12.6033 -24.317006,0 z m 15.123992,1.6903 c 1.497414,0 2.70601,1.216 2.70601,2.7134 0,1.4974 -1.208596,2.7134 -2.70601,2.7134 -1.497413,0 -2.713422,-1.216 -2.713422,-2.7134 0,-1.4974 1.216009,-2.7134 2.713422,-2.7134 z m -25.7256143,6.0051 0,4.7967 -6.4721792,0.1186 0,5.0265 6.3535598,0 0,5.1526 7.6064777,-7.6065 -7.4878583,-7.4879 z");
this.register("loading","M 24 2.5 C 22.08477 2.5 20.5 4.0848 20.5 6 C 20.5 7.9152 22.08477 9.5 24 9.5 C 25.91523 9.5 27.5 7.9152 27.5 6 C 27.5 4.0848 25.91523 2.5 24 2.5 z M 11.28125 7.78125 C 10.382381 7.78125 9.4896359 8.1354 8.8125 8.8125 C 7.4582279 10.1668 7.4582281 12.3957 8.8125 13.75 C 10.166772 15.1043 12.395728 15.1043 13.75 13.75 C 15.104272 12.3957 15.104272 10.1668 13.75 8.8125 C 13.072864 8.1354 12.180119 7.78125 11.28125 7.78125 z M 36.71875 7.78125 C 35.819881 7.78125 34.927136 8.1354 34.25 8.8125 C 32.895728 10.1668 32.895728 12.3957 34.25 13.75 C 35.604272 15.1043 37.833228 15.1043 39.1875 13.75 C 40.541772 12.3957 40.541772 10.1668 39.1875 8.8125 C 38.510364 8.1354 37.617619 7.78125 36.71875 7.78125 z M 6 20.5 C 4.08477 20.5 2.5 22.0848 2.5 24 C 2.5 25.9152 4.08477 27.5 6 27.5 C 7.91523 27.5 9.5 25.9152 9.5 24 C 9.5 22.0848 7.91523 20.5 6 20.5 z M 42 20.5 C 40.08477 20.5 38.5 22.0848 38.5 24 C 38.5 25.9152 40.08477 27.5 42 27.5 C 43.91523 27.5 45.5 25.9152 45.5 24 C 45.5 22.0848 43.91523 20.5 42 20.5 z M 11.28125 33.25 C 10.382381 33.25 9.4896359 33.5729 8.8125 34.25 C 7.4582279 35.6043 7.4582281 37.8332 8.8125 39.1875 C 10.166772 40.5418 12.395728 40.5418 13.75 39.1875 C 15.104272 37.8332 15.104272 35.6043 13.75 34.25 C 13.072864 33.5729 12.180119 33.25 11.28125 33.25 z M 36.71875 33.25 C 35.819881 33.25 34.927136 33.5729 34.25 34.25 C 32.895728 35.6043 32.895728 37.8332 34.25 39.1875 C 35.604272 40.5418 37.833228 40.5418 39.1875 39.1875 C 40.541772 37.8332 40.541772 35.6043 39.1875 34.25 C 38.510364 33.5729 37.617619 33.25 36.71875 33.25 z M 24 38.5 C 22.08477 38.5 20.5 40.0848 20.5 42 C 20.5 43.9152 22.08477 45.5 24 45.5 C 25.91523 45.5 27.5 43.9152 27.5 42 C 27.5 40.0848 25.91523 38.5 24 38.5 z");
this.register("edit","m 8.9095805,3.1557733 -4.59375,4.59375 L 16.28125,20.09375 23.890625,23.064732 20.875,15.5 z M 19.517767,9.65625 l 4.027443,4 11.73604,0 c 0.710395,0 1.21875,0.50825 1.21875,1.21875 l 0,21.40625 C 36.5,36.99165 35.991645,37.5 35.28125,37.5 l -19.90625,0 c -0.710395,0 -1.21875,-0.50835 -1.21875,-1.21875 l 0,-14.5 -4,-4.15625 0,18.65625 c 0,2.8573 2.361543,5.21875 5.21875,5.21875 l 19.90625,0 C 38.138457,41.5 40.5,39.13855 40.5,36.28125 l 0,-21.40625 c 0,-2.8573 -2.361543,-5.21875 -5.21875,-5.21875 z");
this.register("upload","M 21.0625 5.90625 L 21.0625 19.25 L 17.75 15.90625 L 14.40625 19.25 L 24.40625 29.25 L 34.40625 19.25 L 31.0625 15.90625 L 27.75 19.25 L 27.75 5.90625 L 21.0625 5.90625 z M 6.96875 29.25 L 6.96875 39.25 L 41.96875 39.25 L 41.96875 29.25 L 36.96875 29.25 L 36.96875 34.25 L 11.96875 34.25 L 11.96875 29.25 L 6.96875 29.25 z");this.register("lock","m 18,5.3622 c -2.735406,0 -5,2.2646 -5,5 l 0,10 -1,0 c -1.662,0 -3,1.338 -3,3 l 0,17.0938 c 0,1.662 1.338,3 3,3 l 23.90625,0 c 1.662,0 3,-1.338 3,-3 l 0,-17.0938 c 0,-1.662 -1.338,-3 -3,-3 l -0.90625,0 0,-10 c 0,-2.7354 -2.264594,-5 -5,-5 l -12,0 z m 0,4 12,0 c 0.588594,0 1,0.4114 1,1 l 0,10 -14,0 0,-10 c 0,-0.5886 0.411406,-1 1,-1 z m 6.21875,15.2188 c 2.08518,0 3.78125,1.696 3.78125,3.7812 0,1.2414 -0.606288,2.3119 -1.53125,3 l 2.375,7.0625 -8.40625,0 2.21875,-6.625 c -1.299069,-0.5968 -2.21875,-1.9143 -2.21875,-3.4375 0,-2.0852 1.696069,-3.7812 3.78125,-3.7812 z");
this.register("savecloud","M 21.9375 3.8125 L 21.9375 17.1875 L 18.625 13.8125 L 15.28125 17.1875 L 25.28125 27.1875 L 35.28125 17.1875 L 31.9375 13.8125 L 28.625 17.1875 L 28.625 3.8125 L 21.9375 3.8125 z M 15.1875 20.28125 C 13.209285 21.36075 11.604359 23.011 10.59375 25.0625 C 6.8454548 26.2652 4.09375 29.6762 4.09375 33.8125 C 4.09375 38.9391 8.2797172 43.125 13.40625 43.125 C 20.743081 43.095 27.938701 43.03125 35.28125 43.03125 C 39.54139 43.03125 43.03125 39.54135 43.03125 35.28125 C 43.03125 31.64315 40.426505 28.72105 37.03125 27.90625 C 36.146814 25.82585 34.408457 24.2103 32.25 23.5625 L 28.15625 27.6875 L 29.09375 27.40625 C 29.429018 27.30195 29.779124 27.25 30.15625 27.25 C 31.886675 27.25 33.262207 28.4157 33.625 30 L 33.96875 31.46875 L 35.46875 31.5625 C 37.488443 31.6695 39.03125 33.23065 39.03125 35.28125 C 39.03125 37.40205 37.40213 39.03125 35.28125 39.03125 C 27.926002 39.03125 20.719684 39.095 13.40625 39.125 C 13.39551 39.125 13.38572 39.1251 13.375 39.125 C 10.404867 39.108 8.09375 36.7874 8.09375 33.8125 C 8.09375 31.1963 9.8983864 29.1112 12.34375 28.625 L 13.4375 28.40625 L 13.8125 27.375 C 14.559974 25.4264 16.147884 23.91675 18.125 23.21875 L 15.1875 20.28125 z");
this.register("calendar","M 14.1875 5.5625 C 13.0795 5.5625 12.1875 6.4545 12.1875 7.5625 L 12.1875 10.5625 C 12.1875 11.6705 13.0795 12.5625 14.1875 12.5625 C 15.2955 12.5625 16.1875 11.6705 16.1875 10.5625 L 16.1875 7.5625 C 16.1875 6.4545 15.2955 5.5625 14.1875 5.5625 z M 34.1875 5.5625 C 33.0795 5.5625 32.1875 6.4545 32.1875 7.5625 L 32.1875 10.5625 C 32.1875 11.6705 33.0795 12.5625 34.1875 12.5625 C 35.2955 12.5625 36.1875 11.6705 36.1875 10.5625 L 36.1875 7.5625 C 36.1875 6.4545 35.2955 5.5625 34.1875 5.5625 z M 7.1875 7.5625 C 5.5255 7.5625 4.1875 8.9005 4.1875 10.5625 L 4.1875 39.5625 C 4.1875 41.2245 5.5255 42.5625 7.1875 42.5625 L 41.1875 42.5625 C 42.8495 42.5625 44.1875 41.2245 44.1875 39.5625 L 44.1875 10.5625 C 44.1875 8.9005 42.8495 7.5625 41.1875 7.5625 L 37.1875 7.5625 L 37.1875 10.5625 C 37.1875 12.2245 35.8495 13.5625 34.1875 13.5625 C 32.5255 13.5625 31.1875 12.2245 31.1875 10.5625 L 31.1875 7.5625 L 17.1875 7.5625 L 17.1875 10.5625 C 17.1875 12.2245 15.8495 13.5625 14.1875 13.5625 C 12.5255 13.5625 11.1875 12.2245 11.1875 10.5625 L 11.1875 7.5625 L 7.1875 7.5625 z M 10.8125 16 L 37.3125 16 C 39.184739 16 40.71875 17.53405 40.71875 19.40625 L 40.71875 36.125 C 40.71875 37.9972 39.184739 39.53125 37.3125 39.53125 L 10.8125 39.53125 C 8.9402615 39.53125 7.40625 37.9972 7.40625 36.125 L 7.40625 19.40625 C 7.40625 17.53405 8.9402615 16 10.8125 16 z M 10.8125 18 C 10.013667 18 9.40625 18.60745 9.40625 19.40625 L 9.40625 22.71875 L 17.5 22.71875 L 17.5 18 L 10.8125 18 z M 20 18 L 20 22.71875 L 28.3125 22.71875 L 28.3125 18 L 20 18 z M 30.8125 18 L 30.8125 22.71875 L 38.71875 22.71875 L 38.71875 19.40625 C 38.71875 18.60745 38.111333 18 37.3125 18 L 30.8125 18 z M 9.40625 25.40625 L 9.40625 30.15625 L 17.5 30.15625 L 17.5 25.40625 L 9.40625 25.40625 z M 20 25.40625 L 20 30.15625 L 28.3125 30.15625 L 28.3125 25.40625 L 20 25.40625 z M 30.8125 25.40625 L 30.8125 30.15625 L 38.71875 30.15625 L 38.71875 25.40625 L 30.8125 25.40625 z M 9.40625 32.8125 L 9.40625 36.125 C 9.40625 36.9238 10.013667 37.53125 10.8125 37.53125 L 17.5 37.53125 L 17.5 32.8125 L 9.40625 32.8125 z M 20 32.8125 L 20 37.53125 L 28.3125 37.53125 L 28.3125 32.8125 L 20 32.8125 z M 30.8125 32.8125 L 30.8125 37.53125 L 37.3125 37.53125 C 38.111333 37.53125 38.71875 36.9238 38.71875 36.125 L 38.71875 32.8125 L 30.8125 32.8125 z");
this.register("phone","m 40.384499,14.35 c -1.119892,-3.9826 -6.075567,-6.426 -9.848629,-4.5362 -4.937864,1.8134 -9.401496,4.7793 -13.051821,8.5578 -2.728309,2.8266 -5.416044,5.8169 -7.164639,9.3668 -1.9606824,4.1618 -2.6965691,9.234 -0.7883623,13.5432 0.8953303,1.7539 2.2878593,3.5559 4.3483553,3.9039 1.538971,0.022 3.047187,-3.1414 4.749325,-5.6577 1.159581,-1.9264 1.891977,-3.1072 0.219874,-4.4568 -1.532716,-1.0108 -3.627001,-2.4014 -3.109132,-4.5295 0.895495,-3.426 3.681076,-5.8349 5.893522,-8.4361 1.553362,-1.6278 3.28975,-3.3638 5.537441,-3.9042 2.196492,0.034 2.908148,3.5456 5.280678,2.8274 2.909013,-1.2741 4.150319,-1.5616 6.601629,-2.6387 2.101818,-0.6214 2.154604,-2.3569 1.331759,-4.0399 z");
this.register("mail","m 3.9898475,12.1511 19.9999995,13.4062 20,-13.4062 -39.9999995,0 z m 0,0.9375 0,24.7812 15.4687495,-12.375 -15.4687495,-12.4062 z m 39.9999995,0 -15.46875,12.4062 15.46875,12.375 0,-24.7812 z m -23.8125,12.9687 -16.1874995,12.0938 0,0.062 39.9999995,0 0,-0.062 -16.21875,-12.0625 -3.78125,3.0312 -3.8125,-3.0625 z");this.register("plus","m 18.928571,4.4336 0,15 -14.9999996,0 0,10 14.9999996,0 0,15 10,0 0,-15 15,0 0,-10 -15,0 0,-15 z");this.register("eye","M 24.15625 10.40625 C 11.735751 10.40625 2.0024346 23.625025 1.59375 24.1875 L 0.90625 25.125 L 1.59375 26.09375 C 2.0024345 26.656226 11.735751 39.875 24.15625 39.875 C 36.576276 39.875 46.31054 26.655751 46.71875 26.09375 L 47.4375 25.125 L 46.71875 24.1875 C 46.31054 23.625025 36.576276 10.40625 24.15625 10.40625 z M 24.15625 13.6875 C 33.120256 13.6875 40.944331 22.21152 43.34375 25.125 C 40.948128 28.038954 33.140667 36.59375 24.15625 36.59375 C 15.193194 36.59375 7.3984708 28.038005 5 25.125 C 7.3946735 22.210571 15.171835 13.6875 24.15625 13.6875 z M 24.8125 15.1875 C 19.396945 15.1875 15 19.557753 15 24.9375 C 15 30.318383 19.396945 34.6875 24.8125 34.6875 C 30.229761 34.6875 34.625 30.318383 34.625 24.9375 C 34.625 23.144819 34.101438 21.474944 33.25 20.03125 C 33.134618 22.135405 31.391099 23.8125 29.25 23.8125 C 27.035579 23.8125 25.25 22.01328 25.25 19.8125 C 25.25 17.87204 26.649913 16.261489 28.5 15.90625 C 27.361528 15.448132 26.115803 15.1875 24.8125 15.1875 z");
this.register("map","M 32 5 L 16 13 L 16 45 L 32 37 L 32 5 z M 35 5 L 35 37 L 47 45 L 47 13 L 35 5 z M 1 6 L 1 38 L 13 45 L 13 13 L 1 6 z M 24.625 12.625 L 26.3125 14.3125 L 28 12.625 L 29.6875 14.3125 L 28 16 L 29.6875 17.6875 L 28 19.375 L 26.3125 17.6875 L 24.625 19.375 L 22.9375 17.6875 L 24.625 16 L 22.9375 14.3125 L 24.625 12.625 z");this.register("sortarrow","m 24,5.5 -20.5,35 6,4 14.5,-25 14,25 6.5,-4 z");this.register("dragcopy","M 24,0.15625 C 10.824064,0.15625 0.15625,10.824064 0.15625,24 0.15625,37.175937 10.824064,47.84375 24,47.84375 37.175936,47.84375 47.84375,37.175937 47.84375,24 47.84375,10.824064 37.175936,0.15625 24,0.15625 z m -4.46875,5.90625 8.9375,0 0,13.46875 13.46875,0 0,8.9375 -13.46875,0 0,13.46875 -8.9375,0 0,-13.611607 -13.46875,0.142857 0,-8.9375 13.46875,0 z");
this.register("dragmove","M 24 0.15625 C 10.824064 0.15625 0.15625 10.824064 0.15625 24 C 0.15625 37.175936 10.824064 47.84375 24 47.84375 C 37.175936 47.84375 47.84375 37.175936 47.84375 24 C 47.84375 10.824064 37.175936 0.15625 24 0.15625 z M 26.59375 8.59375 L 42 24 L 26.59375 39.40625 L 21.40625 34.25 L 26.59375 29.15625 L 6 29.15625 L 6 18.75 L 26.59375 18.84375 L 21.40625 13.75 L 26.59375 8.59375 z");this.register("draglink","M 24 0.15625 C 10.824064 0.15625 0.15625 10.824064 0.15625 24 C 0.15625 37.175937 10.824064 47.84375 24 47.84375 C 37.175936 47.84375 47.84375 37.175937 47.84375 24 C 47.84375 10.824064 37.175936 0.15625 24 0.15625 z M 34.90625 13.90625 C 40.730244 13.90625 44.3125 18.306256 44.3125 23.90625 C 44.3125 29.562244 40.779744 34.09375 34.84375 34.09375 C 30.195755 34.09375 26.943247 31.091747 24.03125 27.84375 C 20.951253 31.091747 18.097245 34.0625 13.28125 34.0625 C 7.4012558 34.0625 3.6875 29.680744 3.6875 23.96875 C 3.6875 18.368756 7.2385058 13.9375 13.0625 13.9375 C 17.934495 13.9375 21.119253 17.153003 24.03125 20.625 C 26.887247 17.209003 30.090255 13.90625 34.90625 13.90625 z M 34.78125 19.28125 C 31.869253 19.28125 29.066748 22.109002 27.21875 24.125 C 29.178748 26.308998 31.801503 28.71875 34.9375 28.71875 C 37.681497 28.71875 39.25 26.669747 39.25 24.09375 C 39.25 21.405753 37.637247 19.28125 34.78125 19.28125 z M 13.0625 19.3125 C 10.430503 19.3125 8.75 21.573753 8.75 24.09375 C 8.75 26.837747 10.474753 28.6875 13.21875 28.6875 C 16.074747 28.6875 18.989252 26.140998 20.78125 24.125 C 18.933252 22.165002 15.918497 19.3125 13.0625 19.3125 z")},
getPath:function(a){return Ui.Icon.icons[a]},getNames:function(){var a=[],b;for(b in Ui.Icon.icons)a.push(b);return a},register:function(a,b){if(void 0!==Ui.Icon.icons[a])throw"Icon '"+a+"' is already registered. To change it, use override";Ui.Icon.icons[a]=b},override:function(a,b){Ui.Icon.icons[a]=b},parse:function(a){return new Ui.Icon({icon:a})},drawIcon:function(a,b,c,d){a.save();c/=48;a.scale(c,c);a.svgPath(Ui.Icon.getPath(b));a.fillStyle=d;a.fill();a.restore()},drawIconAndBadge:function(a,
b,c,d,e,f,g,h){a.save();c/=48;f/=c;a.font="bold "+0.75*f+"px sans-serif";var k=a.measureText(e).width,m=Math.max(f,1.25*k);a.scale(c,c);a.save();a.beginPath();a.rect(0,0,48,48);a.roundRect(1,43-f,m+4,f+4,f/2,f/2,f/2,f/2,!0);a.closePath();a.clip();a.svgPath(Ui.Icon.getPath(b));a.fillStyle=d;a.fill();a.restore();a.fillStyle=g;a.beginPath();a.roundRect(3,45-f,m,f,f/2,f/2,f/2,f/2);a.closePath();a.fill();a.textBaseline="middle";a.fillStyle=h;a.fillText(e,3+(m-k)/2,48-(3+f/2));a.restore()}});Ui.CanvasElement.extend("Ui.DualIcon",{icon:void 0,fill:void 0,stroke:void 0,strokeWidth:void 0,constructor:function(a){this.icon=a.icon;delete a.icon},getFill:function(){return void 0===this.fill?Ui.Color.create(this.getStyleProperty("fill")):this.fill},setFill:function(a){this.fill=Ui.Color.create(a);this.invalidateDraw()},getStroke:function(){return void 0===this.stroke?Ui.Color.create(this.getStyleProperty("stroke")):this.stroke},setStroke:function(a){this.stroke=Ui.Color.create(a);this.invalidateDraw()},
getStrokeWidth:function(){return void 0===this.strokeWidth?this.getStyleProperty("strokeWidth"):this.strokeWidth},setStrokeWidth:function(a){this.strokeWidth=a;this.invalidateDraw()}},{updateCanvas:function(a){var b=this.getStrokeWidth();a.save();var c=Math.min(this.getLayoutWidth(),this.getLayoutHeight())/48;a.scale(c,c);a.translate(b,b);c=(48-2*b)/48;a.scale(c,c);a.svgPath(Ui.Icon.getPath(this.icon));a.strokeStyle=this.getStroke().getCssRgba();a.lineWidth=2*b;a.stroke();a.fillStyle=this.getFill().getCssRgba();
a.fill();a.restore()}},{style:{fill:"#ffffff",stroke:"#000000",strokeWidth:2}});Ui.CanvasElement.extend("Ui.ButtonGraphic",{text:void 0,icon:void 0,iconSize:24,orientation:"horizontal",fontSize:16,fontFamily:"Sans-serif",fontWeight:"normal",borderWidth:1,measuredTextWidth:0,textWidth:0,spacing:3,radius:3,showText:!0,showIcon:!0,badge:void 0,badgeColor:void 0,badgeTextColor:void 0,background:void 0,backgroundBorder:void 0,foreground:void 0,constructor:function(a){this.setBadgeColor("red");this.setBadgeTextColor("white");this.setBackground("rgba(250,250,250,1)");this.setBackgroundBorder("rgba(200,200,200,1)");
this.setForeground("rgba(140,140,140,1)")},getText:function(){return this.text},setText:function(a){this.text!==a&&(this.text=a,this.invalidateMeasure(),this.invalidateDraw())},getIcon:function(){return this.icon},setIcon:function(a){this.icon!==a&&(this.icon=a,this.invalidateMeasure(),this.invalidateDraw())},getBadge:function(){return this.badge},setBadge:function(a){this.badge!==a&&(this.badge=a,this.invalidateDraw())},getOrientation:function(){return"vertical"===this.orientation?"vertical":"horizontal"},
setOrientation:function(a){this.orientation!==a&&(this.orientation=a,this.invalidateMeasure())},getIsDown:function(){return this.isDown},setIsDown:function(a){this.isDown!=a&&(this.isDown=a,this.invalidateDraw())},getIsActive:function(){return this.isActive},setIsActive:function(a){this.isActive!=a&&(this.isActive=a,this.invalidateDraw())},setHasFocus:function(a){this.buttonHasFocus!==a&&(this.buttonHasFocus=a,this.invalidateDraw())},setSpacing:function(a){this.spacing!==a&&(this.spacing=a,this.invalidateMeasure())},
setIconSize:function(a){this.iconSize!==a&&(this.iconSize=a,this.invalidateMeasure())},setFontFamily:function(a){this.fontFamily!==a&&(this.fontFamily=a,this.invalidateMeasure())},setFontSize:function(a){this.fontSize!==a&&(this.fontSize=a,this.invalidateMeasure())},setFontWeight:function(a){this.fontWeight!==a&&(this.fontWeight=a,this.invalidateMeasure())},setBorderWidth:function(a){this.borderWidth!==a&&(this.borderWidth=a,this.invalidateMeasure())},setRadius:function(a){this.radius!==a&&(this.radius=
a,this.invalidateDraw())},setShowText:function(a){this.showText!==a&&(this.showText=a,this.invalidateMeasure())},setShowIcon:function(a){this.showIcon!==a&&(this.showIcon=a,this.invalidateMeasure())},setTextWidth:function(a){this.textWidth!==a&&(this.textWidth=a,this.invalidateMeasure())},setBadgeColor:function(a){this.badgeColor=Ui.Color.create(a);this.invalidateDraw()},setBadgeTextColor:function(a){this.badgeTextColor=Ui.Color.create(a);this.invalidateDraw()},setBackgroundBorder:function(a){this.backgroundBorder=
Ui.Color.create(a);this.invalidateDraw()},setForeground:function(a){this.foreground=Ui.Color.create(a);this.invalidateDraw()}},{setBackground:function(a){this.background=Ui.Color.create(a);this.invalidateDraw()},updateCanvas:function(a){var b=this.getLayoutWidth(),c=this.getLayoutHeight(),d=Math.min(this.radius,Math.min(b,c)/2);this.getIsDisabled()&&(a.globalAlpha=0.4);a.fillStyle=this.background.getCssRgba();a.beginPath();a.roundRect(0,0,b,c,d,d,d,d);a.closePath();a.fill();0<this.borderWidth&&(a.strokeStyle=
this.backgroundBorder.getCssRgba(),a.lineWidth=this.borderWidth,a.beginPath(),a.roundRect(this.borderWidth/2,this.borderWidth/2,b-this.borderWidth,c-this.borderWidth,d,d,d,d),a.closePath(),a.stroke());this.showIcon&&void 0!==this.icon&&(void 0===this.text||!this.showText)?(Ui.Icon.getPath(this.icon),a.save(),a.translate((b-this.iconSize)/2,(c-this.iconSize)/2),void 0!==this.badge?Ui.Icon.drawIconAndBadge(a,this.icon,this.iconSize,this.foreground.getCssRgba(),this.badge,this.iconSize/3,this.badgeColor.getCssRgba(),
this.badgeTextColor.getCssRgba()):Ui.Icon.drawIcon(a,this.icon,this.iconSize,this.foreground.getCssRgba()),a.restore()):this.showText&&(void 0===this.icon||!this.showIcon)&&void 0!==this.text?(a.font="normal "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,a.textBaseline="middle",a.fillStyle=this.foreground.getCssRgba(),a.fillText(this.text,(b-this.measuredTextWidth)/2,c/2+2)):this.showIcon&&(void 0!==this.icon&&void 0!==this.text&&this.showText)&&("vertical"===this.orientation?(Ui.Icon.getPath(this.icon),
a.save(),a.translate((b-this.iconSize)/2,(c-this.fontSize-this.iconSize-this.spacing)/2),void 0!==this.badge?Ui.Icon.drawIconAndBadge(a,this.icon,this.iconSize,this.foreground.getCssRgba(),this.badge,this.iconSize/3,this.badgeColor.getCssRgba(),this.badgeTextColor.getCssRgba()):Ui.Icon.drawIcon(a,this.icon,this.iconSize,this.foreground.getCssRgba()),a.restore(),a.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,a.textBaseline="top",a.fillStyle=this.foreground.getCssRgba(),a.fillText(this.text,
(b-this.measuredTextWidth)/2,c-this.fontSize-4-this.spacing-1)):(Ui.Icon.getPath(this.icon),a.save(),a.translate(this.spacing+4,(c-this.iconSize)/2-1),void 0!==this.badge?Ui.Icon.drawIconAndBadge(a,this.icon,this.iconSize,this.foreground.getCssRgba(),this.badge,this.iconSize/3,this.badgeColor.getCssRgba(),this.badgeTextColor.getCssRgba()):Ui.Icon.drawIcon(a,this.icon,this.iconSize,this.foreground.getCssRgba()),a.restore(),a.font="normal "+this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,a.textBaseline=
"middle",a.fillStyle=this.foreground.getCssRgba(),a.fillText(this.text,3*this.spacing+this.iconSize,c/2+1)));!this.showText&&void 0!==this.text?this.getDrawing().title=this.text:this.getDrawing().title=""},measureCore:function(a,b){void 0!==this.text&&(this.measuredTextWidth=Ui.Label.measureText(this.text,this.fontSize,this.fontFamily,this.fontWeight).width);var c={width:10,height:10};this.showIcon&&void 0!==this.icon&&(void 0===this.text||!this.showText)?c={width:this.iconSize+2*this.spacing+6,height:this.iconSize+
2*this.spacing+6}:this.showText&&(void 0===this.icon||!this.showIcon)&&void 0!==this.text?c={width:Math.max(this.measuredTextWidth,this.textWidth)+2*this.spacing+6,height:this.fontSize+2*this.spacing+6}:this.showIcon&&(void 0!==this.icon&&this.showText&&void 0!==this.text)&&(c="vertical"===this.orientation?{width:Math.max(Math.max(this.measuredTextWidth,this.textWidth),this.iconSize)+2*this.spacing+6,height:this.iconSize+this.fontSize+3*this.spacing+6}:{width:Math.max(this.measuredTextWidth,this.textWidth)+
this.iconSize+4*this.spacing+6,height:Math.max(this.iconSize,this.fontSize)+2*this.spacing+6});return c},onDisable:function(){this.invalidateDraw()},onEnable:function(){this.invalidateDraw()}});Ui.DualIcon.extend("Ui.DragEffectIcon",{},{},{style:{fill:"green",stroke:"white",strokeWidth:4}});
Ui.Event.extend("Ui.DragEvent",{clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,dataTransfer:void 0,constructor:function(a){},setClientX:function(a){this.clientX=a},setClientY:function(a){this.clientY=a},setDeltaX:function(a){this.deltaX=a},setDeltaY:function(a){this.deltaY=a},setCtrlKey:function(a){this.ctrlKey=a},setAltKey:function(a){this.altKey=a},setShiftKey:function(a){this.shiftKey=a},setMetaKey:function(a){this.metaKey=a},setDataTransfer:function(a){this.dataTransfer=a},preventDefault:function(){}});
Core.Object.extend("Ui.DragDataTransfer",{draggable:void 0,image:void 0,imageEffect:void 0,catcher:void 0,startX:0,startY:0,startImagePoint:void 0,overElement:void 0,hasStarted:!1,types:void 0,watcher:void 0,pointer:void 0,pointerId:0,dropEffect:"none",data:void 0,type:void 0,timer:void 0,delayed:!1,constructor:function(a){this.addEvents("start","end");this.draggable=a.draggable;delete a.draggable;this.startX=a.x;delete a.x;this.startY=a.y;delete a.y;this.type=a.type;delete a.type;this.delayed=a.delayed;
delete a.delayed;"pointerId"in a&&(this.pointerId=a.pointerId,delete a.pointerId);this.pointer=a.pointer;delete a.pointer;this.watcher=this.pointer.watch(Ui.App.current);this.data={};this.connect(this.watcher,"move",this.onPointerMove);this.connect(this.watcher,"up",this.onPointerUp);this.connect(this.watcher,"cancel",this.onPointerCancel);this.delayed&&(this.timer=new Core.DelayedTask({scope:this,delay:0.5,callback:this.onTimer}))},setData:function(a,b){this.data[a.toLowerCase()]=b;this.updateTypes()},
getData:function(a){return this.data[a.toLowerCase()]},hasData:function(){var a=!1,b;for(b in this.data)a=!0;return a},generateImage:function(a){var b,c,d;if(navigator.isIE7||navigator.isIE8)b=document.createElement("div"),b.style.position="absolute",b.style.left="-10000px",b.style.top="-10000px",b.style.outline="0px",b.innerHTML=a.outerHTML,b=b.childNodes[0];else{if("tagName"in a&&"IMG"==a.tagName.toUpperCase())b=a.cloneNode(!1),b.oncontextmenu=function(a){a.preventDefault()};else if("tagName"in
a&&"CANVAS"==a.tagName.toUpperCase()){b=document.createElement("img");b.oncontextmenu=function(a){a.preventDefault()};for(c in a.style)b.style[c]=a.style[c];b.setAttribute("src",a.toDataURL("image/png"))}else if(!navigator.isFirefox&&void 0!==a.toDataURL){b=document.createElement("img");b.oncontextmenu=function(a){a.preventDefault()};for(c in a.style)b.style[c]=a.style[c];b.setAttribute("src",a.toDataURL("image/png"))}else{b=a.cloneNode(!1);"style"in b&&(b.style.webkitUserSelect="none",b.style.webkitUserCallout=
"none");for(d=0;d<a.childNodes.length;d++)c=a.childNodes[d],b.appendChild(this.generateImage(c))}"setAttribute"in b&&b.setAttribute("draggable",!1)}b.onselectstart=function(a){a.preventDefault();return!1};return b},updateTypes:function(){this.types=[];for(var a in this.data)this.types.push(a)},onTimer:function(){this.timer=void 0;this.fireEvent("start",this);if(this.hasData()){this.hasStarted=!0;this.image=this.generateImage(this.draggable.getDrawing());this.image.style.touchAction="none";this.image.style.zIndex=
1E5;this.image.style.position="absolute";"removeProperty"in this.image.style&&this.image.style.removeProperty("transform");navigator.isIE&&"removeProperty"in this.image.style?this.image.style.removeProperty("-ms-transform"):navigator.isGecko?this.image.style.removeProperty("-moz-transform"):navigator.isWebkit?this.image.style.removeProperty("-webkit-transform"):navigator.isOpera&&this.image.style.removeProperty("-o-transform");navigator.supportOpacity&&(this.image.style.opacity=1,this.image.firstChild.style.opacity=
0.8);var a=this.delayed?-10:0;this.startImagePoint=this.draggable.pointToWindow({x:0,y:0});this.image.style.left=this.startImagePoint.x+a+"px";this.image.style.top=this.startImagePoint.y+a+"px";"mouse"===this.watcher.pointer.getType()&&(this.catcher=document.createElement("div"),this.catcher.style.position="absolute",this.catcher.style.left="0px",this.catcher.style.right="0px",this.catcher.style.top="0px",this.catcher.style.bottom="0px",this.catcher.zIndex=1E3,document.body.appendChild(this.catcher));
document.body.appendChild(this.image);this.watcher.capture()}else this.watcher.cancel()},onPointerMove:function(a){var b,c,d;if(a.getIsCaptured()){d=a.pointer.getX();var e=a.pointer.getY();document.body.removeChild(this.image);void 0!==this.catcher&&document.body.removeChild(this.catcher);var f=Ui.App.current.elementFromPoint(d,e);void 0!==this.catcher&&document.body.appendChild(this.catcher);document.body.appendChild(this.image);b=d-this.startX;c=e-this.startY;a=this.delayed?-10:0;this.image.style.left=
this.startImagePoint.x+b+a+"px";this.image.style.top=this.startImagePoint.y+c+a+"px";void 0!==f&&null!==f&&f!==document.documentElement?(b=this.dropEffect,this.overElement!==f?d=new Ui.DragEvent({type:"localdragenter",clientX:d,clientY:e,dataTransfer:this}):(this.dropEffect="none",d=new Ui.DragEvent({type:"localdragover",clientX:d,clientY:e,dataTransfer:this})),d.dispatchEvent(f),this.dropEffect!==b&&(void 0!==this.imageEffect&&(this.imageEffect.setIsLoaded(!1),this.image.removeChild(this.imageEffect.getDrawing()),
this.imageEffect=void 0),"none"!==this.dropEffect&&(this.imageEffect=new Ui.DragEffectIcon({icon:"drag"+this.dropEffect}),this.imageEffect.parent=Ui.App.current,this.imageEffect.setIsLoaded(!0),this.imageEffect.setParentVisible(!0),this.imageEffect.setParentDisabled(!1),this.imageEffect.measure(32,32),this.imageEffect.arrange(-48+(this.startX-this.startImagePoint.x-a),-48+(this.startY-this.startImagePoint.y-a),32,32),this.image.appendChild(this.imageEffect.getDrawing()))),this.overElement=f):this.overElement=
void 0}else a.pointer.getIsMove()&&a.cancel()},onPointerUp:function(a){var b;a.getIsCaptured()?(b=a.pointer.getX(),a=a.pointer.getY(),document.body.removeChild(this.image),void 0!==this.catcher&&(document.body.removeChild(this.catcher),this.catcher=void 0),void 0!==this.overElement&&(b=new Ui.DragEvent({type:"localdrop",clientX:b,clientY:a,dataTransfer:this}),b.dispatchEvent(this.overElement)),this.fireEvent("end",this)):a.cancel()},onPointerCancel:function(a){void 0!==this.timer&&(this.timer.abort(),
this.timer=void 0)}});Ui.Element.extend("Ui.Html",{htmlDrawing:void 0,bindedOnImageLoad:void 0,constructor:function(a){this.addEvents("link");this.bindedOnImageLoad=this.onImageLoad.bind(this);this.connect(this.getDrawing(),"click",this.onClick);this.connect(this.getDrawing(),"keypress",this.onKeyPress)},getHtml:function(){return this.htmlDrawing.innerHTML},getElements:function(a){var b=[];this.searchElements(a.toUpperCase(),this.htmlDrawing,b);return b},searchElements:function(a,b,c){for(var d=0;d<b.childNodes.length;d++){var e=
b.childNodes[d];"tagName"in e&&e.tagName.toUpperCase()==a&&c.push(e);this.searchElements(a,e,c)}},getParentElement:function(a,b){do{if("tagName"in b&&b.tagName.toUpperCase()==a)return b;if(void 0===b.parentNode||null===b.parentNode||b.parentNode===this.getDrawing())break;b=b.parentNode}while(1)},setHtml:function(a){this.htmlDrawing.innerHTML=a;a=this.getElements("IMG");for(var b=0;b<a.length;b++)a[b].onload=this.bindedOnImageLoad;this.invalidateMeasure()},setText:function(a){if("innerText"in this.htmlDrawing)this.htmlDrawing.innerText=
a;else{var b=document.createElement("div");b.textContent=a;a=b.textContent.split("\n");for(var b="",c=0;c<a.length;c++)""!==a[c]&&(""!==b&&(b+="<br><br>"),b+=a[c]);this.setHtml(b)}this.invalidateMeasure()},getTextContent:function(a){var b="";if(3===a.nodeType)b+=a.textContent;else if(1===a.nodeType&&("BR"==a.nodeName||"P"==a.nodeName))b+="\n";if("childNodes"in a)for(var c=0;c<a.childNodes.length;c++)b+=this.getTextContent(a.childNodes[c]);return b},getText:function(){return"innerText"in this.htmlDrawing?
this.htmlDrawing.innerText:this.getTextContent(this.htmlDrawing)},onSubtreeModified:function(a){this.invalidateMeasure()},onKeyPress:function(a){this.invalidateMeasure()},onImageLoad:function(a){this.invalidateMeasure()},onClick:function(a){var b=this.getParentElement("A",a.target);void 0!==b&&(a.preventDefault(),a.stopPropagation(),this.fireEvent("link",this,b.href))}},{onVisible:function(){this.invalidateMeasure()},onStyleChange:function(){navigator.supportRgba?this.getDrawing().style.color=Ui.Color.create(this.getStyleProperty("color")).getCssRgba():
this.getDrawing().style.color=Ui.Color.create(this.getStyleProperty("color")).getCssRgb();this.getDrawing().style.fontSize=this.getStyleProperty("fontSize")+"px";this.getDrawing().style.fontFamily=this.getStyleProperty("fontFamily");this.getDrawing().style.fontWeight=this.getStyleProperty("fontWeight")},renderDrawing:function(){var a=Ui.Html.base.renderDrawing.apply(this,arguments);this.htmlDrawing=document.createElement("div");this.htmlDrawing.style.outline="none";this.htmlDrawing.style.padding=
"0px";this.htmlDrawing.style.margin="0px";this.htmlDrawing.style.display="inline-block";this.htmlDrawing.style.width="";a.appendChild(this.htmlDrawing);return a},measureCore:function(a,b){a=void 0!==this.getWidth()?Math.max(a,this.getWidth()):a;this.getDrawing().style.width=a+"px";this.htmlDrawing.style.width="";this.htmlDrawing.clientWidth>a&&(this.htmlDrawing.style.width=a+"px");return{width:Math.max(this.htmlDrawing.clientWidth,this.htmlDrawing.scrollWidth),height:this.htmlDrawing.clientHeight}},
arrangeCore:function(a,b){}},{style:{color:"black",fontSize:18,fontFamily:"Sans-serif",fontWeight:"normal"}});Ui.Element.extend("Ui.Label",{text:"",orientation:"horizontal",fontSize:void 0,fontFamily:void 0,fontWeight:void 0,color:void 0,labelDrawing:void 0,textMeasureValid:!1,textWidth:0,textHeight:0,constructor:function(a){this.setSelectable(!1)},getText:function(){return this.text},setText:function(a){this.text!=a&&(this.text=a,"textContent"in this.labelDrawing?this.labelDrawing.textContent=this.text:this.labelDrawing.innerText=this.text,this.textMeasureValid=!1,this.invalidateMeasure())},setFontSize:function(a){this.fontSize!==
a&&(this.fontSize=a,this.labelDrawing.style.fontSize=this.getFontSize()+"px",this.textMeasureValid=!1,this.invalidateMeasure())},getFontSize:function(){return void 0!==this.fontSize?this.fontSize:this.getStyleProperty("fontSize")},setFontFamily:function(a){this.fontFamily!==a&&(this.fontFamily=a,this.labelDrawing.style.fontFamily=this.getFontFamily(),this.textMeasureValid=!1,this.invalidateMeasure())},getFontFamily:function(){return void 0!==this.fontFamily?this.fontFamily:this.getStyleProperty("fontFamily")},
setFontWeight:function(a){this.fontWeight!==a&&(this.fontWeight=a,this.labelDrawing.style.fontWeight=this.getFontWeight(),this.textMeasureValid=!1,this.invalidateMeasure())},getFontWeight:function(){return void 0!==this.fontWeight?this.fontWeight:this.getStyleProperty("fontWeight")},setColor:function(a){this.color!==a&&(this.color=Ui.Color.create(a),this.labelDrawing.style.color=navigator.supportRgba?this.getColor().getCssRgba():this.getColor().getCssHtml())},getColor:function(){return void 0!==this.color?
this.color:Ui.Color.create(this.getStyleProperty("color"))},getOrientation:function(){return this.orientation},setOrientation:function(a){this.orientation!=a&&(this.orientation=a,this.invalidateMeasure())}},{verticalAlign:"center",horizontalAlign:"center",onStyleChange:function(){this.labelDrawing.style.fontSize=this.getFontSize()+"px";this.labelDrawing.style.fontFamily=this.getFontFamily();this.labelDrawing.style.fontWeight=this.getFontWeight();this.labelDrawing.style.color=navigator.supportRgba?
this.getColor().getCssRgba():this.getColor().getCssHtml();this.textMeasureValid=!1;this.invalidateMeasure()},renderDrawing:function(){this.labelDrawing=document.createElement("div");this.labelDrawing.style.whiteSpace="nowrap";this.labelDrawing.style.display="inline";this.labelDrawing.style.position="absolute";this.labelDrawing.style.left="0px";this.labelDrawing.style.top="0px";return this.labelDrawing},measureCore:function(a,b){if(!this.textMeasureValid){this.textMeasureValid=!0;var c=Ui.Label.measureText(this.text,
this.getFontSize(),this.getFontFamily(),this.getFontWeight());this.textWidth=c.width;this.textHeight=c.height}return"vertical"==this.orientation?{width:this.textHeight,height:this.textWidth}:{width:this.textWidth,height:this.textHeight}},arrangeCore:function(a,b){var c;"vertical"==this.orientation?(c=Ui.Matrix.createTranslate(this.labelDrawing.offsetHeight,0),c.rotate(90),navigator.isIE?(this.labelDrawing.style.msTransform=c.toString(),this.labelDrawing.style.msTransformOrigin="0% 0%"):navigator.isGecko?
(this.labelDrawing.style.MozTransform="matrix("+c.svgMatrix.a.toFixed(4)+", "+c.svgMatrix.b.toFixed(4)+", "+c.svgMatrix.c.toFixed(4)+", "+c.svgMatrix.d.toFixed(4)+", "+c.svgMatrix.e.toFixed(0)+"px, "+c.svgMatrix.f.toFixed(0)+"px)",this.labelDrawing.style.MozTransformOrigin="0% 0%"):navigator.isWebkit?(this.labelDrawing.style.webkitTransform=c.toString(),this.labelDrawing.style.webkitTransformOrigin="0% 0%"):navigator.isOpera&&(this.labelDrawing.style.OTransform=c.toString(),this.labelDrawing.style.OTransformOrigin=
"0% 0%")):navigator.isIE&&"removeProperty"in this.labelDrawing?this.labelDrawing.style.removeProperty("-ms-transform"):navigator.isGecko?this.labelDrawing.style.removeProperty("-moz-transform"):navigator.isWebkit?this.labelDrawing.style.removeProperty("-webkit-transform"):navigator.isOpera&&this.labelDrawing.style.removeProperty("-o-transform")}},{measureBox:void 0,measureContext:void 0,measureTextCanvas:function(a,b,c,d){void 0===Ui.Label.measureBox&&this.createMeasureCanvas();Ui.Label.measureContext.font=
"normal "+d+" "+b+"px "+c;a=Ui.Label.measureContext.measureText(a);a.height=b;return a},createMeasureCanvas:function(){var a=window;if(navigator.isIE||navigator.isGecko)a=Ui.App.getRootWindow();if(void 0===a.document.body){var b=a.document.createElement("body");a.document.body=b}Ui.Label.measureBox=a.document.createElement("canvas");Ui.Label.measureBox.style.visibility="hidden";Ui.Label.measureBox.style.position="absolute";Ui.Label.measureBox.style.left="0px";Ui.Label.measureBox.style.top="0px";Ui.Label.measureBox.style.outline=
"none";Ui.Label.measureBox.setAttribute("width",10,null);Ui.Label.measureBox.setAttribute("height",10,null);a.document.body.appendChild(Ui.Label.measureBox);Ui.Label.measureContext=Ui.Label.measureBox.getContext("2d")},isFontAvailable:function(a,b){var c;if(!navigator.supportCanvas)return!0;void 0===Ui.Label.measureBox&&Ui.Label.createMeasureCanvas();var d=Ui.Label.measureContext;d.fillStyle="rgba(0,0,0,0)";d.clearRect(0,0,10,10);d.textBaseline="top";d.font="normal "+b+" 10px "+a;d.fillStyle="rgba(255,255,255,1)";
d.fillText("@",0,0);var e=d.getImageData(0,0,10,10),f=!0;for(c=0;f&&c<e.data.length;c+=4)0!==e.data[c+3]&&(f=!1);if(f)return!1;d.fillStyle="rgba(0,0,0,0)";d.clearRect(0,0,10,10);d.fillStyle="rgba(255,255,255,1)";d.font="normal "+b+" 10px Sans-Serif";d.fillText("@",0,0);e=d.getImageData(0,0,10,10);d.fillStyle="rgba(0,0,0,0)";d.clearRect(0,0,10,10);d.fillStyle="rgba(255,255,255,1)";d.font="normal "+b+" 10px "+a+",Sans-Serif";d.fillText("@",0,0);d=d.getImageData(0,0,10,10);for(c=0;c<d.data.length;c+=
4)if(d.data[c+3]!==e.data[c+3])return!0;return!1},measureTextHtml:function(a,b,c,d){void 0===Ui.Label.measureBox&&this.createMeasureHtml();Ui.Label.measureBox.style.fontSize=b+"px";Ui.Label.measureBox.style.fontFamily=c;Ui.Label.measureBox.style.fontWeight=d;"textContent"in Ui.Label.measureBox?Ui.Label.measureBox.textContent=a:Ui.Label.measureBox.innerText=a;return{width:Ui.Label.measureBox.offsetWidth,height:Ui.Label.measureBox.offsetHeight}},createMeasureHtml:function(){var a=window;if(navigator.isIE||
navigator.isGecko)a=Ui.App.getRootWindow();if(void 0===a.document.body){var b=a.document.createElement("body");a.document.body=b}Ui.Label.measureBox=a.document.createElement("div");Ui.Label.measureBox.style.whiteSpace="nowrap";Ui.Label.measureBox.style.position="absolute";Ui.Label.measureBox.style.left="0px";Ui.Label.measureBox.style.top="0px";Ui.Label.measureBox.style.position="absolute";Ui.Label.measureBox.style.display="inline";Ui.Label.measureBox.style.visibility="hidden";a.document.body.appendChild(Ui.Label.measureBox)},
measureText:function(a,b,c,d){return""===a||void 0===a?{width:0,height:0}:navigator.supportCanvas?Ui.Label.measureTextCanvas(a,b,c,d):Ui.Label.measureTextHtml(a,b,c,d)},style:{color:new Ui.Color({r:0,g:0,b:0}),fontSize:16,fontFamily:"Sans-serif",fontWeight:"normal"}});Ui.Html.extend("Ui.Text",{fontSize:void 0,fontFamily:void 0,fontWeight:void 0,color:void 0,textAlign:void 0,interLine:void 0,wordWrap:void 0,constructor:function(a){this.getDrawing().style.whiteSpace="pre-line";this.setSelectable(!1)},getTextAlign:function(){return void 0!==this.textAlign?this.textAlign:this.getStyleProperty("textAlign")},setTextAlign:function(a){this.textAlign!==a&&(this.textAlign=a,this.getDrawing().style.textAlign=this.getTextAlign())},getFontSize:function(){return void 0!==this.fontSize?
this.fontSize:this.getStyleProperty("fontSize")},setFontSize:function(a){this.fontSize!==a&&(this.fontSize=a,this.getDrawing().style.fontSize=this.getFontSize()+"px",this.invalidateMeasure())},getFontFamily:function(){return void 0!==this.fontFamily?this.fontFamily:this.getStyleProperty("fontFamily")},setFontFamily:function(a){this.fontFamily!==a&&(this.fontFamily=a,this.getDrawing().style.fontFamily=this.getFontFamily(),this.invalidateMeasure())},getFontWeight:function(){return void 0!==this.fontWeight?
this.fontWeight:this.getStyleProperty("fontWeight")},setFontWeight:function(a){this.fontWeight!==a&&(this.fontWeight=a,this.getDrawing().style.fontWeight=this.getFontWeight(),this.invalidateMeasure())},getInterLine:function(){return void 0!==this.interLine?this.interLine:this.getStyleProperty("interLine")},setInterLine:function(a){this.interLine!==a&&(this.interLine=a,this.getDrawing().style.lineHeight=this.getInterLine(),this.invalidateMeasure())},getWordWrap:function(){return void 0!==this.wordWrap?
this.wordWrap:this.getStyleProperty("wordWrap")},setWordWrap:function(a){this.wordWrap!==a&&(this.wordWrap=a,this.getDrawing().style.wordWrap=this.getWordWrap(),this.invalidateMeasure())},getWhiteSpace:function(){return void 0!==this.whiteSpace?this.whiteSpace:this.getStyleProperty("whiteSpace")},setWhiteSpace:function(a){this.whiteSpace!==a&&(this.whiteSpace=a,this.getDrawing().style.whiteSpace=this.getWhiteSpace(),this.invalidateMeasure())},setColor:function(a){this.color!==a&&(this.color=Ui.Color.create(a),
navigator.supportRgba?this.getDrawing().style.color=this.color.getCssRgba():this.getDrawing().style.color=this.color.getCssHtml())},getColor:function(){return void 0!==this.color?this.color:Ui.Color.create(this.getStyleProperty("color"))}},{onStyleChange:function(){this.getDrawing().style.textAlign=this.getTextAlign();this.getDrawing().style.fontSize=this.getFontSize()+"px";this.getDrawing().style.fontFamily=this.getFontFamily();this.getDrawing().style.fontWeight=this.getFontWeight();navigator.supportRgba?
this.getDrawing().style.color=this.getColor().getCssRgba():this.getDrawing().style.color=this.getColor().getCssHtml();this.getDrawing().style.lineHeight=this.getInterLine();this.getDrawing().style.wordWrap=this.getWordWrap()}},{style:{color:"black",fontSize:16,fontFamily:"Sans-serif",fontWeight:"normal",textAlign:"left",wordWrap:"normal",whiteSpace:"normal",interLine:1}});Core.Object.extend("Ui.CompactLabelContext",{text:"",fontSize:16,fontFamily:"Sans-Serif",fontWeight:"normal",maxLine:Number.MAX_VALUE,interLine:1,textAlign:"left",width:Number.MAX_VALUE,drawLine:void 0,whiteSpace:"pre-line",wordWrap:"normal",textTransform:"none",constructor:function(a){},setDrawLine:function(a){this.drawLine=a},getWhiteSpace:function(){return this.whiteSpace},setWhiteSpace:function(a){this.whiteSpace=a},getWordWrap:function(){return this.wordWrap},setWordWrap:function(a){this.wordWrap=
a},getMaxLine:function(){return this.maxLine},setMaxLine:function(a){this.maxLine!==a&&(this.maxLine=a)},getTextAlign:function(){return this.textAlign},setTextAlign:function(a){this.textAlign!==a&&(this.textAlign=a)},setInterLine:function(a){this.interLine!==a&&(this.interLine=a)},getInterLine:function(){return this.interLine},getText:function(){return this.text},setText:function(a){this.text!==a&&(this.text=a)},setFontSize:function(a){this.fontSize!==a&&(this.fontSize=a)},getFontSize:function(){return this.fontSize},
setFontFamily:function(a){this.fontFamily!==a&&(this.fontFamily=a)},getFontFamily:function(){return this.fontFamily},setFontWeight:function(a){this.fontWeight!==a&&(this.fontWeight=a)},getFontWeight:function(){return this.fontWeight},getTextTransform:function(){return this.textTransform},setTextTransform:function(a){this.textTransform=a},getTransformedText:function(){return"lowercase"===this.textTransform?this.text.toLowerCase():"uppercase"===this.textTransform?this.text.toUpperCase():this.text},
flushLine:function(a,b,c,d,e){var f=Ui.Label.measureText(b,this.getFontSize(),this.getFontFamily(),this.getFontWeight());d&&(c="left"==this.textAlign?0:"right"==this.textAlign?c-f.width:(c-f.width)/2,d&&this.drawLine(c,a,b));return f.height*(!0===e?1:this.getInterLine())},updateFlow:function(a,b){if(void 0===this.text)return{width:0,height:0};for(var c=this.getTransformedText(),d=this.getFontSize(),e=this.getFontFamily(),f=this.getFontWeight(),g=Ui.Label.measureText("...",d,e,f).width,h=0,k=0,m="",
n=0,l=0,p=0;p<c.length;p++){var q=Ui.Label.measureText(m+c.charAt(p),d,e,f);if(void 0!==this.maxLine&&n+1>=this.maxLine&&q.width+g>a)return h+=this.flushLine(h,m+"...",a,b),k+g>l&&(l=k+g),{width:l,height:h};q.width>a?(h+=this.flushLine(h,m,a,b),n++,k>l&&(l=k),m=c.charAt(p)):m+=c.charAt(p);k=q.width}""!==m&&(h+=this.flushLine(h,m,a,b,!0),k>l&&(l=k));return{width:l,height:h}},updateFlowWords:function(a,b){if(void 0===this.text||null===this.text)return{width:0,height:0};var c,d;c=this.getTransformedText();
var e=this.getFontSize(),f=this.getFontFamily(),g=this.getFontWeight(),h=Ui.Label.measureText("...",e,f,g).width;d=[];var k=[],m=c.split(" ");for(c=0;c<m.length;c++)for(var n=m[c];;){var l=Ui.Label.measureText(n,e,f,g).width;if(l<a){d.push(n);k.push(l);break}else for(var l="",p=0;p<n.length;p++)if(Ui.Label.measureText(l+n.charAt(p),e,f,g).width<a)l+=n.charAt(p);else{""===l&&(l=n.charAt(0));d.push(l);k.push(Ui.Label.measureText(l,e,f,g).width);n=n.substr(l.length,n.length-l.length);break}if(0===n.length)break}var q=
Ui.Label.measureText(". .",e,f,g).width-Ui.Label.measureText("..",e,f,g).width,l=n=m=0,p="",s=0;for(c=0;c<d.length;c++){if(""!==p)if(n+q>a){if(s+1>=this.maxLine){for(;;)if(d=Ui.Label.measureText(p,e,f,g).width,d+h>a){if(1>=p.length){p="...";break}p=p.substr(0,p.length-1)}else{p+="...";break}m+=this.flushLine(m,p,a,b);n>l&&(l=n);return{width:l,height:m}}m+=this.flushLine(m,p,a,b);n>l&&(l=n);n=0;s++;p=""}else p+=" ",n+=q;if(n+k[c]>a){if(s+1>=this.maxLine){for(;;)if(d=Ui.Label.measureText(p,e,f,g).width,
d+h>a){if(1>=p.length){p="...";break}p=p.substr(0,p.length-1)}else{p+="...";break}m+=this.flushLine(m,p,a,b);n>l&&(l=n);return{width:l,height:m}}m+=this.flushLine(m,p,a,b);s++;n>l&&(l=n);n=k[c];p=d[c]}else p+=d[c],n+=k[c]}""!==p&&(m+=this.flushLine(m,p,a,b,!0),n>l&&(l=n));return{width:l,height:m}},drawText:function(a,b){if("nowrap"===this.whiteSpace){var c=this.getTransformedText(),d=Ui.Label.measureText(c,this.fontSize,this.fontFamily,this.fontWeight);b&&this.flushLine(0,c,a,!0,!0);return d}return"normal"===
this.wordWrap?this.updateFlowWords(a,b):this.updateFlow(a,b)}});
Ui.Element.extend("Ui.CompactLabel",{fontSize:void 0,fontFamily:void 0,fontWeight:void 0,color:void 0,textDrawing:void 0,maxLine:void 0,interLine:void 0,textAlign:void 0,isMeasureValid:!1,isArrangeValid:!1,lastMeasureWidth:0,lastMeasureHeight:0,lastAvailableWidth:0,maxLine:void 0,textContext:void 0,whiteSpace:void 0,wordWrap:void 0,textTransform:void 0,constructor:function(a){this.setSelectable(!1);this.textContext=new Ui.CompactLabelContext},getMaxLine:function(){return void 0!==this.maxLine?this.maxLine:
this.getStyleProperty("maxLine")},setMaxLine:function(a){this.maxLine=a;this.textContext.setMaxLine(this.getMaxLine());this.invalidateMeasure()},getText:function(){return this.textContext.getText()},setText:function(a){this.textContext.setText(a);this.isMeasureValid=!1;this.invalidateMeasure()},getTextAlign:function(){return void 0!==this.textAlign?this.textAlign:this.getStyleProperty("textAlign")},setTextAlign:function(a){this.textAlign=a;this.textContext.setTextAlign(this.getTextAlign());this.invalidateArrange()},
setInterLine:function(a){this.interLine=a;this.textContext.setInterLine(this.getInterLine());this.isMeasureValid=!1;this.invalidateMeasure()},getInterLine:function(){return void 0!==this.interLine?this.interLine:this.getStyleProperty("interLine")},setFontSize:function(a){this.fontSize=a;this.isMeasureValid=!1;this.textContext.setFontSize(this.getFontSize());this.textDrawing.style.fontSize=this.getFontSize()+"px";this.invalidateMeasure()},getFontSize:function(){return void 0!==this.fontSize?this.fontSize:
this.getStyleProperty("fontSize")},setFontFamily:function(a){this.fontFamily=a;this.isMeasureValid=!1;this.textContext.setFontFamily(this.getFontFamily());this.textDrawing.style.fontFamily=this.getFontFamily();this.invalidateMeasure()},getFontFamily:function(){return void 0!==this.fontFamily?this.fontFamily:this.getStyleProperty("fontFamily")},setFontWeight:function(a){this.fontWeight=a;this.isMeasureValid=!1;this.textContext.setFontWeight(a);this.textDrawing.style.fontWeight=this.getFontWeight();
this.invalidateMeasure()},getFontWeight:function(){return void 0!==this.fontWeight?this.fontWeight:this.getStyleProperty("fontWeight")},getWhiteSpace:function(){return void 0!==this.whiteSpace?this.whiteSpace:this.getStyleProperty("whiteSpace")},setWhiteSpace:function(a){this.whiteSpace!==a&&(this.isMeasureValid=!1,this.whiteSpace=a,this.textContext.setWhiteSpace(this.getWhiteSpace()),this.invalidateMeasure())},getWordWrap:function(){return void 0!==this.wordWrap?this.wordWrap:this.getStyleProperty("wordWrap")},
setWordWrap:function(a){this.wordWrap!==a&&(this.isMeasureValid=!1,this.wordWrap=a,this.textContext.setWordWrap(this.getWordWrap()),this.invalidateMeasure())},getTextTransform:function(){return void 0!==this.textTransform?this.textTransform:this.getStyleProperty("textTransform")},setTextTransform:function(a){this.textTransform!==a&&(this.isMeasureValid=!1,this.textTransform=a,this.textContext.setTextTransform(this.getTextTransform()),this.invalidateMeasure())},setColor:function(a){this.color!==a&&
(this.color=Ui.Color.create(a),this.textDrawing.style.color=navigator.supportRgba?this.color.getCssRgba():this.color.getCssHtml())},getColor:function(){return void 0!==this.color?this.color:Ui.Color.create(this.getStyleProperty("color"))}},{renderDrawing:function(){var a=Ui.CompactLabel.base.renderDrawing.apply(this,arguments);this.textDrawing=document.createElement("div");this.textDrawing.style.fontFamily=this.getFontFamily();this.textDrawing.style.fontWeight=this.getFontWeight();this.textDrawing.style.fontSize=
this.getFontSize()+"px";this.textDrawing.style.color=navigator.supportRgba?this.getColor().getCssRgba():this.getColor().getCssHtml();this.textDrawing.style.position="absolute";this.textDrawing.style.left="0px";this.textDrawing.style.top="0px";a.appendChild(this.textDrawing);return a},onStyleChange:function(){this.textDrawing.style.fontSize=this.getFontSize()+"px";this.textDrawing.style.fontFamily=this.getFontFamily();this.textDrawing.style.fontWeight=this.getFontWeight();this.textDrawing.style.color=
navigator.supportRgba?this.getColor().getCssRgba():this.getColor().getCssHtml();this.textContext.setMaxLine(this.getMaxLine());this.textContext.setTextAlign(this.getTextAlign());this.textContext.setFontSize(this.getFontSize());this.textContext.setFontFamily(this.getFontFamily());this.textContext.setFontWeight(this.getFontWeight());this.textContext.setInterLine(this.getInterLine());this.textContext.setWhiteSpace(this.getWhiteSpace());this.textContext.setWordWrap(this.getWordWrap());this.textContext.setTextTransform(this.getTextTransform());
this.invalidateMeasure()},measureCore:function(a,b){if(!this.isMeasureValid||this.lastAvailableWidth!==a){this.lastAvailableWidth=a;var c=this.textContext.drawText(a,!1);this.lastMeasureHeight=c.height;this.lastMeasureWidth=c.width;this.isMeasureValid=!0;this.isArrangeValid=!1}return{width:this.lastMeasureWidth,height:this.lastMeasureHeight}},arrangeCore:function(a,b){for(;this.textDrawing.hasChildNodes();)this.textDrawing.removeChild(this.textDrawing.firstChild);var c=this.textDrawing;this.textContext.setDrawLine(function(a,
b,f){var g=document.createElement("div");g.style.whiteSpace="nowrap";g.style.display="inline";g.style.position="absolute";g.style.left=a+"px";g.style.top=b+"px";"textContent"in g?g.textContent=f:g.innerText=f;c.appendChild(g)});this.textContext.drawText(a,!0)}},{style:{maxLine:Number.MAX_VALUE,color:new Ui.Color({r:0,g:0,b:0}),fontSize:16,fontFamily:"sans-serif",fontWeight:"normal",interLine:1,textAlign:"left",whiteSpace:"pre-line",wordWrap:"normal",textTransform:"none"}});Ui.Html.extend("Ui.ContentEditable",{anchorNode:null,anchorOffset:0,constructor:function(a){this.addEvents("anchorchange");this.setSelectable(!0);this.htmlDrawing.setAttribute("contenteditable","true");this.connect(this.getDrawing(),"keyup",this.onKeyUp);this.connect(this.getDrawing(),"DOMSubtreeModified",this.onContentSubtreeModified)},onKeyUp:function(a){this.testAnchorChange()},testAnchorChange:function(){if(window.getSelection().anchorNode!=this.anchorNode||window.getSelection().anchorOffset!=
this.anchorOffset)this.anchorNode=window.getSelection().anchorNode,this.anchorOffset=window.getSelection().anchorOffset,this.fireEvent("anchorchange",this)},onContentSubtreeModified:function(a){this.testAnchorChange();this.invalidateMeasure()}});Ui.Element.extend("Ui.Image",{src:void 0,loaddone:!1,naturalWidth:void 0,naturalHeight:void 0,imageDrawing:void 0,setSrcLock:!1,constructor:function(a){this.addEvents("ready","error");this.connect(this.imageDrawing,"contextmenu",function(a){a.preventDefault()});this.connect(this.imageDrawing,"load",this.onImageLoad);this.connect(this.imageDrawing,"error",this.onImageError)},getSrc:function(){return this.src},setSrc:function(a){if(void 0===a)throw"Image src cant be undefined";this.setSrcLock=!0;this.loaddone=
!1;this.naturalHeight=this.naturalWidth=void 0;this.src=a;this.imageDrawing.setAttribute("src",a);!0===this.imageDrawing.complete&&!0!==this.loaddone&&(this.loaddone=!0,this.naturalWidth=this.imageDrawing.naturalWidth,this.naturalHeight=this.imageDrawing.naturalHeight,this.fireEvent("ready",this),this.invalidateMeasure());this.setSrcLock=!1},getNaturalWidth:function(){return this.naturalWidth},getNaturalHeight:function(){return this.naturalHeight},getIsReady:function(){return this.loaddone},onImageError:function(a){this.fireEvent("error",
this)},onImageLoad:function(a){if(void 0!==a.target&&null!==a.target&&void 0!==a.target.naturalWidth&&void 0!==a.target.naturalHeight)this.loaddone=!0,this.naturalWidth=a.target.naturalWidth,this.naturalHeight=a.target.naturalHeight,this.fireEvent("ready",this),this.invalidateMeasure();else if(this.setSrcLock)new Core.DelayedTask({delay:0,scope:this,callback:this.onImageDelayReady});else this.onImageDelayReady()},onAppReady:function(){this.disconnect(Ui.App.current,"ready",this.onAppReady);this.onImageDelayReady()},
onIEDragStart:function(a){a.defaultPrevented=!0;return a.returnValue=!1},onImageDelayReady:function(){if(Ui.App.current.getIsReady()){this.loaddone=!0;if(void 0===document.body||null===document.body){var a=document.createElement("body");document.body=a}a=document.createElement("img");a.setAttribute("src",this.src);document.body.appendChild(a);this.naturalWidth=a.width;this.naturalHeight=a.height;document.body.removeChild(a);this.fireEvent("ready",this);this.invalidateMeasure()}else this.connect(Ui.App.current,
"ready",this.onAppReady)}},{renderDrawing:function(){this.imageDrawing=document.createElement("img");this.imageDrawing.style.position="absolute";this.imageDrawing.style.top="0px";this.imageDrawing.style.left="0px";this.imageDrawing.style.width="0px";this.imageDrawing.style.height="0px";this.imageDrawing.setAttribute("draggable",!1);navigator.isWebkit?(this.imageDrawing.style.webkitUserSelect="none",this.imageDrawing.style.webkitTouchCallout="none"):navigator.isGecko?this.imageDrawing.style.MozUserSelect=
"none":navigator.isIE&&(this.connect(this.imageDrawing,"selectstart",function(a){a.preventDefault()}),"attachEvent"in this.imageDrawing&&this.imageDrawing.attachEvent("ondragstart",this.onIEDragStart));return this.imageDrawing},measureCore:function(a,b){if(!this.loaddone)return{width:0,height:0};var c;void 0===this.getWidth()?void 0===this.getHeight()?c={width:this.naturalWidth,height:this.naturalHeight}:(c=this.getHeight()-(this.getMarginTop()+this.getMarginBottom()),c={width:this.naturalWidth*c/
this.naturalHeight,height:c}):void 0===this.getHeight()?(c=this.getWidth()-(this.getMarginLeft()+this.getMarginRight()),c={width:c,height:this.naturalHeight*c/this.naturalWidth}):c={width:0,height:0};return c},arrangeCore:function(a,b){void 0!==this.imageDrawing&&(this.imageDrawing.style.width=a+"px",this.imageDrawing.style.height=b+"px")}});Ui.Element.extend("Ui.Audio",{src:void 0,oggSrc:void 0,mp3Src:void 0,wavSrc:void 0,loaddone:!1,audioDrawing:void 0,canplaythrough:!1,state:"initial",constructor:function(a){this.addEvents("ready","ended","timeupdate","bufferingupdate","statechange","error");this.connect(this,"unload",this.onAudioUnload);if(void 0!==a.oggSrc||void 0!==a.mp3Src||void 0!==a.wavSrc)void 0!==a.oggSrc&&Ui.Audio.supportOgg?this.setSrc(a.oggSrc):void 0!==a.aacSrc&&Ui.Audio.supportAac?this.setSrc(a.aacSrc):void 0!==a.mp3Src&&
Ui.Audio.supportMp3?this.setSrc(a.mp3Src):void 0!==a.wavSrc&&Ui.Audio.supportWav&&this.setSrc(a.wavSrc),delete a.oggSrc,delete a.aacSrc,delete a.mp3Src,delete a.wavSrc},setSrc:function(a){this.canplaythrough=!1;this.state="initial";this.src=a;this.audioDrawing.setAttribute("src",a);try{this.audioDrawing.load()}catch(b){}},play:function(){this.state="playing";this.fireEvent("statechange",this,this.state);this.canplaythrough?this.audioDrawing.play():this.audioDrawing.load()},pause:function(){this.state=
"paused";this.fireEvent("statechange",this,this.state);this.canplaythrough?this.audioDrawing.pause():this.audioDrawing.load()},stop:function(){this.audioDrawing.pause();this.onEnded()},setVolume:function(a){this.audioDrawing.volume=a},getVolume:function(){return this.audioDrawing.volume},getDuration:function(){return this.audioDrawing.duration},setCurrentTime:function(a){this.audioDrawing.currentTime=a},getCurrentTime:function(){return void 0===this.audioDrawing.currentTime?0:this.audioDrawing.currentTime},
getState:function(){return this.state},getIsReady:function(){return this.canplaythrough},onReady:function(){this.canplaythrough=!0;"playing"==this.state?this.audioDrawing.play():"paused"==this.state&&this.audioDrawing.pause();this.fireEvent("ready")},onTimeUpdate:function(){this.fireEvent("timeupdate",this,this.audioDrawing.currentTime);this.checkBuffering()},onEnded:function(){this.audioDrawing.pause();this.state="initial";this.audioDrawing.currentTime=0;this.fireEvent("ended",this);this.fireEvent("statechange",
this,this.state)},onProgress:function(){this.checkBuffering()},getCurrentBufferSize:function(){var a=this.audioDrawing.buffered,b=0,c=this.audioDrawing.currentTime;void 0===c&&(c=0);for(var d,e=0;e<a.length;e++){var f=a.start(e),g=a.end(e);void 0===d?f<=c&&g>=c&&(b=g-c,d=g):d>=f-0.01&&d<=g&&(b+=g-d,d=g)}return b},checkBuffering:function(){var a=this.getCurrentBufferSize();this.fireEvent("bufferingupdate",this,a)},onError:function(){this.state="error";this.fireEvent("error",this,this.audioDrawing.error.code);
this.fireEvent("statechange",this,this.state)},onWaiting:function(){this.canplaythrough||this.audioDrawing.load()},onAudioUnload:function(){this.canplaythrough&&this.pause()}},{verticalAlign:"top",horizontalAlign:"left",renderDrawing:function(){var a;Ui.Audio.htmlAudio?(this.audioDrawing=document.createElement("audio"),this.audioDrawing.style.display="none",this.connect(this.audioDrawing,"canplaythrough",this.onReady),this.connect(this.audioDrawing,"ended",this.onEnded),this.connect(this.audioDrawing,
"timeupdate",this.onTimeUpdate),this.connect(this.audioDrawing,"error",this.onError),this.connect(this.audioDrawing,"progress",this.onProgress),this.connect(this.audioDrawing,"waiting",this.onWaiting),this.audioDrawing.setAttribute("preload","auto"),this.audioDrawing.load(),a=this.audioDrawing):a=Ui.Audio.base.renderDrawing.apply(this,arguments);return a}});Ui.Audio.htmlAudio=!1;Ui.Audio.flashAudio=!1;Ui.Audio.supportOgg=!1;Ui.Audio.supportMp3=!1;Ui.Audio.supportWav=!1;Ui.Audio.supportAac=!1;
Ui.Audio.audioTest=document.createElement("audio");void 0!==Ui.Audio.audioTest.play&&(Ui.Audio.htmlAudio=!0,Ui.Audio.supportWav=!!Ui.Audio.audioTest.canPlayType&&""!==Ui.Audio.audioTest.canPlayType("audio/wav"),Ui.Audio.supportMp3=!!Ui.Audio.audioTest.canPlayType&&""!==Ui.Audio.audioTest.canPlayType("audio/mpeg"),Ui.Audio.supportOgg=!!Ui.Audio.audioTest.canPlayType&&""!==Ui.Audio.audioTest.canPlayType('audio/ogg; codecs="vorbis"'),Ui.Audio.supportAac=!!Ui.Audio.audioTest.canPlayType&&""!==Ui.Audio.audioTest.canPlayType('audio/mp4; codecs="mp4a.40.2"'));
Ui.Audio.audioTest=void 0;Ui.Element.extend("Ui.Video",{src:void 0,poster:void 0,oggSrc:void 0,mp4Src:void 0,webmSrc:void 0,loaddone:!1,videoDrawing:void 0,canplaythrough:!1,state:"initial",constructor:function(a){this.addEvents("ready","ended","timeupdate","bufferingupdate","statechange","error");this.connect(this,"unload",this.onVideoUnload);if(void 0!==a.oggSrc||void 0!==a.mp4Src||void 0!==a.webmSrc)void 0!==a.oggSrc&&Ui.Video.supportOgg?this.setSrc(a.oggSrc):void 0!==a.mp4Src&&Ui.Video.supportMp4?this.setSrc(a.mp4Src):
void 0!==a.webmSrc&&Ui.Video.supportWebm&&this.setSrc(a.webmSrc),delete a.oggSrc,delete a.mp4Src,delete a.webmSrc},setSrc:function(a){this.canplaythrough=!1;this.state="initial";this.src=a;"object"===typeof a?this.videoDrawing.src=URL.createObjectURL(a):this.videoDrawing.setAttribute("src",a);try{this.videoDrawing.load()}catch(b){}},setPoster:function(a){this.poster=a;this.videoDrawing.setAttribute("poster",a)},setAutoplay:function(a){this.videoDrawing.autoplay=a},play:function(){this.state="playing";
this.fireEvent("statechange",this,this.state);this.canplaythrough?this.videoDrawing.play():this.videoDrawing.load()},pause:function(){this.state="paused";this.fireEvent("statechange",this,this.state);this.canplaythrough?this.videoDrawing.pause():this.videoDrawing.load()},stop:function(){this.videoDrawing.pause();this.onEnded()},setVolume:function(a){this.videoDrawing.volume=a},getVolume:function(){return this.videoDrawing.volume},getDuration:function(){return this.videoDrawing.duration},setCurrentTime:function(a){this.videoDrawing.currentTime=
a},getCurrentTime:function(){return void 0===this.videoDrawing.currentTime?0:this.videoDrawing.currentTime},getState:function(){return this.state},getIsReady:function(){return this.canplaythrough},getNaturalWidth:function(){return this.naturalWidth},getNaturalHeight:function(){return this.naturalHeight},onReady:function(){this.canplaythrough=!0;this.naturalWidth=this.videoDrawing.videoWidth;this.naturalHeight=this.videoDrawing.videoHeight;"playing"==this.state?this.videoDrawing.play():"paused"==this.state&&
this.videoDrawing.pause();this.fireEvent("ready")},onTimeUpdate:function(){this.fireEvent("timeupdate",this,this.videoDrawing.currentTime);this.checkBuffering()},onEnded:function(){this.videoDrawing.pause();this.state="initial";this.videoDrawing.currentTime=0;this.fireEvent("ended",this);this.fireEvent("statechange",this,this.state)},onProgress:function(){this.checkBuffering()},getCurrentBufferSize:function(){var a=this.videoDrawing.buffered,b=0,c=this.videoDrawing.currentTime;void 0===c&&(c=0);for(var d,
e=0;e<a.length;e++){var f=a.start(e),g=a.end(e);void 0===d?f<=c&&g>=c&&(b=g-c,d=g):d>=f-0.01&&d<=g&&(b+=g-d,d=g)}return b},checkBuffering:function(){var a=this.getCurrentBufferSize();this.fireEvent("bufferingupdate",this,a)},onError:function(){this.state="error";this.fireEvent("error",this,this.videoDrawing.error.code);this.fireEvent("statechange",this,this.state)},onWaiting:function(){this.canplaythrough||this.videoDrawing.load()},onVideoUnload:function(){this.canplaythrough&&this.pause();this.videoDrawing.removeAttribute("src");
try{this.videoDrawing.load()}catch(a){}}},{renderDrawing:function(){Ui.Video.htmlVideo&&(this.videoDrawing=document.createElement("video"),this.connect(this.videoDrawing,"canplaythrough",this.onReady),this.connect(this.videoDrawing,"ended",this.onEnded),this.connect(this.videoDrawing,"timeupdate",this.onTimeUpdate),this.connect(this.videoDrawing,"error",this.onError),this.connect(this.videoDrawing,"progress",this.onProgress),this.connect(this.videoDrawing,"waiting",this.onWaiting),this.videoDrawing.setAttribute("preload",
"auto"),this.videoDrawing.load(),this.videoDrawing.style.position="absolute",this.videoDrawing.style.left="0px",this.videoDrawing.style.top="0px");return this.videoDrawing},arrangeCore:function(a,b){Ui.Video.htmlVideo&&(this.videoDrawing.setAttribute("width",a),this.videoDrawing.setAttribute("height",b))}});Ui.Video.htmlVideo=!1;Ui.Video.flashVideo=!1;Ui.Video.supportOgg=!1;Ui.Video.supportMp4=!1;Ui.Video.supportWebm=!1;Ui.Video.videoTest=document.createElement("video");
void 0!==Ui.Video.videoTest.play&&(Ui.Video.htmlVideo=!0,Ui.Video.supportMp4=!!Ui.Video.videoTest.canPlayType&&""!==Ui.Video.videoTest.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'),Ui.Video.supportOgg=!!Ui.Video.videoTest.canPlayType&&""!==Ui.Video.videoTest.canPlayType('video/ogg; codecs="theora, vorbis"'),Ui.Video.supportWebm=!!Ui.Video.videoTest.canPlayType&&""!==Ui.Video.videoTest.canPlayType('video/webm; codecs="vp8, vorbis"'));delete Ui.Video.videoTest;Ui.LBox.extend("Ui.Overable",{watcher:void 0,constructor:function(a){this.addEvents("enter","leave","move");this.connect(this,"ptrmove",function(a){!this.getIsDisabled()&&(!a.pointer.getIsDown()&&void 0===this.watcher)&&(this.watcher=a.pointer.watch(this),this.fireEvent("enter",this),this.connect(this.watcher,"move",function(){this.watcher.getIsInside()||this.watcher.cancel()}),this.connect(this.watcher,"down",function(){this.watcher.cancel()}),this.connect(this.watcher,"up",function(){this.watcher.cancel()}),
this.connect(this.watcher,"cancel",function(){this.watcher=void 0;this.fireEvent("leave",this)}))})},getIsOver:function(){return void 0!==this.watcher}});Ui.Overable.extend("Ui.Pressable",{lock:!1,lastTime:void 0,constructor:function(a){this.addEvents("press","down","up","activate");this.getDrawing().style.cursor="pointer";this.setFocusable(!0);this.setRole("button");this.connect(this,"ptrdown",this.onPointerDown);this.connect(this.getDrawing(),"keydown",this.onKeyDown);this.connect(this.getDrawing(),"keyup",this.onKeyUp)},getIsDown:function(){return this.isDown},setLock:function(a){(this.lock=a)?this.getDrawing().style.cursor="":this.getDrawing().style.cursor=
"pointer"},getLock:function(){return this.lock},press:function(){this.onPress()},activate:function(){this.onActivate()},onMouseOver:function(a){void 0!==this.task?(this.task.abort(),this.task=void 0):(this.isOver=!0,this.fireEvent("enter",this))},onMouseOut:function(a){this.task=new Core.DelayedTask({delay:0,scope:this,callback:this.onDelayedMouseOut})},onDelayedMouseOut:function(a){this.isOver=!1;this.fireEvent("leave",this);this.task=void 0},onPointerDown:function(a){if(!this.getIsDisabled()&&!this.isDown&&
!this.lock){var b=a.pointer.watch(this);this.connect(b,"move",function(){b.pointer.getIsMove()&&b.cancel()});this.connect(b,"up",function(a){this.onUp();this.onPress(a.pointer.getX(),a.pointer.getY());var d=(new Date).getTime()/1E3;if(void 0!==this.lastTime&&0.5>d-this.lastTime)this.onActivate(a.pointer.getX(),a.pointer.getY());this.lastTime=d;b.capture()});this.connect(b,"cancel",function(){this.onUp()});this.onDown()}},onKeyDown:function(a){13==a.which&&(!this.getIsDisabled()&&!this.lock)&&(a.preventDefault(),
a.stopPropagation(),this.onDown())},onKeyUp:function(a){var b=a.which;this.isDown&&(13==b&&!this.getIsDisabled()&&!this.lock)&&(a.preventDefault(),a.stopPropagation(),this.onUp(),this.onPress())},onDown:function(){this.isDown=!0;this.fireEvent("down",this)},onUp:function(){this.isDown=!1;this.fireEvent("up",this)},onPress:function(a,b){this.fireEvent("press",this,a,b)},onActivate:function(a,b){this.fireEvent("activate",this)}},{onDisable:function(){Ui.Pressable.base.onDisable.apply(this,arguments);
this.getDrawing().style.cursor=""},onEnable:function(){Ui.Pressable.base.onEnable.apply(this,arguments);this.lock?this.getDrawing().style.cursor="":this.getDrawing().style.cursor="pointer"}});Ui.Pressable.extend("Ui.Uploadable",{content:void 0,input:void 0,constructor:function(a){this.getDrawing().style.cursor="pointer";this.setFocusable(!0);this.setRole("button");this.addEvents("file");this.input=new Ui.UploadableFileWrapper;this.append(this.input);this.connect(this.input,"file",this.onFile)},setDirectoryMode:function(a){this.input.setDirectoryMode(a)},onFile:function(a,b){this.fireEvent("file",this,b)}},{onPress:function(){Ui.UploadableFileWrapper.hasInstance(this.input)&&this.input.select()},
setContent:function(a){this.content!==a&&(void 0!==this.content&&this.remove(this.content),void 0!==a&&(Ui.UploadableWrapper.hasInstance(this.input)?this.prepend(a):this.append(a)),this.content=a)}});
Ui.Element.extend("Ui.UploadableFileWrapper",{formDrawing:void 0,inputDrawing:void 0,iframeDrawing:void 0,directoryMode:!1,constructor:function(a){this.setOpacity(0);this.setClipToBounds(!0);this.addEvents("file")},select:function(){this.inputDrawing.click()},setDirectoryMode:function(a){this.directoryMode=a;void 0!==this.inputDrawing&&(this.directoryMode?this.inputDrawing.setAttribute("webkitdirectory",""):this.inputDrawing.removeAttribute("webkitdirectory"))},createInput:function(){this.formDrawing=
document.createElement("form");this.connect(this.formDrawing,"click",function(a){a.stopPropagation()});this.connect(this.formDrawing,"touchstart",function(a){a.stopPropagation()});this.formDrawing.method="POST";this.formDrawing.enctype="multipart/form-data";this.formDrawing.encoding="multipart/form-data";this.formDrawing.style.position="absolute";this.inputDrawing=document.createElement("input");this.inputDrawing.type="file";this.inputDrawing.setAttribute("name","file");this.directoryMode&&this.inputDrawing.setAttribute("webkitdirectory",
"");this.inputDrawing.style.position="absolute";this.inputDrawing.tabIndex=-1;this.connect(this.inputDrawing,"change",this.onChange);this.formDrawing.appendChild(this.inputDrawing);if(navigator.supportFileAPI){for(;0<this.getDrawing().childNodes.length;)this.getDrawing().removeChild(this.getDrawing().childNodes[0]);this.getDrawing().appendChild(this.formDrawing);this.arrangeCore(this.getLayoutX(),this.getLayoutY(),this.getLayoutWidth(),this.getLayoutHeight())}else this.iframeDrawing=document.createElement("iframe"),
this.iframeDrawing.style.position="absolute",this.iframeDrawing.style.top="0px",this.iframeDrawing.style.left="0px",this.iframeDrawing.style.width="0px",this.iframeDrawing.style.height="0px",this.iframeDrawing.style.clip="rect(0px 0px 0px 0px)",document.body.appendChild(this.iframeDrawing),this.iframeDrawing.contentWindow.document.write("<!DOCTYPE html><html><body></body></html>"),this.iframeDrawing.contentWindow.document.body.appendChild(this.formDrawing)},onChange:function(a){a.preventDefault();
a.stopPropagation();if(navigator.supportFileAPI)for(a=0;a<this.inputDrawing.files.length;a++)this.fireEvent("file",this,new Core.File({fileApi:this.inputDrawing.files[a]}));else this.disconnect(this.inputDrawing,"change",this.onChange),a=new Core.File({iframe:this.iframeDrawing,form:this.formDrawing,fileInput:this.inputDrawing}),this.createInput(),this.fireEvent("file",this,a)}},{onLoad:function(){Ui.UploadableFileWrapper.base.onLoad.call(this);this.createInput()},onUnload:function(){this.disconnect(this.inputDrawing,
"change",this.onChange);void 0!==this.iframeDrawing&&document.body.removeChild(this.iframeDrawing);Ui.UploadableFileWrapper.base.onUnload.call(this)},arrangeCore:function(a,b){Ui.UploadableFileWrapper.base.arrangeCore.apply(this,arguments);void 0!==this.formDrawing&&(this.formDrawing.style.top="0px",this.formDrawing.style.left="0px",this.formDrawing.style.width=Math.round(a)+"px",this.formDrawing.style.height=Math.round(b)+"px");void 0!==this.inputDrawing&&(this.inputDrawing.style.top="0px",this.inputDrawing.style.left=
"0px",this.inputDrawing.style.width=Math.round(a)+"px",this.inputDrawing.style.height=Math.round(b)+"px")}});
Ui.Element.extend("Ui.UploadableWrapper",{formDrawing:void 0,inputDrawing:void 0,directoryMode:!1,constructor:function(a){this.setClipToBounds(!0);this.setOpacity(0);this.addEvents("file")},setDirectoryMode:function(a){},createInput:function(){this.formDrawing=document.createElement("form");this.formDrawing.method="POST";this.formDrawing.enctype="multipart/form-data";this.formDrawing.encoding="multipart/form-data";this.formDrawing.style.display="block";this.formDrawing.style.position="absolute";this.formDrawing.style.left=
"0px";this.formDrawing.style.top="0px";this.formDrawing.style.width=this.getLayoutWidth()+"px";this.formDrawing.style.height=this.getLayoutHeight()+"px";this.inputDrawing=document.createElement("input");this.inputDrawing.type="file";this.inputDrawing.name="file";this.inputDrawing.tabIndex=-1;this.inputDrawing.style.fontSize="200px";this.inputDrawing.style.display="block";this.inputDrawing.style.cursor="pointer";this.inputDrawing.style.position="absolute";this.inputDrawing.style.left="0px";this.inputDrawing.style.top=
"0px";this.inputDrawing.style.width=this.getLayoutWidth()+"px";this.inputDrawing.style.height=this.getLayoutHeight()+"px";if(navigator.isIE7||navigator.isIE8)this.inputDrawing.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";this.formDrawing.appendChild(this.inputDrawing);this.connect(this.inputDrawing,"change",this.onChange);navigator.isWebkit&&(this.inputDrawing.style.webkitUserSelect="none");this.connect(this.inputDrawing,"touchstart",function(a){a.dontPreventDefault=!0});this.connect(this.inputDrawing,
"touchend",function(a){a.dontPreventDefault=!0});return this.formDrawing},onChange:function(a){if(!navigator.isOpera&&navigator.supportFileAPI)for(a=0;a<this.inputDrawing.files.length;a++)this.fireEvent("file",this,new Core.File({fileApi:this.inputDrawing.files[a]}));else this.getDrawing().removeChild(this.formDrawing),a=document.createElement("iframe"),a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.width="0px",a.style.height="0px",a.style.clip="rect(0px 0px 0px 0px)",document.body.appendChild(a),
a.contentWindow.document.write("<!DOCTYPE html><html><body></body></html>"),a.contentWindow.document.body.appendChild(this.formDrawing),this.disconnect(this.inputDrawing,"change",this.onChange),this.fireEvent("file",this,new Core.File({iframe:a,form:this.formDrawing,fileInput:this.inputDrawing})),this.getDrawing().appendChild(this.createInput())}},{renderDrawing:function(){Ui.UploadableWrapper.base.renderDrawing.apply(this,arguments).appendChild(this.createInput())},arrangeCore:function(a,b){this.formDrawing.style.width=
Math.round(a)+"px";this.formDrawing.style.height=Math.round(b)+"px";this.inputDrawing.style.width=Math.round(a)+"px";this.inputDrawing.style.height=Math.round(b)+"px"}});navigator.supportFormData=!0;try{new FormData}catch(err$$5){navigator.supportFormData=!1}Ui.Uploadable.testInput=document.createElement("input");navigator.supportFileAPI="files"in Ui.Uploadable.testInput;navigator.supportUploadDirectory="webkitdirectory"in Ui.Uploadable.testInput;delete Ui.Uploadable.testInput;Ui.Container.extend("Ui.MovableBase",{moveHorizontal:!0,moveVertical:!0,posX:0,posY:0,isMoving:!1,speedX:0,speedY:0,startPosX:void 0,startPosY:void 0,inertiaClock:void 0,inertia:!1,isDown:!1,lock:!1,isInMoveEvent:!1,cumulMove:0,constructor:function(a){this.addEvents("down","up","move");this.connect(this,"ptrdown",this.onPointerDown)},setLock:function(a){(this.lock=a)&&this.stopInertia()},getLock:function(){return this.lock},getIsDown:function(){return this.isDown},getInertia:function(){return this.inertia},
setInertia:function(a){this.inertia=a},getMoveHorizontal:function(){return this.moveHorizontal},setMoveHorizontal:function(a){this.moveHorizontal=a},getMoveVertical:function(){return this.moveVertical},setMoveVertical:function(a){this.moveVertical=a},setPosition:function(a,b,c){void 0!==a&&this.moveHorizontal&&(isNaN(a)?this.posX=0:this.posX=a);void 0!==b&&this.moveVertical&&(isNaN(b)?this.posY=0:this.posY=b);!this.isInMoveEvent&&!0!==c&&(this.isInMoveEvent=!0,this.fireEvent("move",this),this.onMove(this.posX,
this.posY),this.isInMoveEvent=!1)},getPositionX:function(){return this.posX},getPositionY:function(){return this.posY},onMove:function(a,b){},onDown:function(){this.cumulMove=0;this.isDown=!0;this.fireEvent("down",this)},onUp:function(a){this.isDown=!1;this.fireEvent("up",this,this.speedX,this.speedY,this.posX-this.startPosX,this.posY-this.startPosY,this.cumulMove,a)},onPointerDown:function(a){if(!this.isDown&&!this.getIsDisabled()&&!this.lock){this.stopInertia();this.startPosX=this.posX;this.startPosY=
this.posY;this.onDown(!1);var b=a.pointer.watch(this);this.connect(b,"move",function(){if(b.getIsCaptured())d=b.getDelta(),this.setPosition(this.startPosX+d.x,this.startPosY+d.y);else if(b.pointer.getIsMove()){var a=b.getDelta(),d=Math.sqrt(a.x*a.x+a.y*a.y);this.setPosition(this.startPosX+a.x,this.startPosY+a.y);var a=this.posX-this.startPosX,e=this.posY-this.startPosY,a=Math.sqrt(a*a+e*e),e=0;0<d&&(e=a/d);0.7<e?b.capture():(this.setPosition(this.startPosX,this.startPosY),b.cancel())}});this.connect(b,
"up",function(){this.cumulMove=b.pointer.getCumulMove();var a=b.getSpeed();this.speedX=a.x;this.speedY=a.y;this.inertia&&this.startInertia();this.onUp(!1)});this.connect(b,"cancel",function(){this.onUp(!0)})}},startInertia:function(){void 0===this.inertiaClock&&(this.inertiaClock=new Anim.Clock({duration:"forever",scope:this,target:this,onTimeupdate:function(a,b,c){0!==c&&(a=this.posX,b=this.posY,this.setPosition(this.posX+this.speedX*c,this.posY+this.speedY*c),this.posX==a&&this.posY==b?this.stopInertia():
(this.speedX-=3*this.speedX*c,this.speedY-=3*this.speedY*c,0.1>Math.abs(this.speedX)&&(this.speedX=0),0.1>Math.abs(this.speedY)&&(this.speedY=0),0===this.speedX&&0===this.speedY&&this.stopInertia()))}}),this.inertiaClock.begin())},stopInertia:function(){void 0!==this.inertiaClock&&(this.inertiaClock.stop(),this.inertiaClock=void 0)}});Ui.MovableBase.extend("Ui.Movable",{constructor:function(a){this.setFocusable(!0);this.contentBox=new Ui.LBox;this.appendChild(this.contentBox);this.contentBox.getDrawing().style.cursor="move";this.connect(this.getDrawing(),"keydown",this.onKeyDown)},onKeyDown:function(a){if(!this.getIsDisabled()){var b=a.which;if((37==b||39==b)&&this.moveHorizontal)a.preventDefault(),a.stopPropagation(),37==b&&this.setPosition(this.posX-10,void 0),39==b&&this.setPosition(this.posX+10,void 0);if((38==b||40==b)&&this.moveVertical)a.preventDefault(),
a.stopPropagation(),38==b&&this.setPosition(void 0,this.posY-10),40==b&&this.setPosition(void 0,this.posY+10)}}},{onMove:function(a,b){this.contentBox.setTransform(Ui.Matrix.createTranslate(this.posX,this.posY))},measureCore:function(a,b){return this.contentBox.measure(a,b)},arrangeCore:function(a,b){this.getDrawing().style.width="1px";this.getDrawing().style.height="1px";this.contentBox.arrange(0,0,a,b)},getContent:function(){return this.contentBox.getChildren()[0]},setContent:function(a){this.contentBox.setContent(a)},
onDisable:function(){this.contentBox.getDrawing().style.cursor="inherit"},onEnable:function(){this.contentBox.getDrawing().style.cursor="move"}});Ui.LBox.extend("Ui.Transformable",{inertia:!1,inertiaClock:void 0,contentBox:void 0,isDown:!1,transformLock:!1,watcher1:void 0,watcher2:void 0,angle:0,scale:1,translateX:0,translateY:0,startAngle:0,startScale:0,startTranslateX:0,startTranslateY:0,allowScale:!0,minScale:0.1,maxScale:10,allowRotate:!0,allowTranslate:!0,speedX:0,speedY:0,constructor:function(a){this.addEvents("down","up","transform","inertiastart","inertiaend");this.setFocusable(!0);this.contentBox=new Ui.LBox;this.contentBox.setTransformOrigin(0,
0,!0);this.appendChild(this.contentBox);this.connect(this,"ptrdown",this.onPointerDown);this.connect(this,"wheel",this.onWheel)},setAllowScale:function(a){this.allowScale=a},setMinScale:function(a){this.minScale=a},setMaxScale:function(a){this.maxScale=a},setAllowRotate:function(a){this.allowRotate=a},setAllowTranslate:function(a){this.allowTranslate=a},getIsDown:function(){return this.isDown},getIsInertia:function(){return void 0!==this.inertiaClock},getAngle:function(){return this.angle},setAngle:function(a){this.setContentTransform(void 0,
void 0,void 0,a)},getScale:function(){return this.scale},setScale:function(a){this.setContentTransform(void 0,void 0,a,void 0)},getTranslateX:function(){return this.translateX},setTranslateX:function(a){this.setContentTransform(a,void 0,void 0,void 0)},getTranslateY:function(){return this.translateY},setTranslateY:function(a){this.setContentTransform(void 0,a,void 0,void 0)},buildMatrix:function(a,b,c,d){void 0===a&&(a=this.translateX);void 0===b&&(b=this.translateY);void 0===c&&(c=this.scale);void 0===
d&&(d=this.angle);var e=new Ui.Matrix;e.translate(this.getLayoutWidth()*this.transformOriginX,this.getLayoutHeight()*this.transformOriginX);e.translate(a,b);e.scale(c,c);e.rotate(d);e.translate(-this.getLayoutWidth()*this.transformOriginX,-this.getLayoutHeight()*this.transformOriginX);return e},getMatrix:function(){var a=new Ui.Matrix;a.translate(this.getLayoutWidth()*this.transformOriginX,this.getLayoutHeight()*this.transformOriginX);a.translate(this.translateX,this.translateY);a.scale(this.scale,
this.scale);a.rotate(this.angle);a.translate(-this.getLayoutWidth()*this.transformOriginX,-this.getLayoutHeight()*this.transformOriginX);return a},getBoundaryBox:function(a){void 0===a&&(a=this.getMatrix());var b=(new Ui.Point({x:0,y:0})).matrixTransform(a),c=(new Ui.Point({x:this.getLayoutWidth(),y:0})).matrixTransform(a),d=(new Ui.Point({x:this.getLayoutWidth(),y:this.getLayoutHeight()})).matrixTransform(a),e=(new Ui.Point({x:0,y:this.getLayoutHeight()})).matrixTransform(a);a=Math.min(b.x,Math.min(c.x,
Math.min(d.x,e.x)));var f=Math.min(b.y,Math.min(c.y,Math.min(d.y,e.y))),g=Math.max(b.x,Math.max(c.x,Math.max(d.x,e.x))),b=Math.max(b.y,Math.max(c.y,Math.max(d.y,e.y)));return{x:a,y:f,width:g-a,height:b-f}},setContentTransform:function(a,b,c,d){void 0===a&&(a=this.translateX);void 0===b&&(b=this.translateY);void 0===c&&(c=this.scale);void 0===d&&(d=this.angle);this.translateX=a;this.translateY=b;this.scale=c;this.angle=d;this.transformLock||(this.transformLock=!0,this.fireEvent("transform",this),a=
!((void 0===this.watcher1||this.watcher1.getIsCaptured())&&(void 0===this.watcher2||this.watcher2.getIsCaptured())),this.onContentTransform(a),this.transformLock=!1)},onContentTransform:function(a){!0!==a&&this.contentBox.setTransform(this.getMatrix())},onDown:function(){this.isDown=!0;this.fireEvent("down",this)},onUp:function(){this.isDown=!1;this.fireEvent("up",this)},onPointerDown:function(a){this.stopInertia();if(void 0===this.watcher1){if(this.allowTranslate)this.onDown();this.watcher1=a=a.pointer.watch(this);
this.connect(a,"move",this.onPointerMove);this.connect(a,"up",this.onPointerUp);this.connect(a,"cancel",this.onPointerCancel);this.startAngle=this.angle;this.startScale=this.scale;this.startTranslateX=this.translateX;this.startTranslateY=this.translateY}else if(void 0===this.watcher2){if(!this.allowTranslate)this.onDown();this.watcher1.pointer.setInitialPosition(this.watcher1.pointer.getX(),this.watcher1.pointer.getY());this.watcher2=a=a.pointer.watch(this);this.connect(a,"move",this.onPointerMove);
this.connect(a,"up",this.onPointerUp);this.connect(a,"cancel",this.onPointerUp);this.startAngle=this.angle;this.startScale=this.scale;this.startTranslateX=this.translateX;this.startTranslateY=this.translateY}},onPointerMove:function(a){var b,c,d;if(void 0!==this.watcher1&&void 0!==this.watcher2){!this.watcher1.getIsCaptured()&&this.watcher1.pointer.getIsMove()&&this.watcher1.capture();!this.watcher2.getIsCaptured()&&this.watcher2.pointer.getIsMove()&&this.watcher2.capture();b=this.pointFromWindow({x:this.watcher1.pointer.getX(),
y:this.watcher1.pointer.getY()});c=this.pointFromWindow({x:this.watcher2.pointer.getX(),y:this.watcher2.pointer.getY()});a=this.pointFromWindow({x:this.watcher1.pointer.getInitialX(),y:this.watcher1.pointer.getInitialY()});d=this.pointFromWindow({x:this.watcher2.pointer.getInitialX(),y:this.watcher2.pointer.getInitialY()});var e=d.x-a.x;d=d.y-a.y;var f,g=c.x-b.x,h=c.y-b.y,k;f=Math.sqrt(e*e+d*d);k=Math.sqrt(g*g+h*h);c=k/f;e/=f;d/=f;g/=k;h/=k;e=-(180*Math.atan2(d*g-e*h,e*g+d*h))/Math.PI;d=new Ui.Matrix;
d.translate(b.x-a.x,b.y-a.y);d.translate(a.x,a.y);if(this.allowScale){if(void 0!==this.minScale||void 0!==this.maxScale)b=this.startScale*c,void 0!==this.minScale&&b<this.minScale&&(b=this.minScale),void 0!==this.maxScale&&b>this.maxScale&&(b=this.maxScale),c=b/this.startScale;d.scale(c,c)}else c=1;this.allowRotate?d.rotate(e):e=0;d.translate(-a.x,-a.y);a=new Ui.Point({x:this.getLayoutWidth()*this.transformOriginX,y:this.getLayoutHeight()*this.transformOriginX});d.translate(a.x,a.y);d.translate(this.startTranslateX,
this.startTranslateY);d.scale(this.startScale,this.startScale);d.rotate(this.startAngle);d.translate(-a.x,-a.y);a.matrixTransform(d);this.setContentTransform(a.x-this.getLayoutWidth()*this.transformOriginX,a.y-this.getLayoutHeight()*this.transformOriginY,this.startScale*c,this.startAngle+e)}else void 0!==this.watcher1&&this.allowTranslate&&(b=this.pointFromWindow({x:this.watcher1.pointer.getX(),y:this.watcher1.pointer.getY()}),a=this.pointFromWindow({x:this.watcher1.pointer.getInitialX(),y:this.watcher1.pointer.getInitialY()}),
c=b.x-a.x,e=b.y-a.y,c=Math.sqrt(c*c+e*e),this.setContentTransform(this.startTranslateX+(b.x-a.x),this.startTranslateY+(b.y-a.y),this.startScale,this.startAngle),a=this.translateX-this.startTranslateX,b=this.translateY-this.startTranslateY,a=Math.sqrt(a*a+b*b),b=0,0<c&&(b=a/c),!this.watcher1.getIsCaptured()&&(this.watcher1.pointer.getIsMove()&&0.7<b)&&this.watcher1.capture())},onPointerCancel:function(a){this.onPointerUp(a);this.stopInertia();this.angle=this.startAngle;this.scale=this.startScale;this.translateX=
this.startTranslateX;this.translateY=this.startTranslateY},onPointerUp:function(a){if(void 0!==this.watcher1&&this.watcher1===a)if(void 0!==this.watcher2){if(this.watcher1=this.watcher2,this.watcher2=void 0,this.watcher1.pointer.setInitialPosition(this.watcher1.pointer.getX(),this.watcher1.pointer.getY()),this.startAngle=this.angle,this.startScale=this.scale,this.startTranslateX=this.translateX,this.startTranslateY=this.translateY,!this.allowTranslate)this.onUp()}else{if(this.allowTranslate)this.onUp();
var b=this.watcher1.getSpeed();this.speedX=b.x;this.speedY=b.y;this.watcher1=void 0;this.startInertia()}if(void 0!==this.watcher2&&this.watcher2===a&&(this.watcher2=void 0,this.watcher1.pointer.setInitialPosition(this.watcher1.pointer.getX(),this.watcher1.pointer.getY()),this.startAngle=this.angle,this.startScale=this.scale,this.startTranslateX=this.translateX,this.startTranslateY=this.translateY,!this.allowTranslate))this.onUp()},onWheel:function(a){var b=0,b=a.deltaX+a.deltaY;if(a.altKey){if(this.allowRotate){var c=
b/5,d=this.pointFromWindow({x:a.clientX,y:a.clientY}),b=new Ui.Matrix;b.translate(d.x,d.y);b.rotate(c,c);b.translate(-d.x,-d.y);d=new Ui.Point({x:this.getLayoutWidth()*this.transformOriginX,y:this.getLayoutHeight()*this.transformOriginX});b.translate(d.x,d.y);b.translate(this.translateX,this.translateY);b.scale(this.scale,this.scale);b.rotate(this.angle);b.translate(-d.x,-d.y);d.matrixTransform(b);this.setContentTransform(d.x-this.getLayoutWidth()*this.transformOriginX,d.y-this.getLayoutHeight()*
this.transformOriginY,this.scale,this.angle+c)}}else if(a.ctrlKey){if(this.allowScale){c=this.scale-b/120;void 0!==this.minScale&&c<this.minScale&&(c=this.minScale);void 0!==this.maxScale&&c>this.maxScale&&(c=this.maxScale);var e=c/this.scale,d=this.pointFromWindow({x:a.clientX,y:a.clientY}),b=new Ui.Matrix;b.translate(d.x,d.y);b.scale(e,e);b.translate(-d.x,-d.y);d=new Ui.Point({x:this.getLayoutWidth()*this.transformOriginX,y:this.getLayoutHeight()*this.transformOriginX});b.translate(d.x,d.y);b.translate(this.translateX,
this.translateY);b.scale(this.scale,this.scale);b.rotate(this.angle);b.translate(-d.x,-d.y);d.matrixTransform(b);this.setContentTransform(d.x-this.getLayoutWidth()*this.transformOriginX,d.y-this.getLayoutHeight()*this.transformOriginY,c,this.angle)}}else return;a.stopPropagation()},getInertia:function(){return this.inertia},setInertia:function(a){this.inertia=a},startInertia:function(){void 0===this.inertiaClock&&this.inertia&&(this.inertiaClock=new Anim.Clock({duration:"forever",target:this}),this.connect(this.inertiaClock,
"timeupdate",this.onTimeupdate),this.inertiaClock.begin(),this.fireEvent("inertiastart",this))},onTimeupdate:function(a,b,c){0!==c&&(a=this.translateX,b=this.translateY,this.setContentTransform(this.translateX+this.speedX*c,this.translateY+this.speedY*c,void 0,void 0),this.translateX===a&&this.translateY===b?this.stopInertia():(this.speedX-=3*this.speedX*c,this.speedY-=3*this.speedY*c,0.1>Math.abs(this.speedX)&&(this.speedX=0),0.1>Math.abs(this.speedY)&&(this.speedY=0),0===this.speedX&&0===this.speedY&&
this.stopInertia()))},stopInertia:function(){void 0!==this.inertiaClock&&(this.inertiaClock.stop(),this.inertiaClock=void 0,this.fireEvent("inertiaend",this))}},{setContent:function(a){this.contentBox.setContent(a)},arrangeCore:function(a,b){Ui.Transformable.base.arrangeCore.apply(this,arguments);this.onContentTransform()}});Ui.Container.extend("Ui.Scrollable",{contentBox:void 0,scrollHorizontal:!0,scrollVertical:!0,scrollbarHorizontalBox:void 0,scrollbarVerticalBox:void 0,showShadows:!1,lock:!1,isOver:!1,showClock:void 0,offsetX:0,offsetY:0,relativeOffsetX:0,relativeOffsetY:0,viewWidth:0,viewHeight:0,contentWidth:0,contentHeight:0,overWatcher:void 0,scrollLock:!1,constructor:function(a){this.addEvents("scroll");this.contentBox=new Ui.ScrollableContent;this.connect(this.contentBox,"scroll",this.onScroll);this.connect(this.contentBox,
"down",this.autoShowScrollbars);this.connect(this.contentBox,"inertiaend",this.autoHideScrollbars);this.appendChild(this.contentBox);this.scrollbarHorizontalBox=new Ui.Movable({moveVertical:!1});this.connect(this.scrollbarHorizontalBox,"down",this.autoShowScrollbars);this.connect(this.scrollbarHorizontalBox,"up",this.autoHideScrollbars);this.connect(this.scrollbarHorizontalBox,"move",this.onScrollbarHorizontalMove);this.appendChild(this.scrollbarHorizontalBox);this.scrollbarVerticalBox=new Ui.Movable({moveHorizontal:!1});
this.connect(this.scrollbarVerticalBox,"down",this.autoShowScrollbars);this.connect(this.scrollbarVerticalBox,"up",this.autoHideScrollbars);this.connect(this.scrollbarVerticalBox,"move",this.onScrollbarVerticalMove);this.appendChild(this.scrollbarVerticalBox);this.scrollbarHorizontalBox.setOpacity(0);this.scrollbarVerticalBox.setOpacity(0);this.connect(this,"ptrmove",function(a){!this.getIsDisabled()&&(!a.pointer.getIsDown()&&void 0===this.overWatcher)&&(this.overWatcher=a.pointer.watch(this),this.isOver=
!0,this.autoShowScrollbars(),this.connect(this.overWatcher,"move",function(){this.overWatcher.getIsInside()||this.overWatcher.cancel()}),this.connect(this.overWatcher,"down",function(){this.overWatcher.cancel()}),this.connect(this.overWatcher,"up",function(){this.overWatcher.cancel()}),this.connect(this.overWatcher,"cancel",function(){this.overWatcher=void 0;this.isOver=!1;this.autoHideScrollbars()}))});this.connect(this,"wheel",this.onWheel)},setMaxScale:function(a){this.contentBox.setMaxScale(a)},
setContent:function(a){this.contentBox.setContent(a)},getContent:function(){return this.contentBox.getContent()},getInertia:function(){return this.contentBox.getInertia()},setInertia:function(a){this.contentBox.setInertia(a)},getScrollHorizontal:function(){return this.scrollHorizontal},setScrollHorizontal:function(a){a!==this.scrollHorizontal&&(this.scrollHorizontal=a,this.invalidateMeasure())},getScrollVertical:function(){return this.scrollVertical},setScrollVertical:function(a){a!==this.scrollVertical&&
(this.scrollVertical=a,this.invalidateMeasure())},setScrollbarVertical:function(a){this.scrollbarVerticalBox.setContent(a)},setScrollbarHorizontal:function(a){this.scrollbarHorizontalBox.setContent(a)},setOffset:function(a,b,c,d){void 0===c&&(c=!1);void 0===a?a=this.offsetX:c||(a*=this.contentWidth-this.viewWidth);void 0===b?b=this.offsetY:c||(b*=this.contentHeight-this.viewHeight);0>a?a=0:this.viewWidth+a>this.contentWidth&&(a=this.contentWidth-this.viewWidth);0>b?b=0:this.viewHeight+b>this.contentHeight&&
(b=this.contentHeight-this.viewHeight);this.relativeOffsetX=this.contentWidth<=this.viewWidth?0:a/(this.contentWidth-this.viewWidth);this.relativeOffsetY=this.contentHeight<=this.viewHeight?0:b/(this.contentHeight-this.viewHeight);return this.offsetX!==a||this.offsetY!==b?(this.offsetX=a,this.offsetY=b,this.contentBox.setOffset(a,b),!0):!1},getOffsetX:function(){return this.contentBox.getOffsetX()},getRelativeOffsetX:function(){return this.relativeOffsetX},getOffsetY:function(){return this.contentBox.getOffsetY()},
getRelativeOffsetY:function(){return this.relativeOffsetY},getScale:function(){return this.contentBox.getScale()},setScale:function(a){this.contentBox.setScale(a)},getIsDown:function(){return this.contentBox.getIsDown()},getIsInertia:function(){return this.contentBox.getIsInertia()},onWheel:function(a){this.setOffset(this.contentBox.getOffsetX()+3*a.deltaX,this.contentBox.getOffsetY()+3*a.deltaY,!0)&&a.stopPropagation()},autoShowScrollbars:function(){void 0===this.showClock&&(this.showClock=new Anim.Clock({duration:"forever"}),
this.connect(this.showClock,"timeupdate",this.onShowBarsTick),this.showClock.begin())},autoHideScrollbars:function(){!this.contentBox.getIsDown()&&(!this.contentBox.getIsInertia()&&!this.isOver)&&void 0===this.showClock&&(this.showClock=new Anim.Clock({duration:"forever"}),this.connect(this.showClock,"timeupdate",this.onShowBarsTick),this.showClock.begin())},onShowBarsTick:function(a,b,c){a=this.contentBox.getIsDown()||this.contentBox.getIsInertia()||this.isOver||this.scrollbarVerticalBox.getIsDown()||
this.scrollbarHorizontalBox.getIsDown();b=!1;var d=this.scrollbarHorizontalBox.getOpacity();a?(d+=2*c,1<=d&&(d=1,b=!0)):(d-=2*c,0>=d&&(d=0,b=!0));this.scrollbarHorizontalBox.setOpacity(d);this.scrollbarVerticalBox.setOpacity(d);b&&(this.showClock.stop(),this.showClock=void 0)},onScroll:function(){this.updateOffset();this.fireEvent("scroll",this,this.offsetX,this.offsetY)},updateOffset:function(){if(void 0!==this.contentBox){this.offsetX=this.contentBox.getOffsetX();this.offsetY=this.contentBox.getOffsetY();
this.viewWidth=this.getLayoutWidth();this.viewHeight=this.getLayoutHeight();this.contentWidth=this.contentBox.getContentWidth();this.contentHeight=this.contentBox.getContentHeight();this.relativeOffsetX=this.contentWidth<=this.viewWidth?0:this.offsetX/(this.contentWidth-this.viewWidth);this.relativeOffsetY=this.contentHeight<=this.viewHeight?0:this.offsetY/(this.contentHeight-this.viewHeight);this.scrollbarVerticalNeeded=this.contentHeight>this.viewHeight?!0:!1;this.scrollbarHorizontalNeeded=this.contentWidth>
this.viewWidth?!0:!1;this.scrollbarVerticalNeeded?(this.scrollbarVerticalHeight=Math.max(this.viewHeight/this.contentHeight*this.viewHeight,this.scrollbarVerticalBox.getMeasureHeight()),this.scrollbarVerticalBox.arrange(this.getLayoutWidth()-this.scrollbarVerticalBox.getMeasureWidth(),0,this.scrollbarVerticalBox.getMeasureWidth(),this.scrollbarVerticalHeight),this.scrollbarVerticalBox.show()):(this.scrollbarVerticalBox.hide(),this.offsetY=0);this.scrollbarHorizontalNeeded?(this.scrollbarHorizontalWidth=
Math.max(this.viewWidth/this.contentWidth*this.viewWidth,this.scrollbarHorizontalBox.getMeasureWidth()),this.scrollbarHorizontalBox.arrange(0,this.getLayoutHeight()-this.scrollbarHorizontalBox.getMeasureHeight(),this.scrollbarHorizontalWidth,this.scrollbarHorizontalBox.getMeasureHeight()),this.scrollbarHorizontalBox.show()):(this.scrollbarHorizontalBox.hide(),this.offsetX=0);this.scrollLock=!0;if(this.scrollbarHorizontalNeeded){var a=this.offsetX/(this.contentWidth-this.viewWidth);1<a&&(a=1,this.setOffset(a,
void 0));this.scrollbarHorizontalBox.setPosition((this.viewWidth-this.scrollbarHorizontalWidth)*a,void 0)}this.scrollbarVerticalNeeded&&(a=this.offsetY/(this.contentHeight-this.viewHeight),1<a&&(a=1,this.setOffset(void 0,a)),this.scrollbarVerticalBox.setPosition(void 0,(this.viewHeight-this.scrollbarVerticalHeight)*a));this.scrollLock=!1}},onScrollbarHorizontalMove:function(a){if(!this.scrollLock){var b=this.viewWidth-this.scrollbarHorizontalBox.getLayoutWidth(),c=Math.min(1,Math.max(0,a.getPositionX()/
b));this.setOffset(c,void 0);a.setPosition(c*b,void 0)}},onScrollbarVerticalMove:function(a){if(!this.scrollLock){var b=this.viewHeight-this.scrollbarVerticalBox.getLayoutHeight(),c=Math.min(1,Math.max(0,a.getPositionY()/b));this.setOffset(void 0,c);a.setPosition(void 0,c*b)}}},{onScrollIntoView:function(a){var b=Ui.Matrix.createTranslate(this.offsetX,this.offsetY);b.multiply(a.transformToElement(this));var c=new Ui.Point({x:0,y:0});c.matrixTransform(b);var d=new Ui.Point({x:a.getLayoutWidth(),y:a.getLayoutHeight()});
d.matrixTransform(b);if(c.y<this.offsetY||c.y>this.offsetY+this.viewHeight||d.y>this.offsetY+this.viewHeight)Math.abs(this.offsetY+this.viewHeight-d.y)<Math.abs(this.offsetY-c.y)?this.setOffset(this.offsetX,d.y-this.viewHeight,!0):this.setOffset(this.offsetX,c.y,!0),this.contentBox.stopInertia();if(c.x<this.offsetX||c.x>this.offsetX+this.viewWidth||d.x>this.offsetX+this.viewWidth)Math.abs(this.offsetX+this.viewWidth-d.x)<Math.abs(this.offsetX-c.x)?this.setOffset(d.x-this.viewWidth,this.offsetY,!0):
this.setOffset(c.x,this.offsetY,!0),this.contentBox.stopInertia();Ui.Scrollable.base.onScrollIntoView.apply(this,arguments)},measureCore:function(a,b){var c={width:0,height:0};this.scrollbarHorizontalBox.measure(a,b);this.scrollbarVerticalBox.measure(a,b);var d=this.contentBox.measure(a,b);c.width=d.width<a?d.width:a;c.height=d.height<b?d.height:b;this.scrollVertical||(c.height=d.height);this.scrollHorizontal||(c.width=d.width);return c},arrangeCore:function(a,b){this.viewWidth=a;this.viewHeight=
b;this.contentBox.arrange(0,0,this.viewWidth,this.viewHeight);this.contentWidth=this.contentBox.getContentWidth();this.contentHeight=this.contentBox.getContentHeight();this.updateOffset()}});
Ui.Transformable.extend("Ui.ScrollableContent",{contentWidth:0,contentHeight:0,constructor:function(a){this.addEvents("scroll");this.setClipToBounds(!0);this.connect(this.getDrawing(),"scroll",function(){this.translateX-=this.getDrawing().scrollLeft;this.translateY-=this.getDrawing().scrollTop;this.getDrawing().scrollLeft=0;this.getDrawing().scrollTop=0;this.onContentTransform()});this.setAllowTranslate(!0);this.setAllowRotate(!1);this.setMinScale(1);this.setMaxScale(1);this.setTransformOrigin(0,
0);this.setInertia(!0)},getOffsetX:function(){return-this.getTranslateX()},getOffsetY:function(){return-this.getTranslateY()},setOffset:function(a,b){this.setContentTransform(-a,-b,void 0,void 0)},getContentWidth:function(){return this.contentWidth},getContentHeight:function(){return this.contentHeight}},{arrangeCore:function(a,b){Ui.ScrollableContent.base.arrangeCore.call(this,Math.max(a,this.getMeasureWidth()),Math.max(b,this.getMeasureHeight()));this.onContentTransform()},onContentTransform:function(a){var b=
this.getScale();0<this.translateX&&(this.translateX=0);0<this.translateY&&(this.translateY=0);var c=this.getLayoutWidth(),d=this.getLayoutHeight();this.contentWidth=this.getFirstChild().getLayoutWidth()*b;this.contentHeight=this.getFirstChild().getLayoutHeight()*b;this.translateX=Math.max(this.translateX,-(this.contentWidth-c));this.translateY=Math.max(this.translateY,-(this.contentHeight-d));Ui.ScrollableContent.base.onContentTransform.apply(this,arguments);this.contentWidth=this.getFirstChild().getLayoutWidth()*
b;this.contentHeight=this.getFirstChild().getLayoutHeight()*b;!0!==a&&this.fireEvent("scroll",this)}});Core.Object.extend("Ui.ScrollLoader",{constructor:function(a){this.addEvents("change")},getMin:function(){return 0},getMax:function(){return-1},getElementAt:function(a){}});
Ui.Container.extend("Ui.VBoxScrollable",{contentBox:void 0,scrollHorizontal:!0,scrollVertical:!0,scrollbarHorizontalBox:void 0,scrollbarVerticalBox:void 0,showShadows:!1,lock:!1,isOver:!1,showClock:void 0,offsetX:0,offsetY:0,viewWidth:0,viewHeight:0,contentWidth:0,contentHeight:0,overWatcher:void 0,scrollLock:!1,constructor:function(a){this.addEvents("scroll");this.contentBox=new Ui.VBoxScrollableContent;this.connect(this.contentBox,"scroll",this.onScroll);this.connect(this.contentBox,"down",this.autoShowScrollbars);
this.connect(this.contentBox,"inertiaend",this.autoHideScrollbars);this.appendChild(this.contentBox);this.scrollbarHorizontalBox=new Ui.Movable({moveVertical:!1});this.connect(this.scrollbarHorizontalBox,"down",this.autoShowScrollbars);this.connect(this.scrollbarHorizontalBox,"up",this.autoHideScrollbars);this.connect(this.scrollbarHorizontalBox,"move",this.onScrollbarHorizontalMove);this.appendChild(this.scrollbarHorizontalBox);this.scrollbarVerticalBox=new Ui.Movable({moveHorizontal:!1});this.connect(this.scrollbarVerticalBox,
"down",this.autoShowScrollbars);this.connect(this.scrollbarVerticalBox,"up",this.autoHideScrollbars);this.connect(this.scrollbarVerticalBox,"move",this.onScrollbarVerticalMove);this.appendChild(this.scrollbarVerticalBox);this.scrollbarHorizontalBox.setOpacity(0);this.scrollbarVerticalBox.setOpacity(0);this.connect(this,"ptrmove",function(a){!this.getIsDisabled()&&(!a.pointer.getIsDown()&&void 0===this.overWatcher)&&(this.overWatcher=a.pointer.watch(this),this.isOver=!0,this.autoShowScrollbars(),this.connect(this.overWatcher,
"move",function(){this.overWatcher.getIsInside()||this.overWatcher.cancel()}),this.connect(this.overWatcher,"down",function(){this.overWatcher.cancel()}),this.connect(this.overWatcher,"up",function(){this.overWatcher.cancel()}),this.connect(this.overWatcher,"cancel",function(){this.overWatcher=void 0;this.isOver=!1;this.autoHideScrollbars()}))});this.connect(this,"wheel",this.onWheel)},setLoader:function(a){this.contentBox.setLoader(a)},setMaxScale:function(a){this.contentBox.setMaxScale(a)},setContent:function(a){this.contentBox.setContent(a)},
getContent:function(){return this.contentBox.getContent()},getScrollHorizontal:function(){return this.scrollHorizontal},setScrollHorizontal:function(a){a!==this.scrollHorizontal&&(this.scrollHorizontal=a,this.invalidateMeasure())},getScrollVertical:function(){return this.scrollVertical},setScrollVertical:function(a){a!==this.scrollVertical&&(this.scrollVertical=a,this.invalidateMeasure())},setScrollbarVertical:function(a){this.scrollbarVerticalBox.setContent(a)},setScrollbarHorizontal:function(a){this.scrollbarHorizontalBox.setContent(a)},
setOffset:function(a,b,c,d){void 0===c&&(c=!1);void 0===a?a=this.offsetX:c||(a*=this.contentWidth-this.viewWidth);void 0===b?b=this.offsetY:c||(b*=this.contentHeight-this.viewHeight);0>a?a=0:this.viewWidth+a>this.contentWidth&&(a=this.contentWidth-this.viewWidth);0>b?b=0:this.viewHeight+b>this.contentHeight&&(b=this.contentHeight-this.viewHeight);this.relativeOffsetX=a/(this.contentWidth-this.viewWidth);this.relativeOffsetY=b/(this.contentHeight-this.viewHeight);return this.offsetX!==a||this.offsetY!==
b?(this.offsetX=a,this.offsetY=b,this.contentBox.setOffset(a,b),!0):!1},getOffsetX:function(){return this.contentBox.getOffsetX()},getRelativeOffsetX:function(){return this.relativeOffsetX},getOffsetY:function(){return this.contentBox.getOffsetY()},getRelativeOffsetY:function(){return this.relativeOffsetY},onWheel:function(a){this.setOffset(this.contentBox.getOffsetX()+3*a.deltaX,this.contentBox.getOffsetY()+3*a.deltaY,!0)&&a.stopPropagation()},autoShowScrollbars:function(){void 0===this.showClock&&
(this.showClock=new Anim.Clock({duration:"forever"}),this.connect(this.showClock,"timeupdate",this.onShowBarsTick),this.showClock.begin())},autoHideScrollbars:function(){!this.contentBox.getIsDown()&&(!this.contentBox.getIsInertia()&&!this.isOver&&!this.scrollbarVerticalBox.getIsDown()&&!this.scrollbarHorizontalBox.getIsDown())&&void 0===this.showClock&&(this.showClock=new Anim.Clock({duration:"forever"}),this.connect(this.showClock,"timeupdate",this.onShowBarsTick),this.showClock.begin())},onShowBarsTick:function(a,
b,c){a=this.contentBox.getIsDown()||this.contentBox.getIsInertia()||this.isOver;a=this.contentBox.getIsDown()||this.contentBox.getIsInertia()||this.isOver||this.scrollbarVerticalBox.getIsDown()||this.scrollbarHorizontalBox.getIsDown();b=!1;var d=this.scrollbarHorizontalBox.getOpacity();a?(d+=2*c,1<=d&&(d=1,b=!0)):(d-=2*c,0>=d&&(d=0,b=!0));this.scrollbarHorizontalBox.setOpacity(d);this.scrollbarVerticalBox.setOpacity(d);b&&(this.showClock.stop(),this.showClock=void 0)},onScroll:function(){this.updateOffset();
this.fireEvent("scroll",this,this.offsetX,this.offsetY)},updateOffset:function(){if(void 0!==this.contentBox){this.offsetX=this.contentBox.getOffsetX();this.offsetY=this.contentBox.getOffsetY();this.viewWidth=this.getLayoutWidth();this.viewHeight=this.getLayoutHeight();this.contentWidth=this.contentBox.getContentWidth();this.contentHeight=this.contentBox.getContentHeight();this.relativeOffsetX=this.offsetX/(this.contentWidth-this.viewWidth);this.relativeOffsetY=this.offsetY/(this.contentHeight-this.viewHeight);
this.scrollbarVerticalNeeded=this.contentHeight>this.viewHeight?!0:!1;this.scrollbarHorizontalNeeded=this.contentWidth>this.viewWidth?!0:!1;this.scrollbarVerticalNeeded?(this.scrollbarVerticalHeight=Math.max(this.viewHeight/this.contentHeight*this.viewHeight,this.scrollbarVerticalBox.getMeasureHeight()),this.scrollbarVerticalBox.arrange(this.getLayoutWidth()-this.scrollbarVerticalBox.getMeasureWidth(),0,this.scrollbarVerticalBox.getMeasureWidth(),this.scrollbarVerticalHeight),this.scrollbarVerticalBox.show()):
(this.scrollbarVerticalBox.hide(),this.offsetY=0);this.scrollbarHorizontalNeeded?(this.scrollbarHorizontalWidth=Math.max(this.viewWidth/this.contentWidth*this.viewWidth,this.scrollbarHorizontalBox.getMeasureWidth()),this.scrollbarHorizontalBox.arrange(0,this.getLayoutHeight()-this.scrollbarHorizontalBox.getMeasureHeight(),this.scrollbarHorizontalWidth,this.scrollbarHorizontalBox.getMeasureHeight()),this.scrollbarHorizontalBox.show()):(this.scrollbarHorizontalBox.hide(),this.offsetX=0);this.scrollLock=
!0;if(this.scrollbarHorizontalNeeded){var a=this.offsetX/(this.contentWidth-this.viewWidth);1<a&&(a=1,this.setOffset(a,void 0));this.scrollbarHorizontalBox.setPosition((this.viewWidth-this.scrollbarHorizontalWidth)*a,void 0)}this.scrollbarVerticalNeeded&&(a=this.offsetY/(this.contentHeight-this.viewHeight),1<a&&(a=1,this.setOffset(void 0,a)),this.scrollbarVerticalBox.setPosition(void 0,(this.viewHeight-this.scrollbarVerticalHeight)*a));this.scrollLock=!1}},onScrollbarHorizontalMove:function(a){if(!this.scrollLock){var b=
this.viewWidth-this.scrollbarHorizontalBox.getLayoutWidth(),c=Math.min(1,Math.max(0,a.getPositionX()/b));this.setOffset(c,void 0);a.setPosition(c*b,void 0)}},onScrollbarVerticalMove:function(a){if(!this.scrollLock){var b=this.viewHeight-this.scrollbarVerticalBox.getLayoutHeight(),c=Math.min(1,Math.max(0,a.getPositionY()/b));this.setOffset(void 0,c);a.setPosition(void 0,c*b)}}},{onScrollIntoView:function(a){},measureCore:function(a,b){var c={width:0,height:0};this.scrollbarHorizontalBox.measure(a,
b);this.scrollbarVerticalBox.measure(a,b);var d=this.contentBox.measure(a,b);c.width=d.width<a?d.width:a;c.height=d.height<b?d.height:b;this.scrollVertical||(c.height=d.height);this.scrollHorizontal||(c.width=d.width);return c},arrangeCore:function(a,b){this.viewWidth=a;this.viewHeight=b;this.contentBox.arrange(0,0,this.viewWidth,this.viewHeight);this.contentWidth=this.contentBox.getContentWidth();this.contentHeight=this.contentBox.getContentHeight();this.updateOffset()}});
Ui.Transformable.extend("Ui.VBoxScrollableContent",{contentWidth:0,contentHeight:0,estimatedHeight:36,estimatedHeightNeeded:!0,loader:void 0,activeItems:void 0,activeItemsPos:0,activeItemsY:0,activeItemsHeight:0,constructor:function(a){this.addEvents("scroll");this.activeItems=[];this.setClipToBounds(!0);this.connect(this.getDrawing(),"scroll",function(){this.translateX-=this.getDrawing().scrollLeft;this.translateY-=this.getDrawing().scrollTop;this.getDrawing().scrollLeft=0;this.getDrawing().scrollTop=
0;this.onContentTransform()});this.setAllowTranslate(!0);this.setAllowRotate(!1);this.setMinScale(1);this.setMaxScale(1);this.setInertia(!0);this.setTransformOrigin(0,0);this.removeChild(this.contentBox)},setLoader:function(a){this.loader!==a&&(void 0!==this.loader&&this.disconnect(this.loader,"change",this.onLoaderChange),this.loader=a,void 0!==this.loader&&this.connect(this.loader,"change",this.onLoaderChange),this.reload())},getOffsetX:function(){return-this.getTranslateX()},getOffsetY:function(){return Math.max(0,
(-this.getTranslateY()/this.getScale()-this.getMinY())*this.getScale())},setOffset:function(a,b){var c=this.getMinY(),c=-((b/this.getScale()+c)*this.getScale());this.setContentTransform(-a,c,void 0,void 0)},getContentWidth:function(){return this.contentWidth},getContentHeight:function(){return this.getEstimatedContentHeight()*this.getScale()},getEstimatedContentHeight:function(){var a=this.activeItemsPos-this.loader.getMin(),b=this.loader.getMax()+1-(this.activeItemsPos+this.activeItems.length);return this.activeItemsY+
this.activeItemsHeight+b*this.estimatedHeight-(this.activeItemsY-a*this.estimatedHeight)},getMinY:function(){var a=this.activeItemsPos-this.loader.getMin();return this.activeItemsY-a*this.estimatedHeight},getMaxY:function(){var a=this.loader.getMax()+1-(this.activeItemsPos+this.activeItems.length);return this.activeItemsY+this.activeItemsHeight+a*this.estimatedHeight},loadItems:function(){if(!(0>this.loader.getMax()-this.loader.getMin())){var a=this.getLayoutWidth(),b=this.getLayoutHeight();if(!(0===
a||0===b)){var c=this.getMatrix(),d=c.clone().inverse(),e=new Ui.Point({x:0,y:0});e.matrixTransform(d);var f=new Ui.Point({x:a,y:b});f.matrixTransform(d);for(var g,h,k=[],m=0,n=this.activeItemsY,d=0;d<this.activeItems.length;d++){var l=this.activeItems[d],p=l.getMeasureHeight();n>=e.y&&n<=f.y||n+p>=e.y&&n+p<=f.y||n<=e.y&&n+p>=f.y?(void 0===g&&(g=d+this.activeItemsPos,h=n),k.push(l),m+=l.getMeasureHeight()):this.removeChild(l);n+=p}void 0===g?(g=Math.floor(-this.translateY/(this.estimatedHeight*this.getScale())),
g=Math.max(this.loader.getMin(),Math.min(this.loader.getMax(),g)),h=-this.translateY/this.getScale(),this.activeItemsPos=g,this.activeItems=[],g=this.loader.getElementAt(g),this.appendChild(g),d=g.measure(a,b),g.arrange(0,0,a,d.height),g.setTransformOrigin(0,0),this.activeItems.push(g),this.activeItemsHeight=d.height):(this.activeItemsPos=g,this.activeItems=k,this.activeItemsHeight=m,refMatrix=c.clone().translate(0,h));for(;h>e.y;){k=this.activeItemsPos-1;if(k<this.loader.getMin())break;g=this.loader.getElementAt(k);
this.prependChild(g);d=g.measure(a,b);g.arrange(0,0,a,d.height);g.setTransformOrigin(0,0);this.activeItems.unshift(g);this.activeItemsHeight+=d.height;h-=d.height;this.activeItemsPos=k}for(;h+this.activeItemsHeight<f.y;){k=this.activeItemsPos+this.activeItems.length;if(k>this.loader.getMax())break;g=this.loader.getElementAt(k);this.appendChild(g);d=g.measure(a,b);g.arrange(0,0,a,d.height);g.setTransformOrigin(0,0);this.activeItems.push(g);this.activeItemsHeight+=d.height}this.activeItemsY=h;for(d=
this.activeItemsHeight=0;d<this.activeItems.length;d++)g=this.activeItems[d],g.setTransform(c.clone().translate(0,this.activeItemsY+this.activeItemsHeight)),this.activeItemsHeight+=g.getMeasureHeight();this.estimatedHeightNeeded&&(this.estimatedHeightNeeded=!1,this.estimatedHeight=this.activeItemsHeight/this.activeItems.length)}}},updateItems:function(){this.getLayoutWidth();this.getLayoutHeight()},reload:function(){for(var a=0;a<this.activeItems.length;a++)this.removeChild(this.activeItems[a]);this.activeItems=
[];this.activeItemsHeight=this.activeItemsY=this.activeItemsPos=0;this.estimatedHeightNeeded=!0;this.setContentTransform(0,0,1,0)},onLoaderChange:function(){this.reload()}},{measureCore:function(a,b){for(var c=0,d=0;d<this.activeItems.length;d++)var e=this.activeItems[d].measure(a,0),c=c+e.height;this.activeItemsHeight=c;return{width:a,height:this.getEstimatedContentHeight()}},arrangeCore:function(a,b){for(var c=0;c<this.activeItems.length;c++){var d=this.activeItems[c];d.arrange(0,0,a,d.getMeasureHeight())}this.loadItems()},
onContentTransform:function(a){var b=this.getScale();0<this.translateX&&(this.translateX=0);var c=this.activeItemsPos-this.loader.getMin(),d=this.loader.getMax()+1-(this.activeItemsPos+this.activeItems.length),c=this.activeItemsY-c*this.estimatedHeight,d=this.activeItemsY+this.activeItemsHeight+d*this.estimatedHeight,c=c*b,d=d*b,e=this.getLayoutWidth(),f=this.getLayoutHeight();this.contentWidth=this.getLayoutWidth()*b;this.contentHeight=this.getEstimatedContentHeight()*b;this.translateX=Math.max(this.translateX,
-(this.contentWidth-e));this.translateY<-(d-f)&&(this.translateY=-(d-f));this.translateY>-c&&(this.translateY=-c);this.loadItems();this.contentWidth=this.getLayoutWidth()*b;this.contentHeight=this.getEstimatedContentHeight()*b;!0!==a&&this.fireEvent("scroll",this)},onChildInvalidateMeasure:function(a,b){this.invalidateLayout()}});
Ui.VBoxScrollable.extend("Ui.VBoxScrollingArea",{horizontalScrollbar:void 0,verticalScrollbar:void 0,constructor:function(a){this.horizontalScrollbar=new Ui.Rectangle({width:30,height:4,margin:5});this.setScrollbarHorizontal(this.horizontalScrollbar);this.verticalScrollbar=new Ui.Rectangle({width:4,height:30,margin:5});this.setScrollbarVertical(this.verticalScrollbar)}},{onStyleChange:function(){var a=this.getStyleProperty("radius");this.horizontalScrollbar.setRadius(a);this.verticalScrollbar.setRadius(a);
a=this.getStyleProperty("color");this.horizontalScrollbar.setFill(a);this.verticalScrollbar.setFill(a)}},{style:{color:new Ui.Color({r:0,g:0.62,b:0.88}),radius:3}});Ui.Pressable.extend("Ui.Draggable",{draggableIcon:void 0,downloadUrl:void 0,downloadMimetype:void 0,downloadFilename:void 0,allowedMode:"copyMove",mimetype:void 0,draggableData:void 0,dragDelta:void 0,localkey:void 0,dataTransfer:void 0,constructor:function(a){this.addEvents("dragstart","dragend");this.connect(this,"ptrdown",this.onDraggablePointerDown)},setMimetype:function(a){this.mimetype=a},getMimetype:function(){return this.mimetype},setDraggableData:function(a){this.draggableData=a;void 0===
this.mimetype&&"object"===typeof this.draggableData&&(Core.Object.hasInstance(this.draggableData)?this.mimetype=Ui.Draggable.localmimetype+"-"+this.draggableData.classType.toLowerCase():this.mimetype=Ui.Draggable.localmimetype)},setAllowedMode:function(a){this.allowedMode=a},setDraggableIcon:function(a){this.draggableIcon=a},setDownloadUrl:function(a,b,c){this.downloadUrl=(new Core.Uri({uri:a})).toString();this.downloadMimetype=b;this.downloadFilename=c},getDragDelta:function(){return this.dragDelta},
onDraggablePointerDown:function(a){if(!this.lock&&!(this.getIsDisabled()||void 0===this.draggableData))this.dataTransfer=new Ui.DragDataTransfer({type:"pointer",draggable:this,x:a.clientX,y:a.clientY,delayed:!0,pointer:a.pointer}),this.dragDelta=this.pointFromWindow({x:a.clientX,y:a.clientY}),this.connect(this.dataTransfer,"start",this.onDragStart),this.connect(this.dataTransfer,"end",this.onDragEnd)},onDragStart:function(a){a.effectAllowed=this.allowedMode;if(void 0!==this.downloadUrl)try{a.setData("DownloadURL",
this.downloadMimetype+":"+this.downloadFilename+":"+this.downloadUrl)}catch(b){}var c="";if("object"===typeof this.draggableData)if(this.localkey=Ui.Draggable.addLocalData(this.draggableData),Core.Object.hasInstance(this.draggableData))for(var d=this.draggableData;void 0!==d&&null!==d;)!navigator.supportDrag||navigator.supportMimetypeDrag?a.setData(Ui.Draggable.localmimetype+"-"+d.classType.toLowerCase(),this.localkey):c+=Ui.Draggable.localmimetype+"-"+d.classType.toLowerCase()+":"+this.localkey+
";",d=d.__baseclass__;else!navigator.supportDrag||navigator.supportMimetypeDrag?a.setData(Ui.Draggable.localmimetype,this.localkey):c+=Ui.Draggable.localmimetype+":"+this.localkey+";";else!navigator.supportDrag||navigator.supportMimetypeDrag?a.setData(this.mimetype,this.draggableData):c+=this.mimetype+":"+this.draggableData+";";navigator.supportDrag&&!navigator.supportMimetypeDrag&&a.setData("Text",c);this.fireEvent("dragstart",this);void 0!==this.draggableIcon&&void 0!==a.setDragImage&&a.setDragImage(this.draggableIcon.drawing.childNodes[0],
0,0);return!1},onDragEnd:function(a){this.fireEvent("dragend",this,a.dropEffect);void 0!==this.localkey&&(Ui.Draggable.removeLocalData(this.localkey),this.localkey=void 0)}},{},{localmimetype:void 0,localdata:void 0,constructor:function(){Ui.Draggable.localdata={};for(var a="application/x-erajs-local-",b=0;16>b;b++)a+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));Ui.Draggable.localmimetype=a},addLocalData:function(a){for(var b="",c=0;16>c;c++)b+=
"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));Ui.Draggable.localdata[b]=a;return b},getLocalData:function(a){return Ui.Draggable.localdata[a]},removeLocalData:function(a){delete Ui.Draggable.localdata[a]}});Ui.LBox.extend("Ui.DropBox",{allowedMimetypes:void 0,allowFiles:!1,allowedMode:"all",constructor:function(a){this.addEvents("dragover","drop","dropfile","dragenter","dragleave");this.allowedMimetypes=[];this.connect(this.drawing,"dragover",this.onDragOver);this.connect(this.drawing,"drop",this.onDrop);this.connect(this,"localdragover",this.onDragOver);this.connect(this,"localdrop",this.onDrop)},setAllowedMode:function(a){this.allowedMode=a},addMimetype:function(a){"function"===typeof a&&(a=Ui.Draggable.localmimetype+
"-"+a.prototype.classType);this.allowedMimetypes.push(a);"string"===typeof a&&"files"==a.toLowerCase()&&(this.allowFiles=!0)},dragMimetype:function(a){var b;if(void 0!==a.dataTransfer.types)for(var c=0;void 0===b&&c<a.dataTransfer.types.length;c++)for(var d=a.dataTransfer.types[c],e=0;void 0===b&&e<this.allowedMimetypes.length;e++)d.toLowerCase()===this.allowedMimetypes[e].toLowerCase()&&(b=this.allowedMimetypes[e]);return b},dragMergedMimetype:function(a){for(var b in a)for(a=0;a<this.allowedMimetypes.length;a++)if(b.toLowerCase()===
this.allowedMimetypes[a].toLowerCase())return b},onDragEnter:function(a){var b=this.dragMimetype(a);if(void 0!==b)return a.stopPropagation(),this.fireEvent("dragenter",this,b),!1},onDragLeave:function(a){var b=this.dragMimetype(a);if(void 0!==b)return a.stopPropagation(),this.fireEvent("dragleave",this,b),!1},onDragOver:function(a){if(void 0!==a.dataTransfer&&(navigator.supportDrag&&!navigator.supportMimetypeDrag||void 0!==this.dragMimetype(a))){var b="all";void 0!==a.dataTransfer.effectAllowed&&
(b=a.dataTransfer.effectAllowed);"uninitialized"==b&&(b="all");var c="copy",c=("all"==this.allowedMode||"copy"==this.allowedMode||"copyLink"==this.allowedMode||"copyMove"==this.allowedMode)&&("copy"==b||"copyLink"==b||"copyMove"==b||"all"==b)?"copy":("all"==this.allowedMode||"copyMove"==this.allowedMode||"linkMove"==this.allowedMode||"move"==this.allowedMode)&&("all"==b||"copyMove"==b||"linkMove"==b||"move"==b)?"move":("all"==this.allowedMode||"copyLink"==this.allowedMode||"link"==this.allowedMode||
"linkMove"==this.allowedMode)&&("all"==b||"copyLink"==b||"link"==b||"linkMove"==b)?"link":"none";a.dataTransfer.dropEffect=c;a.preventDefault();(!navigator.supportDrag||navigator.supportMimetypeDrag)&&a.stopPropagation();a=this.pointFromWindow({x:a.clientX,y:a.clientY});this.fireEvent("dragover",this,a.x,a.y);return!1}},onDrop:function(a){var b,c,d,e=this.pointFromWindow({x:a.clientX,y:a.clientY});if(void 0!==a.dataTransfer.files&&0<a.dataTransfer.files.length){if(this.allowFiles){a.preventDefault();
a.stopPropagation();for(b=0;b<a.dataTransfer.files.length;b++)this.fireEvent("dropfile",this,new Core.File({fileApi:a.dataTransfer.files[b]}),e.x,e.y,a.dataTransfer.effectAllowed)}}else if(!navigator.supportDrag||navigator.supportMimetypeDrag)b=this.dragMimetype(a),void 0!==b&&(d=a.dataTransfer.getData(b),0===b.indexOf(Ui.Draggable.localmimetype)&&(d=Ui.Draggable.getLocalData(d)),a.preventDefault(),a.stopPropagation(),this.fireEvent("drop",this,b,d,e.x,e.y,a.dataTransfer.effectAllowed));else{b=a.dataTransfer.getData("Text");
d={};var f=b.split(";");for(b=0;b<f.length;b++)c=f[b].indexOf(":"),-1!==c&&(d[f[b].substring(0,c)]=f[b].substring(c+1));b=this.dragMergedMimetype(d);void 0!==b&&(a.preventDefault(),a.stopPropagation(),d=d[b],0===b.indexOf(Ui.Draggable.localmimetype)&&(d=Ui.Draggable.getLocalData(d)),this.fireEvent("drop",this,b,d,e.x,e.y,a.dataTransfer.effectAllowed))}return!1}});Ui.Element.extend("Ui.IFrame",{iframeDrawing:void 0,isReady:!1,constructor:function(a){this.connect(this.iframeDrawing,"load",this.onIFrameLoad);this.addEvents("ready")},getSrc:function(){return this.iframeDrawing.getAttribute("src")},setSrc:function(a){this.iframeDrawing.setAttribute("src",a)},getIFrame:function(){return this.iframeDrawing},onIFrameLoad:function(){this.isReady||(this.isReady=!0,this.fireEvent("ready",this))}},{renderDrawing:function(){if(navigator.iOs){var a=Ui.IFrame.base.renderDrawing.apply(this,
arguments);a.style.overflow="scroll";a.style.webkitOverflowScrolling="touch";this.iframeDrawing=document.createElement("iframe");this.iframeDrawing.scrolling="no";this.iframeDrawing.style.border="0px";this.iframeDrawing.style.margin="0px";this.iframeDrawing.style.padding="0px";this.iframeDrawing.style.width="100%";this.iframeDrawing.style.height="100%";a.appendChild(this.iframeDrawing);return a}this.iframeDrawing=document.createElement("iframe");this.iframeDrawing.style.border="0px";this.iframeDrawing.style.margin=
"0px";this.iframeDrawing.style.padding="0px";this.iframeDrawing.style.width="100%";this.iframeDrawing.style.height="100%";navigator.isIE&&(this.iframeDrawing.frameBorder="0");return this.iframeDrawing},arrangeCore:function(a,b){this.iframeDrawing.style.width=a+"px"},onVisible:function(){if(navigator.isIE7||navigator.isIE8){var a=this.iframeDrawing.contentWindow;void 0!==a.document.body&&(a.document.body.clientWidth,a.document.body.clientHeight)}}});Ui.MovableBase.extend("Ui.Carouselable",{ease:void 0,items:void 0,pos:0,lastPosition:void 0,activeItems:void 0,alignClock:void 0,animNext:void 0,animStart:void 0,bufferingSize:1,constructor:function(a){this.addEvents("change");this.setClipToBounds(!0);this.setFocusable(!0);this.setMoveVertical(!1);this.items=[];this.activeItems=[];this.ease=Anim.EasingFunction.create({type:Anim.PowerEase,mode:"out"});this.connect(this,"down",this.onCarouselableDown);this.connect(this,"up",this.onCarouselableUp);this.connect(this.getDrawing(),
"keydown",this.onKeyDown);this.connect(this,"wheel",this.onWheel)},getBufferingSize:function(){return this.bufferingSize},setBufferingSize:function(a){this.bufferingSize!=a&&(this.bufferingSize=a,this.updateItems())},getLogicalChildren:function(){return this.items},getCurrentPosition:function(){return void 0!==this.alignClock?this.animNext:this.pos},getCurrent:function(){return this.items[this.getCurrentPosition()]},setCurrentAt:function(a,b){a=Math.min(2*(this.items.length-1),Math.max(0,a));b?(this.pos=
a,this.setPosition(-this.pos*this.getLayoutWidth(),void 0),this.onChange()):this.startAnimation(2*(this.pos-a),a)},setCurrent:function(a,b){for(var c=0;c<this.items.length;c++)if(this.items[c]==a){this.setCurrentAt(c,b);break}},next:function(){void 0===this.alignClock?this.pos<this.items.length-1&&this.startAnimation(-2,this.pos+1):this.animNext>this.pos?this.startAnimation(-2*(this.animNext+1-Math.floor(this.pos)),Math.min(this.animNext+1,this.items.length-1)):this.startAnimation(-2,Math.min(Math.ceil(this.pos),
this.items.length-1))},previous:function(){void 0===this.alignClock?0<this.pos&&this.startAnimation(2,this.pos-1):this.animNext<this.pos?this.startAnimation(2*(Math.floor(this.pos)-(this.animNext-1)),Math.max(this.animNext-1,0)):this.startAnimation(2,Math.floor(this.pos))},setEase:function(a){this.ease=Anim.EasingFunction.create(a)},append:function(a){this.items.push(a);this.onChange()},remove:function(a){for(var b=0;b<this.items.length&&this.items[b]!==a;)b++;if(b<this.items.length){this.items.splice(b,
1);if(0>this.pos||this.pos>this.items.length-1)this.pos=Math.max(0,Math.min(this.pos,this.items.length-1));void 0!==this.alignClock&&(this.animNext=Math.max(0,Math.min(this.animNext,this.items.length-1)));this.setPosition(-this.pos*this.getLayoutWidth(),void 0,!0);this.onChange()}},insertAt:function(a,b){0>b&&(b=this.items.length+b);0>b&&(b=0);b>=this.items.length&&(b=this.items.length);this.items.splice(b,0,a);this.onChange()},moveAt:function(a,b){0>b&&(b=this.items.length+b);0>b&&(b=0);b>=this.items.length&&
(b=this.items.length);for(var c=0;c<this.items.length&&this.items[c]!=a;)c++;c<this.items.length&&(this.items.splice(c,1),this.items.splice(b,0,a));this.onChange()},onKeyDown:function(a){if(!this.getIsDisabled()){var b=a.which;if(37==b||39==b)a.stopPropagation(),a.preventDefault(),37==b?this.previous():39==b&&this.next()}},onWheel:function(a){0!==a.deltaX&&(a.stopPropagation(),0>a.deltaX?this.previous():this.next())},onCarouselableDown:function(){this.stopAnimation()},onCarouselableUp:function(a,
b,c,d,e,f,g){!0===g?(a=this.pos%1,b=0.5<a?-400:400):50>Math.abs(b)&&(d>0.2*this.getLayoutWidth()||100<Math.abs(d)?b=0>d?-400:400:(a=this.pos%1,b=0.5<a?-400:400));800>Math.abs(b)&&(b=0>b?-800:800);0!==b&&this.startAnimation(b/this.getLayoutWidth())},onChange:function(){this.loadItems();this.updateItems();var a=this.getCurrent();void 0!==a&&a.enable();a=this.getCurrentPosition();if(void 0===this.lastPosition||this.lastPosition!==a)void 0!==this.lastPosition&&void 0!==this.items[this.lastPosition]&&
this.items[this.lastPosition].disable(),this.lastPosition=a,this.fireEvent("change",this,a)},onAlignTick:function(a,b,c){if(0!==c&&(a=-(a.getTime()*this.speed)/(this.animNext-this.animStart),1<=a&&(this.alignClock.stop(),this.alignClock=void 0,a=1),a=this.ease.ease(a),this.pos=this.animStart+a*(this.animNext-this.animStart),this.setPosition(-this.pos*this.getLayoutWidth(),void 0),void 0===this.alignClock))this.onChange()},startAnimation:function(a,b){this.stopAnimation();this.speed=a;this.animStart=
this.pos;this.animNext=void 0===b?0>this.speed?Math.ceil(this.animStart):Math.floor(this.animStart):b;this.animStart!==this.animNext&&(this.alignClock=new Anim.Clock({duration:"forever",target:this}),this.connect(this.alignClock,"timeupdate",this.onAlignTick),this.alignClock.begin())},stopAnimation:function(){void 0!==this.alignClock&&(this.alignClock.stop(),this.alignClock=void 0)},loadItems:function(){if(this.getIsLoaded()){var a;for(a=0;a<this.activeItems.length;a++)this.activeItems[a].carouselableSeen=
void 0;var b=[];for(a=Math.max(0,Math.floor(this.pos-this.bufferingSize));a<Math.min(this.items.length,Math.floor(this.pos+1+this.bufferingSize));a++){for(var c=this.items[a],d=!1,e=0;!d&&e<this.activeItems.length;e++)this.activeItems[e]===c&&(d=!0,this.activeItems[e].carouselableSeen=!0);b.push(c);d||(c.disable(),this.appendChild(c))}for(a=0;a<this.activeItems.length;a++)this.activeItems[a].carouselableSeen||this.removeChild(this.activeItems[a]);this.activeItems=b}},updateItems:function(){if(this.getIsLoaded()){var a=
this.getLayoutWidth(),b=this.getLayoutHeight();void 0!==this.animClock&&(target=this.animNext);for(var c=0;c<this.activeItems.length;c++){for(var d=this.activeItems[c],e=-1,e=0;e<this.items.length&&this.items[e]!==d;e++);e<this.items.length&&(d.measure(a,b),d.arrange(0,0,a,b),d.setTransform(Ui.Matrix.createTranslate((e-this.pos)*a,0)))}}}},{onLoad:function(){Ui.Carouselable.base.onLoad.call(this);this.loadItems();this.updateItems()},onMove:function(a,b){if(!(0>=this.getLayoutWidth())){this.pos=-a/
this.getLayoutWidth();if(0>this.pos||this.pos>this.items.length-1)this.pos=Math.max(0,Math.min(this.pos,this.items.length-1)),this.setPosition(-this.pos*this.getLayoutWidth());this.updateItems()}},arrangeCore:function(a,b){this.setPosition(-this.pos*a,void 0)},onChildInvalidateMeasure:function(a,b){}});Ui.Scrollable.extend("Ui.Carouselable2",{hbox:void 0,snapTimer:void 0,ease:void 0,animStart:void 0,animNext:void 0,alignClock:void 0,bufferingSize:1,current:void 0,supportCssSnap:!1,pos:0,isDown:!1,constructor:function(){this.addEvents("change");this.setScrollVertical(!1);this.ease=Anim.EasingFunction.create({type:Anim.PowerEase,mode:"out"});this.supportCssSnap=!1;if("getComputedStyle"in window){var a=window.getComputedStyle(this.contentBox.getDrawing());this.supportCssSnap="msScrollSnapPointsX"in
a||"scrollSnapPointsX"in a}this.supportCssSnap&&(this.contentBox.getDrawing().style.msScrollSnapType="mandatory",this.contentBox.getDrawing().style.msScrollSnapPointsX="snapInterval(0px, 100%)",this.contentBox.getDrawing().style.scrollSnapType="mandatory",this.contentBox.getDrawing().style.scrollSnapPointsX="snapInterval(0px, 100%)",this.contentBox.getDrawing().style.msScrollChaining="none");this.hbox=new Ui.FixedBox;this.setContent(this.hbox)},append:function(a){a.hide();this.hbox.append(a,!0);this.updateItems()},
insertAt:function(a,b){a.hide();this.hbox.insertAt(a,b);this.updateItems()},moveAt:function(a,b){this.hbox.moveAt(a,b);this.updateItems()},remove:function(a){this.hbox.remove(a);a.show();this.updateItems()},getBufferingSize:function(){return this.bufferingSize},setBufferingSize:function(a){this.bufferingSize!=a&&(this.bufferingSize=a,this.updateItems())},setAutoPlay:function(a){},next:function(){if(void 0===this.alignClock)this.getCurrentPosition()<this.hbox.getChildren().length-1&&this.startAnimation(-3,
this.getCurrentPosition()+1);else{var a=this.getOffsetX()/this.getLayoutWidth();this.animNext>a?this.startAnimation(-3*(this.animNext+1-Math.floor(a)),Math.min(this.animNext+1,this.hbox.getChildren().length-1)):this.startAnimation(-3,Math.min(Math.ceil(a),this.hbox.getChildren().length-1))}},previous:function(){if(void 0===this.alignClock)0<this.getCurrentPosition()&&this.startAnimation(3,this.getCurrentPosition()-1);else{var a=this.getOffsetX()/this.getLayoutWidth();this.animNext<a?this.startAnimation(3*
(Math.floor(a)-(this.animNext-1)),Math.max(this.animNext-1,0)):this.startAnimation(3,Math.floor(a))}},setEase:function(a){this.ease=Anim.EasingFunction.create(a)},getLogicalChildren:function(){return this.hbox.getChildren()},getCurrentPosition:function(){return void 0!==this.alignClock?this.animNext:this.pos},getCurrent:function(){return this.hbox.getChildren()[this.getCurrentPosition()]},setCurrentAt:function(a){void 0!==this.animClock&&this.stopAnimation();void 0!==this.snapTimer&&(this.snapTimer.abort(),
this.snapTimer=void 0);this.pos=Math.min(this.hbox.getChildren().length-1,Math.max(a,0));this.setOffset(this.getLayoutWidth()*this.pos,void 0,!0)},setCurrent:function(a){for(var b=0;b<this.hbox.getChildren().length;b++)if(this.hbox.getChildren()[b]===a){this.setCurrentAt(b);break}},startAnimation:function(a,b){void 0!==this.snapTimer&&(this.snapTimer.abort(),this.snapTimer=void 0);this.stopAnimation();this.speed=a;this.animStart=this.pos;this.animNext=void 0===b?0>this.speed?Math.ceil(this.animStart):
Math.floor(this.animStart):b;this.animStart!==this.animNext&&(this.alignClock=new Anim.Clock({duration:"forever",target:this}),this.connect(this.alignClock,"timeupdate",this.onAlignTick),this.alignClock.begin())},stopAnimation:function(){void 0!==this.alignClock&&(this.alignClock.stop(),this.alignClock=void 0)},onAlignTick:function(a,b,c){0!==c&&(a=-(a.getTime()*this.speed)/(this.animNext-this.animStart),1<=a&&(this.alignClock.stop(),this.alignClock=void 0,a=1),a=this.ease.ease(a),this.pos=this.animStart+
a*(this.animNext-this.animStart),this.setOffset(this.pos*this.getLayoutWidth(),void 0,!0),void 0===this.alignClock&&this.snap())},snap:function(){void 0!==this.snapTimer&&(this.snapTimer.abort(),this.snapTimer=void 0);this.setOffset(Math.round(this.getOffsetX()/this.getLayoutWidth())*this.getLayoutWidth(),void 0,!0);this.updateItems();this.current!==this.getCurrent()&&(this.current=this.getCurrent(),this.fireEvent("change",this,this.getCurrentPosition()))},updateItems:function(){var a,b=this.getCurrentPosition();
for(a=0;a<this.hbox.getChildren().length;a++)a>=b-this.bufferingSize&a<=b+this.bufferingSize?this.hbox.getChildren()[a].show():this.hbox.getChildren()[a].hide()}},{onScroll:function(){Ui.Carouselable2.base.onScroll.apply(this,arguments);void 0===this.animClock&&(0<this.getLayoutWidth()&&(this.pos=Math.round(this.getOffsetX()/this.getLayoutWidth())),this.updateItems(),this.supportCssSnap||(void 0!==this.snapTimer&&this.snapTimer.abort(),this.snapTimer=new Core.DelayedTask({scope:this,callback:this.snap,
delay:0.3})),this.current!==this.getCurrent()&&(this.current=this.getCurrent(),this.fireEvent("change",this,this.getCurrentPosition())))},measureCore:function(a,b){this.hbox.setItemWidth(a);this.hbox.setItemHeight(b);return Ui.Carouselable2.base.measureCore.apply(this,arguments)},onChildInvalidateMeasure:function(a,b){this.invalidateLayout()},onChildInvalidateArrange:function(a){this.invalidateLayout()},arrangeCore:function(a,b){Ui.Carouselable2.base.arrangeCore.apply(this,arguments);this.supportCssSnap&&
(this.contentBox.getDrawing().style.msScrollSnapPointsX="snapInterval(0px,"+a+"px)",this.contentBox.getDrawing().style.scrollSnapPointsX="snapInterval(0px,"+a+"px)");this.setOffset(this.pos*a,0,!0)}});
Ui.Container.extend("Ui.FixedBox",{vertical:!1,itemWidth:100,itemHeight:100,constructor:function(a){},setItemWidth:function(a){this.itemWidth!==a&&(this.itemWidth=a)},setItemHeight:function(a){this.itemHeight!==a&&(this.itemHeight=a)},setContent:function(a){for(;void 0!==this.getFirstChild();)this.removeChild(this.getFirstChild());if(void 0!==a&&"object"===typeof a)if(a.constructor==Array)for(var b=0;b<a.length;b++)this.append(a[b]);else this.append(a)},getOrientation:function(){return this.vertical?
"vertical":"horizontal"},setOrientation:function(a){var b=!0;"vertical"!==a&&(b=!1);this.vertical!==b&&(this.vertical=b,this.invalidateMeasure())},append:function(a,b){this.appendChild(a)},prepend:function(a,b){this.prependChild(a)},insertAt:function(a,b,c){this.insertChildAt(a,b)},moveAt:function(a,b){this.moveChildAt(a,b)},remove:function(a){this.removeChild(a)}},{measureCore:function(a,b){for(var c=0;c<this.getChildren().length;c++)this.getChildren()[c].measure(this.itemWidth,this.itemHeight);
return this.vertical?{width:this.itemWidth,height:this.itemHeight*this.getChildren().length}:{width:this.itemWidth*this.getChildren().length,height:this.itemHeight}},arrangeCore:function(a,b){for(var c=0;c<this.getChildren().length;c++)this.vertical?this.getChildren()[c].arrange(0,c*this.itemHeight,this.itemWidth,this.itemHeight):this.getChildren()[c].arrange(c*this.itemWidth,0,this.itemWidth,this.itemHeight)},layoutCore:function(){for(var a=0;a<this.getChildren().length;a++){var b=this.getChildren()[a];
b.measure(this.itemWidth,this.itemHeight);this.vertical?b.arrange(0,a*this.itemHeight,this.itemWidth,this.itemHeight):b.arrange(a*this.itemWidth,0,this.itemWidth,this.itemHeight)}}});Core.Object.extend("Ui.CarouselableLoader",{constructor:function(a){this.addEvents("change")},getMin:function(){return 0},getMax:function(){return-1},getElementAt:function(a){}});
Ui.CarouselableLoader.extend("Ui.CarouselableInfiniteLoader",{constructor:function(a){}},{getMin:function(){return Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:-9007199254740991},getMax:function(){return Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:9007199254740991},getElementAt:function(a){a%=4;return 0===a?new Ui.Rectangle({fill:"pink"}):1===a?new Ui.Rectangle({fill:"lightgreen"}):2===a?new Ui.Rectangle({fill:"orange"}):new Ui.Rectangle({fill:"lightblue"})}});
Ui.CarouselableLoader.extend("Ui.CarouselableElementsLoader",{elements:void 0,constructor:function(a){"elements"in a?(this.elements=a.elements,delete a.elements):this.elements=[]},append:function(a){this.elements.push(a)}},{getMin:function(){return 0},getMax:function(){return this.elements.length-1},getElementAt:function(a){return this.elements[a]}});
Ui.CarouselableLoader.extend("Ui.CarouselableDataLoader",{data:void 0,constructor:function(a){"data"in a?(this.data=a.data,delete a.data):this.data=[]},append:function(a){this.data.push(a)},buildUi:function(a,b){return new Ui.Label({verticalAlign:"center",horizontalAlign:"center",text:a})}},{getMin:function(){return 0},getMax:function(){return this.data.length-1},getElementAt:function(a){return this.buildUi(this.data[a],a)}});
Ui.MovableBase.extend("Ui.Carouselable3",{ease:void 0,items:void 0,pos:0,lastPosition:void 0,activeItems:void 0,activeItemsPos:0,alignClock:void 0,animNext:void 0,animStart:void 0,animSource:void 0,bufferingSize:1,loader:void 0,constructor:function(a){this.addEvents("change");this.setClipToBounds(!0);this.setFocusable(!0);this.setMoveVertical(!1);this.activeItems=[];this.ease=Anim.EasingFunction.create({type:Anim.PowerEase,mode:"out"});this.connect(this,"down",this.onCarouselableDown);this.connect(this,
"up",this.onCarouselableUp);this.connect(this.getDrawing(),"keydown",this.onKeyDown);this.connect(this,"wheel",this.onWheel)},setLoader:function(a){for(this.loader=a;void 0!==this.getFirstChild();)this.removeChild(this.getFirstChild());this.lastPosition=void 0;this.activeItems=[];this.activeItemsPos=0;this.pos<this.loader.getMin()&&(this.pos=this.loader.getMin());this.pos>this.loader.getMax()&&(this.pos=this.loader.getMax());this.loadItems();this.updateItems()},getLoader:function(){return this.loader},
getBufferingSize:function(){return this.bufferingSize},setBufferingSize:function(a){this.bufferingSize!==a&&(this.bufferingSize=a,this.updateItems())},getCurrentPosition:function(){return void 0!==this.alignClock?this.animNext:this.pos},getCurrent:function(){var a=this.getCurrentPosition()-this.activeItemsPos;if(0<=a&&a<this.activeItems.length)return this.activeItems[a]},setCurrentAt:function(a,b){a=Math.min(2*this.loader.getMax(),Math.max(2*this.loader.getMin(),a));b?(this.pos=a,this.setPosition(-this.pos*
this.getLayoutWidth(),void 0),this.onChange()):this.startAnimation(2*(this.pos-a),a,"program")},next:function(a){void 0===a&&(a="program");void 0===this.alignClock?this.pos<this.loader.getMax()&&this.startAnimation(-2,this.pos+1,a):this.animNext>this.pos?this.startAnimation(-2*(this.animNext+1-Math.floor(this.pos)),Math.min(this.animNext+1,this.loader.getMax()),a):this.startAnimation(-2,Math.min(Math.ceil(this.pos),this.loader.getMax()),a)},previous:function(a){void 0===a&&(a="program");void 0===
this.alignClock?this.pos>this.loader.getMin()&&this.startAnimation(2,this.pos-1,a):this.animNext<this.pos?this.startAnimation(2*(Math.floor(this.pos)-(this.animNext-1)),Math.max(this.animNext-1,0),a):this.startAnimation(2,Math.floor(this.pos),a)},setEase:function(a){this.ease=Anim.EasingFunction.create(a)},onKeyDown:function(a){if(!this.getIsDisabled()){var b=a.which;if(37==b||39==b)a.stopPropagation(),a.preventDefault(),37==b?this.previous():39==b&&this.next()}},onWheel:function(a){0!==a.deltaX&&
(a.stopPropagation(),0>a.deltaX?this.previous():this.next())},onCarouselableDown:function(){this.stopAnimation()},onCarouselableUp:function(a,b,c,d,e,f,g){!0===g?(a=this.pos%1,b=0.5<a?-400:400):50>Math.abs(b)&&(d>0.2*this.getLayoutWidth()||100<Math.abs(d)?b=0>d?-400:400:(a=this.pos%1,b=0.5<a?-400:400));800>Math.abs(b)&&(b=0>b?-800:800);0!==b&&this.startAnimation(b/this.getLayoutWidth(),void 0,"user")},onChange:function(a){void 0===a&&(a="program");this.loadItems();this.updateItems();var b=this.getCurrentPosition();
if(void 0===this.lastPosition||this.lastPosition!==b)this.lastPosition=b,this.fireEvent("change",this,b,a)},onAlignTick:function(a,b,c){if(0!==c&&(a=-(a.getTime()*this.speed)/(this.animNext-this.animStart),1<=a&&(this.alignClock.stop(),this.alignClock=void 0,a=1),a=this.ease.ease(a),this.pos=this.animStart+a*(this.animNext-this.animStart),this.setPosition(-this.pos*this.getLayoutWidth(),void 0),void 0===this.alignClock))this.onChange(this.animSource)},startAnimation:function(a,b,c){this.stopAnimation();
this.speed=a;this.animStart=this.pos;this.animSource=c;this.animNext=void 0===b?0>this.speed?Math.ceil(this.animStart):Math.floor(this.animStart):b;this.animStart!==this.animNext&&(this.alignClock=new Anim.Clock({duration:"forever",target:this}),this.connect(this.alignClock,"timeupdate",this.onAlignTick),this.alignClock.begin())},stopAnimation:function(){void 0!==this.alignClock&&(this.alignClock.stop(),this.alignClock=void 0)},loadItems:function(){if(this.getIsLoaded()){var a,b=[];for(a=Math.max(this.loader.getMin(),
Math.floor(this.pos-this.bufferingSize));a<Math.min(this.loader.getMax()+1,Math.floor(this.pos+1+this.bufferingSize));a++){var c;a>=this.activeItemsPos&&a<this.activeItemsPos+this.activeItems.length?c=this.activeItems[a-this.activeItemsPos]:(c=this.loader.getElementAt(a),this.appendChild(c));b.push(c)}for(a=0;a<this.activeItems.length;a++)(this.activeItemsPos+a<Math.max(this.loader.getMin(),Math.floor(this.pos-this.bufferingSize))||this.activeItemsPos+a>=Math.min(this.loader.getMax()+1,Math.floor(this.pos+
1+this.bufferingSize)))&&this.removeChild(this.activeItems[a]);this.activeItems=b;this.activeItemsPos=Math.max(this.loader.getMin(),Math.floor(this.pos-this.bufferingSize))}},updateItems:function(){if(this.getIsLoaded()){var a=this.getLayoutWidth(),b=this.getLayoutHeight();void 0!==this.animClock&&(target=this.animNext);for(var c=0;c<this.activeItems.length;c++){var d=this.activeItems[c],e=this.activeItemsPos+c;d.measure(a,b);d.arrange(0,0,a,b);d.setTransform(Ui.Matrix.createTranslate((e-this.pos)*
a,0))}}},getLogicalChildren:function(){return this.getChildren()}},{onLoad:function(){Ui.Carouselable3.base.onLoad.call(this);this.loadItems();this.updateItems()},onMove:function(a,b){if(!(0>=this.getLayoutWidth())){this.pos=-a/this.getLayoutWidth();if(this.pos<this.loader.getMin()||this.pos>this.loader.getMax())this.pos=Math.max(this.loader.getMin(),Math.min(this.pos,this.loader.getMax())),this.setPosition(-this.pos*this.getLayoutWidth());this.updateItems()}},arrangeCore:function(a,b){this.setPosition(-this.pos*
a,void 0)},onChildInvalidateMeasure:function(a,b){}});Ui.LBox.extend("Ui.Form",{constructor:function(a){this.addEvents("submit");this.connect(this.getDrawing(),"submit",this.onSubmit)},onSubmit:function(a){a.preventDefault();a.stopPropagation();this.fireEvent("submit",this)},submit:function(){this.getDrawing().submit()}},{renderDrawing:function(){var a;a=navigator.isIE8?document.createElement("div"):document.createElement("form");var b=document.createElement("input");b.type="submit";b.style.visibility="hidden";a.appendChild(b);b=document.createElement("div");
this.setContainerDrawing(b);a.appendChild(b);return a}});Core.Object.extend("Ui.Selection",{elements:void 0,constructor:function(a){this.addEvents("change");this.elements=[]},clear:function(){for(var a=0;a<this.elements.length;a++)this.elements[a].setIsSelected(!1),this.connect(this.elements[a],"unload",this.onElementUnload);this.elements=[];this.fireEvent("change",this)},append:function(a){var b,c=!1;for(b=0;!c&&b<this.elements.length;b++)c=this.elements[b]===a;if(!c){var c=!1,d;for(d in a.getSelectionActions())!0===a.getSelectionActions()[d].multiple&&
(c=!0);if(0<this.elements.length){d=!0;for(b=0;d&&b<this.elements.length;b++)d=this.elements[b].getSelectionActions()===a.getSelectionActions();if(!d||!c){for(b=0;b<this.elements.length;b++)this.elements[b].setIsSelected(!1);this.elements=[]}}this.elements.push(a);this.connect(a,"unload",this.onElementUnload);this.fireEvent("change",this)}},remove:function(a){for(var b,c=0;void 0===b&&c<this.elements.length;c++)this.elements[c]===a&&(b=c);void 0!==b&&(this.elements.splice(b,1),this.disconnect(a,"unload",
this.onElementUnload),this.fireEvent("change",this))},getElements:function(){return this.elements.slice()},getActions:function(){var a,b,c,d;if(0!==this.elements.length){if(1===this.elements.length)for(c in a={},b=this.elements[0].getSelectionActions(),b){if(d=b[c],!("testRight"in d)||d.testRight.call(this.elements[0]))a[c]=b[c]}else for(c in a={},b=this.elements[0].getSelectionActions(),b)if(d=b[c],!0===d.multiple){var e=!0;if("testRight"in d)for(var f=0;e&&f<this.elements.length;f++)e&=d.testRight.call(this.elements[f]);
e&&(a[c]=b[c])}return a}},getDefaultAction:function(){var a=this.getActions(),b;for(b in a)if(!0===a[b]["default"])return a[b]},executeDefaultAction:function(){var a=this.getDefaultAction();if(void 0!==a){var b=this;"scope"in a&&(b=a.scope);a.callback.call(b,this);this.clear();return!0}return!1},getDeleteAction:function(){var a=this.getActions();if("delete"in a)return a["delete"];if(void 0!==a.suppress)return a.suppress},executeDeleteAction:function(){var a=this.getDeleteAction();if(void 0!==a){var b=
this;"scope"in a&&(b=a.scope);a.callback.call(b,this);this.clear();return!0}return!1},onElementUnload:function(a){this.remove(a)}});Ui.Draggable.extend("Ui.Selectionable",{isSelected:!1,handler:void 0,constructor:function(a){this.connect(this,"activate",this.onSelectionableActivate);this.connect(this,"dragstart",this.onSelectionableDragStart);this.connect(this,"dragend",this.onSelectionableDragEnd)},getIsSelected:function(){return this.isSelected},setIsSelected:function(a){if(this.isSelected!==a)if(this.isSelected=a)this.onSelect();else this.onUnselect()},onSelect:function(){},onUnselect:function(){},getSelectionActions:function(){return{}},
getParentSelectionHandler:function(){for(var a=this.getParent();void 0!==a&&!("getSelectionHandler"in a);)a=a.getParent();if(void 0!==a)return a.getSelectionHandler()},onSelectionableDragStart:function(){this.select()},onSelectionableDragEnd:function(){if(this.getIsSelected()){var a=this.getParentSelectionHandler();void 0!==a&&a.clear()}},onSelectionableActivate:function(){if(this.getIsLoaded()){this.select();var a=this.getParentSelectionHandler();void 0!==a&&(void 0!==a.getDefaultAction()?a.executeDefaultAction():
this.unselect())}},select:function(){this.getIsLoaded()&&(this.handler=this.getParentSelectionHandler(),void 0!==this.handler&&(this.handler.append(this),this.setIsSelected(!0)))},unselect:function(){void 0!==this.handler&&(this.handler.remove(this),this.setIsSelected(!1))}},{onUnload:function(){this.getIsSelected()&&this.unselect();Ui.Selectionable.base.onUnload.call(this)}});Ui.Rectangle.extend("Ui.Separator",{constructor:function(a){this.setHeight(1);this.setWidth(1)}},{onStyleChange:function(){this.setFill(this.getStyleProperty("color"))}},{style:{color:new Ui.Color({r:0,g:0,b:0})}});Ui.Element.extend("Ui.Entry",{fontSize:void 0,fontFamily:void 0,fontWeight:void 0,color:void 0,value:"",passwordMode:!1,constructor:function(a){this.addEvents("change","validate");this.setSelectable(!0);this.setFocusable(!0);this.connect(this.getDrawing(),"change",this.onChange);this.connect(this.getDrawing(),"paste",this.onPaste);this.connect(this.getDrawing(),"keyup",this.onKeyUp);this.connect(this.getDrawing(),"keydown",this.onKeyDown)},setPasswordMode:function(a){if(this.passwordMode!=a){this.passwordMode=
a;try{this.passwordMode?this.getDrawing().setAttribute("type","password"):this.getDrawing().setAttribute("type","text")}catch(b){a=this.getDrawing().cloneNode(!1),this.passwordMode?a.setAttribute("type","password"):a.setAttribute("type","text"),this.getDrawing().parentNode.replaceChild(a,this.getDrawing()),this.drawing=a,this.invalidateArrange()}}},setFontSize:function(a){this.fontSize!=a&&(this.fontSize=a,this.getDrawing().style.fontSize=this.getFontSize()+"px",this.invalidateMeasure())},getFontSize:function(){return void 0!=
this.fontSize?this.fontSize:this.getStyleProperty("fontSize")},setFontFamily:function(a){this.fontFamily!=a&&(this.fontFamily=a,this.getDrawing().style.fontFamily=this.getFontFamily(),this.invalidateMeasure())},getFontFamily:function(){return void 0!=this.fontFamily?this.fontFamily:this.getStyleProperty("fontFamily")},setFontWeight:function(a){this.fontWeight!=a&&(this.fontWeight=a,this.getDrawing().style.fontWeight=this.getFontWeight(),this.invalidateMeasure())},getFontWeight:function(){return void 0!=
this.fontWeight?this.fontWeight:this.getStyleProperty("fontWeight")},setColor:function(a){this.color!=a&&(this.color=Ui.Color.create(a),navigator.supportRgba?this.getDrawing().style.color=this.getColor().getCssRgba():this.getDrawing().style.color=this.getColor().getCssHtml())},getColor:function(){return void 0!=this.color?this.color:Ui.Color.create(this.getStyleProperty("color"))},getValue:function(){return this.value},setValue:function(a){if(null===a||void 0===a)a="";this.value=a;this.getDrawing().value=
this.value},onPaste:function(a){a.stopPropagation();new Core.DelayedTask({delay:0,scope:this,callback:this.onAfterPaste})},onAfterPaste:function(){this.getDrawing().value!=this.value&&(this.value=this.getDrawing().value,this.fireEvent("change",this,this.value))},onChange:function(a){this.getDrawing().value!=this.value&&(this.value=this.getDrawing().value,this.fireEvent("change",this,this.value))},onKeyDown:function(a){var b=a.which;(37==b||39==b||38==b||40==b||46==b||8==b)&&a.stopPropagation()},onKeyUp:function(a){var b=
a.which;(37==b||39==b||38==b||40==b||46==b||8==b)&&a.stopPropagation();this.getDrawing().value!==this.value&&(this.value=this.getDrawing().value,this.fireEvent("change",this,this.value))}},{renderDrawing:function(){var a=document.createElement("input");a.setAttribute("type","text");a.style.opacity=1;a.style.border="0px";a.style.margin="0px";a.style.padding="0px";a.style.outline="none";navigator.isIE?navigator.isIE7||navigator.isIE8?a.style.background="transparent":a.style.backgroundColor="rgba(255,255,255,0.01)":
a.style.background="none";navigator.isWebkit&&(a.style.webkitAppearance="none");a.style.fontSize=this.getFontSize()+"px";a.style.fontFamily=this.getFontFamily();a.style.fontWeight=this.getFontWeight();a.style.color=this.getColor();return a},measureCore:function(a,b){return{width:8,height:3*this.getFontSize()/2}},arrangeCore:function(a,b){this.getDrawing().style.width=a+"px";this.getDrawing().style.height=b+"px";this.getDrawing().style.lineHeight=b+"px"},onDisable:function(){Ui.Entry.base.onDisable.call(this);
this.getDrawing().blur();this.getDrawing().style.cursor="default";this.getDrawing().disabled=!0},onEnable:function(){Ui.Entry.base.onEnable.call(this);this.getDrawing().style.cursor="auto";this.getDrawing().disabled=!1},onStyleChange:function(){this.getDrawing().style.fontSize=this.getFontSize()+"px";this.getDrawing().style.fontFamily=this.getFontFamily();this.getDrawing().style.fontWeight=this.getFontWeight();navigator.supportRgba?this.getDrawing().style.color=this.getColor().getCssRgba():this.getDrawing().style.color=
this.getColor().getCssHtml();this.invalidateMeasure()}},{style:{color:new Ui.Color({r:0,g:0,b:0}),fontSize:14,fontFamily:"Sans-serif",fontWeight:"normal"}});Ui.Element.extend("Ui.TextArea",{fontSize:void 0,fontFamily:void 0,fontWeight:void 0,color:void 0,value:"",constructor:function(a){this.addEvents("change");this.setSelectable(!0);this.setFocusable(!0);this.connect(this.getDrawing(),"change",this.onChange);this.connect(this.getDrawing(),"paste",this.onPaste);this.connect(this.getDrawing(),"keydown",this.onKeyDown);this.connect(this.getDrawing(),"keyup",this.onKeyUp)},setFontSize:function(a){this.fontSize!=a&&(this.fontSize=a,this.getDrawing().style.fontSize=
this.getFontSize()+"px",this.invalidateMeasure())},getFontSize:function(){return void 0!==this.fontSize?this.fontSize:this.getStyleProperty("fontSize")},setFontFamily:function(a){this.fontFamily!==a&&(this.fontFamily=a,this.getDrawing().style.fontFamily=this.getFontFamily(),this.invalidateMeasure())},getFontFamily:function(){return void 0!==this.fontFamily?this.fontFamily:this.getStyleProperty("fontFamily")},setFontWeight:function(a){this.fontWeight!==a&&(this.fontWeight=a,this.getDrawing().style.fontWeight=
this.getFontWeight(),this.invalidateMeasure())},getFontWeight:function(){return void 0!==this.fontWeight?this.fontWeight:this.getStyleProperty("fontWeight")},setColor:function(a){this.color!==a&&(this.color=Ui.Color.create(a),navigator.supportRgba?this.getDrawing().style.color=this.getColor().getCssRgba():this.getDrawing().style.color=this.getColor().getCssHtml())},getColor:function(){return void 0!==this.color?this.color:Ui.Color.create(this.getStyleProperty("color"))},getValue:function(){return this.getDrawing().value},
setValue:function(a){null===a||void 0===a?this.getDrawing().value="":this.getDrawing().value=a;this.invalidateMeasure()},setOffset:function(a,b){this.getDrawing().scrollLeft=a;this.getDrawing().scrollTop=b},getOffsetX:function(){return this.getDrawing().scrollLeft},getOffsetY:function(){return this.getDrawing().scrollTop},onPaste:function(a){a.stopPropagation();new Core.DelayedTask({delay:0,scope:this,callback:this.onAfterPaste})},onAfterPaste:function(){this.getDrawing().value!=this.value&&(this.value=
this.getDrawing().value,this.fireEvent("change",this,this.value))},onChange:function(a){this.getDrawing().value!=this.value&&(this.value=this.getDrawing().value,this.fireEvent("change",this,this.value),this.invalidateMeasure())},onKeyDown:function(a){var b=a.which;(37==b||39==b||38==b||40==b||46==b||8==b)&&a.stopPropagation()},onKeyUp:function(a){var b=a.which;(37==b||39==b||38==b||40==b||46==b||8==b)&&a.stopPropagation();this.getDrawing().value!==this.value&&(this.value=this.getDrawing().value,this.fireEvent("change",
this,this.value),this.invalidateMeasure())}},{renderDrawing:function(){var a=document.createElement("textarea");a.setAttribute("rows",1);a.setAttribute("cols",1);a.style.opacity=1;a.style.display="block";a.style.resize="none";a.style.overflow="hidden";a.style.border="0px";a.style.margin="0px";a.style.padding="0px";a.style.outline="none";navigator.isIE?a.style.backgroundColor=navigator.isIE7||navigator.isIE8?"transparent":"rgba(255,255,255,0.01)":a.style.background="none";navigator.isWebkit&&(a.style.webkitAppearance=
"none");a.style.fontSize=this.getFontSize()+"px";a.style.fontFamily=this.getFontFamily();a.style.fontWeight=this.getFontWeight();a.style.color=navigator.supportRgba?this.getColor().getCssRgba():this.getColor().getCssHtml();return a},measureCore:function(a,b){this.getDrawing().style.width=a+"px";this.getDrawing().style.height="0px";var c={width:this.getDrawing().scrollWidth,height:Math.max(3*this.getFontSize()/2,this.getDrawing().scrollHeight)};this.getDrawing().style.width=this.getLayoutWidth()+"px";
this.getDrawing().style.height=this.getLayoutHeight()+"px";return c},arrangeCore:function(a,b){this.getDrawing().style.width=a+"px";this.getDrawing().style.height=b+"px"},onDisable:function(){Ui.TextArea.base.onDisable.call(this);this.getDrawing().blur();this.getDrawing().style.cursor="default";this.getDrawing().disabled=!0},onEnable:function(){Ui.TextArea.base.onEnable.call(this);this.getDrawing().style.cursor="auto";this.getDrawing().disabled=!1},onStyleChange:function(){this.getDrawing().style.fontSize=
this.getFontSize()+"px";this.getDrawing().style.fontFamily=this.getFontFamily();this.getDrawing().style.fontWeight=this.getFontWeight();navigator.supportRgba?this.getDrawing().style.color=this.getColor().getCssRgba():this.getDrawing().style.color=this.getColor().getCssHtml();this.invalidateMeasure()}},{style:{color:new Ui.Color({r:0,g:0,b:0}),fontSize:14,fontFamily:"Sans-serif",fontWeight:"normal"}});Ui.CompactLabel.extend("Ui.ButtonText",{});
Ui.CanvasElement.extend("Ui.ButtonBackground",{borderWidth:1,border:void 0,background:void 0,radius:3,constructor:function(){this.setBorder("black");this.setBackground("white")},setBorderWidth:function(a){this.borderWidth=a;this.invalidateDraw()},setBorder:function(a){this.border=Ui.Color.create(a);this.invalidateDraw()},setRadius:function(a){this.radius=a;this.invalidateDraw()}},{setBackground:function(a){this.background=Ui.Color.create(a);this.invalidateDraw()},updateCanvas:function(a){var b=this.getLayoutWidth(),
c=this.getLayoutHeight(),d=Math.min(this.radius,Math.min(b,c)/2);a.beginPath();var e=Math.max(0,d-this.borderWidth);a.roundRect(this.borderWidth,this.borderWidth,b-2*this.borderWidth,c-2*this.borderWidth,e,e,e,e);a.closePath();a.fillStyle=this.background.getCssRgba();a.fill();0<this.borderWidth&&(a.beginPath(),a.roundRect(0,0,b,c,d,d,d,d),a.roundRect(this.borderWidth,this.borderWidth,b-2*this.borderWidth,c-2*this.borderWidth,e,e,e,e,!0),a.closePath(),a.fillStyle=this.border.getCssRgba(),a.fill())}});
Ui.CanvasElement.extend("Ui.ButtonIcon",{badge:void 0,badgeColor:void 0,badgeTextColor:void 0,fill:void 0,icon:"eye",constructor:function(){this.setFill("black");this.setBadgeColor("red");this.setBadgeTextColor("white")},getIcon:function(){return this.icon},setIcon:function(a){this.icon=a;this.invalidateDraw()},setBadge:function(a){this.badge=a;this.invalidateDraw()},setBadgeColor:function(a){this.badgeColor=Ui.Color.create(a);this.invalidateDraw()},setBadgeTextColor:function(a){this.badgeTextColor=
Ui.Color.create(a);this.invalidateDraw()},setFill:function(a){this.fill=Ui.Color.create(a);this.invalidateDraw()}},{updateCanvas:function(a){var b=this.getLayoutWidth(),c=this.getLayoutHeight(),d=Math.min(b,c);a.save();a.translate((b-d)/2,(c-d)/2);void 0!==this.badge?Ui.Icon.drawIconAndBadge(a,this.icon,d,this.fill.getCssRgba(),this.badge,d/2.5,this.badgeColor.getCssRgba(),this.badgeTextColor.getCssRgba()):Ui.Icon.drawIcon(a,this.icon,d,this.fill.getCssRgba());a.restore()}});
Ui.Selectionable.extend("Ui.Button",{dropbox:void 0,isActive:!1,mainBox:void 0,buttonPartsBox:void 0,icon:void 0,iconBox:void 0,text:void 0,textBox:void 0,marker:void 0,badge:void 0,bg:void 0,orientation:void 0,constructor:function(a){this.dropbox=new Ui.DropBox;this.setContent(this.dropbox);this.bg=new Ui.ButtonBackground;this.dropbox.setContent(this.bg);this.connect(this.dropbox,"dragenter",this.onDragEnter);this.connect(this.dropbox,"dragleave",this.onDragLeave);this.mainBox=new Ui.HBox;this.dropbox.append(this.mainBox);
this.buttonPartsBox=new Ui.Box;this.mainBox.append(this.buttonPartsBox,!0);this.textBox=new Ui.LBox;this.iconBox=new Ui.LBox;this.connect(this,"down",this.updateColors);this.connect(this,"up",this.updateColors);this.connect(this,"focus",this.updateColors);this.connect(this,"blur",this.updateColors);this.connect(this,"enter",this.updateColors);this.connect(this,"leave",this.updateColors)},getDropBox:function(){return this.dropbox},getTextBox:function(){return this.textBox},getText:function(){return this.text},
setText:function(a){"string"===typeof a?void 0!==this.text?Ui.ButtonText.hasInstance(this.text)?this.text.setText(a):(this.text=new Ui.ButtonText({text:a,color:this.getForeground()}),this.textBox.setContent(this.text)):(this.text=new Ui.ButtonText({text:a,color:this.getForeground()}),this.textBox.setContent(this.text)):(this.text=a,Ui.Element.hasInstance(this.text)?this.textBox.setContent(this.text):void 0!==this.text&&(this.text=new Ui.ButtonText({text:this.text.toString(),color:this.getForeground()}),
this.textBox.setContent(this.text)));this.updateVisibles()},getIconBox:function(){return this.iconBox},getIcon:function(){return this.icon},setIcon:function(a){"string"===typeof a?void 0!==this.icon?Ui.ButtonIcon.hasInstance(this.icon)?this.icon.setIcon(a):(this.icon=new Ui.ButtonIcon({icon:a,badge:this.badge,fill:this.getForeground(),badgeColor:this.getStyleProperty("badgeColor"),badgeTextColor:this.getStyleProperty("badgeTextColor")}),this.iconBox.setContent(this.icon)):(this.icon=new Ui.ButtonIcon({icon:a,
badge:this.badge,fill:this.getForeground(),badgeColor:this.getStyleProperty("badgeColor"),badgeTextColor:this.getStyleProperty("badgeTextColor")}),this.iconBox.setContent(this.icon)):(this.icon=a,this.iconBox.setContent(this.icon));this.updateVisibles()},setMarker:function(a){void 0!==this.marker&&this.mainBox.remove(this.marker);this.marker=a;this.mainBox.append(this.marker)},getIsActive:function(){return this.isActive},setIsActive:function(a){this.isActive!==a&&(this.isActive=a,this.updateColors())},
getBadge:function(){return this.badge},setBadge:function(a){this.badge=a;Ui.ButtonIcon.hasInstance(this.icon)&&this.icon.setBadge(a)},getOrientation:function(){return void 0!==this.orientation?this.orientation:this.getStyleProperty("orientation")},setOrientation:function(a){this.orientation=a;this.buttonPartsBox.setOrientation(this.getOrientation());this.updateVisibles()},getBackground:function(){var a=(this.isActive?this.getHasFocus()&&!this.getIsMouseFocus()?Ui.Color.create(this.getStyleProperty("focusActiveBackground")):
Ui.Color.create(this.getStyleProperty("activeBackground")):this.getHasFocus()&&!this.getIsMouseFocus()?Ui.Color.create(this.getStyleProperty("focusBackground")):Ui.Color.create(this.getStyleProperty("background"))).getYuva(),b=0;this.getIsDown()?b=-0.2:this.getIsOver()&&(b=0.2,a.a=Math.max(0.4,a.a));return new Ui.Color({y:a.y+b,u:a.u,v:a.v,a:a.a})},getBackgroundBorder:function(){var a=(this.isActive?this.getHasFocus()&&!this.getIsMouseFocus()?Ui.Color.create(this.getStyleProperty("focusActiveBackgroundBorder")):
Ui.Color.create(this.getStyleProperty("activeBackgroundBorder")):this.getHasFocus()&&!this.getIsMouseFocus()?Ui.Color.create(this.getStyleProperty("focusBackgroundBorder")):Ui.Color.create(this.getStyleProperty("backgroundBorder"))).getYuva(),b=0;this.getIsDown()?b=-0.2:this.getIsOver()&&(b=0.2);return new Ui.Color({y:a.y+b,u:a.u,v:a.v,a:a.a})},getForeground:function(){var a;a=this.isActive?this.getHasFocus()&&!this.getIsMouseFocus()?Ui.Color.create(this.getStyleProperty("focusActiveForeground")):
Ui.Color.create(this.getStyleProperty("activeForeground")):this.getHasFocus()&&!this.getIsMouseFocus()?Ui.Color.create(this.getStyleProperty("focusForeground")):Ui.Color.create(this.getStyleProperty("foreground"));var b=0;this.getIsDown()?b=-0.2:this.getIsOver()&&(b=0.2);a=a.getYuva();return new Ui.Color({y:a.y+b,u:a.u,v:a.v,a:a.a})},getIsTextVisible:function(){return void 0!==this.text&&(this.getStyleProperty("showText")||void 0===this.icon)},getIsIconVisible:function(){return void 0!==this.icon&&
(this.getStyleProperty("showIcon")||void 0===this.text)},updateVisibles:function(){this.getIsTextVisible()?(void 0===this.textBox.getParent()&&this.buttonPartsBox.append(this.textBox,!0),Ui.ButtonText.hasInstance(this.text)&&(this.getIsIconVisible()&&"horizontal"===this.getOrientation()?this.text.setTextAlign("left"):this.text.setTextAlign("center"),this.text.setFontFamily(this.getStyleProperty("fontFamily")),this.text.setFontSize(this.getStyleProperty("fontSize")),this.text.setFontWeight(this.getStyleProperty("fontWeight")),
this.text.setMaxLine(this.getStyleProperty("maxLine")),this.text.setWhiteSpace(this.getStyleProperty("whiteSpace")),this.text.setInterLine(this.getStyleProperty("interLine")),this.text.setTextTransform(this.getStyleProperty("textTransform")))):void 0!==this.textBox.getParent()&&this.buttonPartsBox.remove(this.textBox);this.getIsIconVisible()?(Ui.Box.setResizable(this.iconBox,!this.getIsTextVisible()),void 0===this.iconBox.getParent()&&this.buttonPartsBox.prepend(this.iconBox)):void 0!==this.iconBox.getParent()&&
this.buttonPartsBox.remove(this.iconBox);"horizontal"===this.getOrientation()?this.getIsTextVisible()&&this.text.setVerticalAlign("center"):this.getIsIconVisible()&&this.getIsTextVisible()?this.text.setVerticalAlign("top"):this.getIsTextVisible()&&this.text.setVerticalAlign("center")},onDragEnter:function(){console.log(this+".onDragEnter BUTTON")},onDragLeave:function(){console.log(this+".onDragLeave BUTTON")},updateColors:function(){var a=this.getForeground();this.bg.setBackground(this.getBackground());
this.bg.setBorder(this.getBackgroundBorder());Ui.ButtonText.hasInstance(this.text)&&this.text.setColor(a);Ui.ButtonIcon.hasInstance(this.icon)&&(this.icon.setFill(a),this.icon.setBadgeColor(this.getStyleProperty("badgeColor")),this.icon.setBadgeTextColor(this.getStyleProperty("badgeTextColor")))}},{onDisable:function(){Ui.Button.base.onDisable.apply(this,arguments);this.setOpacity(0.4)},onEnable:function(){Ui.Button.base.onEnable.apply(this,arguments);this.setOpacity(1)},onStyleChange:function(){this.buttonPartsBox.setSpacing(Math.max(0,
this.getStyleProperty("spacing")));this.buttonPartsBox.setMargin(Math.max(0,this.getStyleProperty("padding")));this.bg.setRadius(this.getStyleProperty("radius"));this.bg.setBorderWidth(this.getStyleProperty("borderWidth"));var a=Math.max(0,this.getStyleProperty("iconSize"));this.iconBox.setWidth(a);this.iconBox.setHeight(a);this.textBox.setWidth(this.getStyleProperty("textWidth"));this.textBox.setMaxWidth(this.getStyleProperty("maxTextWidth"));this.textBox.setHeight(this.getStyleProperty("textHeight"));
this.buttonPartsBox.setOrientation(this.getOrientation());this.updateVisibles();this.updateColors()}},{style:{orientation:"horizontal",borderWidth:1,badgeColor:"red",badgeTextColor:"white",background:"rgba(250,250,250,1)",backgroundBorder:"rgba(140,140,140,1)",foreground:"#444444",activeBackground:"rgba(250,250,250,1)",activeBackgroundBorder:"rgba(140,140,140,1)",activeForeground:"rgb(33,211,255)",focusBackground:"rgb(33,211,255)",focusBackgroundBorder:new Ui.Color({r:0.04,g:0.43,b:0.5}),focusForeground:"#222222",
focusActiveBackground:"rgb(33,211,255)",focusActiveBackgroundBorder:new Ui.Color({r:0.04,g:0.43,b:0.5}),focusActiveForeground:"white",radius:3,spacing:5,padding:5,iconSize:24,fontSize:16,fontFamily:"Sans-serif",fontWeight:"normal",textWidth:70,textTransform:"none",maxTextWidth:Number.MAX_VALUE,textHeight:24,interLine:1,maxLine:3,whiteSpace:"nowrap",showText:!0,showIcon:!0}});Ui.Button.extend("Ui.DefaultButton",{});Ui.Button.extend("Ui.ToggleButton",{isToggled:!1,constructor:function(a){this.addEvents("toggle","untoggle");this.setRole("checkbox");this.getDrawing().setAttribute("aria-checked","false");this.connect(this,"press",this.onToggleButtonPress)},getIsToggled:function(){return this.isToggled},onToggleButtonPress:function(){if(this.isToggled)this.onUntoggle();else this.onToggle()},onToggle:function(){this.isToggled||(this.isToggled=!0,this.setIsActive(!0),this.getDrawing().setAttribute("aria-checked","true"),
this.fireEvent("toggle",this))},onUntoggle:function(){this.isToggled&&(this.isToggled=!1,this.setIsActive(!1),this.getDrawing().setAttribute("aria-checked","false"),this.fireEvent("untoggle",this))},toggle:function(){this.onToggle()},untoggle:function(){this.onUntoggle()}});Ui.Button.extend("Ui.UploadButton",{input:void 0,constructor:function(a){this.addEvents("file");this.input=new Ui.UploadableFileWrapper;this.prepend(this.input);this.connect(this.input,"file",this.onFile);this.connect(this,"press",this.onUploadButtonPress);this.getDropBox().addMimetype("files");this.connect(this.getDropBox(),"dropfile",this.onFile)},setDirectoryMode:function(a){this.input.setDirectoryMode(a)},onUploadButtonPress:function(){this.input.select()},onFile:function(a,b){this.fireEvent("file",
this,b)}});Ui.Button.extend("Ui.LinkButton",{link:void 0,openWindow:!0,target:"_blank",constructor:function(a){this.addEvents("link");this.connect(this,"press",this.onLinkButtonPress)},setSrc:function(a){this.link=a},setOpenWindow:function(a){this.openWindow=a},setTarget:function(a){this.target=a},onLinkButtonPress:function(){this.fireEvent("link",this);this.openWindow?window.open(this.link,this.target):window.location=this.link}});Ui.LinkButton.extend("Ui.DownloadButton",{constructor:function(a){this.addEvents("download");this.connect(this,"link",this.onLinkPress)},onLinkPress:function(){this.fireEvent("download",this)}});Ui.Button.extend("Ui.ActionButton",{action:void 0,selection:void 0,constructor:function(a){this.action=a.action;delete a.action;this.selection=a.selection;delete a.selection;this.connect(this.getDropBox(),"drop",this.onActionButtonDrop);this.connect(this,"press",this.onActionButtonDrop)},addMimetype:function(a){this.getDropBox().addMimetype(a)},onActionButtonDrop:function(){var a=this;"scope"in this.action&&(a=this.action.scope);this.action.callback.call(a,this.selection);this.selection.clear()}});Ui.CanvasElement.extend("Ui.CheckBoxGraphic",{isDown:!1,isChecked:!1,color:void 0,checkColor:void 0,borderWidth:2,constructor:function(a){this.color=new Ui.Color({r:1,g:1,b:1});this.checkColor=new Ui.Color({r:0.31,g:0.66,b:0.31})},getIsDown:function(){return this.isDown},setIsDown:function(a){this.isDown!=a&&(this.isDown=a,this.invalidateDraw())},getIsChecked:function(){return this.isChecked},setIsChecked:function(a){this.isChecked!=a&&(this.isChecked=a,this.invalidateDraw())},getColor:function(){return this.color},
setColor:function(a){this.color!==a&&(this.color=Ui.Color.create(a),this.invalidateDraw())},setBorderWidth:function(a){this.borderWidth!==a&&(this.borderWidth=a,this.invalidateDraw())},setCheckColor:function(a){this.checkColor!==a&&(this.checkColor=Ui.Color.create(a),this.invalidateDraw())},getCheckColor:function(){var a=0;this.getIsDown()&&(a=0.2);var b=this.checkColor.getYuv();return new Ui.Color({y:b.y+a,u:b.u,v:b.v})}},{updateCanvas:function(a){var b=this.getLayoutWidth(),c=this.getLayoutHeight(),
d=b/2,e=c/2;this.getIsDown()&&(a.globalAlpha=0.8);this.getIsDisabled()&&(a.globalAlpha=0.2);a.fillStyle=this.getColor().getCssRgba();a.beginPath();a.moveTo(d-10,e-10);a.lineTo(d-10,e+10);a.lineTo(d+10,e+10);a.lineTo(d+10,e-10);a.moveTo(d-10+this.borderWidth,e-10+this.borderWidth);a.lineTo(d+10-this.borderWidth,e-10+this.borderWidth);a.lineTo(d+10-this.borderWidth,e+10-this.borderWidth);a.lineTo(d-10+this.borderWidth,e+10-this.borderWidth);a.closePath();a.fill();this.isChecked&&(d=Ui.Icon.getPath("check"),
e=20/48,a.save(),a.translate((b-20)/2,(c-20)/2),a.scale(e,e),a.fillStyle=this.getCheckColor().getCssRgba(),a.beginPath(),a.svgPath(d),a.closePath(),a.fill(),a.restore())},measureCore:function(a,b){return{width:30,height:30}},onDisable:function(){this.invalidateDraw()},onEnable:function(){this.invalidateDraw()}});Ui.Pressable.extend("Ui.CheckBox",{graphic:void 0,contentBox:void 0,hbox:void 0,content:void 0,text:void 0,isToggled:!1,constructor:function(a){this.addEvents("change","toggle","untoggle");this.setRole("checkbox");this.getDrawing().setAttribute("aria-checked","false");this.setPadding(3);this.hbox=new Ui.HBox;this.append(this.hbox);this.graphic=new Ui.CheckBoxGraphic;this.hbox.append(this.graphic);this.connect(this,"down",this.onCheckBoxDown);this.connect(this,"up",this.onCheckBoxUp);this.connect(this,
"focus",this.onCheckFocus);this.connect(this,"blur",this.onCheckBlur);this.connect(this,"press",this.onCheckPress)},getIsToggled:function(){return this.isToggled},getValue:function(){return this.getIsToggled()},setValue:function(a){a?this.toggle():this.untoggle()},setText:function(a){void 0===a?(void 0!==this.contentBox&&(this.hbox.remove(this.contentBox),this.contentBox=void 0),this.content=this.text=void 0):void 0!==this.text?(this.text=a,this.contentBox.setText(this.text)):(void 0!==this.content&&
(this.hbox.remove(this.contentBox),this.content=void 0),this.text=a,this.contentBox=new Ui.Text({margin:8,text:this.text,verticalAlign:"center"}),this.hbox.append(this.contentBox,!0))},getText:function(){return this.text},toggle:function(){this.onToggle()},untoggle:function(){this.onUntoggle()},onCheckPress:function(){if(this.isToggled)this.onUntoggle();else this.onToggle()},onToggle:function(){this.isToggled||(this.isToggled=!0,this.getDrawing().setAttribute("aria-checked","true"),this.fireEvent("toggle",
this),this.graphic.setIsChecked(!0),this.fireEvent("change",this,!0))},onUntoggle:function(){this.isToggled&&(this.isToggled=!1,this.getDrawing().setAttribute("aria-checked","false"),this.fireEvent("untoggle",this),this.graphic.setIsChecked(!1),this.fireEvent("change",this,!1))},onCheckFocus:function(){this.getIsMouseFocus()||this.graphic.setColor(this.getStyleProperty("focusColor"))},onCheckBlur:function(){this.graphic.setColor(this.getStyleProperty("color"))},onCheckBoxDown:function(){this.graphic.setIsDown(!0)},
onCheckBoxUp:function(){this.graphic.setIsDown(!1)}},{onStyleChange:function(){this.getHasFocus()?this.graphic.setColor(this.getStyleProperty("focusColor")):this.graphic.setColor(this.getStyleProperty("color"));this.graphic.setCheckColor(this.getStyleProperty("checkColor"));this.graphic.setBorderWidth(this.getStyleProperty("borderWidth"))},setContent:function(a){void 0===a?(void 0!==this.contentBox&&(this.hbox.remove(this.contentBox),this.contentBox=void 0),this.content=this.text=void 0):(void 0!==
this.text&&(this.hbox.remove(this.contentBox),this.text=void 0),void 0!==this.content?this.contentBox.remove(this.content):(this.contentBox=new Ui.LBox({padding:8,verticalAlign:"center"}),this.hbox.append(this.contentBox)),this.content=a,this.contentBox.append(this.content))}},{style:{borderWidth:2,color:"#444444",focusColor:"#21d3ff",checkColor:new Ui.Color({r:0.03,g:0.63,b:0.9})}});Ui.Button.extend("Ui.ContextBarCloseButton",{},{},{style:{textWidth:5,borderWidth:0,background:"rgba(250,250,250,0)"}});
Ui.LBox.extend("Ui.ContextBar",{bg:void 0,selection:void 0,actionsBox:void 0,closeButton:void 0,constructor:function(a){this.selection=a.selection;delete a.selection;this.bg=new Ui.Rectangle;this.append(this.bg);a=new Ui.HBox({spacing:5});this.append(a);this.closeButton=new Ui.ContextBarCloseButton({icon:"backarrow"});a.append(this.closeButton);this.connect(this.closeButton,"press",this.onClosePress);this.actionsBox=new Ui.MenuToolBar({spacing:5,menuPosition:"left",itemsAlign:"right"});a.append(this.actionsBox,
!0);this.connect(this.selection,"change",this.onSelectionChange)},onClosePress:function(){this.selection.clear()},onSelectionChange:function(){this.closeButton.setText(this.selection.getElements().length);var a=this.selection.getActions();this.actionsBox.clear();for(var b in a){var c=a[b];!0!==c.hidden&&(c=new Ui.ActionButton({icon:c.icon,text:c.text,action:c,selection:this.selection}),c.addMimetype(this.selection.getElements()[0].getMimetype()),this.actionsBox.append(c))}},onDrop:function(a){a=a.dialogContextBarAction;
var b=this;"scope"in a&&(b=a.scope);a.callback.call(b,this.selection)}},{onStyleChange:function(){this.bg.setFill(this.getStyleProperty("background"))}},{style:{background:"#cdf"}});Ui.Container.extend("Ui.Popup",{popupSelection:void 0,background:void 0,shadow:void 0,shadowGraphic:void 0,contextBox:void 0,contentBox:void 0,scroll:void 0,posX:void 0,posY:void 0,attachedElement:void 0,attachedBorder:void 0,lbox:void 0,autoHide:!0,preferredWidth:void 0,preferredHeight:void 0,constructor:function(a){this.setHorizontalAlign("stretch");this.setVerticalAlign("stretch");this.popupSelection=new Ui.Selection;this.shadow=new Ui.Pressable({focusable:!1});this.shadow.getDrawing().style.cursor=
"inherit";this.appendChild(this.shadow);this.shadowGraphic=new Ui.Rectangle;this.shadow.setContent(this.shadowGraphic);this.background=new Ui.PopupBackground({radius:0,fill:"#f8f8f8"});this.appendChild(this.background);this.contentBox=new Ui.LBox({margin:2,marginTop:1});this.appendChild(this.contentBox);this.scroll=new Ui.ScrollingArea({margin:2,marginTop:1});this.contentBox.append(this.scroll);this.contextBox=new Ui.ContextBar({selection:this.popupSelection,verticalAlign:"top"});this.contextBox.hide(!0);
this.contentBox.append(this.contextBox);this.connect(this.popupSelection,"change",this.onPopupSelectionChange);this.connect(this.shadow,"press",this.onShadowPress)},setPreferredWidth:function(a){this.preferredWidth=a;this.invalidateMeasure()},setPreferredHeight:function(a){this.preferredHeight=a;this.invalidateMeasure()},getSelectionHandler:function(){return this.popupSelection},setAutoHide:function(a){this.autoHide=a},setContent:function(a){this.scroll.setContent(a)},onWindowResize:function(){this.visible&&
(this.autoHide&&void 0!==this.posX)&&this.hide()},onShadowPress:function(){this.autoHide&&this.hide()},onPopupSelectionChange:function(a){0===a.getElements().length?this.contextBox.hide(!0):this.contextBox.show()}},{visible:!1,onStyleChange:function(){this.background.setFill(this.getStyleProperty("background"));this.shadowGraphic.setFill(this.getStyleProperty("shadow"))},onChildInvalidateMeasure:function(a,b){this.invalidateLayout()},onChildInvalidateArrange:function(a){this.invalidateLayout()},show:function(a,
b){var c=this.getIsVisible();Ui.Popup.base.show.call(this);this.posY=this.posX=this.attachedElement=void 0;c||("object"==typeof a&&Ui.Element.hasInstance(a)?(this.attachedElement=a,void 0!==b&&"string"===typeof b&&(this.attachedBorder=b),c=this.attachedElement.pointToWindow({x:this.attachedElement.getLayoutWidth(),y:this.attachedElement.getLayoutHeight()/2}),this.posX=c.x,this.posY=c.y):void 0!==a&&void 0!==b?(this.posX=a,this.posY=b):this.posY=this.posX=void 0,this.invalidateArrange(),Ui.App.current.appendDialog(this),
this.connect(window,"resize",this.onWindowResize))},onHidden:function(){Ui.App.current.removeDialog(this);this.disconnect(window,"resize",this.onWindowResize)},measureCore:function(a,b){var c=Math.max(a-40,0),d=Math.max(b-40,0);void 0!==this.preferredWidth&&this.preferredWidth<c&&(c=this.preferredWidth);void 0!==this.preferredHeight&&this.preferredHeight<d&&(d=this.preferredHeight);this.background.measure(c,d);c=this.contentBox.measure(c,d);return void 0!==this.posX||void 0!==this.attachedElement?
{width:Math.max(50,c.width),height:Math.max(50,c.height)}:{width:Math.max(a,c.width+40),height:Math.max(b,c.height+40)}},arrangeCore:function(a,b){var c,d,e;this.shadow.arrange(0,0,a,b);if(void 0===this.posX&&void 0===this.attachedElement||150>a||150>b)this.setCenter(a,b);else if(void 0!==this.attachedElement){d=["left","right","top","bottom","center"];void 0!==this.attachedBorder&&d.unshift(this.attachedBorder);for(e=0;e<d.length;e++)if(c=d[e],"left"===c){if(c=this.attachedElement.pointToWindow({x:this.attachedElement.getLayoutWidth(),
y:this.attachedElement.getLayoutHeight()/2}),this.contentBox.getMeasureWidth()+c.x+10<a){this.setLeft(c.x,c.y,a,b);break}}else if("right"===c){if(c=this.attachedElement.pointToWindow({x:0,y:this.attachedElement.getLayoutHeight()/2}),this.contentBox.getMeasureWidth()+10<c.x){this.setRight(c.x,c.y,a,b);break}}else if("top"===c){if(c=this.attachedElement.pointToWindow({x:this.attachedElement.getLayoutWidth()/2,y:0}),this.contentBox.getMeasureHeight()+10<c.y){this.setTop(c.x,c.y,a,b);break}}else if("bottom"===
c){if(c=this.attachedElement.pointToWindow({x:this.attachedElement.getLayoutWidth()/2,y:this.attachedElement.getLayoutHeight()}),this.contentBox.getMeasureHeight()+10+c.y<b){this.setBottom(c.x,c.y,a,b);break}}else{this.setCenter(a,b);break}}else{d=["left","right","top","bottom","center"];void 0!==this.attachedBorder&&d.unshift(this.attachedBorder);for(e=0;e<d.length;e++)if(c=d[e],"left"===c){if(this.contentBox.getMeasureWidth()+this.posX+10<a){this.setLeft(this.posX,this.posY,a,b);break}}else if("right"===
c){if(this.contentBox.getMeasureWidth()+10<this.posX){this.setRight(this.posX,this.posY,a,b);break}}else if("top"===c){if(this.contentBox.getMeasureHeight()+10<this.posY){this.setTop(this.posX,this.posY,a,b);break}}else if("bottom"===c){if(this.contentBox.getMeasureHeight()+10+this.posY<b){this.setBottom(this.posX,this.posY,a,b);break}}else{this.setCenter(a,b);break}}},setLeft:function(a,b,c,d){a+=10;c=b-30;this.background.setArrowBorder("left");c+this.contentBox.getMeasureHeight()>d?(c=d-this.contentBox.getMeasureHeight(),
b-=c,b>this.contentBox.getMeasureHeight()-18&&(b=this.contentBox.getMeasureHeight()-18),this.background.setArrowOffset(b)):this.background.setArrowOffset(30);this.background.arrange(a-10,c,this.contentBox.getMeasureWidth()+10,this.contentBox.getMeasureHeight());this.contentBox.arrange(a,c,this.contentBox.getMeasureWidth(),this.contentBox.getMeasureHeight())},setRight:function(a,b,c,d){a-=10+this.contentBox.getMeasureWidth();c=b-30;this.background.setArrowBorder("right");c+this.contentBox.getMeasureHeight()>
d?(c=d-this.contentBox.getMeasureHeight(),b-=c,b>this.contentBox.getMeasureHeight()-18&&(b=this.contentBox.getMeasureHeight()-18),this.background.setArrowOffset(b)):this.background.setArrowOffset(30);this.background.arrange(a,c,this.contentBox.getMeasureWidth()+10,this.contentBox.getMeasureHeight());this.contentBox.arrange(a,c,this.contentBox.getMeasureWidth(),this.contentBox.getMeasureHeight())},setTop:function(a,b,c,d){b-=this.contentBox.getMeasureHeight();d=a-30;this.background.setArrowBorder("bottom");
d+this.contentBox.getMeasureWidth()>c?(d=c-this.contentBox.getMeasureWidth(),a-=d,a>this.contentBox.getMeasureWidth()-18&&(a=this.contentBox.getMeasureWidth()-18),this.background.setArrowOffset(a)):2>d?(this.background.setArrowOffset(a+2),d=2):this.background.setArrowOffset(30);this.background.arrange(d,b-10,this.contentBox.getMeasureWidth(),this.contentBox.getMeasureHeight()+10);this.contentBox.arrange(d,b-10,this.contentBox.getMeasureWidth(),this.contentBox.getMeasureHeight())},setBottom:function(a,
b,c,d){b+=10;d=a-30;this.background.setArrowBorder("top");d+this.contentBox.getMeasureWidth()>c?(d=c-this.contentBox.getMeasureWidth(),a-=d,a>this.contentBox.getMeasureWidth()-18&&(a=this.contentBox.getMeasureWidth()-18),this.background.setArrowOffset(a)):2>d?(this.background.setArrowOffset(a+2),d=2):this.background.setArrowOffset(30);this.background.arrange(d,b-10,this.contentBox.getMeasureWidth(),this.contentBox.getMeasureHeight()+10);this.contentBox.arrange(d,b,this.contentBox.getMeasureWidth(),
this.contentBox.getMeasureHeight())},setCenter:function(a,b){this.background.setArrowBorder("none");x=(a-this.contentBox.getMeasureWidth())/2;y=(b-this.contentBox.getMeasureHeight())/2;this.background.arrange(x,y,this.contentBox.getMeasureWidth(),this.contentBox.getMeasureHeight());this.contentBox.arrange(x,y,this.contentBox.getMeasureWidth(),this.contentBox.getMeasureHeight())}},{style:{background:"#f8f8f8",shadow:new Ui.Color({r:1,g:1,b:1,a:0.5})}});
Ui.CanvasElement.extend("Ui.PopupBackground",{radius:8,fill:"black",arrowBorder:"left",arrowOffset:30,arrowSize:10,constructor:function(a){},setArrowBorder:function(a){this.arrowBorder!=a&&(this.arrowBorder=a,this.invalidateArrange())},setArrowOffset:function(a){this.arrowOffset!=a&&(this.arrowOffset=a,this.invalidateArrange())},setRadius:function(a){this.radius!=a&&(this.radius=a,this.invalidateArrange())},setFill:function(a){this.fill!=a&&(this.fill=Ui.Color.create(a))},genPath:function(a,b,c,d,
e,f){var g;if("none"==d)return d=a-c,g=b-c,"M"+c+",0 L"+d+",0 Q"+a+",0 "+a+","+c+" L"+a+","+g+" Q"+a+","+b+" "+d+","+b+" L"+c+","+b+" Q0,"+b+" 0,"+g+" L0,"+c+" Q0,0 "+c+",0 z";if("left"==d)return d=a-this.radius,g=b-this.radius,"M"+(c+e)+",0 L"+d+",0 Q"+a+",0 "+a+","+c+" L"+a+","+g+" Q"+a+","+b+" "+d+","+b+" L"+(c+e)+","+b+" Q"+e+","+b+" "+e+","+g+" L"+e+","+(f+e)+" L0,"+f+" L"+e+","+(f-e)+" L"+e+","+c+" Q"+e+",0 "+(c+e)+",0 z";if("right"==d)return d=a-(this.radius+e),g=b-this.radius,"M"+c+",0 L"+
d+",0 Q"+(a-e)+",0 "+(a-e)+","+c+" L"+(a-e)+","+(f-e)+" L"+a+","+f+" L"+(a-e)+","+(f+e)+" L "+(a-e)+","+g+" Q"+(a-e)+","+b+" "+d+","+b+" L"+c+","+b+" Q0,"+b+" 0,"+g+" L0,"+c+" Q0,0 "+c+",0 z";if("top"==d)return d=a-this.radius,g=b-this.radius,"M"+c+","+e+" L"+(f-e)+","+e+" L"+f+",0 L"+(f+e)+","+e+" L"+d+","+e+" Q"+a+","+e+" "+a+","+(e+c)+" L"+a+","+g+" Q"+a+","+b+" "+d+","+b+" L"+c+","+b+" Q0,"+b+" 0,"+g+" L0,"+(e+c)+" Q0,"+e+" "+c+","+e+" z";if("bottom"==d)return d=a-this.radius,g=b-(this.radius+
e),"M"+c+",0 L"+d+",0 Q"+a+",0 "+a+","+c+" L"+a+","+g+" Q"+a+","+(b-e)+" "+d+","+(b-e)+" L "+(f+e)+","+(b-e)+" L"+f+","+b+" L"+(f-e)+","+(b-e)+" L"+c+","+(b-e)+" Q0,"+(b-e)+" 0,"+g+" L0,"+c+" Q0,0 "+c+",0 z"}},{updateCanvas:function(a){var b=this.getLayoutWidth(),c=this.getLayoutHeight();"none"==this.arrowBorder?(a.fillStyle="rgba(0,0,0,0.1)",a.fillRect(0,0,b,c),a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(1,1,b-2,c-2),a.fillStyle=this.fill.getCssRgba(),a.fillRect(2,2,b-4,c-4)):(a.fillStyle="rgba(0,0,0,0.1)",
a.svgPath(this.genPath(b,c,this.radius,this.arrowBorder,this.arrowSize,this.arrowOffset)),a.fill(),a.save(),a.fillStyle="rgba(0,0,0,0.5)",a.translate(1,1),a.svgPath(this.genPath(b-2,c-2,this.radius-1,this.arrowBorder,this.arrowSize-1,this.arrowOffset-1)),a.fill(),a.restore(),a.fillStyle=this.fill.getCssRgba(),a.translate(2,2),a.svgPath(this.genPath(b-4,c-4,this.radius-2,this.arrowBorder,this.arrowSize-1,this.arrowOffset-2)),a.fill())}});Ui.Popup.extend("Ui.MenuPopup",{});
Ui.Separator.extend("Ui.MenuPopupSeparator",{});Ui.Button.extend("Ui.Combo",{field:void 0,data:void 0,position:-1,current:void 0,placeHolder:"...",sep:void 0,constructor:function(a){this.addEvents("change");this.arrowtop=new Ui.Icon({icon:"arrowtop",width:10,height:10});this.arrowbottom=new Ui.Icon({icon:"arrowbottom",width:10,height:10});this.setMarker(new Ui.VBox({verticalAlign:"center",content:[this.arrowtop,this.arrowbottom],marginRight:5}))},setPlaceHolder:function(a){this.placeHolder=a;-1===this.position&&this.setText(this.placeHolder)},
setField:function(a){this.field=a;void 0!==this.data&&this.setData(this.data)},setData:function(a){this.data=a},getData:function(){return this.data},getPosition:function(){return this.position},setCurrentAt:function(a){-1===a?(this.position=-1,this.current=void 0,this.setText(this.placeHolder),this.fireEvent("change",this,this.current,this.position)):0<=a&&a<this.data.length&&(this.current=this.data[a],this.position=a,this.setText(this.current[this.field]),this.fireEvent("change",this,this.current,
this.position))},getCurrent:function(){return this.current},getValue:function(){return this.current},setCurrent:function(a){void 0===a&&this.setCurrentAt(-1);for(var b=-1,c=0;c<this.data.length;c++)if(this.data[c]==a){b=c;break}-1!=b&&this.setCurrentAt(b)},onItemPress:function(a,b,c){this.setCurrentAt(c)}},{onPress:function(){var a=new Ui.ComboPopup({field:this.field,data:this.data});-1!==this.position&&a.setCurrentAt(this.position);this.connect(a,"item",this.onItemPress);a.show(this)},updateColors:function(){Ui.Combo.base.updateColors.apply(this,
arguments);this.arrowtop.setFill(this.getForeground());this.arrowbottom.setFill(this.getForeground())}});
Ui.MenuPopup.extend("Ui.ComboPopup",{list:void 0,data:void 0,field:void 0,constructor:function(a){this.addEvents("item");this.setAutoHide(!0);this.list=new Ui.VBox;this.setContent(this.list)},setField:function(a){this.field=a;void 0!==this.data&&this.setData(this.data)},setData:function(a){this.data=a;if(void 0!==this.field)for(var b=0;b<a.length;b++){var c=new Ui.ComboItem({text:a[b][this.field]});this.connect(c,"press",this.onItemPress);this.list.append(c)}},setCurrentAt:function(a){this.list.getChildren()[a].setIsActive(!0)},
onItemPress:function(a){for(var b=-1,c=0;c<this.list.getChildren().length;c++)if(this.list.getChildren()[c]==a){b=c;break}this.fireEvent("item",this,a,b);this.hide()}});Ui.Button.extend("Ui.ComboItem");Ui.Button.extend("Ui.DialogCloseButton",{constructor:function(){this.setIcon("backarrow");this.setText("Fermer")}},{},{style:{showText:!1,background:"rgba(250,250,250,0)",backgroundBorder:"rgba(250,250,250,0)",activeBackground:"rgba(250,250,250,0)",activeBackgroundBorder:"rgba(250,250,250,0)"}});
Ui.CanvasElement.extend("Ui.DialogGraphic",{background:void 0,constructor:function(){this.background=Ui.Color.create("#f8f8f8")}},{setBackground:function(a){this.background=Ui.Color.create(a);this.invalidateDraw()},updateCanvas:function(a){var b=this.getLayoutWidth(),c=this.getLayoutHeight();a.roundRectFilledShadow(0,0,b,c,2,2,2,2,!1,3,new Ui.Color({a:0.3}));a.fillStyle=this.background.getCssRgba();a.fillRect(3,3,b-6,c-6)}});
Ui.CompactLabel.extend("Ui.DialogTitle",{},{},{style:{color:"#666666",textAlign:"left",fontWeight:"bold",fontSize:18,maxLine:2}});
Ui.LBox.extend("Ui.DialogButtonBox",{bg:void 0,actionBox:void 0,cancelButton:void 0,actionButtonsBox:void 0,titleLabel:void 0,constructor:function(a){this.addEvents("cancel");this.bg=new Ui.Rectangle;this.append(this.bg);this.actionBox=new Ui.HBox({margin:5,spacing:10});this.append(this.actionBox);this.actionButtonsBox=new Ui.MenuToolBar({spacing:5});this.actionBox.append(this.actionButtonsBox,!0);this.titleLabel=new Ui.DialogTitle({width:50,verticalAlign:"center"});this.actionButtonsBox.append(this.titleLabel,
!0)},setTitle:function(a){this.titleLabel.setText(a)},setCancelButton:function(a){void 0!==this.cancelButton&&(Ui.Pressable.hasInstance(this.cancelButton)&&this.disconnect(this.cancelButton,"press",this.onCancelPress),this.actionBox.remove(this.cancelButton));this.cancelButton=a;void 0!==this.cancelButton&&(Ui.Pressable.hasInstance(this.cancelButton)&&this.connect(this.cancelButton,"press",this.onCancelPress),this.actionBox.prepend(this.cancelButton))},setActionButtons:function(a){this.actionButtonsBox.setContent(a);
this.actionButtonsBox.prepend(this.titleLabel,!0)},getActionButtons:function(){for(var a=[],b=1;b<this.actionButtonsBox.getLogicalChildren().length;b++)a.push(this.actionButtonsBox.getLogicalChildren()[b]);return a},onCancelPress:function(){this.fireEvent("cancel",this)}},{onStyleChange:function(){this.bg.setFill(this.getStyleProperty("background"))}},{style:{background:"#e8e8e8"}});
Ui.Container.extend("Ui.Dialog",{dialogSelection:void 0,shadow:void 0,shadowGraphic:void 0,graphic:void 0,lbox:void 0,vbox:void 0,titleLabel:void 0,contentBox:void 0,contentVBox:void 0,actionButtons:void 0,cancelButton:void 0,buttonsBox:void 0,buttonsVisible:!1,preferredWidth:100,preferredHeight:100,actionBox:void 0,contextBox:void 0,autoClose:!0,constructor:function(a){this.addEvents("close");this.dialogSelection=new Ui.Selection;this.shadow=new Ui.Pressable({focusable:!1});this.shadow.getDrawing().style.cursor=
"inherit";this.appendChild(this.shadow);this.shadowGraphic=new Ui.Rectangle;this.shadow.setContent(this.shadowGraphic);this.lbox=new Ui.Form;this.connect(this.lbox,"submit",this.onFormSubmit);this.appendChild(this.lbox);this.graphic=new Ui.DialogGraphic;this.lbox.append(this.graphic);this.vbox=new Ui.VBox({margin:3});this.lbox.append(this.vbox);this.buttonsBox=new Ui.LBox({height:32});this.buttonsBox.hide(!0);this.vbox.append(this.buttonsBox);this.scroll=new Ui.ScrollingArea({marginLeft:2,marginTop:2,
marginRight:2});this.scroll.setScrollHorizontal(!1);this.scroll.setScrollVertical(!1);this.vbox.append(this.scroll,!0);this.contentVBox=new Ui.VBox;this.scroll.setContent(this.contentVBox);this.contentBox=new Ui.LBox({margin:8});this.contentVBox.append(this.contentBox,!0);this.contextBox=new Ui.ContextBar({selection:this.dialogSelection});this.contextBox.hide();this.buttonsBox.append(this.contextBox);this.actionBox=new Ui.DialogButtonBox;this.connect(this.actionBox,"cancel",this.close);this.buttonsBox.append(this.actionBox);
this.connect(this.dialogSelection,"change",this.onDialogSelectionChange);this.connect(this.getDrawing(),"keydown",this.onKeyDown);this.connect(this.shadow,"press",this.onShadowPress)},getSelectionHandler:function(){return this.dialogSelection},setPreferredWidth:function(a){this.preferredWidth=a;this.invalidateMeasure()},setPreferredHeight:function(a){this.preferredHeight=a;this.invalidateMeasure()},open:function(){Ui.App.current.appendDialog(this)},close:function(){Ui.App.current.removeDialog(this);
this.fireEvent("close",this)},getDefaultButton:function(){for(var a=this.actionBox.getActionButtons(),b,c=0;void 0===b&&c<a.length;c++)Ui.DefaultButton.hasInstance(a[c])&&(b=a[c]);return b},defaultAction:function(){var a=this.getDefaultButton();void 0!==a&&a.press()},setFullScrolling:function(a){this.scroll.setScrollHorizontal(a);this.scroll.setScrollVertical(a)},setTitle:function(a){this.actionBox.setTitle(a)},updateButtonsBoxVisible:function(){var a=void 0!==this.cancelButton||void 0!==this.actionButtons||
0<this.dialogSelection.getElements().length;!this.buttonsVisible&&a?(this.buttonsVisible=!0,this.buttonsBox.show()):this.buttonsVisible&&!a&&(this.buttonsVisible=!1,this.buttonsBox.hide(!0))},setCancelButton:function(a){this.cancelButton=a;this.actionBox.setCancelButton(a);this.updateButtonsBoxVisible()},setActionButtons:function(a){this.actionButtons=a;this.actionBox.setActionButtons(a);this.updateButtonsBoxVisible()},setContent:function(a){this.contentBox.setContent(a)},getContent:function(){return this.contentBox.getFirstChild()},
setAutoClose:function(a){this.autoClose=a},onCancelPress:function(){this.close()},onFormSubmit:function(){this.defaultAction()},onDialogSelectionChange:function(a){0===a.getElements().length?(this.contextBox.hide(),this.actionBox.show()):(this.contextBox.show(),this.actionBox.hide());this.updateButtonsBoxVisible()},onKeyDown:function(a){46===a.which&&(0!==this.dialogSelection.getElements().length&&this.dialogSelection.executeDeleteAction())&&(a.preventDefault(),a.stopPropagation())},onShadowPress:function(){this.autoClose&&
this.close()}},{onStyleChange:function(){this.shadowGraphic.setFill(this.getStyleProperty("shadow"));this.graphic.setBackground(this.getStyleProperty("background"))},onChildInvalidateMeasure:function(a,b){this.invalidateLayout()},onChildInvalidateArrange:function(a){this.invalidateLayout()},measureCore:function(a,b){this.shadow.measure(a,b);this.lbox.measure(a<this.preferredWidth?a:this.preferredWidth,b<this.preferredHeight?b:this.preferredHeight);return{width:a,height:b}},arrangeCore:function(a,
b){this.shadow.arrange(0,0,a,b);var c=Math.max(a<this.preferredWidth?a:this.preferredWidth,this.lbox.getMeasureWidth()),d=Math.max(b<this.preferredHeight?b:this.preferredHeight,this.lbox.getMeasureHeight());this.lbox.arrange((a-c)/2,(b-d)/2,c,d)}},{style:{shadow:"rgba(255,255,255,0.7)",background:"#f8f8f8"}});Ui.LBox.extend("Ui.ToolBar",{hbox:void 0,scroll:void 0,constructor:function(a){a=new Ui.LBox;Ui.ToolBar.base.append.call(this,a);this.scroll=new Ui.ScrollingArea({scrollVertical:!1,verticalAlign:"center"});a.append(this.scroll);this.hbox=new Ui.HBox;this.scroll.setContent(this.hbox)}},{append:function(a,b){this.hbox.append(a,b)},remove:function(a){this.hbox.remove(a)},setContent:function(a){this.hbox.setContent(a)},onStyleChange:function(){var a=this.getStyleProperty("spacing");this.hbox.setMargin(a);
this.hbox.setSpacing(a)}},{style:{spacing:3}});Ui.Scrollable.extend("Ui.ScrollingArea",{horizontalScrollbar:void 0,verticalScrollbar:void 0,constructor:function(a){this.horizontalScrollbar=new Ui.Rectangle({width:30,height:4,margin:5});this.setScrollbarHorizontal(this.horizontalScrollbar);this.verticalScrollbar=new Ui.Rectangle({width:4,height:30,margin:5});this.setScrollbarVertical(this.verticalScrollbar)}},{onStyleChange:function(){var a=this.getStyleProperty("radius");this.horizontalScrollbar.setRadius(a);this.verticalScrollbar.setRadius(a);
a=this.getStyleProperty("color");this.horizontalScrollbar.setFill(a);this.verticalScrollbar.setFill(a)}},{style:{color:new Ui.Color({r:0,g:0.62,b:0.88}),radius:3}});Ui.Container.extend("Ui.Slider",{value:0,background:void 0,button:void 0,orientation:"horizontal",constructor:function(a){this.addEvents("change");this.background=new Ui.Rectangle({width:4,height:4});this.appendChild(this.background);this.bar=new Ui.Rectangle({width:4,height:4});this.appendChild(this.bar);this.button=new Ui.Movable({moveVertical:!1});this.appendChild(this.button);this.connect(this.button,"move",this.onButtonMove);this.connect(this.button,"focus",this.updateColors);this.connect(this.button,
"blur",this.updateColors);this.connect(this.button,"down",this.updateColors);this.connect(this.button,"up",this.updateColors);this.buttonContent=new Ui.Rectangle({radius:10,width:20,height:20,margin:10});this.button.setContent(this.buttonContent)},getValue:function(){return this.value},setValue:function(a,b){a=Math.min(1,Math.max(0,a));this.value!==a&&(this.value=a,this.disconnect(this.button,"move",this.onButtonMove),this.updateValue(),this.connect(this.button,"move",this.onButtonMove),!0!==b&&this.fireEvent("change",
this,this.value))},getOrientation:function(){return this.orientation},setOrientation:function(a){this.orientation!==a&&(this.orientation=a,this.button.setMoveHorizontal(!0),this.button.setMoveVertical(!0),this.updateValue(),"horizontal"===this.orientation?(this.button.setMoveHorizontal(!0),this.button.setMoveVertical(!1)):(this.button.setMoveHorizontal(!1),this.button.setMoveVertical(!0)),this.invalidateMeasure(),this.onStyleChange())},onButtonMove:function(a){var b;"horizontal"===this.orientation?
(a=this.button.getPositionX(),b=this.getLayoutWidth(),b-=this.button.getLayoutWidth()):(b=this.getLayoutHeight(),b-=this.button.getLayoutHeight(),a=b-this.button.getPositionY());0>a?a=0:a>b&&(a=b);var c=this.value;this.value=a/b;this.disconnect(this.button,"move",this.onButtonMove);this.updateValue();this.connect(this.button,"move",this.onButtonMove);c!=this.value&&this.fireEvent("change",this,this.value)},updateValue:function(){var a,b=this.getLayoutWidth(),c=this.getLayoutHeight();"horizontal"===
this.orientation?(a=b-this.button.getLayoutWidth(),this.button.setPosition(a*this.value,0),this.bar.arrange(this.button.getLayoutWidth()/2,(c-this.bar.getMeasureHeight())/2,a*this.value,this.bar.getMeasureHeight())):(a=c-this.button.getLayoutHeight(),this.button.setPosition(0,a*(1-this.value)),this.bar.arrange((b-this.bar.getMeasureWidth())/2,this.button.getLayoutHeight()/2+a*(1-this.value),this.bar.getMeasureWidth(),a*this.value))},getColor:function(){var a=Ui.Color.create(this.getStyleProperty("background")).getYuv();
return new Ui.Color({y:a.y,u:a.u,v:a.v})},getForeground:function(){return Ui.Color.create(this.getStyleProperty("foreground"))},getBackground:function(){var a=Ui.Color.create(this.getStyleProperty("background")).getYuv(),b=0;this.button.getIsDown()&&(b=-0.3);return new Ui.Color({y:a.y+b,u:a.u,v:a.v})},getButtonColor:function(){var a=Ui.Color.create(this.getStyleProperty("background")).getYuv(),b=0;this.button.getIsDown()?b=-0.3:this.button.getHasFocus()&&(b=0.1);return new Ui.Color({y:a.y+b,u:a.u,
v:a.v})},updateColors:function(){this.bar.setFill(this.getForeground());this.background.setFill(this.getBackground());this.buttonContent.setFill(this.getForeground())}},{measureCore:function(a,b){var c=this.button.measure(0,0),d;"horizontal"===this.orientation?(d=this.background.measure(a-c.width,0),d.width>c.width&&(c.width=d.width),d.height>c.height&&(c.height=d.height),d=this.bar.measure(a-c.width,0)):(d=this.background.measure(0,b-c.height),d.width>c.width&&(c.width=d.width),d.height>c.height&&
(c.height=d.height),d=this.bar.measure(0,b-c.height));d.width>c.width&&(c.width=d.width);d.height>c.height&&(c.height=d.height);return c},arrangeCore:function(a,b){"horizontal"===this.orientation?(this.button.arrange(0,(b-this.button.getMeasureHeight())/2,this.button.getMeasureWidth(),this.button.getMeasureHeight()),this.background.arrange(this.button.getLayoutWidth()/2,(b-this.background.getMeasureHeight())/2,a-this.button.getLayoutWidth(),this.background.getMeasureHeight())):(this.button.arrange((a-
this.button.getMeasureWidth())/2,0,this.button.getMeasureWidth(),this.button.getMeasureHeight()),this.background.arrange((a-this.background.getMeasureWidth())/2,this.button.getLayoutHeight()/2,this.background.getMeasureWidth(),b-this.button.getLayoutHeight()));this.updateValue()},onStyleChange:function(){this.background.setRadius(this.getStyleProperty("radius"));this.bar.setRadius(this.getStyleProperty("radius"));this.updateColors()},onDisable:function(){Ui.Slider.base.onDisable.call(this);this.button.setOpacity(0.2)},
onEnable:function(){Ui.Slider.base.onEnable.call(this);this.button.setOpacity(1)}},{style:{radius:0,background:"#e1e1e1",backgroundBorder:"#919191",foreground:"#00b1b1"}});Ui.Container.extend("Ui.ProgressBar",{value:0,bar:void 0,background:void 0,constructor:function(a){this.background=new Ui.Rectangle({height:4});this.appendChild(this.background);this.bar=new Ui.Rectangle({height:4});this.appendChild(this.bar)},setValue:function(a){a!=this.value&&(this.value=a,a=this.getLayoutWidth()*this.value,2>a?this.bar.hide():(this.bar.show(),this.bar.arrange(0,0,a,this.getLayoutHeight())))},getValue:function(){return this.value}},{measureCore:function(a,b){var c=0,d=0,e;e=this.bar.measure(a,
b);c=Math.max(e.height,c);d=Math.max(e.width,d);e=this.background.measure(a,b);c=Math.max(e.height,c);d=Math.max(e.width,d);return{width:Math.max(d,12),height:c}},arrangeCore:function(a,b){this.background.arrange(0,0,a,b);var c=a*this.value;2>c?this.bar.hide():(this.bar.show(),this.bar.arrange(0,0,c,this.getLayoutHeight()))},onStyleChange:function(){var a=this.getStyleProperty("radius");this.bar.setRadius(a);this.bar.setFill(this.getStyleProperty("foreground"));this.background.setRadius(a);this.background.setFill(this.getStyleProperty("background"))}},
{style:{background:"#999",foreground:"#0cc",color:"#999999",radius:0}});Ui.LBox.extend("Ui.Loading",{icon:void 0,clock:void 0,constructor:function(a){this.icon=new Ui.Icon({icon:"loading"});this.icon.setTransformOrigin(0.5,0.5);this.append(this.icon);this.clock=new Anim.Clock({repeat:"forever",duration:2});this.connect(this.clock,"timeupdate",this.onTick)},onTick:function(a,b){this.icon.setTransform(Ui.Matrix.createRotate(360*b))}},{onVisible:function(){Ui.Loading.base.onVisible.apply(this,arguments);this.clock.begin()},onHidden:function(){Ui.Loading.base.onHidden.apply(this,
arguments);this.clock.stop()},onStyleChange:function(){this.icon.setFill(this.getStyleProperty("color"))}},{style:{color:new Ui.Color({r:0.39,g:0.39,b:0.39})}});Ui.Container.extend("Ui.Locator",{path:void 0,foregrounds:void 0,backgrounds:void 0,border:void 0,constructor:function(a){this.addEvents("change");this.connect(this,"focus",this.updateColors);this.connect(this,"blur",this.updateColors)},setPath:function(a){var b=this.getStyleProperty("spacing"),c=this.getStyleProperty("radius");for(this.path=a;0<this.getChildren().length;)this.removeChild(this.getChildren()[0]);this.border=new Ui.Rectangle({fill:"#888888",radius:c});this.appendChild(this.border);
this.backgrounds=[];this.foregrounds=[];var d,e,f;if("/"==a)d=new Ui.Rectangle({radius:c-1}),this.backgrounds.push(d),this.appendChild(d),b=new Ui.Pressable,b.locatorPath="/",b.locatorPos=0,this.connect(b,"press",this.onPathPress),this.connect(b,"down",this.onPathDown),this.connect(b,"up",this.onPathUp),e=new Ui.Icon({icon:"home",width:25,height:25}),e.setVerticalAlign("center"),e.setHorizontalAlign("center"),e.setMargin(5),b.appendChild(e),this.foregrounds.push(b),this.appendChild(b);else{a=a.split("/");
d=[];for(f=0;f<a.length;f++)""!==a[f]&&d.push(a[f]);a=d;d=new Ui.LocatorRightArrow({arrowLength:b,radius:c-1});this.backgrounds.push(d);this.appendChild(d);for(f=0;f<a.length;f++)d=f==a.length-1?new Ui.LocatorLeftArrow({arrowLength:b,radius:c-1}):new Ui.LocatorLeftRightArrow({arrowLength:b}),this.backgrounds.push(d),this.appendChild(d);b=new Ui.Pressable;b.locatorPath=e;b.locatorPos=0;this.connect(b,"press",this.onPathPress);this.connect(b,"down",this.onPathDown);this.connect(b,"up",this.onPathUp);
e=new Ui.Icon({icon:"home",width:25,height:25});e.setVerticalAlign("center");e.setHorizontalAlign("center");e.setMargin(5);b.locatorPos=0;b.locatorPath="/";b.appendChild(e);this.foregrounds.push(b);this.appendChild(b);e="/";for(f=0;f<a.length;f++)e+=a[f],b=new Ui.Pressable,b.locatorPos=f+1,this.connect(b,"press",this.onPathPress),this.connect(b,"down",this.onPathDown),this.connect(b,"up",this.onPathUp),b.locatorPath=e,b.appendChild(new Ui.Label({text:a[f],margin:5,verticalAlign:"center"})),this.foregrounds.push(b),
this.appendChild(b),e+="/"}this.updateColors()},getPath:function(){return this.path},getColor:function(){return Ui.Color.create(this.getStyleProperty("color"))},getDarkColor:function(){var a=this.getColor().getYuv();return 0.4>a.y?new Ui.Color({y:a.y-0.6+0,u:a.u,v:a.v,a:0.8}):new Ui.Color({y:a.y-0.4+0,u:a.u,v:a.v,a:0.4})},getLightColor:function(){var a=this.getColor().getYuv();return 0.4>a.y?new Ui.Color({y:a.y-0.15+0,u:a.u,v:a.v}):new Ui.Color({y:a.y+0.15+0,u:a.u,v:a.v})},getDownColor:function(){var a=
this.getColor().getYuv();return 0.4>a.y?new Ui.Color({y:a.y-0.15+-0.2,u:a.u,v:a.v}):new Ui.Color({y:a.y+0.15+-0.2,u:a.u,v:a.v})},onPathPress:function(a){this.fireEvent("change",this,a.locatorPath,a.locatorPos)},onPathDown:function(a){this.backgrounds[a.locatorPos].setFill(this.getDownColor())},onPathUp:function(a){this.backgrounds[a.locatorPos].setFill(this.getLightColor())},updateColors:function(){var a=this.getLightColor();this.border.setFill(this.getDarkColor());for(var b=0;b<this.backgrounds.length;b++)this.backgrounds[b].setFill(a)}},
{measureCore:function(a,b){if(0===this.foregrounds.length)return{width:0,height:0};var c;for(c=0;c<this.foregrounds.length;c++)this.foregrounds[c].measure(0,0);for(c=0;c<this.backgrounds.length;c++)this.backgrounds[c].measure(0,0);this.border.measure(0,0);if(1==this.foregrounds.length)return{width:this.foregrounds[0].getMeasureWidth()+2,height:this.foregrounds[0].getMeasureHeight()+2};var d=0,e=0;for(c=0;c<this.foregrounds.length;c++){var f=this.foregrounds[c];f.getMeasureHeight()>e&&(e=f.getMeasureHeight());
d+=f.getMeasureWidth()}c=this.getStyleProperty("spacing");d+=(this.foregrounds.length-1)*(c+1);return{width:d+2,height:e+2}},arrangeCore:function(a,b){if(1==this.foregrounds.length)this.foregrounds[0].arrange(1,1,a-2,b-2),this.backgrounds[0].arrange(1,1,a-2,b-2);else{var c=this.getStyleProperty("spacing");x=1;for(var d=0;d<this.foregrounds.length;d++){var e=this.backgrounds[d],f=this.foregrounds[d],g=f.getMeasureWidth();f.arrange(x+1,1,g,b-2);0===d?e.arrange(x,1,g+c,b-2):d==this.foregrounds.length-
1?e.arrange(x-c,1,g+c,b-2):e.arrange(x-c,1,g+2*c,b-2);x+=g+c+1}}this.border.arrange(0,0,a,b)},onStyleChange:function(){for(var a=this.getStyleProperty("spacing"),b=this.getStyleProperty("radius"),c=0;c<this.backgrounds.length;c++){var d=this.backgrounds[c];"setArrowLength"in d&&d.setArrowLength(a);d.setRadius(b-1)}this.border.setRadius(b);this.updateColors()},onDisable:function(){Ui.Locator.base.onDisable.apply(this,arguments);for(var a=0;a<this.foregrounds.length;a++)this.foregrounds[a].setOpacity(0.4)},
onEnable:function(){Ui.Locator.base.onEnable.apply(this,arguments);for(var a=0;a<this.foregrounds.length;a++)this.foregrounds[a].setOpacity(1)}},{style:{color:new Ui.Color({r:0.31,g:0.66,b:1}),focusColor:"#f6caa2",radius:3,spacing:20}});
Ui.CanvasElement.extend("Ui.LocatorRightArrow",{radius:8,length:10,fill:void 0,constructor:function(a){this.fill=new Ui.Color},setRadius:function(a){this.radius=a;this.invalidateArrange()},setArrowLength:function(a){this.length=a;this.invalidateArrange()},setFill:function(a){this.fill=Ui.Color.create(a);this.invalidateDraw()}},{updateCanvas:function(a){var b=this.getLayoutWidth(),c=this.getLayoutHeight(),d=b-this.length;a.svgPath("M"+this.radius+",0 L"+d+",0 L"+b+","+c/2+" L"+d+","+c+" L"+this.radius+
","+c+" Q0,"+c+" 0,"+(c-this.radius)+" L0,"+this.radius+" Q0,0 "+this.radius+",0 z");a.fillStyle=this.fill.getCssRgba();a.fill()}});
Ui.Shape.extend("Ui.LocatorLeftArrow",{radius:8,length:10,constructor:function(a){},setRadius:function(a){this.radius=a},setArrowLength:function(a){this.length=a;this.invalidateDraw()}},{arrangeCore:function(a,b){Ui.LocatorLeftArrow.base.arrangeCore.call(this,a,b);var c=a-this.radius;this.setPath("M0,0 L"+c+",0 Q"+a+",0 "+a+","+this.radius+" L"+a+","+(b-this.radius)+" Q"+a+","+b+" "+c+","+b+" L0,"+b+" L"+this.length+","+b/2+" z")}});
Ui.Shape.extend("Ui.LocatorLeftRightArrow",{length:10,constructor:function(a){},setRadius:function(a){},setArrowLength:function(a){this.length=a;this.invalidateDraw()}},{arrangeCore:function(a,b){Ui.LocatorLeftRightArrow.base.arrangeCore.call(this,a,b);var c=a-this.length,d=b/2;this.setPath("M0,0 L"+c+",0 L"+a+","+d+" L"+c+","+b+" L0,"+b+" L"+this.length+","+d+" z")}});Ui.CanvasElement.extend("Ui.TextBgGraphic",{textHasFocus:!1,setHasFocus:function(a){this.textHasFocus!==a&&(this.textHasFocus=a,this.invalidateDraw())},getBackground:function(){return this.textHasFocus?Ui.Color.create(this.getStyleProperty("focusBackground")):Ui.Color.create(this.getStyleProperty("background"))}},{updateCanvas:function(a){var b=this.getLayoutWidth(),c=this.getLayoutHeight(),d=this.getStyleProperty("borderWidth"),e=Math.max(8,c-4-16);this.getIsDisabled()&&(a.globalAlpha=0.2);a.fillStyle=
this.getBackground().getCssRgba();a.beginPath();a.moveTo(0,c-e-4);a.lineTo(0,c-4);a.lineTo(b,c-4);a.lineTo(b,c-8-4+d);a.lineTo(b-d,c-8-4+d);a.lineTo(b-d,c-4-d);a.lineTo(d,c-4-d);a.lineTo(d,c-e-4);a.closePath();a.fill()},onDisable:function(){this.invalidateDraw()},onEnable:function(){this.invalidateDraw()},onStyleChange:function(){this.spacing=Math.max(0,this.getStyleProperty("spacing"));this.iconSize=Math.max(0,this.getStyleProperty("iconSize"));this.fontFamily=this.getStyleProperty("fontFamily");
this.fontSize=Math.max(0,this.getStyleProperty("fontSize"));this.fontWeight=this.getStyleProperty("fontWeight");this.invalidateDraw()}},{style:{borderWidth:2,background:"#444444",focusBackground:"#21d3ff"}});Ui.LBox.extend("Ui.TextField",{entry:void 0,graphic:void 0,textholder:void 0,constructor:function(a){this.addEvents("change");this.setPadding(3);this.graphic=new Ui.TextBgGraphic;this.append(this.graphic);this.textholder=new Ui.Label({opacity:0.5,horizontalAlign:"center",margin:3});!navigator.isIE7&&!navigator.isIE8&&this.append(this.textholder);this.entry=new Ui.Entry({margin:4,fontSize:16});this.connect(this.entry,"focus",this.onEntryFocus);this.connect(this.entry,"blur",this.onEntryBlur);this.append(this.entry);
this.connect(this.entry,"change",this.onEntryChange)},setTextHolder:function(a){this.textholder.setText(a)},setPasswordMode:function(a){this.entry.setPasswordMode(a)},getValue:function(){return this.entry.getValue()},setValue:function(a){this.entry.setValue(a);void 0===a||""===a?this.textholder.show():this.textholder.hide()},onEntryFocus:function(){this.textholder.hide();this.graphic.setHasFocus(!0)},onEntryBlur:function(){""===this.getValue()&&this.textholder.show();this.graphic.setHasFocus(!1)},
onEntryChange:function(a,b){this.fireEvent("change",this,b)}},{onStyleChange:function(){}});Ui.Form.extend("Ui.TextButtonField",{entry:void 0,button:void 0,buttonIcon:void 0,buttonText:void 0,constructor:function(a){this.addEvents("change","validate","buttonpress");a=new Ui.HBox;this.setContent(a);this.entry=new Ui.TextField;a.append(this.entry,!0);this.button=new Ui.DefaultButton({orientation:"horizontal"});a.append(this.button);this.connect(this.entry,"change",this.onEntryChange);this.connect(this,"submit",this.onFormSubmit);this.connect(this.button,"press",this.onButtonPress)},setWidthText:function(a){this.entry.setWidth(32*
a/3)},getButtonIcon:function(){return this.buttonIcon},setButtonIcon:function(a){this.button.setIcon(a)},setButtonText:function(a){this.button.setText(a)},getTextValue:function(){return this.entry.getValue()},setTextValue:function(a){this.entry.setValue(a)},getValue:function(){return this.getTextValue()},setValue:function(a){this.setTextValue(a)},onButtonPress:function(){this.fireEvent("buttonpress",this);this.fireEvent("validate",this,this.getValue())},onEntryChange:function(a,b){this.fireEvent("change",
this,b)},onFormSubmit:function(){this.fireEvent("validate",this,this.getValue())}});Ui.LBox.extend("Ui.TextAreaField",{textarea:void 0,graphic:void 0,textholder:void 0,constructor:function(a){this.addEvents("change");this.setPadding(3);this.graphic=new Ui.TextBgGraphic;this.append(this.graphic);this.textholder=new Ui.Label({opacity:0.5,horizontalAlign:"center",margin:3});!navigator.isIE7&&!navigator.isIE8&&this.append(this.textholder);this.textarea=new Ui.TextArea({margin:4,fontSize:16});this.append(this.textarea);this.connect(this.textarea,"focus",this.onTextAreaFocus);this.connect(this.textarea,
"blur",this.onTextAreaBlur);this.connect(this.textarea,"change",this.onTextAreaChange)},setTextHolder:function(a){this.textholder.setText(a)},getValue:function(){return this.textarea.getValue()},setValue:function(a){this.textarea.setValue(a);void 0===a||""===a?this.textholder.show():this.textholder.hide()},onTextAreaFocus:function(){this.textholder.hide();this.graphic.setHasFocus(!0)},onTextAreaBlur:function(){""===this.getValue()&&this.textholder.show();this.graphic.setHasFocus(!1)},onTextAreaChange:function(a,
b){this.fireEvent("change",this,b)}},{onStyleChange:function(){}});Ui.Container.extend("Ui.ListView",{data:void 0,headers:void 0,firstRow:void 0,firstCol:void 0,cols:void 0,rowsHeight:0,headersHeight:0,selectedRow:void 0,headersVisible:!0,mode:"manual",sortColKey:void 0,sortInvert:!1,sortArrow:void 0,constructor:function(a){this.addEvents("select","unselect","activate","header");this.rowContainer=new Ui.Container;this.appendChild(this.rowContainer);void 0!==a.headers?(this.headers=a.headers,delete a.headers):this.headers=[{width:100,type:"string",title:"Title",key:"default"}];
this.data=[];this.cols=[];for(a=0;a<this.headers.length;a++){var b=this.headers[a];b.ui=new Ui.ListViewHeader({title:b.title,width:b.width});this.connect(b.ui,"press",this.onHeaderPress);b.rows=[];b.colWidth=b.width;this.appendChild(b.ui)}this.sortArrow=new Ui.Icon({icon:"sortarrow",width:10,height:10,margin:4});this.appendChild(this.sortArrow);this.firstRow=new Ui.Rectangle({width:1,height:1,fill:"black",opacity:0.3});this.appendChild(this.firstRow);this.firstCol=new Ui.Rectangle({width:1,height:1,
fill:"black",opacity:0.3});this.appendChild(this.firstCol);for(a=0;a<this.headers.length;a++)b=new Ui.ListViewColBar({header:this.headers[a].ui}),this.cols.push(b),this.appendChild(b)},setMode:function(a){if(this.mode!==a){if(DEBUG&&"manual"!==a&&"auto"!==a)throw"Ui.ListView only support mode [auto|manual]";this.mode=a;for(a=0;a<this.cols.length;a++)"manual"===this.mode?this.cols[a].enable():this.cols[a].disable();this.invalidateMeasure()}},showHeaders:function(){if(!this.headersVisible){this.headersVisible=
!0;for(var a=0;a<this.headers.length;a++)this.headers[a].ui.show();this.invalidateMeasure()}},hideHeaders:function(){if(this.headersVisible){this.headersVisible=!1;for(var a=0;a<this.headers.length;a++)this.headers[a].ui.hide();this.invalidateMeasure()}},getSelectedRow:function(){return this.selectedRow},appendData:function(a){this.data.push(a);a.listViewCells={};for(var b=0;b<this.headers.length;b++){var c=this.headers[b].key,d=new Ui.ListViewCellString({key:c});this.connect(d,"down",this.onCellDown);
this.connect(d,"up",this.onCellUp);this.connect(d,"press",this.onCellSelect);this.connect(d,"activate",this.onCellActivate);d.setValue(a[this.headers[b].key]);a.listViewCells[c]=d;this.headers[b].rows.push(d);this.rowContainer.appendChild(d)}this.invalidateMeasure()},updateData:function(a){for(var b=0;b<this.headers.length;b++){var c=this.headers[b].key;a.listViewCells[c].setValue(a[c])}},removeData:function(a){a=this.findDataRow(a);-1!=a&&this.removeDataAt(a)},removeDataAt:function(a){if(a<this.data.length){this.selectedRow===
a&&this.fireEvent("unselect",this,this.selectedRow);this.data.splice(a,1);for(var b=0;b<this.headers.length;b++){var c=this.data[a].listViewCells[this.headers[b].key];this.selectedRow==a&&c.unselect();this.disconnect(c,"down",this.onCellDown);this.disconnect(c,"up",this.onCellUp);this.disconnect(c,"press",this.onCellSelect);this.disconnect(c,"activate",this.onCellActivate);this.rowContainer.removeChild(c);this.headers[b].rows.splice(a,1)}void 0!==this.selectedRow&&(this.selectedRow===a?this.selectedRow=
void 0:a<this.selectedRow&&this.selectedRow--);this.invalidateMeasure()}},clearData:function(){for(;0<this.data.length;)this.removeDataAt(0)},getData:function(){return this.data},setData:function(a){this.clearData();if(void 0!==a)for(var b=0;b<a.length;b++)this.appendData(a[b])},selectRow:function(a){var b;if(0<=a&&a<this.data.length){if(void 0!==this.selectedRow){if(this.selectedRow==a)return;for(b=0;b<this.headers.length;b++)this.data[this.selectedRow].listViewCells[this.headers[b].key].unselect();
this.fireEvent("unselect",this,this.selectedRow)}this.selectedRow=a;for(b=0;b<this.headers.length;b++){var c=this.data[a].listViewCells[this.headers[b].key];this.disconnect(c,"press",this.onCellSelect);c.select();this.connect(c,"press",this.onCellSelect)}this.fireEvent("select",this,this.selectedRow)}},unselectCurrentRow:function(){var a;if(void 0!==this.selectedRow){for(a=0;a<this.headers.length;a++)this.data[this.selectedRow].listViewCells[this.headers[a].key].unselect();this.fireEvent("unselect",
this,this.selectedRow)}this.selectedRow=void 0},sortBy:function(a,b){this.sortColKey=a;(this.sortInvert=!0===b)?this.sortArrow.setTransform(Ui.Matrix.createRotate(180)):this.sortArrow.setTransform();this.data.sort(function(c,d){var e;e=c[a]<d[a]?-1:c[a]>d[a]?1:0;return b?-e:e});this.invalidateArrange()},findDataRow:function(a){for(var b=0;b<this.data.length;b++)if(a==this.data[b])return b;return-1},findCellRow:function(a){for(var b=a.getKey(),c,d=0;d<this.headers.length;d++)if(this.headers[d].key===
b){c=this.headers[d];break}if(void 0===c)return-1;var e;for(c=0;c<this.data.length;c++)if(a===this.data[c].listViewCells[b]){e=c;break}return void 0===e?-1:e},onCellDown:function(a){a=this.findCellRow(a);if(-1!=a)for(var b=0;b<this.headers.length;b++)this.data[a].listViewCells[this.headers[b].key].down()},onCellUp:function(a){a=this.findCellRow(a);if(-1!=a)for(var b=0;b<this.headers.length;b++)this.data[a].listViewCells[this.headers[b].key].up()},onCellSelect:function(a){var b=this.findCellRow(a);
-1!=b&&(a.getIsSelected()?this.selectRow(b):this.unselectCurrentRow())},onCellActivate:function(a){var b=this.findCellRow(a);-1!=b&&this.fireEvent("activate",this,b,a.getKey())},onHeaderPress:function(a){for(var b,c=0;c<this.headers.length;c++){var d=this.headers[c];d.ui===a&&(b=d.key)}void 0!==b&&(this.fireEvent("header",this,b),this.sortBy(b,this.sortColKey===b?!this.sortInvert:!1))}},{measureCoreAuto:function(a,b){var c,d,e,f,g,h;for(c=0;c<this.headers.length;c++)this.headers[c].minWidth=0;var k;
do{k=!0;this.headersHeight=this.rowsHeight=0;do{f=!0;g=0;h=a;for(c=0;c<this.headers.length;c++)e=this.headers[c],d=e.minWidth,c==this.headers.length-1&&(d=Math.max(h,d)),d=this.headersVisible?e.ui.measure(d,this.headersHeight):{width:0,height:0},d.height>g&&(g=d.height),d.width>e.minWidth&&(e.minWidth=d.width,k=!1),h-=e.minWidth;g>this.headersHeight&&(this.headersHeight=g,f=!1)}while(!f);for(var m=0;m<this.data.length;m++){var n=this.data[m];n.rowHeight=0;do{f=!0;g=0;h=a;for(c=0;c<this.headers.length;c++){e=
this.headers[c];var l=n.listViewCells[e.key];d=e.minWidth;c==this.headers.length-1&&(d=Math.max(h,d));d=l.measure(d,n.rowHeight);d.height>g&&(g=d.height);d.width>e.minWidth&&(e.minWidth=d.width,k=!1);h-=e.minWidth}g!=n.rowHeight&&(f=!1,n.rowHeight=g)}while(!f);this.rowsHeight+=n.rowHeight}}while(!k);for(c=e=0;c<this.headers.length;c++)e+=this.headers[c].minWidth;return{width:e,height:this.headersHeight+this.rowsHeight}},measureCoreManual:function(a,b){var c=this.headersHeight=this.rowsHeight=0,d,
e,f;for(d=0;d<this.headers.length;d++)f=this.headers[d],e=f.ui.measure(0,0),e.height>c&&(c=e.height);this.headersVisible&&(this.headersHeight=c);for(var g=0;g<this.data.length;g++){var h=this.data[g];for(d=c=0;d<this.headers.length;d++)f=this.headers[d],e=h.listViewCells[f.key],f=f.ui.getMeasureWidth(),e=e.measure(f,0),e.height>c&&(c=e.height);h.rowHeight=c;this.rowsHeight+=h.rowHeight}for(d=c=0;d<this.headers.length;d++)c+=this.headers[d].ui.getMeasureWidth();this.sortArrow.measure(0,0);e=this.firstRow.measure(a,
0);this.headersHeight=Math.max(this.headersHeight,e.height);this.firstCol.measure(0,this.headersHeight+this.rowsHeight);for(g=0;g<this.cols.length;g++)d=this.cols[g],d.measure(0,this.headersHeight+this.rowsHeight);return{width:c,height:this.headersHeight+this.rowsHeight}},arrangeCoreAuto:function(a,b){var c=0,d=a,e,f,g;for(e=0;e<this.headers.length;e++){g=this.headers[e];var h=this.cols[e];f=g.minWidth;e==this.headers.length-1&&(f=Math.max(f,d));g.ui.arrange(c,0,f,this.headersHeight);h.setHeaderHeight(this.headersHeight);
h.arrange(c+f-h.getMeasureWidth(),0,h.getMeasureWidth(),this.headersHeight+this.rowsHeight);c+=f;d-=f}if(0!==this.data.length){for(var k=h=0;k<this.data.length;k++){var m=this.data[k],c=0,d=a;for(e=0;e<this.headers.length;e++)g=this.headers[e],f=g.minWidth,e==this.headers.length-1&&(f=Math.max(f,d)),m.listViewCells[g.key].arrange(c,h,f,m.rowHeight),c+=f,d-=f;h+=m.rowHeight}this.rowContainer.arrange(0,this.headersHeight,a,b-this.headersHeight)}},arrangeCoreManual:function(a,b){var c=0,d,e,f,g=a;this.firstRow.arrange(0,
this.headersHeight-this.firstRow.getMeasureHeight(),a,this.firstRow.getMeasureHeight());this.firstCol.arrange(0,0,this.firstCol.getMeasureWidth(),this.headersHeight+this.rowsHeight);for(f=0;f<this.headers.length;f++){d=this.headers[f];var h=this.cols[f];e=d.ui.getMeasureWidth();f==this.headers.length-1&&(e=Math.max(e,g));d.ui.arrange(c,0,e,this.headersHeight);h.setHeaderHeight(this.headersHeight);h.arrange(c+e-h.getMeasureWidth(),0,h.getMeasureWidth(),this.headersHeight+this.rowsHeight);this.sortColKey===
d.key&&this.sortArrow.arrange(c+e-0.8*this.headersHeight,0.1*this.headersHeight,0.8*this.headersHeight,0.8*this.headersHeight);c+=e;g-=e}if(0!==this.data.length){for(var k=h=0;k<this.data.length;k++){var m=this.data[k],c=0,g=a;for(f=0;f<this.headers.length;f++)d=this.headers[f],e=d.ui.getMeasureWidth(),f==this.headers.length-1&&(e=Math.max(e,g)),m.listViewCells[d.key].arrange(c,h,e,m.rowHeight),c+=e,g-=e;h+=m.rowHeight}this.rowContainer.arrange(0,this.headersHeight,a,b-this.headersHeight)}},measureCore:function(a,
b){return"auto"===this.mode?this.measureCoreAuto(a,b):this.measureCoreManual(a,b)},arrangeCore:function(a,b){"auto"===this.mode?this.arrangeCoreAuto(a,b):this.arrangeCoreManual(a,b)}});
Ui.Pressable.extend("Ui.ListViewHeader",{title:void 0,uiTitle:void 0,background:void 0,constructor:function(a){this.background=new Ui.Rectangle({verticalAlign:"bottom",height:4});this.append(this.background);this.uiTitle=new Ui.Label({margin:8,fontWeight:"bold"});this.append(this.uiTitle);this.connect(this,"down",this.onListViewHeaderDown);this.connect(this,"up",this.onListViewHeaderUp)},getTitle:function(){return this.title},setTitle:function(a){this.title!==a&&(this.title=a,this.uiTitle.setText(a))},
getColor:function(){return Ui.Color.create(this.getStyleProperty("color"))},getColorDown:function(){var a=Ui.Color.create(this.getStyleProperty("color")).getYuv();return new Ui.Color({y:a.y+0.4,u:a.u,v:a.v})},onListViewHeaderDown:function(){this.background.setFill(this.getColorDown())},onListViewHeaderUp:function(){this.background.setFill(this.getColor())}},{onStyleChange:function(){this.background.setFill(this.getStyleProperty("color"));var a=this.getStyleProperty("spacing");this.uiTitle.setMargin(a+
2)}},{style:{color:"#444444",spacing:5}});
Ui.Pressable.extend("Ui.ListViewCell",{value:void 0,ui:void 0,border:void 0,cellDown:!1,key:void 0,isSelected:!1,constructor:function(a){this.setClipToBounds(!0);this.bg=new Ui.Rectangle;this.append(this.bg);this.border=new Ui.Rectangle({height:1,verticalAlign:"bottom"});this.append(this.border);this.ui=new Ui.Label({margin:8,horizontalAlign:"left"});this.append(this.ui);this.connect(this,"press",this.onCellPress)},getKey:function(){return this.key},setKey:function(a){this.key=a},getValue:function(){return this.value},
setValue:function(a){this.value!==a&&(this.value=a,this.ui.setText(a))},getIsSelected:function(){return this.isSelected},select:function(){this.isSelected=!0;this.onCellSelect()},unselect:function(){this.isSelected=!1;this.onCellUnselect()},down:function(){this.cellDown=!0;this.isSelected||this.bg.setFill(this.getBackgroundDownColor())},up:function(){this.cellDown=!1;this.isSelected||this.bg.setFill(this.getBackgroundColor())},getDarkColor:function(){var a=this.getStyleProperty("color").getYuv();
return new Ui.Color({y:a.y-0.3,u:a.u,v:a.v})},getBackgroundSelectColor:function(){return this.getStyleProperty("selectColor")},getBackgroundColor:function(){return this.getStyleProperty("color")},getBackgroundDownColor:function(){var a=this.getStyleProperty("color").getYuv();return new Ui.Color({y:a.y-0.1,u:a.u,v:a.v})},onCellPress:function(){if(this.isSelected=!this.isSelected)this.onCellSelect();else this.onCellUnselect()},onCellSelect:function(){this.bg.setFill(this.getBackgroundSelectColor())},
onCellUnselect:function(){this.bg.setFill(this.getBackgroundColor())}},{onStyleChange:function(){var a=this.getStyleProperty("color"),b=a.getYuv(),b=new Ui.Color({y:b.y-0.3,u:b.u,v:b.v});this.bg.setFill(a);this.border.setFill(b);a=this.getStyleProperty("spacing");this.ui.setMargin(a+2)}},{style:{color:new Ui.Color({r:0.99,g:0.99,b:0.99,a:0.1}),selectColor:new Ui.Color({r:0.88,g:0.88,b:0.88}),spacing:5}});Ui.ListViewCell.extend("Ui.ListViewCellString");
Ui.Container.extend("Ui.ListViewColBar",{headerHeight:0,header:void 0,grip:void 0,separator:void 0,constructor:function(a){this.grip=new Ui.Movable({moveVertical:!1});this.appendChild(this.grip);this.connect(this.grip,"move",this.onMove);this.connect(this.grip,"up",this.onUp);a=new Ui.LBox;this.grip.setContent(a);a.append(new Ui.Rectangle({width:1,opacity:0.2,fill:"black",marginLeft:14,marginRight:10,marginTop:6,marginBottom:6}));a.append(new Ui.Rectangle({width:1,opacity:0.2,fill:"black",marginLeft:19,
marginRight:5,marginTop:6,marginBottom:6}));this.separator=new Ui.Rectangle({width:1,fill:"black",opacity:0.3});this.appendChild(this.separator)},setHeader:function(a){this.header=a},setHeaderHeight:function(a){this.headerHeight=a},onMove:function(){this.separator.setTransform(Ui.Matrix.createTranslate(this.grip.getPositionX(),0))},onUp:function(){var a=this.grip.getPositionX();this.header.setWidth(Math.max(this.getMeasureWidth(),this.header.getMeasureWidth()+a));this.invalidateArrange()}},{measureCore:function(a,
b){var c=this.grip.measure(a,b);this.separator.measure(a,b);return{width:c.width,height:0}},arrangeCore:function(a,b){this.grip.setPosition(0,0);this.separator.setTransform(Ui.Matrix.createTranslate(0,0));this.grip.arrange(0,0,a,this.headerHeight);this.separator.arrange(a-1,0,1,b)},onDisable:function(){Ui.ListViewColBar.base.onDisable.call(this);this.grip.hide()},onEnable:function(){Ui.ListViewColBar.base.onEnable.call(this);this.grip.show()}});Ui.IFrame.extend("Ui.Program",{arguments:void 0,constructor:function(a){this.connect(window,"message",this.onMessage,!1);if(!("location"in a))throw"location config parameter is NEEDED";var b=a.location;delete a.location;"arguments"in a&&(b+="?base64="+encodeURIComponent(JSON.stringify(a.arguments).toBase64()),delete a.arguments);this.setSrc(b);this.addEvents("message")},sendMessage:function(a){this.getIFrame().contentWindow.postMessage(a.serialize(),"*")},onMessage:function(a){this.getIFrame().contentWindow===
a.source&&(a.preventDefault(),a.stopPropagation(),a=JSON.parse(a.data),this.fireEvent("message",this,a))}});Core.Object.extend("Ui.Transition",{constructor:function(a){},run:function(a,b,c){throw"transition classes MUST override run method";}},{},{transitions:{},register:function(a,b){this.transitions[a]=b},parse:function(a){return new this.transitions[a]}});Ui.Transition.extend("Ui.Fade",{},{run:function(a,b,c){void 0!==a&&(1==c?(a.hide(),a.setOpacity(1)):a.setOpacity(Math.min(1,Math.max(0,1-3*c))));void 0!==b&&b.setOpacity(c)}},{constructor:function(){Ui.Transition.register("fade",this)}});Ui.Transition.extend("Ui.Flip",{orientation:"horizontal",constructor:function(a){},setOrientation:function(a){this.orientation=a}},{run:function(a,b,c){0.5>c?(void 0!==a&&(a.setTransformOrigin(0.5,0.5),"horizontal"==this.orientation?a.setTransform(Ui.Matrix.createScale(1-2*c,1)):a.setTransform(Ui.Matrix.createScale(1,1-2*c))),void 0!==b&&b.hide()):(void 0!==a&&(a.hide(),a.setTransformOrigin(0,0),a.setTransform(void 0)),void 0!==b&&(1==c?(b.show(),b.setTransformOrigin(0,0),b.setTransform(void 0)):
(b.show(),b.setTransformOrigin(0.5,0.5),"horizontal"==this.orientation?b.setTransform(Ui.Matrix.createScale(2*(c-0.5),1)):b.setTransform(Ui.Matrix.createScale(1,2*(c-0.5))))))}},{constructor:function(){Ui.Transition.register("flip",this)}});Ui.Transition.extend("Ui.Slide",{direction:"right",constructor:function(a){},setDirection:function(a){this.direction=a}},{run:function(a,b,c){void 0!==a&&(1===c?(a.hide(),a.setTransformOrigin(0,0),a.setTransform(void 0)):(a.setTransformOrigin(0,0),"right"==this.direction?a.setTransform(Ui.Matrix.createTranslate(-a.getLayoutWidth()*c,0)):"left"==this.direction?a.setTransform(Ui.Matrix.createTranslate(a.getLayoutWidth()*c,0)):"top"==this.direction?a.setTransform(Ui.Matrix.createTranslate(0,a.getLayoutHeight()*
c)):a.setTransform(Ui.Matrix.createTranslate(0,-a.getLayoutHeight()*c))));void 0!==b&&(1===c?(b.setTransformOrigin(0,0),b.setTransform(void 0)):(b.setTransformOrigin(0,0),"right"==this.direction?b.setTransform(Ui.Matrix.createTranslate(b.getLayoutWidth()*(1-c),0)):"left"==this.direction?b.setTransform(Ui.Matrix.createTranslate(-b.getLayoutWidth()*(1-c),0)):"top"==this.direction?b.setTransform(Ui.Matrix.createTranslate(0,-b.getLayoutHeight()*(1-c))):b.setTransform(Ui.Matrix.createTranslate(0,b.getLayoutHeight()*
(1-c)))))}},{constructor:function(){Ui.Transition.register("slide",this)}});Ui.LBox.extend("Ui.TransitionBox",{transition:void 0,duration:0.5,ease:void 0,position:-1,transitionClock:void 0,current:void 0,next:void 0,replaceMode:!1,constructor:function(a){this.addEvents("change");this.connect(this,"load",this.onTransitionBoxLoad);this.connect(this,"unload",this.onTransitionBoxUnload);this.setClipToBounds(!0);this.setTransition("fade")},getPosition:function(){return this.position},setDuration:function(a){this.duration=a},setEase:function(a){this.ease=Anim.EasingFunction.create(a)},
setTransition:function(a){this.transition=Ui.Transition.create(a)},setCurrent:function(a){a=this.getChildPosition(a);-1!=a&&this.setCurrentAt(a)},setCurrentAt:function(a){this.position!=a&&(void 0!==this.next&&void 0!==this.current&&(this.current.hide(),this.current=this.next,this.current.show(),this.next=void 0),void 0!==this.transitionClock&&(this.disconnect(this.transitionClock,"complete",this.onTransitionComplete),this.transitionClock.stop()),this.current=-1!=this.position?this.getChildren()[this.position]:
void 0,this.next=this.getChildren()[a],this.next.show(),navigator.isIE7||navigator.isIE8?(this.position=a,this.transition.run(this.current,this.next,1),this.onTransitionComplete()):(this.transition.run(this.current,this.next,0),this.transitionClock=new Anim.Clock({duration:this.duration,ease:this.ease}),this.connect(this.transitionClock,"timeupdate",this.onTransitionTick),this.connect(this.transitionClock,"complete",this.onTransitionComplete),this.transitionClock.begin(),this.position=a))},getCurrent:function(){return-1==
this.position?void 0:this.getChildren()[this.position].getChildren()[0]},replaceContent:function(a){this.replaceMode=!0;this.append(a);this.setCurrent(a)},onTransitionBoxLoad:function(){},onTransitionBoxUnload:function(){void 0!==this.transitionClock&&(this.transitionClock.stop(),this.transitionClock=void 0)},onTransitionTick:function(a,b){this.progress=b;this.transition.run(this.current,this.next,b)},onTransitionComplete:function(a){this.transitionClock=void 0;var b=this.next;void 0!==this.current&&
this.current.hide();this.next=void 0;if(this.replaceMode){this.replaceMode=!1;var c=[];for(a=0;a<this.getChildren().length;a++){var d=this.getChildren()[a];d!==b&&c.push(d.getFirstChild())}for(a=0;a<c.length;a++)this.remove(c[a])}this.fireEvent("change",this,this.position)}},{arrangeCore:function(a,b){Ui.TransitionBox.base.arrangeCore.call(this,a,b);void 0!==this.transitionClock&&this.transition.run(this.current,this.next,this.transitionClock.getProgress())},append:function(a){var b=new Ui.TransitionBoxContent;
b.append(a);b.hide();Ui.TransitionBox.base.append.call(this,b)},prepend:function(a){-1!==this.position&&this.position++;var b=new Ui.TransitionBoxContent;b.append(a);b.hide();Ui.TransitionBox.base.prepend.call(this,this.position)},remove:function(a){for(var b=0;b<this.getChildren().length;b++)if(this.getChildren()[b].getFirstChild()==a){b<this.position?this.position--:b==this.position&&(this.position=-1);this.getChildren()[b].remove(a);Ui.TransitionBox.base.remove.call(this,this.getChildren()[b]);
break}},getChildPosition:function(a){for(var b=0;b<this.getChildren().length;b++)if(this.getChildren()[b].getChildren()[0]==a)return b;return-1}});Ui.LBox.extend("Ui.TransitionBoxContent",{});Ui.Accordeonable.extend("Ui.Accordeon",{});Ui.Overable.extend("Ui.Carousel",{carouselable:void 0,buttonNext:void 0,buttonNextIcon:void 0,buttonPrevious:void 0,buttonPreviousIcon:void 0,showClock:void 0,hideTimeout:void 0,showNext:!1,showPrevious:!1,constructor:function(a){this.addEvents("change");this.setFocusable(!0);this.connect(this,"enter",this.onMouseEnter);this.connect(this,"leave",this.onMouseLeave);this.connect(this,"move",this.onMouseOverMove);this.carouselable=new Ui.Carouselable;Ui.Carousel.base.append.call(this,this.carouselable);
this.connect(this,"focus",this.onCarouselableFocus);this.connect(this,"blur",this.onCarouselableBlur);this.connect(this.carouselable,"change",this.onCarouselableChange);this.buttonPrevious=new Ui.Pressable({horizontalAlign:"left",verticalAlign:"center",opacity:0});this.buttonPrevious.setFocusable(!1);this.buttonPreviousIcon=new Ui.Icon({icon:"arrowleft",width:48,height:48});this.buttonPrevious.append(this.buttonPreviousIcon);Ui.Carousel.base.append.call(this,this.buttonPrevious);this.connect(this.buttonPrevious,
"press",this.onPreviousPress);this.buttonNext=new Ui.Pressable({horizontalAlign:"right",verticalAlign:"center",opacity:0});this.buttonNext.setFocusable(!1);this.buttonNextIcon=new Ui.Icon({icon:"arrowright",width:48,height:48});this.buttonNext.append(this.buttonNextIcon);Ui.Carousel.base.append.call(this,this.buttonNext);this.connect(this.buttonNext,"press",this.onNextPress);this.connect(this.getDrawing(),"keydown",this.onKeyDown)},setAutoPlay:function(a){this.carouselable.setAutoPlay(a)},next:function(){this.carouselable.next()},
previous:function(){this.carouselable.previous()},getLogicalChildren:function(){return this.carouselable.getLogicalChildren()},getCurrentPosition:function(){return this.carouselable.getCurrentPosition()},getCurrent:function(){return this.carouselable.getCurrent()},setCurrentAt:function(a,b){this.carouselable.setCurrentAt(a,b)},setCurrent:function(a,b){this.carouselable.setCurrent(a,b)},getBufferingSize:function(){return this.carouselable.getBufferingSize()},setBufferingSize:function(a){this.carouselable.setBufferingSize(a)},
onCarouselableChange:function(a,b){this.showArrows();this.fireEvent("change",this,b)},onCarouselableFocus:function(){this.showArrows()},onCarouselableBlur:function(){this.hideArrows()},onPreviousPress:function(){this.focus();this.previous()},onNextPress:function(){this.focus();this.next()},onMouseEnter:function(){this.showArrows()},onMouseOverMove:function(){this.showArrows()},onMouseLeave:function(){this.hideArrows()},showArrows:function(){void 0!==this.hideTimeout&&this.hideTimeout.abort();this.hideTimeout=
new Core.DelayedTask({delay:2,scope:this,callback:this.hideArrows});var a=this.carouselable.getCurrentPosition(),b=this.carouselable.getLogicalChildren();0<b.length?(this.showPrevious=0<a,this.showNext=a<b.length-1):this.showNext=this.showPrevious=!1;void 0===this.showClock&&(this.showClock=new Anim.Clock({duration:"forever",target:this}),this.connect(this.showClock,"timeupdate",this.onShowTick),this.showClock.begin())},hideArrows:function(){void 0!==this.hideTimeout&&(this.hideTimeout.abort(),this.hideTimeout=
void 0);this.showNext=this.showPrevious=!1;void 0===this.showClock&&(this.showClock=new Anim.Clock({duration:"forever",target:this}),this.connect(this.showClock,"timeupdate",this.onShowTick),this.showClock.begin())},onShowTick:function(a,b,c){if(0!==c){b=!1;this.showPrevious?(a=this.buttonPrevious.getOpacity(),a=Math.min(a+c,1),this.buttonPrevious.setOpacity(a),1==a&&(b=!0)):(a=this.buttonPrevious.getOpacity(),a=Math.max(a-2*c,0),this.buttonPrevious.setOpacity(a),0===a&&(b=!0));var d=!1;this.showNext?
(a=this.buttonNext.getOpacity(),a=Math.min(a+c,1),this.buttonNext.setOpacity(a),1==a&&(d=!0)):(a=this.buttonNext.getOpacity(),a=Math.max(a-2*c,0),this.buttonNext.setOpacity(a),0===a&&(d=!0));b&&d&&(this.showClock.stop(),this.showClock=void 0)}},onKeyDown:function(a){this.getHasFocus()&&(39==a.which?this.next():37==a.which&&this.previous())}},{append:function(a){this.carouselable.append(a)},remove:function(a){this.carouselable.remove(a)},insertAt:function(a,b){this.carouselable.insertAt(a,b)},moveAt:function(a,
b){this.carouselable.moveAt(a,b)},setContent:function(a){this.carouselable.setContent(a)},onStyleChange:function(){var a=this.getStyleProperty("focusColor");this.buttonPreviousIcon.setFill(a);this.buttonNextIcon.setFill(a)}},{style:{focusColor:"#21d3ff"}});Ui.Overable.extend("Ui.Carousel3",{carouselable:void 0,buttonNext:void 0,buttonNextIcon:void 0,buttonPrevious:void 0,buttonPreviousIcon:void 0,showClock:void 0,hideTimeout:void 0,showNext:!1,showPrevious:!1,constructor:function(a){this.addEvents("change");this.setFocusable(!0);this.connect(this,"enter",this.onMouseEnter);this.connect(this,"leave",this.onMouseLeave);this.connect(this,"move",this.onMouseOverMove);this.carouselable=new Ui.Carouselable3;this.append(this.carouselable);this.connect(this,
"focus",this.onCarouselableFocus);this.connect(this,"blur",this.onCarouselableBlur);this.connect(this.carouselable,"change",this.onCarouselableChange);this.buttonPrevious=new Ui.Pressable({horizontalAlign:"left",verticalAlign:"center",opacity:0});this.buttonPrevious.setFocusable(!1);this.buttonPreviousIcon=new Ui.Icon({icon:"arrowleft",width:48,height:48});this.buttonPrevious.append(this.buttonPreviousIcon);this.append(this.buttonPrevious);this.connect(this.buttonPrevious,"press",this.onPreviousPress);
this.buttonNext=new Ui.Pressable({horizontalAlign:"right",verticalAlign:"center",opacity:0});this.buttonNext.setFocusable(!1);this.buttonNextIcon=new Ui.Icon({icon:"arrowright",width:48,height:48});this.buttonNext.append(this.buttonNextIcon);this.append(this.buttonNext);this.connect(this.buttonNext,"press",this.onNextPress);this.connect(this.getDrawing(),"keydown",this.onKeyDown)},setLoader:function(a){this.carouselable.setLoader(a)},getLoader:function(){return this.carouselable.getLoader()},setAutoPlay:function(a){this.carouselable.setAutoPlay(a)},
next:function(){this.carouselable.next()},previous:function(){this.carouselable.previous()},getLogicalChildren:function(){return this.carouselable.getLogicalChildren()},getCurrentPosition:function(){return this.carouselable.getCurrentPosition()},getCurrent:function(){return this.carouselable.getCurrent()},setCurrentAt:function(a,b){this.carouselable.setCurrentAt(a,b)},setCurrent:function(a,b){this.carouselable.setCurrent(a,b)},getBufferingSize:function(){return this.carouselable.getBufferingSize()},
setBufferingSize:function(a){this.carouselable.setBufferingSize(a)},getIsDown:function(){return this.carouselable.getIsDown()},onCarouselableChange:function(a,b,c){this.showArrows();this.fireEvent("change",this,b,c)},onCarouselableFocus:function(){this.showArrows()},onCarouselableBlur:function(){this.hideArrows()},onPreviousPress:function(){this.focus();this.previous("user")},onNextPress:function(){this.focus();this.next("user")},onMouseEnter:function(){this.showArrows()},onMouseOverMove:function(){this.showArrows()},
onMouseLeave:function(){this.hideArrows()},showArrows:function(){void 0!==this.hideTimeout&&this.hideTimeout.abort();this.hideTimeout=new Core.DelayedTask({delay:2,scope:this,callback:this.hideArrows});var a=this.carouselable.getCurrentPosition();this.showPrevious=a>this.getLoader().getMin();this.showNext=a<this.getLoader().getMax();void 0===this.showClock&&(this.showClock=new Anim.Clock({duration:"forever",target:this}),this.connect(this.showClock,"timeupdate",this.onShowTick),this.showClock.begin())},
hideArrows:function(){void 0!==this.hideTimeout&&(this.hideTimeout.abort(),this.hideTimeout=void 0);this.showNext=this.showPrevious=!1;void 0===this.showClock&&(this.showClock=new Anim.Clock({duration:"forever",target:this}),this.connect(this.showClock,"timeupdate",this.onShowTick),this.showClock.begin())},onShowTick:function(a,b,c){if(0!==c){b=!1;this.showPrevious?(a=this.buttonPrevious.getOpacity(),a=Math.min(a+c,1),this.buttonPrevious.setOpacity(a),1==a&&(b=!0)):(a=this.buttonPrevious.getOpacity(),
a=Math.max(a-2*c,0),this.buttonPrevious.setOpacity(a),0===a&&(b=!0));var d=!1;this.showNext?(a=this.buttonNext.getOpacity(),a=Math.min(a+c,1),this.buttonNext.setOpacity(a),1==a&&(d=!0)):(a=this.buttonNext.getOpacity(),a=Math.max(a-2*c,0),this.buttonNext.setOpacity(a),0===a&&(d=!0));b&&d&&(this.showClock.stop(),this.showClock=void 0)}},onKeyDown:function(a){this.getHasFocus()&&(39==a.which?this.next():37==a.which&&this.previous())}},{onStyleChange:function(){var a=this.getStyleProperty("focusColor");
this.buttonPreviousIcon.setFill(a);this.buttonNextIcon.setFill(a)}},{style:{focusColor:"#21d3ff"}});Ui.Container.extend("Ui.Switch",{value:!1,pos:0,background:void 0,button:void 0,alignClock:void 0,speed:0,animNext:0,animStart:0,ease:void 0,constructor:function(a){this.addEvents("change");this.background=new Ui.Rectangle({width:4,height:4});this.appendChild(this.background);this.bar=new Ui.Rectangle({width:4,height:4});this.appendChild(this.bar);this.button=new Ui.Movable({moveVertical:!1});this.appendChild(this.button);this.connect(this.button,"move",this.onButtonMove);this.connect(this.button,
"focus",this.updateColors);this.connect(this.button,"blur",this.updateColors);this.connect(this.button,"down",this.onDown);this.connect(this.button,"up",this.onUp);this.buttonContent=new Ui.Rectangle({radius:10,width:20,height:20,margin:10});this.button.setContent(this.buttonContent);this.ease=new Anim.PowerEase({mode:"out"})},setEase:function(a){this.ease=Anim.EasingFunction.create(a)},getValue:function(){return this.value},setValue:function(a){a=!0===a;this.value!==a&&(this.value=a,this.getIsLoaded()?
this.value?this.startAnimation(2):this.startAnimation(-2):this.pos=this.value?1:0)},onButtonMove:function(a){a=this.button.getPositionX();var b=this.getLayoutWidth()-this.button.getLayoutWidth();0>a?a=0:a>b&&(a=b);this.pos=a/b;this.disconnect(this.button,"move",this.onButtonMove);this.updatePos();this.connect(this.button,"move",this.onButtonMove)},updatePos:function(){var a;a=this.getLayoutWidth();var b=this.getLayoutHeight();a-=this.button.getLayoutWidth();this.button.setPosition(a*this.pos,0);this.bar.arrange(this.button.getLayoutWidth()/
2,(b-this.bar.getMeasureHeight())/2,a*this.pos,this.bar.getMeasureHeight())},getColor:function(){var a=Ui.Color.create(this.getStyleProperty("background")).getYuv();return new Ui.Color({y:a.y,u:a.u,v:a.v})},getForeground:function(){return Ui.Color.create(this.getStyleProperty("foreground"))},getBackground:function(){var a=Ui.Color.create(this.getStyleProperty("background")).getYuv(),b=0;this.button.getIsDown()&&(b=-0.3);return new Ui.Color({y:a.y+b,u:a.u,v:a.v})},getButtonColor:function(){var a=Ui.Color.create(this.getStyleProperty("background")).getYuv(),
b=0;this.button.getIsDown()?b=-0.3:this.button.getHasFocus()&&(b=0.1);return new Ui.Color({y:a.y+b,u:a.u,v:a.v})},updateColors:function(){this.bar.setFill(this.getForeground());this.background.setFill(this.getBackground());this.buttonContent.setFill(this.getForeground())},onDown:function(a){this.stopAnimation();this.updateColors()},onUp:function(a,b,c,d,e,f,g){!g&&10>f?this.setValue(!this.value):(b=0.5<this.pos?1:-1,this.startAnimation(b));this.updateColors()},startAnimation:function(a){this.stopAnimation();
this.speed=a;this.animStart=this.pos;this.animNext=0<this.speed?1:0;this.animStart!==this.animNext?(this.alignClock=new Anim.Clock({duration:"forever",target:this}),this.connect(this.alignClock,"timeupdate",this.onAlignTick),this.alignClock.begin()):this.value!==(1===this.animNext)&&(this.value=1===this.animNext,this.fireEvent("change",this,this.value))},stopAnimation:function(){void 0!==this.alignClock&&(this.alignClock.stop(),this.alignClock=void 0)},onAlignTick:function(a,b,c){0!==c&&(a=a.getTime()*
this.speed/(this.animNext-this.animStart),1<=a&&(this.alignClock.stop(),this.alignClock=void 0,a=1,this.value=1===this.animNext,this.fireEvent("change",this,this.value)),a=this.ease.ease(a),this.pos=this.animStart+a*(this.animNext-this.animStart),this.updatePos())}},{measureCore:function(a,b){var c=this.button.measure(0,0),d;d=this.background.measure(2*c.width,0);d.width>c.width&&(c.width=d.width);d.height>c.height&&(c.height=d.height);d=this.bar.measure(2*c.width,0);d.width>c.width&&(c.width=d.width);
d.height>c.height&&(c.height=d.height);2*c.width>c.width&&(c.width*=2);return c},arrangeCore:function(a,b){this.button.arrange(0,(b-this.button.getMeasureHeight())/2,this.button.getMeasureWidth(),this.button.getMeasureHeight());this.background.arrange(this.button.getLayoutWidth()/2,(b-this.background.getMeasureHeight())/2,a-this.button.getLayoutWidth(),this.background.getMeasureHeight());this.updatePos()},onStyleChange:function(){this.background.setRadius(this.getStyleProperty("radius"));this.bar.setRadius(this.getStyleProperty("radius"));
this.getStyleProperty("borderWidth");this.updateColors()},onDisable:function(){Ui.Slider.base.onDisable.call(this);this.button.setOpacity(0.2)},onEnable:function(){Ui.Slider.base.onEnable.call(this);this.button.setOpacity(1)}},{style:{radius:0,borderWidth:1,background:"#e1e1e1",backgroundBorder:"#919191",foreground:"#00b1b1"}});Ui.VBox.extend("Ui.MonthCalendar",{selectedDate:void 0,date:void 0,title:void 0,leftarrow:void 0,rightarrow:void 0,grid:void 0,dayFilter:void 0,dateFilter:void 0,constructor:function(a){this.addEvents("dayselect");"date"in a?(this.date=new Date(a.date.getTime()),delete a.date):this.date=new Date;"selectedDate"in a&&(this.selectedDate=a.selectedDate,delete a.selectedDate);a=new Ui.HBox;this.append(a);var b=new Ui.Pressable({verticalAlign:"center"});this.leftarrow=new Ui.Icon({icon:"arrowleft",width:24,
height:24});b.append(this.leftarrow);a.append(b);this.connect(b,"press",this.onLeftButtonPress);this.title=new Ui.Label({fontWeight:"bold",fontSize:18,margin:5});a.append(this.title,!0);b=new Ui.Pressable({verticalAlign:"center"});this.rightarrow=new Ui.Icon({icon:"arrowright",width:24,height:24});b.append(this.rightarrow);a.append(b);this.connect(b,"press",this.onRightButtonPress);this.grid=new Ui.Grid({cols:"auto,auto,auto,auto,auto,auto,auto",rows:"auto,auto,auto,auto,auto,auto,auto",horizontalAlign:"center"});
this.append(this.grid);this.updateDate()},setDayFilter:function(a){this.dayFilter=a;this.updateDate()},setDateFilter:function(a){this.dateFilter=a;this.updateDate()},onLeftButtonPress:function(){this.date.setMonth(this.date.getMonth()-1);this.updateDate()},onRightButtonPress:function(){this.date.setMonth(this.date.getMonth()+1);this.updateDate()},getSelectedDate:function(){return this.selectedDate},onDaySelect:function(a){this.selectedDate=a.monthCalendarDate;this.updateDate();this.fireEvent("dayselect",
this,this.selectedDate)},updateDate:function(){var a,b=[6,0,1,2,3,4,5],c="Lu Ma Me Je Ve Sa Di".split(" ");for(this.title.setText("Janvier F\u00e9vrier Mars Avril Mai Juin Juillet Ao\u00fbt Septembre Octobre Novembre D\u00e9cembre".split(" ")[this.date.getMonth()]+" "+this.date.getFullYear());void 0!==this.grid.getFirstChild();)this.grid.detach(this.grid.getFirstChild());for(a=0;7>a;a++)this.grid.attach(new Ui.Label({text:c[a],fontWeight:"bold",margin:5}),a,0);var c=this.date.getMonth(),d=new Date(this.date.getTime());
d.setDate(1);var e=1,f=new Date;do{var g=new Ui.Pressable;g.monthCalendarDate=d;this.connect(g,"press",this.onDaySelect);d.getFullYear()==f.getFullYear()&&d.getMonth()==f.getMonth()&&d.getDate()==f.getDate()?(g.monthCalendarCurrent=!0,a=new Ui.Rectangle({fill:new Ui.Color({r:0.2,g:0.4,b:1,a:0.4}),margin:1})):a=new Ui.Rectangle({fill:new Ui.Color({r:0.8,g:0.8,b:0.8,a:0.4}),margin:1});g.append(a);void 0!==this.selectedDate&&(d.getFullYear()===this.selectedDate.getFullYear()&&d.getMonth()===this.selectedDate.getMonth()&&
d.getDate()===this.selectedDate.getDate())&&g.append(new Ui.Frame({frameWidth:3,fill:"red",radius:0}));var h=!1;if(void 0!==this.dayFilter){var k=d.getDay();for(a=0;a<this.dayFilter.length&&!h;a++)k==this.dayFilter[a]&&(h=!0)}if(void 0!==this.dateFilter){k=d.getFullYear()+"/";10>d.getMonth()+1&&(k+="0");k+=d.getMonth()+1+"/";10>d.getDate()&&(k+="0");k+=d.getDate();for(a=0;a<this.dateFilter.length&&!h;a++)RegExp(this.dateFilter[a]).test(k)&&(h=!0)}h&&(g.disable(),g.setOpacity(0.2));g.append(new Ui.Label({text:d.getDate(),
margin:5}));this.grid.attach(g,b[d.getDay()],e);d=new Date(d.getTime()+864E5);0===b[d.getDay()]&&e++}while(c==d.getMonth());this.onStyleChange()}},{onStyleChange:function(){var a=this.getStyleProperty("color"),b=this.getStyleProperty("dayColor"),c=this.getStyleProperty("currentDayColor");this.title.setColor(a);this.leftarrow.setFill(a);this.rightarrow.setFill(a);for(var d=0;d<this.grid.getChildren().length;d++){var e=this.grid.getChildren()[d];if(Ui.Label.hasInstance(e))e.setColor(a);else if(Ui.Pressable.hasInstance(e))for(var f=
0;f<e.getChildren().length;f++){var g=e.getChildren()[f];Ui.Label.hasInstance(g)?g.setColor(a):Ui.Rectangle.hasInstance(g)&&(e.monthCalendarCurrent?g.setFill(c):g.setFill(b))}}}},{style:{color:"black",dayColor:new Ui.Color({r:0.81,g:0.81,b:0.81,a:0.5}),currentDayColor:new Ui.Color({r:1,g:0.31,b:0.66,a:0.5})}});Ui.TextButtonField.extend("Ui.DatePicker",{popup:void 0,calendar:void 0,selectedDate:void 0,lastValid:"",isValid:!1,dayFilter:void 0,dateFilter:void 0,constructor:function(a){this.setButtonIcon("calendar");this.setWidthText(9);this.connect(this,"buttonpress",this.onDatePickerButtonPress);this.connect(this,"change",this.onDatePickerChange)},setDayFilter:function(a){this.dayFilter=a},setDateFilter:function(a){this.dateFilter=a},getIsValid:function(){return this.isValid},getSelectedDate:function(){return this.selectedDate},
setSelectedDate:function(a){if(void 0===a)this.selectedDate=void 0;else{if("string"===typeof a)throw"STOP HERE";this.lastValid=(10>a.getDate()?"0":"")+a.getDate()+"/"+(9>a.getMonth()?"0":"")+(a.getMonth()+1)+"/"+a.getFullYear();this.selectedDate=a;this.setTextValue(this.lastValid)}this.isValid=!0;this.fireEvent("change",this,this.getValue())},onDatePickerButtonPress:function(){var a=this.getTextValue().match(/^(\d{1,2})\/(\d{1,2})\/(\d{1,4})$/);null!==a&&(this.selectedDate=new Date,this.selectedDate.setFullYear(parseInt(a[3]),
parseInt(a[2])-1,parseInt(a[1])));this.popup=new Ui.Popup;this.calendar=void 0!==this.selectedDate?new Ui.MonthCalendar({horizontalAlign:"center",margin:10,selectedDate:this.selectedDate,date:this.selectedDate}):new Ui.MonthCalendar({horizontalAlign:"center",margin:10});void 0!==this.dayFilter&&this.calendar.setDayFilter(this.dayFilter);void 0!==this.dateFilter&&this.calendar.setDateFilter(this.dateFilter);this.popup.setContent(this.calendar);this.connect(this.calendar,"dayselect",this.onDaySelect);
this.popup.show(this)},onDatePickerChange:function(){this.isValid=!1;this.selectedDate=void 0;var a=this.getTextValue();if(a.match(/^(\d{1,2})\/(\d{1,2})\/(\d{1,4})$/)){var a=this.getTextValue().match(/^(\d{1,2})\/(\d{1,2})\/(\d{1,4})$/),b=new Date;b.setFullYear(parseInt(a[3]),parseInt(a[2])-1,parseInt(a[1]));var c=(10>b.getDate()?"0":"")+b.getDate()+"/"+(9>b.getMonth()?"0":"")+(b.getMonth()+1)+"/"+b.getFullYear();if(parseInt(a[3])!=b.getFullYear()||parseInt(a[2])-1!=b.getMonth()||parseInt(a[1])!=
b.getDate())this.lastValid=c,this.setTextValue(this.lastValid);this.selectedDate=b;this.isValid=!0}else a.match(/^(\d{1,2})\/(\d{1,2})\/(\d{0,4})$/)?this.lastValid=a:a.match(/^(\d{1,2})\/(\d{0,2})$/)?this.lastValid=a:a.match(/^(\d{0,2})$/)?this.lastValid=a:this.setTextValue(this.lastValid)},onDaySelect:function(a,b){this.setSelectedDate(b);this.popup.hide();this.popup=void 0}},{getValue:function(){return this.selectedDate},setValue:function(a){this.setSelectedDate(a)}});Ui.Container.extend("Ui.Notebook",{current:-1,currentPage:void 0,pages:void 0,headerHeight:0,hiddenColor:void 0,currentColor:void 0,constructor:function(a){this.addEvents("change");this.setFocusable(!0);this.connect(this,"focus",this.updateColors);this.connect(this,"blur",this.updateColors);this.connect(this.getDrawing(),"keydown",this.onKeyDown);this.pages=[]},setContent:function(a){for(;0<this.getPages().length;)this.removePage(this.getPages()[0]);if(void 0!==a&&"object"===typeof a)if(a.constructor===
Array)for(var b=0;b<a.length;b++)this.appendPage(a[b]);else this.appendPage(a)},setCurrentPage:function(a){for(var b=0;b<this.pages.length;b++)if(this.pages[b]==a){this.setCurrentPosition(b);break}},getCurrentPosition:function(){return this.current},setCurrentPosition:function(a){0===this.pages.length?(void 0!==this.currentPage&&this.currentPage.unselect(),this.currentPage=void 0,this.current=-1):(this.current=a,a=this.pages[this.current],a!==this.currentPage&&(void 0!==this.currentPage&&this.currentPage.unselect(),
this.currentPage=a,this.fireEvent("change",this,this.currentPage,this.current),this.disconnect(this.currentPage,"select",this.onPageSelect),this.currentPage.select(),this.connect(this.currentPage,"select",this.onPageSelect)));this.invalidateArrange()},appendPage:function(a){a=Ui.NotebookPage.create(a);this.pages.push(a);this.prependChild(a.getBackground());this.appendChild(a.getHeaderBox());this.appendChild(a.getContentBox());this.connect(a,"select",this.onPageSelect);this.connect(a,"close",this.onPageClose);
1==this.pages.length&&a.select()},removePage:function(a){for(var b=0;b<this.pages.length&&this.pages[b]!=a;)b++;b<this.pages.length&&(this.pages.splice(b,1),this.removeChild(a.getBackground()),this.removeChild(a.getHeaderBox()),this.removeChild(a.getContentBox()),this.disconnect(a,"select",this.onPageSelect),this.disconnect(a,"close",this.onPageClose),this.current===b&&0===this.current?this.setCurrentPosition(0):this.current>=b?this.setCurrentPosition(this.current-1):this.setCurrentPosition(this.current))},
getPages:function(){return this.pages},getCurrentPage:function(){return this.currentPage},next:function(){0<=this.current&&this.current+1<this.pages.length&&this.setCurrentPosition(this.current+1)},previous:function(){1<=this.current&&this.setCurrentPosition(this.current-1)},onKeyDown:function(a){if(!this.getIsDisabled()){var b=a.which;if(37==b||39==b)a.stopPropagation(),a.preventDefault();37==b?this.previous():39==b&&this.next()}},onPageSelect:function(a){this.setCurrentPage(a);this.focus()},onPageClose:function(a){this.removePage(a)},
getCurrentColor:function(){var a=this.getStyleProperty("color");this.getHasFocus()&&(a=this.getStyleProperty("focusColor"));return a},updateColors:function(){void 0!==this.currentPage&&this.currentPage.getBackground().setFill(this.getCurrentColor())}},{measureCore:function(a,b){var c,d,e=0,f=0;for(c=0;c<this.pages.length;c++)d=this.pages[c],d.getBackground().measure(a,b),d=d.getHeaderBox().measure(0,0),e+=d.width+20,d.height>f&&(f=d.height);var f=f+20,g=Math.max(e,a-20),h=Math.max(b-(f+20),0),k=0,
m=0;for(c=0;c<this.pages.length;c++)d=this.pages[c],d=d.getContentBox().measure(g,h),d.width>k&&(k=d.width),d.height>m&&(m=d.height);m+=20;this.headerHeight=f;return{width:Math.max(k+20,e),height:m+f}},arrangeCore:function(a,b){for(var c=0,d=0;d<this.pages.length;d++){var e=this.pages[d],f=e.getHeaderBox().getMeasureWidth();e.getHeaderBox().arrange(c+10,10,f,this.headerHeight-20);this.current==d?(e.getContentBox().show(),e.getContentBox().arrange(10,this.headerHeight+10,a-20,b-(this.headerHeight+
20)),void 0!==this.currentColor&&e.getBackground().setFill(this.getCurrentColor())):(this.moveChildAt(e.getBackground(),0),e.getContentBox().hide(),void 0!==this.hiddenColor&&e.getBackground().setFill(this.hiddenColor));e.getBackground().setTab(c,f+20,this.headerHeight);e.getBackground().arrange(0,0,a,b);c+=f+20}},onStyleChange:function(){this.currentColor=Ui.Color.create(this.getStyleProperty("color"));var a=this.currentColor.getYuva();this.hiddenColor=new Ui.Color({y:a.y-0.08,u:a.u,v:a.v});for(a=
0;a<this.pages.length;a++)a==this.current?this.pages[a].getBackground().setFill(this.currentColor):this.pages[a].getBackground().setFill(this.hiddenColor)}},{style:{color:"#f8f8f8",focusColor:"#f8ead2"}});
Core.Object.extend("Ui.NotebookPage",{headerBox:void 0,header:void 0,contentBox:void 0,content:void 0,background:void 0,isSelected:!1,constructor:function(a){this.addEvents("select","unselect","close");this.headerBox=new Ui.Pressable;this.headerBox.setFocusable(!1);this.connect(this.headerBox,"press",this.onHeaderPress);this.contentBox=new Ui.LBox;this.contentBox.hide();this.background=new Ui.NotebookBackground},close:function(){this.fireEvent("close",this)},select:function(){this.isSelected||(this.isSelected=
!0,this.contentBox.show(),this.fireEvent("select",this))},getIsSelected:function(){return this.isSelected},getHeader:function(){return this.header},setHeader:function(a){a!==this.header&&(void 0!==this.header&&this.headerBox.removeChild(this.header),this.header=a,void 0!==this.header&&this.headerBox.appendChild(this.header))},getContent:function(){return this.content},setContent:function(a){a!==this.content&&(void 0!==this.content&&this.contentBox.removeChild(this.content),this.content=a,void 0!==
this.content&&this.contentBox.appendChild(this.content))},unselect:function(){this.isSelected&&(this.isSelected=!1,this.fireEvent("unselect",this),this.contentBox.hide())},getHeaderBox:function(){return this.headerBox},getContentBox:function(){return this.contentBox},getBackground:function(){return this.background},onHeaderPress:function(){this.select()}});
Ui.CanvasElement.extend("Ui.NotebookBackground",{darkShadow:void 0,lightShadow:void 0,background:void 0,radius:0,fill:"black",tabOffset:30,tabWidth:10,tabHeight:10,constructor:function(a){},setTab:function(a,b,c){this.tabOffset=a;this.tabWidth=b;this.tabHeight=c;this.invalidateArrange()},setRadius:function(a){this.radius!=a&&(this.radius=a,this.invalidateArrange())},setFill:function(a){this.fill!=a&&(this.fill=Ui.Color.create(a),this.invalidateDraw())},genPath:function(a,b,c,d,e,f){a="M"+d+","+f+
" L"+d+","+c+" Q"+d+",0 "+(d+c)+",0 L"+(d+e-c)+",0 Q"+(d+e)+",0 "+(d+e)+","+c+" L"+(d+e)+","+f+" L"+(a-c)+","+f+" Q"+a+","+f+" "+a+","+(f+c)+" L"+a+","+(b-c)+" Q"+a+","+b+" "+(a-c)+","+b+" L"+c+","+b+" Q0,"+b+" 0,"+(b-c);return 0===d?a+" z":a+(" L0,"+(f+c)+" Q0,"+f+" "+c+","+f+" z")}},{updateCanvas:function(a){var b=this.getLayoutWidth(),c=this.getLayoutHeight();a.fillStyle="#cccccc";a.svgPath(this.genPath(b,c,this.radius,this.tabOffset,this.tabWidth,this.tabHeight));a.fill();a.translate(1,1);a.fillStyle=
this.fill.getCssRgba();a.svgPath(this.genPath(b-2,c-2,this.radius,this.tabOffset,this.tabWidth-2,this.tabHeight));a.fill()}});Ui.ToolBar.extend("Ui.MenuBar",{});
Ui.Pressable.extend("Ui.Menu",{headerLabel:void 0,header:void 0,dialog:void 0,scope:void 0,constructor:function(a){this.addEvents("item");a=new Ui.VBox;this.append(a);this.headerLabel=new Ui.Label({margin:5,marginBottom:0,horizontalAlign:"left"});a.append(this.headerLabel);a.append(new Ui.Rectangle({height:1,width:1,fill:"#aaaaaa",marginLeft:5,marginRight:5}));this.dialog=new Ui.MenuDialog({element:this.headerLabel});this.connect(this.dialog,"item",this.onItemPress);this.connect(this,"press",this.onTitlePress)},
setHeader:function(a){this.header!=a&&(this.header=a,this.headerLabel.setText(a))},appendItem:function(a,b,c){"string"==typeof a&&(a=new Ui.Label({horizontalAlign:"left",text:a}));var d=this;a=this.dialog.appendItem(a);void 0!==b&&(void 0===c&&(c=void 0===this.scope?this:this.scope),c.connect(a,"press",function(a){b.call(this,d,a.getChildren()[0])}))},setScope:function(a){this.scope=a},setItems:function(a){this.dialog.clearItems();for(var b=0;b<a.length;b++)this.appendItem(a[b].item,a[b].callback,
a[b].scope)},appendSeparator:function(){this.dialog.appendSeparator()},getIsOpen:function(){return this.dialog.getIsVisible()},open:function(){this.dialog.show()},close:function(){this.dialog.hide()},onItemPress:function(a,b){this.fireEvent("item",this,b)},onTitlePress:function(){this.open()}});
Ui.Popup.extend("Ui.MenuDialog",{element:void 0,content:void 0,constructor:function(a){this.addEvents("item");if("element"in a)this.element=a.element,delete a.element;else throw"element property is NEEDED for Ui.MenuDialog";this.setAutoHide(!0);this.content=new Ui.VBox;this.setContent(this.content);this.connect(this.getDrawing(),"keydown",this.onKeyDown)},clearItems:function(){for(;void 0!==this.content.getFirstChild();)this.content.remove(this.content.getFirstChild())},appendItem:function(a){var b=
new Ui.MenuItem;b.setContent(a);this.connect(b,"press",this.onItemPress);this.content.append(b);return b},appendSeparator:function(){this.content.append(new Ui.Separator)},onItemPress:function(a){a=a.getContent();this.fireEvent("item",this,a);this.hide()},onKeyDown:function(a){var b;b=a.which;if(27==b)a.preventDefault(),a.stopPropagation(),this.hide();else if(40==b)for(b=0;b<this.content.getChildren().length;b++){if(Ui.MenuItem.hasInstance(this.content.getChildren()[b])&&this.content.getChildren()[b].getIsCurrent())for(b+=
1;b<this.content.getChildren().length;b++)if(Ui.MenuItem.hasInstance(this.content.getChildren()[b])){a.preventDefault();a.stopPropagation();this.content.getChildren()[b].setCurrent();break}}else if(38==b){var c;for(b=0;b<this.content.getChildren().length;b++)if(Ui.MenuItem.hasInstance(this.content.getChildren()[b])){if(this.content.getChildren()[b].getIsCurrent()){void 0!==c&&(a.preventDefault(),a.stopPropagation(),c.setCurrent());break}c=this.content.getChildren()[b]}}}},{show:function(){this.getIsVisible();
Ui.MenuDialog.base.show.call(this,this.element,"bottom")}});
Ui.Overable.extend("Ui.MenuItem",{background:void 0,pressable:void 0,constructor:function(){this.addEvents("press");this.background=new Ui.Rectangle({fill:"#cecece",opacity:0});this.append(this.background);this.pressable=new Ui.Pressable({padding:10});this.append(this.pressable);this.connect(this.pressable,"press",this.onItemPress);this.connect(this,"enter",this.onEnter);this.connect(this,"leave",this.onLeave);this.connect(this.pressable,"down",this.onDown);this.connect(this.pressable,"up",this.onUp);
this.connect(this.pressable,"focus",this.onItemFocus);this.connect(this.pressable,"blur",this.onItemBlur)},getIsCurrent:function(){return this.pressable.getHasFocus()},setCurrent:function(){this.pressable.focus()},getContent:function(){return this.pressable.getChildren()[0]},onEnter:function(){this.pressable.focus()},onLeave:function(){},onDown:function(){this.background.setOpacity(1)},onUp:function(){this.background.setOpacity(0)},onItemFocus:function(){this.background.setOpacity(0.6)},onItemBlur:function(){this.background.setOpacity(0)},
onItemPress:function(){this.fireEvent("press",this)}},{setContent:function(a){this.pressable.append(a)}});Ui.LBox.extend("Ui.SegmentBar",{border:void 0,box:void 0,current:void 0,field:"text",data:void 0,orientation:"horizontal",constructor:function(a){this.setFocusable(!0);this.addEvents("change");this.border=new Ui.Frame;this.append(this.border);this.box=new Ui.Box({uniform:!0,margin:1,spacing:1,orientation:this.orientation});this.append(this.box);this.connect(this,"focus",this.onStyleChange);this.connect(this,"blur",this.onStyleChange);this.connect(this.getDrawing(),"keydown",this.onKeyDown)},setOrientation:function(a){this.orientation=
a;this.box.setOrientation(a)},setField:function(a){this.field=a},setData:function(a){for(;void 0!==this.box.getFirstChild();)this.disconnect(this.box.getFirstChild(),"toggle",this.onSegmentSelect),this.box.remove(this.box.getFirstChild());this.data=a;for(var b=0;b<a.length;b++){var c=new Ui.SegmentButton({data:a[b],text:a[b][this.field],mode:"horizontal"===this.orientation?0===b?"left":b===a.length-1?"right":"middle":0===b?"top":b===a.length-1?"bottom":"middle"});this.box.append(c,!0);this.connect(c,
"press",this.onSegmentSelect)}},setCurrentPosition:function(a){0<=a&&a<this.box.getChildren().length&&(this.current=this.box.getChildren()[a],this.onSegmentSelect(this.current))},getCurrentPosition:function(){for(var a=0;a<this.box.getChildren().length;a++)if(this.box.getChildren()[a]===this.current)return a},next:function(){for(var a=0;a<this.box.getChildren().length;a++)if(this.box.getChildren()[a]===this.current){this.setCurrentPosition(a+1);break}},previous:function(){for(var a=0;a<this.box.getChildren().length;a++)if(this.box.getChildren()[a]===
this.current){this.setCurrentPosition(a-1);break}},onSegmentSelect:function(a){this.current=a;this.onStyleChange();this.fireEvent("change",this,a.getData())},onKeyDown:function(a){if(!this.getIsDisabled()){var b=a.which;if(37==b||39==b)a.stopPropagation(),a.preventDefault();37==b?this.previous():39==b&&this.next()}}},{onStyleChange:function(){var a=this.getStyleProperty("spacing"),b=this.getStyleProperty("radius"),c=this.getStyleProperty("borderWidth");this.border.setRadius(b);this.border.setFrameWidth(c);
var d=this.getStyleProperty("background"),e=this.getStyleProperty("backgroundBorder"),f=this.getStyleProperty("foreground");this.getHasFocus()&&!this.getIsMouseFocus()&&(d=this.getStyleProperty("focusBackground"),e=this.getStyleProperty("focusBackgroundBorder"),f=this.getStyleProperty("focusForeground"));var g=this.getStyleProperty("activeBackground"),h=this.getStyleProperty("activeForeground");this.border.setFill(e);for(e=0;e<this.box.getChildren().length;e++){var k=this.box.getChildren()[e];k.setRadius(b-
c);k.setSpacing(a);this.current===k?(k.setBackground(g),k.setForeground(h)):(k.setBackground(d),k.setForeground(f))}}},{style:{borderWidth:1,background:"rgba(240,240,240,1)",backgroundBorder:"rgba(102,102,102,1)",foreground:"#444444",focusBackground:"rgba(240,240,240,1)",focusBackgroundBorder:"rgba(33,211,255,1)",focusForeground:"rgba(33,211,255,1)",activeBackground:"rgba(33,211,255,1)",activeForeground:"rgba(250,250,250,1)",radius:3,spacing:5}});
Ui.Pressable.extend("Ui.SegmentButton",{label:void 0,bg:void 0,mode:void 0,data:void 0,radius:3,constructor:function(a){this.setFocusable(!1);this.bg=new Ui.Rectangle;this.append(this.bg);this.label=new Ui.Label({margin:7});this.append(this.label)},setForeground:function(a){this.label.setColor(a)},getData:function(){return this.data},setData:function(a){this.data=a},setText:function(a){this.label.setText(a)},setMode:function(a){this.mode=a;"left"==a?(this.bg.setRadiusTopLeft(this.radius),this.bg.setRadiusBottomLeft(this.radius),
this.bg.setRadiusTopRight(0),this.bg.setRadiusBottomRight(0)):"right"==a?(this.bg.setRadiusTopLeft(0),this.bg.setRadiusBottomLeft(0),this.bg.setRadiusTopRight(this.radius),this.bg.setRadiusBottomRight(this.radius)):"top"==a?(this.bg.setRadiusTopLeft(this.radius),this.bg.setRadiusBottomLeft(0),this.bg.setRadiusTopRight(this.radius),this.bg.setRadiusBottomRight(0)):"bottom"==a?(this.bg.setRadiusTopLeft(0),this.bg.setRadiusBottomLeft(this.radius),this.bg.setRadiusTopRight(0),this.bg.setRadiusBottomRight(this.radius)):
(this.bg.setRadiusTopLeft(0),this.bg.setRadiusBottomLeft(0),this.bg.setRadiusTopRight(0),this.bg.setRadiusBottomRight(0))},setRadius:function(a){this.radius=a;this.setMode(this.mode)},setSpacing:function(a){this.label.setMargin(a)},setBackground:function(a){this.bg.setFill(a)}},{onDisable:function(){Ui.SegmentButton.base.onDisable.apply(this,arguments);this.bg.setOpacity(0.2)},onEnable:function(){Ui.SegmentButton.base.onEnable.apply(this,arguments);this.bg.setOpacity(1)}});Ui.Container.extend("Ui.Paned",{vertical:!0,cursor:void 0,content1Box:void 0,content1:void 0,minContent1Size:0,content2Box:void 0,content2:void 0,minContent2Size:0,pos:0.5,constructor:function(a){this.addEvents("change");this.content1Box=new Ui.LBox;this.appendChild(this.content1Box);this.content2Box=new Ui.LBox;this.appendChild(this.content2Box);this.cursor=new Ui.Movable;this.appendChild(this.cursor);this.cursor.setContent(new Ui.VPanedCursor);this.connect(this.cursor,"move",this.onCursorMove)},
getOrientation:function(){return this.vertical?"vertical":"horizontal"},setOrientation:function(a){var b=!0;"vertical"!=a&&(b=!1);this.vertical!=b&&((this.vertical=b)?this.cursor.setContent(new Ui.VPanedCursor):this.cursor.setContent(new Ui.HPanedCursor),this.invalidateMeasure())},getPos:function(){return this.pos},setPos:function(a){this.pos=a;this.invalidateMeasure()},getContent1:function(){return this.content1},setContent1:function(a){this.content1!==a&&(void 0!==this.content1&&this.content1Box.remove(this.content1),
this.content1=a,void 0!==this.content1&&this.content1Box.append(this.content1))},getContent2:function(){return this.content2},setContent2:function(a){this.content2!==a&&(void 0!==this.content2&&this.content2Box.remove(this.content2),this.content2=a,void 0!==this.content2&&this.content2Box.append(this.content2))},invert:function(){var a;a=this.content1Box;this.content1Box=this.content2Box;this.content2Box=a;a=this.content1;this.content1=this.content2;this.content2=a;this.pos=1-this.pos;this.invalidateArrange()},
onCursorMove:function(){this.disconnect(this.cursor,"move",this.onCursorMove);var a,b;this.vertical?(a=this.cursor.getPositionY(),b=this.getLayoutHeight()-this.cursor.getLayoutHeight()):(a=this.cursor.getPositionX(),b=this.getLayoutWidth()-this.cursor.getLayoutWidth());this.pos=a/b;b*this.pos<this.minContent1Size&&(this.pos=this.minContent1Size/b);b*(1-this.pos)<this.minContent2Size&&(this.pos=1-this.minContent2Size/b);a=this.pos*b;0>a&&(a=0);a>b&&(a=b);this.vertical?this.cursor.setPosition(0,a):
this.cursor.setPosition(a,0);this.invalidateMeasure();this.connect(this.cursor,"move",this.onCursorMove);this.fireEvent("change",this,this.pos)}},{measureCore:function(a,b){var c,d,e;if(this.vertical)return c=this.cursor.measure(a,0),this.minContent1Size=this.content1Box.measure(a,0).height,this.minContent2Size=this.content2Box.measure(a,0).height,d=this.content1Box.measure(a,(b-c.height)*this.pos),e=this.content2Box.measure(a,(b-c.height)*(1-this.pos)),{width:Math.max(c.width,Math.max(d.width,e.width)),
height:d.height+c.height+e.height};c=this.cursor.measure(0,b);this.minContent1Size=this.content1Box.measure(0,0).width;this.minContent2Size=this.content2Box.measure(0,0).width;d=this.content1Box.measure((a-c.width)*this.pos,b);e=this.content2Box.measure((a-c.width)*(1-this.pos),b);return{width:d.width+c.width+e.width,height:Math.max(c.height,Math.max(d.height,e.height))}},arrangeCore:function(a,b){if(this.vertical){var c=this.cursor.getMeasureHeight(),d=b-c;this.cursor.arrange(0,0,a,c);this.cursor.setPosition(0,
d*this.pos);this.content1Box.arrange(0,0,a,d*this.pos);this.content2Box.arrange(0,d*this.pos+c,a,d*(1-this.pos))}else c=this.cursor.getMeasureWidth(),d=a-c,this.content1Box.arrange(0,0,d*this.pos,b),this.cursor.arrange(0,0,c,b),this.cursor.setPosition(d*this.pos,0),this.content2Box.arrange(d*this.pos+c,0,d*(1-this.pos),b)}});Ui.Paned.extend("Ui.VPaned",{constructor:function(a){this.setOrientation("vertical")}});Ui.Paned.extend("Ui.HPaned",{constructor:function(a){this.setOrientation("horizontal")}});
Ui.LBox.extend("Ui.HPanedCursor",{constructor:function(a){this.append(new Ui.Frame({frameWidth:1,fill:new Ui.Color({r:0,g:0,b:0,a:0.1})}));this.append(new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.05})}));this.append(new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.1}),width:1,margin:5,marginRight:10,height:30,verticalAlign:"center"}));this.append(new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.1}),width:1,margin:5,marginLeft:10,height:30,verticalAlign:"center"}))}});
Ui.LBox.extend("Ui.VPanedCursor",{constructor:function(a){this.append(new Ui.Frame({frameWidth:1,radius:0,fill:new Ui.Color({r:0,g:0,b:0,a:0.1})}));this.append(new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.05})}));this.append(new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.1}),height:1,margin:5,marginTop:10,width:30,horizontalAlign:"center"}));this.append(new Ui.Rectangle({fill:new Ui.Color({r:0,g:0,b:0,a:0.1}),height:1,margin:5,marginBottom:10,width:30,horizontalAlign:"center"}))}});Ui.MenuPopup.extend("Ui.MenuToolBarPopup",{});Ui.Button.extend("Ui.MenuToolBarButton",{constructor:function(){this.setIcon("arrowbottom")}});
Ui.Container.extend("Ui.MenuToolBar",{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,star:0,measureLock:void 0,items:void 0,menuButton:void 0,itemsAlign:"left",menuPosition:"right",uniform:!1,uniformSize:0,spacing:0,itemsWidth:0,keepItems:void 0,menuNeeded:!1,bg:void 0,constructor:function(a){this.items=[];this.bg=new Ui.Rectangle;this.appendChild(this.bg);this.menuButton=new Ui.MenuToolBarButton;this.connect(this.menuButton,"press",this.onMenuButtonPress);this.appendChild(this.menuButton)},
getUniform:function(){return this.uniform},setUniform:function(a){this.uniform!==a&&(this.uniform=a,this.invalidateMeasure())},getMenuPosition:function(){return this.menuPosition},setMenuPosition:function(a){this.menuPosition!==a&&(this.menuPosition=a,this.invalidateArrange())},getItemsAlign:function(){return this.itemsAlign},setItemsAlign:function(a){this.itemsAlign!==a&&(this.itemsAlign=a,this.invalidateArrange())},getLogicalChildren:function(){return this.items},setPadding:function(a){this.setPaddingTop(a);
this.setPaddingBottom(a);this.setPaddingLeft(a);this.setPaddingRight(a)},getPaddingTop:function(){return this.paddingTop},setPaddingTop:function(a){this.paddingTop!==a&&(this.paddingTop=a,this.invalidateMeasure())},getPaddingBottom:function(){return this.paddingBottom},setPaddingBottom:function(a){this.paddingBottom!==a&&(this.paddingBottom=a,this.invalidateMeasure())},getPaddingLeft:function(){return this.paddingLeft},setPaddingLeft:function(a){this.paddingLeft!==a&&(this.paddingLeft=a,this.invalidateMeasure())},
getPaddingRight:function(){return this.paddingRight},setPaddingRight:function(a){this.paddingRight!==a&&(this.paddingRight=a,this.invalidateMeasure())},getSpacing:function(){return this.spacing},setSpacing:function(a){this.spacing!==a&&(this.spacing=a,this.invalidateMeasure())},append:function(a,b){void 0!==b&&Ui.Box.setResizable(a,!0===b);this.items.push(a);this.invalidateMeasure()},prepend:function(a,b){void 0!==b&&Ui.Box.setResizable(a,!0===b);this.items.unshift(a);this.invalidateMeasure()},remove:function(a){for(var b=
0;b<this.items.length&&this.items[b]!==a;)b++;b<this.items.length&&(this.items.splice(b,1),a.getParent()===this&&a.getParent().removeChild(a),this.invalidateMeasure())},moveAt:function(a,b){0>b&&(b=this.items.length+b);0>b&&(b=0);b>=this.items.length&&(b=this.items.length);for(var c=0;c<this.items.length&&this.items[c]!==a;)c++;c<this.items.length&&(this.items.splice(c,1),this.items.splice(b,0,a));this.onChildInvalidateMeasure(a,"move")},insertAt:function(a,b,c){void 0!==c&&Ui.Box.setResizable(a,
!0===c);b=Math.max(0,Math.min(b,this.items.length));this.items.splice(b,0,a);this.invalidateMeasure()},setContent:function(a){if(void 0===a)this.clear();else if("object"===typeof a){a.constructor!==Array&&(a=[a]);for(var b=0;b<this.items.length;b++){for(var c=!1,d=0;!1===c&&d<a.length;d++)c=this.items[b]===a[d];!1===c&&this.items[b].getParent()===this&&this.removeChild(this.items[b])}this.items=a;this.invalidateMeasure()}},onMenuButtonPress:function(){var a=new Ui.MenuToolBarPopup,b=new Ui.VBox;a.setContent(b);
for(var c=0;c<this.items.length;c++){var d=this.items[c];d.getParent()!==this&&(b.append(d),c<this.items.length-1&&b.append(new Ui.MenuPopupSeparator))}a.show(this.menuButton,"bottom")}},{clear:function(){for(var a=0;a<this.items.length;a++)this.items[a].getParent()===this&&this.items[a].getParent().removeChild(this.items[a]);this.items=[];this.invalidateMeasure()},measureCore:function(a,b){var c=this.getPaddingLeft(),d=this.getPaddingRight(),e=this.getPaddingTop(),f=this.getPaddingBottom(),g=Math.max(0,
a-(c+d)),h=Math.max(0,b-(e+f)),k;this.bg.measure(a,b);this.measureLock=!0;var m=this.menuButton.measure(0,0),n=[];for(k=0;k<this.items.length;k++){var l=this.items[k];l.getParent()!==this&&(void 0!==l.getParent()&&l.getParent().removeChild(l),this.appendChild(l));n.push(l.measure(0,0))}this.keepItems=[];var p=0,q=l=0,s=m.height,u=0;for(k="left"===this.menuPosition?k=this.items.length-1:0;0<=k&&k<this.items.length;){var t=n[k];if(p+t.width+this.spacing>g)break;p+=t.width+this.spacing;if(p+m.width>
g)break;"left"===this.menuPosition?this.keepItems.unshift(this.items[k]):this.keepItems.push(this.items[k]);Ui.Box.getResizable(this.items[k])?l++:(u+=t.width,t.height>s&&(s=t.height));t.width>q&&(q=t.width);"left"===this.menuPosition?k--:k++}0<p&&(p-=this.spacing);this.menuNeeded=this.keepItems.length!==this.items.length;n=g;if(this.menuNeeded)for(n-=m.width+this.spacing;0<=k&&k<this.items.length;)this.removeChild(this.items[k]),"left"===this.menuPosition?k--:k++;if(this.uniform)if(this.keepItems.length*
(q+this.spacing)-this.spacing<=g){for(k=0;k<this.keepItems.length;k++)this.keepItems[k].measure(q,s);this.uniformSize=q;g={width:this.keepItems.length*(q+this.spacing)-this.spacing,height:s}}else this.uniformSize=void 0,g={width:p,height:s};else if(0<l){n=n-u-(this.keepItems.length-1)*this.spacing;p=!0;q=n/l;do{p=!0;for(k=0;k<this.keepItems.length;k++)if(t=this.keepItems[k],Ui.Box.getResizable(t)&&!t.menutoolbarStarDone&&(g=t.measure(q,h),g.height>s&&(s=g.height),g.width>q)){t.menutoolbarStarDone=
!0;p=!1;n-=g.width;u+=g.width;l--;q=n/l;break}}while(!p);u+=this.spacing*(this.keepItems.length-1);0<l?(u+=q*l,this.star=q):this.star=0;g={width:u,height:s}}else g={width:p,height:s};this.menuNeeded&&(g.width+=m.width+this.spacing);g.width+=c+d;g.height+=e+f;this.measureLock=void 0;return g},arrangeCore:function(a,b){this.bg.arrange(0,0,a,b);var c=this.paddingLeft,d=this.paddingTop,e=this.paddingBottom;a-=c+this.paddingRight;b-=d+e;e=!0;"left"!==this.itemsAlign&&(c=a-this.getMeasureWidth());this.menuNeeded&&
"left"===this.menuPosition&&(e=!1,this.menuButton.arrange(c,d,this.menuButton.getMeasureWidth(),b),c+=this.menuButton.getMeasureWidth());for(var f=0;f<this.keepItems.length;f++){var g=this.keepItems[f];e?e=!1:c+=this.spacing;var h;this.uniform&&void 0!==this.uniformSize?h=this.uniformSize:(h=g.getMeasureWidth(),Ui.Box.getResizable(g)&&h<this.star&&(h=this.star));g.arrange(c,d,h,b);c+=h}this.menuNeeded&&"left"!==this.menuPosition&&(e||(c+=this.spacing),this.menuButton.arrange(c,d,this.menuButton.getMeasureWidth(),
b));this.menuNeeded?this.menuButton.getDrawing().style.visibility="":this.menuButton.getDrawing().style.visibility="hidden"},onChildInvalidateMeasure:function(a,b){!0!==this.measureLock&&Ui.MenuToolBar.base.onChildInvalidateMeasure.call(this,a,b)},onStyleChange:function(){this.bg.setFill(this.getStyleProperty("background"))}},{style:{background:"rgba(250, 250, 250, 0)"}});Ui.LBox.extend("Ui.App",{styles:void 0,updateTask:!1,loaded:!1,focusElement:void 0,arguments:void 0,ready:!1,orientation:0,webApp:!0,lastArrangeHeight:0,drawList:void 0,layoutList:void 0,windowWidth:0,windowHeight:0,contentBox:void 0,content:void 0,dialogs:void 0,requireFonts:void 0,testFontTask:void 0,bindedUpdate:void 0,constructor:function(a){var b;this.addEvents("resize","ready","parentmessage","orientationchange");this.setClipToBounds(!0);Ui.App.current=this;this.getDrawing().style.cursor="default";
if(void 0!==window.location.search&&""!==window.location.search){var c;b={};for(var d=window.location.search.substring(1).split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(2==f.length){var g=decodeURIComponent(f[0]),f=decodeURIComponent(f[1]);"base64"===g?c=JSON.parse(f.fromBase64()):b[g]=f}}if(void 0!==c){this.arguments=c;for(var h in b)this.arguments[h]=b[h]}else this.arguments=b}else this.arguments={};void 0!==this.arguments.remotedebug&&(b=this.arguments.remotedebug.split(":"),new Core.RemoteDebug({host:b[0],
port:b[1]}));this.contentBox=new Ui.VBox;this.append(this.contentBox);"webApp"in a&&(this.webApp=a.webApp,delete a.webApp);this.setTransformOrigin(0,0);this.connect(window,"load",this.onWindowLoad);this.connect(window,"resize",this.onWindowResize);this.connect(window,"keyup",this.onWindowKeyUp);"style"in a?this.setStyle(a.style):this.setStyle(Ui.Styles["default"]);this.connect(window,"focus",function(a){void 0===a.target||null===a.target||(this.focusElement=a.target)},!0);this.connect(window,"blur",
function(a){this.focusElement=void 0},!0);this.connect(window,"dragstart",function(a){a.preventDefault()});this.connect(window,"dragenter",function(a){a.preventDefault();return!1});this.connect(window,"dragover",function(a){a.dataTransfer.dropEffect="none";a.preventDefault();return!1});this.connect(window,"drop",function(a){a.preventDefault();return!1});"onorientationchange"in window&&this.connect(window,"orientationchange",this.onOrientationChange);this.connect(window,"message",this.onMessage);this.bindedUpdate=
this.update.bind(this)},forceInvalidateMeasure:function(a){void 0===a&&(a=this);if("getChildren"in a)for(var b=0;b<a.getChildren().length;b++)this.forceInvalidateMeasure(a.getChildren()[b]);a.invalidateMeasure()},requireFont:function(a,b){var c=a+":"+b;void 0===this.requireFonts&&(this.requireFonts={});if(!this.requireFonts[c]){var d=!1;this.getIsReady()&&(d=Ui.Label.isFontAvailable(a,b));(this.requireFonts[c]=d)?this.forceInvalidateMeasure(this):this.getIsReady()&&(!d&&void 0===this.testFontTask)&&
(this.testFontTask=new Core.DelayedTask({scope:this,delay:0.25,callback:this.testRequireFonts}))}},testRequireFonts:function(){var a=!0,b;for(b in this.requireFonts){var c=this.requireFonts[b];c||(c=b.split(":"),(c=Ui.Label.isFontAvailable(c[0],c[1]))?(this.requireFonts[b]=!0,this.forceInvalidateMeasure(this)):a=!1)}this.testFontTask=a?void 0:new Core.DelayedTask({scope:this,delay:0.25,callback:this.testRequireFonts})},checkWindowSize:function(){var a=void 0!==window.innerHeight?window.innerHeight:
document.body.clientHeight;((void 0!==window.innerWidth?window.innerWidth:document.body.clientWidth)!==this.getLayoutWidth()||a!==this.getLayoutHeight())&&this.invalidateMeasure()},getOrientation:function(){return this.orientation},onWindowLoad:function(){var a;if((navigator.iPad||navigator.iPhone||navigator.Android)&&this.webApp)a=document.createElement("meta"),a.name="apple-mobile-web-app-capable",a.content="yes",document.getElementsByTagName("head")[0].appendChild(a),a=document.createElement("meta"),
a.name="apple-mobile-web-app-status-bar-style",a.content="black",document.getElementsByTagName("head")[0].appendChild(a),a=document.createElement("meta"),a.name="mobile-web-app-capable",a.content="yes",document.getElementsByTagName("head")[0].appendChild(a);a=document.createElement("meta");a.name="viewport";a.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no";document.getElementsByTagName("head")[0].appendChild(a);navigator.isWebkit?(a=document.createElement("style"),
a.type="text/css",a.innerHTML="* { -webkit-tap-highlight-color: rgba(0, 0, 0, 0); }",document.getElementsByTagName("head")[0].appendChild(a)):navigator.isIE&&(!navigator.isIE8&&!navigator.isIE7)&&(a=document.createElement("style"),a.type="text/css",a.innerHTML="@-ms-viewport { width: device-width; } body { -ms-content-zooming: none; } * { touch-action: none; } ",document.getElementsByTagName("head")[0].appendChild(a));this.loaded=!0;this.onReady()},onWindowResize:function(a){this.checkWindowSize()},
onOrientationChange:function(a){this.orientation=window.orientation;this.fireEvent("orientationchange",this.orientation);this.checkWindowSize()},update:function(){var a=document.body.clientWidth,b=document.body.clientHeight;if(this.windowWidth!==a||this.windowHeight!==b)this.windowWidth=a,this.windowHeight=b,this.fireEvent("resize",this,this.windowWidth,this.windowHeight),this.invalidateLayout();this.layoutWidth=this.windowWidth;for(this.layoutHeight=this.windowHeight;void 0!==this.layoutList;)a=
this.layoutList.layoutNext,this.layoutList.layoutValid=!0,this.layoutList.layoutNext=void 0,this.layoutList.updateLayout(),this.layoutList=a;for(;void 0!==this.drawList;)a=this.drawList.drawNext,this.drawList.drawNext=void 0,this.drawList.draw(),this.drawList=a;this.updateTask=!1},getContent:function(){return this.content},getFocusElement:function(){return this.focusElement},appendDialog:function(a){void 0===this.dialogs&&(this.focusStack=[],this.dialogs=new Ui.LBox,this.append(this.dialogs));this.dialogs.append(a);
this.contentBox.disable();for(a=0;a<this.dialogs.getChildren().length-1;a++)this.dialogs.getChildren()[a].disable()},removeDialog:function(a){void 0!==this.dialogs&&(this.dialogs.remove(a),0===this.dialogs.getChildren().length?(this.remove(this.dialogs),this.dialogs=void 0,this.contentBox.enable()):this.dialogs.getLastChild().enable())},getArguments:function(){return this.arguments},getIsReady:function(){return this.ready},onReady:function(){if(this.loaded){document.documentElement.style.position=
"absolute";document.documentElement.style.padding="0px";document.documentElement.style.margin="0px";document.documentElement.style.border="0px solid black";document.documentElement.style.width="100%";document.documentElement.style.height="100%";document.body.style.position="absolute";document.body.style.overflow="hidden";document.body.style.padding="0px";document.body.style.margin="0px";document.body.style.border="0px solid black";document.body.style.outline="none";document.body.style.width="100%";
document.body.style.height="100%";document.body.appendChild(this.getDrawing());this.handleScrolling(document.body);void 0!==this.requireFonts&&void 0===this.testFontTask&&this.testRequireFonts();this.setIsLoaded(!0);this.setParentVisible(!0);this.fireEvent("ready");this.ready=!0;if(!1===this.updateTask&&this.ready){var a=this;this.updateTask=!0;requestAnimationFrame(function(){a.update()})}new Ui.WheelManager({app:this});new Ui.PointerManager({app:this})}},onWindowKeyUp:function(a){if(27==a.which&&
void 0!==this.dialogs&&0<this.dialogs.getChildren().length){var b=this.dialogs.getChildren()[this.dialogs.getChildren().length-1];"close"in b?b.close():b.hide();a.preventDefault();a.stopPropagation()}},onMessage:function(a){parent===a.source&&(a.preventDefault(),a.stopPropagation(),a=JSON.parse(a.data),this.fireEvent("parentmessage",a))},sendMessageToParent:function(a){parent.postMessage(a.serialize(),"*")},findFocusableDiv:function(a){if("tabIndex"in a&&0<=a.tabIndex)return a;if("childNodes"in a)for(var b=
0;b<a.childNodes.length;b++){var c=this.findFocusableDiv(a.childNodes[b]);if(void 0!==c)return c}},enqueueDraw:function(a){a.drawNext=this.drawList;this.drawList=a;!1===this.updateTask&&this.ready&&(this.updateTask=!0,setTimeout(this.bindedUpdate,0))},enqueueLayout:function(a){a.layoutNext=this.layoutList;this.layoutList=a;!1===this.updateTask&&this.ready&&(this.updateTask=!0,requestAnimationFrame(this.bindedUpdate))},handleScrolling:function(a){this.connect(this,"ptrdown",function(b){var c=a.scrollLeft,
d=a.scrollTop,e=b.pointer.watch(this);this.connect(e,"move",function(){if(e.getIsCaptured()){var b=e.getDelta();a.scrollLeft=c-b.x;a.scrollTop=d-b.y}else if(e.pointer.getIsMove()){var b=e.getDirection(),g=!1;"left"===b?g=a.scrollLeft+a.clientWidth<a.scrollWidth:"right"===b?g=0<a.scrollLeft:"bottom"===b?g=0<a.scrollTop:"top"===b&&(g=!0);g?e.capture():e.cancel()}})})},getElementsByClassName:function(a){var b=[],c=function(d){d.classType===a&&b.push(d);if(void 0!==d.children)for(var e=0;e<d.children.length;e++)c(d.children[e])};
c(this);return b},getElementByDrawing:function(a){var b=function(c){if(c.drawing===a)return c;if(void 0!==c.children)for(var d=0;d<c.children.length;d++){var e=b(c.children[d]);if(void 0!==e)return e}};return b(this)}},{getInverseLayoutTransform:function(){return Ui.Matrix.createTranslate(-document.body.scrollLeft,-document.body.scrollTop).multiply(Ui.App.base.getInverseLayoutTransform())},getLayoutTransform:function(){return Ui.App.base.getLayoutTransform().translate(document.body.scrollLeft,document.body.scrollTop)},
invalidateMeasure:function(){this.invalidateLayout()},invalidateArrange:function(){this.invalidateLayout()},arrangeCore:function(a,b){navigator.Android&&navigator.isWebkit&&void 0!==this.focusElement&&("INPUT"===this.focusElement.tagName||"TEXTAREA"===this.focusElement.tagName||this.focusElement.contenteditable)&&b-100>this.lastArrangeHeight&&this.focusElement.blur();this.lastArrangeHeight=b;Ui.App.base.arrangeCore.call(this,a,b)},setContent:function(a){this.content!==a&&(void 0!==this.content&&this.contentBox.remove(this.content),
void 0!==a&&this.contentBox.prepend(a,!0),this.content=a)}},{current:void 0,getWindowIFrame:function(a){void 0===a&&(a=window);var b;if(a.parent!==a)try{for(var c=a.parent.document.getElementsByTagName("IFRAME"),d=0;d<c.length;d++)if(c[d].contentWindow===a){b=c[d];break}}catch(e){}return b},getRootWindow:function(){for(var a=window;a.parent!=a;)a=a.parent;return a}});Core.Object.extend("Ui.Styles",{},{},{"default":{"Ui.Label":{fontSize:16,color:"#000000"},"Ui.Button":{padding:10,spacing:5,color:"#e4e4e4",focusColor:"#f6caa2",activeForeground:"#dc6c36"},"Ui.ActionButton":{padding:10,spacing:5,color:"#e4e4e4",focusColor:"#f6caa2",borderWidth:0,radius:0,background:"rgba(255,255,255,0)",activeForeground:"#dc6c36"},"Ui.ContextBarCloseButton":{borderWidth:0,radius:0},"Ui.DialogCloseButton":{background:"rgba(240,240,240,0)",backgroundBorder:"rgba(240,240,240,0)",showText:!1},
"Ui.SegmentBar":{spacing:8},"Ui.Locator":{spacing:10,color:"#e4e4e4",focusColor:"#f6caa2"},"Ui.ScrollingArea":{color:"#999999",showScrollbar:!1,overScroll:!0,radius:0},"Ui.LinkButton":{background:"#a4f4f4"},"Ui.DownloadButton":{background:"#a4f4a4"},"Ui.UploadButton":{spacing:8,color:"#f4a4a4",focusColor:"#f6caa2"},"Ui.Separator":{color:"#000000"},"Ui.MenuPopup":{"Ui.Button":{backgroundBorder:"rgba(240,240,240,0)",background:"rgba(240,240,240,0)"}},"Ui.Popup":{"Ui.ActionButton":{showText:!1}}}});
